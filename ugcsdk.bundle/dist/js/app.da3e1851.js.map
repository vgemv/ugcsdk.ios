{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/components/ScrollTab.vue?2d3b","webpack:///./src/components/ClipBtn.vue?5f29","webpack:///./src/views/Bottom/Tools/TextOverlay.vue?527f","webpack:///./src/model/CanvasTextWrapper.js","webpack:///./src/views/Main.vue?e4a7","webpack:///./src/views/Top/PosterMakerTop.vue?7fe2","webpack:///./src/views/Bottom/ToolDialog.vue?c7a5","webpack:///./src/views/Editor/EndingRender.vue?5c2e","webpack:///./src/views/Bottom/Timeline/TimelineItemThumb.vue?b839","webpack:///./src/views/Bottom/Tools/ImageOverlay.vue?92bd","webpack:///../jsugc-websdk/src/const.js","webpack:///./src/App.vue?8b42","webpack:///./src/views/Main.vue?7553","webpack:///../jsugc-websdk/src/components/PreviewPlayer.vue?6619","webpack:///../jsugc-websdk/src/model/Log.js","webpack:///../jsugc-websdk/src/model/UGCResourceManager.js","webpack:///../jsugc-websdk/src/model/CordovaModel.js","webpack:///../jsugc-websdk/src/model/Editlist.js","webpack:///../jsugc-websdk/src/components/NativeVideo.vue?b7e9","webpack:///../jsugc-websdk/src/components/NativeVideo.vue","webpack:///../jsugc-websdk/src/components/NativeVideo.vue?1137","webpack:///../jsugc-websdk/src/components/NativeVideo.vue?8453","webpack:///../jsugc-websdk/src/components/PreviewPlayer.vue","webpack:///../jsugc-websdk/src/components/PreviewPlayer.vue?b39c","webpack:///../jsugc-websdk/src/components/PreviewPlayer.vue?422e","webpack:///../jsugc-websdk/src/components/Export.vue?94a8","webpack:///../jsugc-websdk/src/components/Export.vue","webpack:///../jsugc-websdk/src/components/Export.vue?aac7","webpack:///../jsugc-websdk/src/components/Export.vue?23c5","webpack:///../jsugc-websdk/src/module.js","webpack:///./src/const.js","webpack:///./src/utils.js","webpack:///./src/model/History.js","webpack:///./src/views/Top/ClipTop.vue?6171","webpack:///src/views/Top/ClipTop.vue","webpack:///./src/views/Top/ClipTop.vue?5031","webpack:///./src/views/Top/ClipTop.vue","webpack:///./src/views/Bottom/Timeline/ClipTimeline.vue?279d","webpack:///./src/views/Bottom/Timeline/TimelineItem.vue?00c5","webpack:///./src/views/Bottom/Timeline/TimelineItemThumb.vue?4880","webpack:///src/views/Bottom/Timeline/TimelineItemThumb.vue","webpack:///./src/views/Bottom/Timeline/TimelineItemThumb.vue?e2bb","webpack:///./src/views/Bottom/Timeline/TimelineItemThumb.vue?ac0d","webpack:///src/views/Bottom/Timeline/TimelineItem.vue","webpack:///./src/views/Bottom/Timeline/TimelineItem.vue?42f4","webpack:///./src/views/Bottom/Timeline/TimelineItem.vue?10b0","webpack:///./src/views/Bottom/Timeline/TimelineOverlayItem.vue?ff63","webpack:///./src/model/Magnet.js","webpack:///src/views/Bottom/Timeline/TimelineOverlayItem.vue","webpack:///./src/views/Bottom/Timeline/TimelineOverlayItem.vue?6e9e","webpack:///./src/views/Bottom/Timeline/TimelineOverlayItem.vue","webpack:///src/views/Bottom/Timeline/ClipTimeline.vue","webpack:///./src/views/Bottom/Timeline/ClipTimeline.vue?6157","webpack:///./src/views/Bottom/Timeline/ClipTimeline.vue","webpack:///./src/views/Bottom/PlayerController.vue?30b2","webpack:///src/views/Bottom/PlayerController.vue","webpack:///./src/views/Bottom/PlayerController.vue?1ea8","webpack:///./src/views/Bottom/PlayerController.vue","webpack:///./src/views/Bottom/ToolTab.vue?8777","webpack:///./src/components/ClipBtn.vue?7666","webpack:///src/components/ClipBtn.vue","webpack:///./src/components/ClipBtn.vue?402b","webpack:///./src/components/ClipBtn.vue?49f3","webpack:///./src/components/HScrollBar.vue?99a0","webpack:///src/components/HScrollBar.vue","webpack:///./src/components/HScrollBar.vue?811d","webpack:///./src/components/HScrollBar.vue?3e5c","webpack:///./src/views/Bottom/OverlayToolTab.vue?ff0c","webpack:///src/views/Bottom/OverlayToolTab.vue","webpack:///./src/views/Bottom/OverlayToolTab.vue?ba5f","webpack:///./src/views/Bottom/OverlayToolTab.vue","webpack:///src/views/Bottom/ToolTab.vue","webpack:///./src/views/Bottom/ToolTab.vue?a564","webpack:///./src/views/Bottom/ToolTab.vue","webpack:///./src/views/Bottom/ToolDialog.vue?3037","webpack:///./src/views/Bottom/Tools/AudioBase.vue?acc0","webpack:///src/views/Bottom/Tools/AudioBase.vue","webpack:///./src/views/Bottom/Tools/AudioBase.vue?1ae2","webpack:///./src/views/Bottom/Tools/AudioBase.vue?1e49","webpack:///./src/views/Bottom/Tools/BGM.vue?618a","webpack:///src/views/Bottom/Tools/BGM.vue","webpack:///./src/views/Bottom/Tools/BGM.vue?8e80","webpack:///./src/views/Bottom/Tools/BGM.vue","webpack:///./src/views/Bottom/Tools/AudioEffect.vue?d8dc","webpack:///src/views/Bottom/Tools/AudioEffect.vue","webpack:///./src/views/Bottom/Tools/AudioEffect.vue?0339","webpack:///./src/views/Bottom/Tools/AudioEffect.vue?1d6a","webpack:///./src/views/Bottom/Tools/Filter.vue?4654","webpack:///src/views/Bottom/Tools/Filter.vue","webpack:///./src/views/Bottom/Tools/Filter.vue?6f79","webpack:///./src/views/Bottom/Tools/Filter.vue?827a","webpack:///./src/views/Bottom/Tools/ImageOverlay.vue?c352","webpack:///./src/components/ScrollTab.vue?758a","webpack:///src/components/ScrollTab.vue","webpack:///./src/components/ScrollTab.vue?519c","webpack:///./src/components/ScrollTab.vue?1034","webpack:///src/views/Bottom/Tools/ImageOverlay.vue","webpack:///./src/views/Bottom/Tools/ImageOverlay.vue?6379","webpack:///./src/views/Bottom/Tools/ImageOverlay.vue","webpack:///./src/views/Bottom/Tools/TextOverlay.vue?ff5d","webpack:///./src/views/Editor/TextRender.vue?ff16","webpack:///src/views/Editor/TextRender.vue","webpack:///./src/views/Editor/TextRender.vue?9d3d","webpack:///./src/views/Editor/TextRender.vue?d8f8","webpack:///src/views/Bottom/Tools/TextOverlay.vue","webpack:///./src/views/Bottom/Tools/TextOverlay.vue?8224","webpack:///./src/views/Bottom/Tools/TextOverlay.vue?5419","webpack:///./src/views/Bottom/Tools/VideoBase.vue?2425","webpack:///src/views/Bottom/Tools/VideoBase.vue","webpack:///./src/views/Bottom/Tools/VideoBase.vue?c255","webpack:///./src/views/Bottom/Tools/VideoBase.vue?35ce","webpack:///./src/views/Bottom/Tools/Sort.vue?33ef","webpack:///src/views/Bottom/Tools/Sort.vue","webpack:///./src/views/Bottom/Tools/Sort.vue?978f","webpack:///./src/views/Bottom/Tools/Sort.vue?4b24","webpack:///./src/views/Bottom/Tools/Face.vue?850f","webpack:///src/views/Bottom/Tools/Face.vue","webpack:///./src/views/Bottom/Tools/Face.vue?7f34","webpack:///./src/views/Bottom/Tools/Face.vue?b4b4","webpack:///./src/views/Bottom/Tools/AspectRatio.vue?09a9","webpack:///src/views/Bottom/Tools/AspectRatio.vue","webpack:///./src/views/Helper/apngjs/crc32.js","webpack:///./src/views/Bottom/Tools/AspectRatio.vue?3c5d","webpack:///./src/views/Bottom/Tools/AspectRatio.vue?925d","webpack:///src/views/Bottom/ToolDialog.vue","webpack:///./src/views/Bottom/ToolDialog.vue?82ed","webpack:///./src/views/Bottom/ToolDialog.vue","webpack:///./src/views/Editor/OverlayEditor.vue?0246","webpack:///./src/views/Helper/APNGPlayer.vue?94f0","webpack:///./src/views/Helper/apngjs/player.js","webpack:///./src/views/Helper/apngjs/structs.js","webpack:///./src/views/Helper/apngjs/parser.js","webpack:///src/views/Helper/APNGPlayer.vue","webpack:///./src/views/Helper/APNGPlayer.vue?3083","webpack:///./src/views/Helper/APNGPlayer.vue","webpack:///src/views/Editor/OverlayEditor.vue","webpack:///./src/views/Editor/OverlayEditor.vue?2377","webpack:///./src/views/Editor/OverlayEditor.vue?6e6e","webpack:///./src/views/PosterMaker.vue?dfba","webpack:///./src/views/Top/PosterMakerTop.vue?a244","webpack:///src/views/Top/PosterMakerTop.vue","webpack:///./src/views/Top/PosterMakerTop.vue?774a","webpack:///./src/views/Top/PosterMakerTop.vue","webpack:///./src/views/Bottom/PosterToolTab.vue?6548","webpack:///src/views/Bottom/PosterToolTab.vue","webpack:///./src/views/Bottom/PosterToolTab.vue?7f75","webpack:///./src/views/Bottom/PosterToolTab.vue?49ff","webpack:///src/views/PosterMaker.vue","webpack:///./src/views/PosterMaker.vue?573e","webpack:///./src/views/PosterMaker.vue","webpack:///./src/views/EndingMaker.vue?e4f9","webpack:///./src/components/Crop.vue?586f","webpack:///src/components/Crop.vue","webpack:///./src/components/Crop.vue?c43f","webpack:///./src/components/Crop.vue","webpack:///./src/views/Editor/EndingRender.vue?7352","webpack:///src/views/Editor/EndingRender.vue","webpack:///./src/views/Editor/EndingRender.vue?0b1b","webpack:///./src/views/Editor/EndingRender.vue?7164","webpack:///src/views/EndingMaker.vue","webpack:///./src/views/EndingMaker.vue?a20b","webpack:///./src/views/EndingMaker.vue","webpack:///./src/views/Exporter.vue?ddfa","webpack:///src/views/Exporter.vue","webpack:///./src/views/Exporter.vue?d96a","webpack:///./src/views/Exporter.vue?0a65","webpack:///./src/views/Importer.vue?036c","webpack:///src/views/Importer.vue","webpack:///./src/views/Importer.vue?6285","webpack:///./src/views/Importer.vue?d8f6","webpack:///src/views/Main.vue","webpack:///./src/views/Main.vue?7343","webpack:///./src/views/Main.vue?663b","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/main.js","webpack:///./src/components/Crop.vue?5f27","webpack:///./src/views/Bottom/Tools/AspectRatio.vue?8c2b","webpack:///./src/views/Bottom/Tools/VideoBase.vue?f9c7","webpack:///./src/views/Bottom/Tools/Sort.vue?188b","webpack:///./src/views/Bottom/Tools/Face.vue?96ec","webpack:///./src/views/PosterMaker.vue?ed2a","webpack:///./src/views/Top/ClipTop.vue?a20b","webpack:///./src/views/Editor/OverlayEditor.vue?5520","webpack:///./src/components/HScrollBar.vue?b8c5","webpack:///./src/views/Editor/TextRender.vue?aaf0","webpack:///./src/views/Bottom/Tools/AudioEffect.vue?2e42","webpack:///./src/views/Bottom/Tools/Filter.vue?73a3","webpack:///../jsugc-websdk/src/components/NativeVideo.vue?e1fb","webpack:///./src/views/Bottom/Tools/AudioEffect.vue?4a0e","webpack:///./src/views/Exporter.vue?2d8c","webpack:///./src/views/Bottom/Tools/BGM.vue?95df","webpack:///./src/views/Main.vue?bfa9","webpack:///./src/views/Bottom/Tools/AudioBase.vue?4413","webpack:///./src/views/Bottom/Timeline/TimelineOverlayItem.vue?a5d6","webpack:///./src/views/Bottom/PosterToolTab.vue?c199","webpack:///./src/views/EndingMaker.vue?44c5","webpack:///./src/views/Bottom/ToolTab.vue?9084","webpack:///./src/views/Bottom/Timeline/ClipTimeline.vue?aeef","webpack:///./src/views/Bottom/Tools/TextOverlay.vue?49a8","webpack:///./src/views/Bottom/Timeline/TimelineItem.vue?2292","webpack:///./src/views/Bottom/PlayerController.vue?1b4f","webpack:///./src/views/Editor/OverlayEditor.vue?39a8","webpack:///./src/views/Exporter.vue?29d2","webpack:///./src/views/Bottom/OverlayToolTab.vue?381e","webpack:///./src/views/Bottom/Tools/Sort.vue?6767","webpack:///./src/views/Importer.vue?54c4"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","CanvasTextWrapper","canvas","text","options","trim","defaults","font","sizeToFill","maxFontSizeToFill","lineHeight","allowNewLine","lineBreak","textAlign","verticalAlign","justifyLines","paddingX","paddingY","fitParent","strokeText","renderHDPI","textDecoration","lineWidth","shadowBlur","opts","context","getContext","scale","devicePixelRatio","global","tempCtx","canvasWidth","width","canvasHeight","height","style","e","fontParts","EL_WIDTH","parentNode","clientWidth","EL_HEIGHT","clientHeight","MAX_TXT_WIDTH","MAX_TXT_HEIGHT","WORD_DELIMITER","toLocaleLowerCase","fontSize","match","textBlockHeight","lines","newLineIndexes","textPos","x","y","multiNewLineDelimiter","handleMultipleNewline","setFont","setLineHeight","validate","render","replace","indexOf","split","isNaN","toString","parseInt","wordsCount","newFontSize","fontSizeHasLimit","adjustFontSize","join","wrap","justify","setVertAlign","setHorizAlign","drawText","size","newLines","idx","words","checkLength","breakText","testString","tokenLen","sliced","leftover","forEach","word","index","measureText","k","maxLen","longestLineIndex","numWords","spaceLength","numOfSpaces","num","filler","delimiter","underline","beginPath","moveTo","lineTo","stroke","skipLineOnMatch","fillText","TypeError","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","staticClass","directives","rawName","makePoster","makeEnding","doExport","expression","ref","on","$event","player","pause","playerFinished","loading","previewLoaddone","preview_render","overlayEditorChange","overlayActive","overlayDeactive","playerControllerEvent","showOverlay","overlayType","showAMix","editlist","poster","$refs","preview","timelinesChange","timeChange","overlayChange","amixChange","amixActive","activeItem","tabSelect","showTooltab","showPlayerController","showTimeline","mainBoxResized","toolBeforeChange","toolValueChange","importProgress","staticStyle","_v","_s","toFixed","_e","reloadPlayer","isBackbuttonExit","importFileSelect","importCancel","$emit","Const","Overlay","Type","Image","Text","Mosic","Align","Left","Center","Right","Top","session","Math","random","substr","Level","debug","verbose","info","warn","error","silent","level","Logger","console","arguments","uilog","path","msg","log","v","NOREMOTE","clearAllCache","Promise","requestFileSystem","TEMPORARY","fs","root","getDirectory","f","removeRecursively","ResourceManager","remoteResRoot","location","protocol","localResRoot","assetResRoot_android","assetResRoot_ios","cordovaModel","isIOS","cordova","file","applicationDirectory","ResType","image","music","audio","filter","fontbg","mosic","assetResRoot","tempFs","folders","filesystem","remoteRel2Abs","rel1","rel2","localRel2Abs","assetRel2Abs","assetReadText","url","resolveLocalFileSystemURL","fEntry","reader","FileReader","onload","onerror","readAsText","target","assetReadAsDataUrl","readAsDataURL","md5source","source","md5","reverse","getFolder","resType","folder","splited","currentFolder","getTempFolder","getExportPosterFolder","clearTempFiles","wait","temp","thumbs","all","fetchAssetResList","JSON","assetResRootJson","resIdx","parse","resList","map","list","source_asset_url","source_list","source_list_asset_url","fetchLocalResList","createReader","readEntries","entries","isDirectory","files","fetchRemoteResList","axios","remoteResRootJson","source_remote_url","download","source_list_remote_url","copyedResTypes","fetchResList","local","asset","Log","remote","needCopyAsset","processItem","directoryName","filename","local_file","thumb_remote_url","thumb","thumb_rel_url","local_file_list","assetList","assetFound","copyAssetRes","flatMap","then","createResFile","sourceUrl","absUrl","getFile","downloadRes","resItem","progress","sourceRemoteUrl","percent","allProgress","totalItem","reduce","a","b","remove","xhr","XMLHttpRequest","open","responseType","onprogress","loaded","total","status","response","send","createWriter","writer","onwriteend","write","copingAssetRes","assetResItem","loader","copyAssetResIntenal","setTimeout","dEntry","copyTo","getParent","getBeautySource","allFilter","beautyFilter","find","toNativeURL","getMosicSource","found","pre","nxt","concat","getTransformSource","pickAudio","UGCApp","_ending","getLastEnding","localStorage","getItem","saveLastEnding","setItem","stringify","portraitListener","portraitQuery","matchMedia","isCordova","navigator","userAgent","toLowerCase","isAndroid","isPortrait","onchange","removeListener","addListener","matches","config","noReady","input","output","output_thumb","getConfig","setConfig","StatusCode","finish","UGCRes","ffplay","stop","done","init","Cordova","sysFile","File","document","createElement","src","addEventListener","head","appendChild","loglevel","undefined","getCdvUrl","entry","toInternalURL","VFPreset","blur","brown","colorful","flash","oldfilm","line","red_border","pink_border","black_border","colormix","VFPresetName","double","DARPreset","auto","Number","toEven","ret","timelineIdSeq","overlayIdSeq","timeline_format","timelines","val","total_sec","ffmpeg","format","duration","Error","video","rotate","_cacheWidth","src_rotate","start_sec","end_sec","THIS","_time_sec","video_min_sec","_cur_timeline_id","get_cur_timeline_id","_timelines","get_next_timelineId","max","id","first","cur","time_sec","offset_sec","cur_timeline","force_update","cur_id","cur_timeline_id","add_timelines","tl","active","left_drag_offset","focus","vflip","hflip","eq","brightness","contrast","saturation","gamma","ending","getRotatedWidth","timeline","getRotatedHeight","update_timelines","command","update_timeline_videobase","amix","add_amix","new","update_amix","overlay","add_overlay","w","h","update_overlay","preview_resolution","resolution_dar","allPromise","ffplayCommand","remove_overlay","_transform_source","mosic_source","add_mosic","type","update_mosic","face","beauty_level","beauty_source","cut","dar","_volume","bgm","old","center","isAuto","keys","previewparam","resolution_box","maxWidth","min","resolution_box_src","maxHeight","dar_d","encodeparam","preset","hardware_encoder","bitrate","resolution","high_encodeparam","low_encodeparam","cmd","args","getUGCParam","opt","main_w","main_h","oformat","endingTimeline","gltransform","movie","RotateToTranspose","0","90","180","270","item","transpose","transform_source","max_num","RegExp","lutpng","template","enabled","volume","offset_Sec","decodeURIComponent","getLoglevel","silient","getPosterPlayerParam","ugcParamOnly","ugcparam","getPlayerParam","getExportParam","des","preset_encodeparam","vcodec","CordovaModel","ugccmd","class","show","showscreen","component","Editlist","_t","exportProgress","progress_sec","pts","outFileEntity","install","Vue","PreviewPlayer","Export","version","UGCResourceManager","CaptureVideo","Duration","Operate","Init","VideoAdd","VideoSplit","VideoTimeModify","VideoRemove","VideoParamsModify","VideoSort","VideoRotate","VideoVFlip","VideoHFlip","VideoAspect","PosterModify","EndingModify","ImageAdd","ImageRemove","ImageModify","ImageTimeModify","MosicAdd","MosicRemove","MosicModify","MosicTimeModify","TextAdd","TextRemove","TextModify","TextTimeModify","FilterEnable","FilterDisable","FilterModify","FaceEnable","FaceDisable","FaceModify","BGMSet","BGMUnset","BGMParamsModify","AudioParamsModify","AudioEffectAdd","AudioEffectRemove","AudioEffectModify","AudioEffectTimeModify","AutoModify","Name","Reload","roundFloat","rotateVector","ox","oy","sx","sy","degrees","radians","PI","cos","sin","operateHistory","undo","playerRef","his","undoOperateHistory","undoOp","restoreOp","restore","restoreArray","extend","undoOpKey","operateType","targetId","seek","reload","ops","getOperateHistory","pop","saveOperateHistory","history","createOperateHistory","op","pushOperateHistory","updateOperateHistory","lastOp","oldMosic","oldOverlay","oldTimeline","exit","showDlg","setting","high_resolution","low_resolution","model","callback","$$v","$set","show_overlay","show_amix","currentStart","currentMove","changed","postermode","poster_url","posterLoadError","_l","pps","dragging","timelineChange","timelineActive","nativeOn","endingClick","hasEnding","overlay_type","currentTimeStr","totalTimeStr","span","toggleActive","stopPropagation","leftStart","leftMove","leftEnd","leftDragging","outbound","leftOutBound","overlay_mode","canload_preview","rightStart","rightMove","rightEnd","rightDragging","rightOutBound","left","ss","firstThumb","thumbLoadError","thumbsFolders","fileName","time","is_amix","boxStyle","typeIcon","dragStart","dragMove","dragEnd","typeText","fmtSeconds","DefaultOptions","features","layouts","angles","dynamicLayouts","renderAngle","angle","Features","leftToLeft","layout","diff","from","to","leftToRight","right","rightToLeft","rightToRight","leftToCenter","targetHF","rightToCenter","centerToCenter","layoutHF","centerToLeft","centerToRight","topToTop","top","topToBottom","bottom","bottomToTop","bottomToBottom","topToMiddle","bottomToMiddle","middleToMiddle","middleToTop","middleToBottom","inside","outside","middle","dock","Magnet","assign","feature","featureFn","xTarget","yTarget","getTargetPosition","newLayout","targets","findTargets","xNearestTarget","yNearestTarget","abs","createLayout","angleSpan","nearestTarget","fun","clearInterval","speed","eventID","EventID","AspectRatio","SeekBegin","playing","Play","Pause","SeekEnd","hasHistory","Undo","hide","toolTab","overlayTabSelect","select","TabID","isCurTimelineRemovable","curTimelineIsEnding","AddImage","AddLocalImage","AddText","Face","Filter","AudioBase","BGM","AudioEffect","disabled","clicked","src2","icon","Edit","Template","Settings","Remove","Done","tabid","title","change","dialogAccept","beforechange","VideoBase","dialogAcceptable","close","accept","touchend","allBGM","selectedBGMName","toggleBGM","mainActive","chooseSubItem","subActive","visibility","noactive","toggleEffect","isNeedDownload","filter_reset","chooseSticker","scroller","_b","fixTab","$attrs","domProps","composing","templateActive","clearTemplate","templateName","chooseBubble","clearFont","family","chooseFont","align","chooseAlign","colorTabActive","color","background","borderColor","shadowColor","backgroundColor","can","bgImg","naturalWidth","naturalHeight","ctx","clearRect","blob","dataUrl","bubble","resumeNormal","onDrop","curAspectRatio","choose","AspectRatioIcon","boxClick","touchstart","touchmove","hideMagnet","imgLoaded","imgLoadError","edit_filter","resize_start","resize_move","resize_end","magnetX","magnetY","magnetCross","borderStyles","onImgLoad","table","Uint32Array","bytes","start","crc","apng","autoPlay","_apng","play","_currentFrameNumber","frames","_numPlays","numPlays","_ended","_paused","renderCurrentFrame","frame","currentFrame","_prevFrame","disposeOp","putImageData","_prevFrameData","getImageData","blendOp","drawImage","imageElement","emit","current","lastCached","_pause","floor","playTime","delay","_nextRenderTimeDelta","cache","nextRenderTime","performance","now","playbackRate","tick","renderNextFrame","requestAnimationFrame","EventEmitter","APNG","createImage","createImages","Player","Frame","resolve","reject","URL","createObjectURL","imageData","revokeObjectURL","errNotPNG","errNotAPNG","PNGSignature","Uint8Array","parseAPNG","buffer","Array","some","isAnimated","eachChunk","preDataParts","postDataParts","headerDataBytes","frameNumber","off","dv","DataView","subarray","getUint32","delayN","getUint16","delayD","getUint8","dataParts","subBuffer","preBlob","Blob","postBlob","bb","set","makeDWordArray","makeChunkBytes","res","readString","chars","String","fromCharCode","makeStringArray","charCodeAt","dataBytes","crcLen","setUint32","crc32","readAsArrayBuffer","angleAndScale","pointA","pointB","pointC","getElementPageXY","element","saving","save","onPreviewLoaded","overlayEdit","rendering","onAvatarClick","avatarUrl","avatarLoadError","avatarFile","nickName","nickNamePlaceholder","desc","renderError","cropAvatarUrl","cropping","cropSave","isMenuOpen","pickImage","deleteAvatar","fixedNumber","sourceType","Camera","PictureSourceType","PHOTOLIBRARY","allowEdit","mediaType","MediaType","PICTURE","destinationType","DestinationType","NATIVE_URI","outFile","desSrc","cancel","playerOptions","_m","success","scopedSlots","_u","fn","param","thumbUrl","SeekBar","getPercent","handleMouseMove","event","isopen","importFile","captureFile","correctOrientation","use","MuseUI","Message","Snotify","toast","position","productionTip","isMobile","App","$mount"],"mappings":"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","file":"js/app.da3e1851.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScrollTab.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScrollTab.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipBtn.vue?vue&type=style&index=0&id=f8360a66&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipBtn.vue?vue&type=style&index=0&id=f8360a66&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextOverlay.vue?vue&type=style&index=1&id=2506cfd3&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextOverlay.vue?vue&type=style&index=1&id=2506cfd3&lang=less&scoped=true&\"","\nfunction CanvasTextWrapper(canvas, text, options) {\n    'use strict';\n\n    if(!text.trim())return;\n    \n    let defaults = {\n        font: '18px Arial, sans-serif',\n        sizeToFill: false,\n        maxFontSizeToFill: false,\n        lineHeight: 1,\n        allowNewLine: true,\n        lineBreak: 'none',\n        textAlign: 'left',\n        verticalAlign: 'top',\n        justifyLines: false,\n        paddingX: 0,\n        paddingY: 0,\n        fitParent: false,\n        strokeText: false,\n        renderHDPI: true,\n        textDecoration: 'none',\n        lineWidth: 0.02,\n        shadowBlur: 0.5\n    };\n\n    let opts = {};\n\n    for (let key in defaults) {\n        opts[key] = options.hasOwnProperty(key) ? options[key] : defaults[key];\n    }\n\n    let context = canvas.getContext('2d');\n    context.font = opts.font;\n    // context.textBaseline = 'midd';\n\n    let scale = 1.1\n    let devicePixelRatio = (typeof global !== 'undefined') ? global.devicePixelRatio : window.devicePixelRatio;\n\n    if (opts.renderHDPI && devicePixelRatio > 1) {\n        let tempCtx = {};\n\n        // store context settings in a temp object before scaling otherwise they will be lost\n        for (let key in context) {\n            tempCtx[key] = context[key];\n        }\n\n        let canvasWidth = canvas.width;\n        let canvasHeight = canvas.height;\n        scale = devicePixelRatio;\n\n        canvas.width = canvasWidth * scale;\n        canvas.height = canvasHeight * scale;\n        canvas.style.width = canvasWidth * scale * 0.5 + 'px';\n        canvas.style.height = canvasHeight * scale * 0.5 + 'px';\n\n        // restore context settings\n        for (let key in tempCtx) {\n            try {\n                context[key] = tempCtx[key];\n            } catch (e) {\n                //\n            }\n        }\n\n        context.scale(scale, scale);\n    }\n\n    let EL_WIDTH = (!opts.fitParent ? canvas.width : canvas.parentNode.clientWidth) / scale;\n    let EL_HEIGHT = (!opts.fitParent ? canvas.height : canvas.parentNode.clientHeight) / scale;\n    let MAX_TXT_WIDTH = EL_WIDTH - (opts.paddingX * 2);\n    let MAX_TXT_HEIGHT = EL_HEIGHT - (opts.paddingY * 2);\n    let WORD_DELIMITER = opts.lineBreak.toLocaleLowerCase() === \"none\" ? '' : /\\s+/ ;\n\n    let fontSize = opts.font.match(/\\d+(px|em|%)/g) ? +opts.font.match(/\\d+(px|em|%)/g)[0].match(/\\d+/g) : 18;\n    let textBlockHeight = 0;\n    let lines = [];\n    let newLineIndexes = [];\n    let textPos = { x: 0, y: 0 };\n    let lineHeight = 0;\n    let fontParts;\n    let multiNewLineDelimiter = '\\u200B';\n\n    text = handleMultipleNewline(text);\n    setFont(fontSize);\n    setLineHeight();\n    validate();\n    render();   \n\n    function handleMultipleNewline(text) {\n        do {\n            text = text.replace(/\\n\\n/g, '\\n' + multiNewLineDelimiter + '\\n');\n        } while (text.indexOf('\\n\\n') > -1);\n        return text;\n    }\n\n    function setFont(fontSize) {\n        if (!fontParts) fontParts = (!opts.sizeToFill) ? opts.font.split(/\\b\\d+px\\b/i) : context.font.split(/\\b\\d+px\\b/i);\n        context.font = fontParts[0] + fontSize + 'px' + fontParts[1];\n        context.lineWidth = fontSize * opts.lineWidth;\n        context.shadowBlur = fontSize * opts.shadowBlur;\n    }\n\n    function setLineHeight() {\n        if (!isNaN(opts.lineHeight)) {\n            lineHeight = fontSize * opts.lineHeight;\n        } else if (opts.lineHeight.toString().indexOf('px') !== -1) {\n            lineHeight = parseInt(opts.lineHeight);\n        } else if (opts.lineHeight.toString().indexOf('%') !== -1) {\n            lineHeight = (parseInt(opts.lineHeight) / 100) * fontSize;\n        }\n    }\n\n    function render() {\n        if (opts.sizeToFill) {\n            let wordsCount = text.trim().split(WORD_DELIMITER).length;\n            let newFontSize = 0;\n            let fontSizeHasLimit = opts.maxFontSizeToFill !== false;\n\n            do {\n                if (fontSizeHasLimit) {\n                    if (++newFontSize <= opts.maxFontSizeToFill) {\n                        adjustFontSize(newFontSize);\n                    } else {\n                        break;\n                    }\n                } else {\n                    adjustFontSize(++newFontSize);\n                }\n            } while (textBlockHeight < MAX_TXT_HEIGHT && (lines.join(WORD_DELIMITER ? ' ' : '').split(WORD_DELIMITER).length == wordsCount));\n\n            adjustFontSize(--newFontSize);\n        } else {\n            wrap();\n        }\n\n        if (opts.justifyLines && opts.lineBreak !== 'word') {\n            justify();\n        }\n\n        setVertAlign();\n        setHorizAlign();\n        drawText();\n    }\n\n    function adjustFontSize(size) {\n        setFont(size);\n        lineHeight = size;\n        wrap();\n    }\n\n    function wrap() {\n        if (opts.allowNewLine) {\n            let newLines = text.trim().split('\\n');\n            for (let i = 0, idx = 0; i < newLines.length - 1; i++) {\n                idx += newLines[i].trim().split(WORD_DELIMITER).length;\n                newLineIndexes.push(idx)\n            }\n        }\n\n        let words = text.trim().split(WORD_DELIMITER);\n        checkLength(words);\n        breakText(words);\n\n        textBlockHeight = lines.length * lineHeight;\n    }\n\n    function checkLength(words) {\n        let testString, tokenLen, sliced, leftover;\n\n        words.forEach(function (word, index) {\n            testString = '';\n            tokenLen = context.measureText(word).width;\n\n            if (tokenLen > MAX_TXT_WIDTH) {\n                let k = 0;\n                for (; (context.measureText(testString + word[k]).width <= MAX_TXT_WIDTH) && (k < word.length); k++) {\n                    testString += word[k];\n                }\n\n                sliced = word.slice(0, k);\n                leftover = word.slice(k);\n                words.splice(index, 1, sliced, leftover);\n            }\n        });\n    }\n\n    function breakText(words) {\n        lines = [];\n        for (let i = 0, j = 0; i < words.length; j++) {\n            lines[j] = '';\n\n            if (opts.lineBreak !== 'word') {\n                if (context.measureText(lines[j] + words[i]).width > MAX_TXT_WIDTH) {\n                    break;\n                } else {\n                    while ((context.measureText(lines[j] + words[i]).width <= MAX_TXT_WIDTH) && (i < words.length)) {\n\n                        lines[j] += words[i] + (WORD_DELIMITER ? ' ' : '');\n                        i++;\n\n                        if (opts.allowNewLine) {\n                            for (let k = 0; k < newLineIndexes.length; k++) {\n                                if (newLineIndexes[k] === i) {\n                                    j++;\n                                    lines[j] = '';\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n                lines[j] = (WORD_DELIMITER ? lines[j].trim() : lines[j]);\n            } else {\n                lines[j] = words[i];\n                i++;\n            }\n        }\n    }\n\n    function justify() {\n        let maxLen, longestLineIndex, tokenLen;\n        for (let i = 0; i < lines.length; i++) {\n            tokenLen = context.measureText(lines[i]).width;\n\n            if (!maxLen || tokenLen > maxLen) {\n                maxLen = tokenLen;\n                longestLineIndex = i;\n            }\n        }\n\n        // fill lines with extra spaces\n        let numWords, spaceLength, numOfSpaces, num, filler;\n        let delimiter = '\\u200A';\n        for (let i = 0; i < lines.length; i++) {\n            if (i === longestLineIndex) continue;\n\n            numWords = lines[i].trim().split(WORD_DELIMITER).length;\n            if (numWords <= 1) continue;\n\n            lines[i] = lines[i].trim().split(WORD_DELIMITER).join(delimiter);\n\n            spaceLength = context.measureText(delimiter).width;\n            numOfSpaces = (maxLen - context.measureText(lines[i]).width) / spaceLength;\n            num = numOfSpaces / (numWords - 1);\n\n            filler = '';\n            for (let j = 0; j < num; j++) {\n                filler += delimiter;\n            }\n\n            lines[i] = lines[i].trim().split(delimiter).join(filler);\n        }\n    }\n\n    function underline(text, x, y) {\n        let width = context.measureText(text).width;\n\n        switch (context.textAlign) {\n            case 'center':\n                x -= (width / 2);\n                break;\n            case 'right':\n                x -= width;\n                break;\n        }\n\n        context.beginPath();\n        context.moveTo(x, y);\n        context.lineTo(x + width, y);\n        context.stroke();\n    }\n\n    function drawText() {\n        let skipLineOnMatch = multiNewLineDelimiter + (WORD_DELIMITER ? ' ' : '');\n        for (let i = 0; i < lines.length; i++) {\n            textPos.y = parseInt(textPos.y) + lineHeight;\n            if (lines[i] !== skipLineOnMatch) {\n                context.fillText(lines[i], textPos.x, textPos.y);\n\n                if (opts.strokeText) {\n                    context.strokeText(lines[i], textPos.x, textPos.y);\n                }\n\n                if (opts.textDecoration.toLocaleLowerCase() === 'underline') {\n                    underline(lines[i], textPos.x, textPos.y);\n                }\n            }\n        }\n    }\n\n    function setHorizAlign() {\n        context.textAlign = opts.textAlign;\n\n        if (opts.textAlign == 'center') {\n            textPos.x = EL_WIDTH / 2;\n        } else if (opts.textAlign == 'right') {\n            textPos.x = EL_WIDTH - opts.paddingX;\n        } else {\n            textPos.x = opts.paddingX;\n        }\n    }\n\n    function setVertAlign() {\n        if (opts.verticalAlign == 'middle') {\n            textPos.y = (EL_HEIGHT - textBlockHeight) / 2;\n        } else if (opts.verticalAlign == 'bottom') {\n            textPos.y = EL_HEIGHT - textBlockHeight - opts.paddingY;\n        } else {\n            textPos.y = opts.paddingY;\n        }\n    }\n\n    function validate() {\n        if (typeof text !== 'string')\n            throw new TypeError('The second parameter must be a String.');\n\n        if (isNaN(fontSize))\n            throw new TypeError('Cannot parse \"font\".');\n\n        if (isNaN(lineHeight))\n            throw new TypeError('Cannot parse \"lineHeight\".');\n\n        if (opts.textAlign.toLocaleLowerCase() !== 'left' && opts.textAlign.toLocaleLowerCase() !== 'center' && opts.textAlign.toLocaleLowerCase() !== 'right' && opts.textAlign.toLocaleLowerCase() !== 'top')\n            throw new TypeError('Property \"textAlign\" must be set to either \"left\", \"center\", \"right, or \"top\".');\n\n        if (opts.verticalAlign.toLocaleLowerCase() !== 'top' && opts.verticalAlign.toLocaleLowerCase() !== 'middle' && opts.verticalAlign.toLocaleLowerCase() !== 'bottom')\n            throw new TypeError('Property \"verticalAlign\" must be set to either \"top\", \"middle\", or \"bottom\".');\n\n        if (typeof opts.justifyLines !== 'boolean')\n            throw new TypeError('Property \"justifyLines\" must be a Boolean.');\n\n        if (isNaN(opts.paddingX))\n            throw new TypeError('Property \"paddingX\" must be a Number.');\n\n        if (isNaN(opts.paddingY))\n            throw new TypeError('Property \"paddingY\" must be a Number.');\n\n        if (typeof opts.fitParent !== 'boolean')\n            throw new TypeError('Property \"fitParent\" must be a Boolean.');\n\n        if (opts.lineBreak.toLocaleLowerCase() !== 'auto'\n            && opts.lineBreak.toLocaleLowerCase() !== 'word'\n            && opts.lineBreak.toLocaleLowerCase() !== 'none')\n            throw new TypeError('Property \"lineBreak\" must be set to either \"auto\", \"none\" or \"word\".');\n\n        if (typeof opts.sizeToFill !== 'boolean')\n            throw new TypeError('Property \"sizeToFill\" must be a Boolean.');\n\n        if (typeof opts.strokeText !== 'boolean')\n            throw new TypeError('Property \"strokeText\" must be a Boolean.');\n\n        if (typeof opts.renderHDPI !== 'boolean')\n            throw new TypeError('Property \"renderHDPI\" must be a Boolean.');\n\n        if (opts.textDecoration.toLocaleLowerCase() !== 'none' && opts.textDecoration.toLocaleLowerCase() !== 'underline')\n            throw new TypeError('Property \"textDecoration\" must be set to either \"none\" or \"underline\".');\n    }\n\n    return (lines);\n}\n\nexport default CanvasTextWrapper","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=1&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=1&lang=less&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMakerTop.vue?vue&type=style&index=0&id=38988548&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMakerTop.vue?vue&type=style&index=0&id=38988548&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolDialog.vue?vue&type=style&index=0&id=173e9416&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolDialog.vue?vue&type=style&index=0&id=173e9416&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingRender.vue?vue&type=style&index=0&id=b5f97684&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingRender.vue?vue&type=style&index=0&id=b5f97684&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItemThumb.vue?vue&type=style&index=0&id=c9388e1e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItemThumb.vue?vue&type=style&index=0&id=c9388e1e&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageOverlay.vue?vue&type=style&index=0&id=769a1834&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageOverlay.vue?vue&type=style&index=0&id=769a1834&lang=less&scoped=true&\"","let i;\r\nconst Const = {\r\n    Overlay: {\r\n        Type: {\r\n            // 使用bit位作为覆盖物类型，方便在同一个时间轴组合显示不同的覆盖物\r\n            Image: 1 << (i = 1),\r\n            Text: 1 << ++i,\r\n            Mosic: 1 << ++i,\r\n        },\r\n        Align: {\r\n            Left: (i = 0),\r\n            Center: ++i,\r\n            Right: ++i,\r\n            Top: ++i,\r\n        },\r\n    },\r\n};\r\n\r\nexport default Const;\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Main')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.makePoster&&!_vm.makeEnding&&!_vm.doExport),expression:\"!makePoster&&!makeEnding&&!doExport\"}],staticClass:\"main-maker\"},[_c('ClipTop',{ref:\"top\",attrs:{\"overrideBackbutton\":!_vm.doExport&&!_vm.makePoster&&!_vm.makeEnding},on:{\"export\":function($event){_vm.doExport = true}}}),_c('div',{ref:\"mainBox\",staticClass:\"main-box\"},[_c('PreviewPlayer',{ref:\"preview\",staticClass:\"main-video\",attrs:{\"pause\":_vm.player.pause || _vm.doExport},on:{\"finished\":_vm.playerFinished,\"loading\":function($event){_vm.player.loading=true},\"loaddone\":_vm.previewLoaddone,\"resize\":function($event){!_vm.makePoster&&!_vm.makeEnding&&!_vm.doExport},\"render\":function($event){_vm.preview_render=true}}}),_c('OverlayEditor',{ref:\"overlayEditor\",staticClass:\"overlay-box\",on:{\"change\":_vm.overlayEditorChange,\"overlayActive\":_vm.overlayActive,\"overlayDeactive\":_vm.overlayDeactive}})],1),_c('div',{ref:\"toolBox\",staticClass:\"toolBox\"},[_c('PlayerController',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showPlayerController),expression:\"showPlayerController\"}],attrs:{\"playing\":!_vm.player.pause,\"loading\":_vm.player.loading},on:{\"event\":_vm.playerControllerEvent}}),_c('ClipTimeline',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showTimeline),expression:\"showTimeline\"}],ref:\"timeline\",attrs:{\"show_overlay\":_vm.showOverlay,\"overlay_type\":_vm.overlayType,\"show_amix\":_vm.showAMix,\"playing\":!_vm.player.pause,\"poster\":_vm.editlist.poster,\"preview_render\":_vm.preview_render,\"player\":_vm.$refs.preview},on:{\"timelinesChange\":_vm.timelinesChange,\"timeChange\":_vm.timeChange,\"overlayChange\":_vm.overlayChange,\"overlayActive\":_vm.overlayActive,\"amixChange\":_vm.amixChange,\"amixActive\":_vm.amixActive,\"on_poster_click\":function($event){_vm.makePoster=1},\"on_ending_click\":function($event){_vm.makeEnding=1}}}),_c('ToolTab',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showTooltab),expression:\"showTooltab\"}],ref:\"toolTab\",attrs:{\"activeItem\":_vm.activeItem},on:{\"select\":_vm.tabSelect}}),_c('ToolDialog',{ref:\"toolDlg\",on:{\"close\":function($event){_vm.showTooltab=_vm.showPlayerController=_vm.showTimeline=true;_vm.mainBoxResized()},\"beforechange\":_vm.toolBeforeChange,\"change\":_vm.toolValueChange}})],1),(_vm.importProgress >= 0)?_c('div',{staticClass:\"spin\"},[_c('div',[_c('mu-circular-progress',{attrs:{\"mode\":\"determinate\",\"value\":_vm.importProgress*100}}),_c('br'),_c('span',{staticStyle:{\"font-size\":\"14px\"}},[_vm._v(\"导入中 \"+_vm._s((_vm.importProgress*100).toFixed(2))+\"%\")])],1)]):_vm._e()],1),(_vm.makePoster)?_c('PosterMaker',{on:{\"close\":function($event){_vm.makePoster = false; _vm.reloadPlayer(true);}}}):_vm._e(),(_vm.makeEnding)?_c('EndingMaker',{on:{\"close\":function($event){_vm.makeEnding = false; _vm.reloadPlayer();}}}):_vm._e(),(_vm.doExport)?_c('Exporter',{ref:\"exporter\",on:{\"close\":function($event){_vm.doExport = false; _vm.isBackbuttonExit = true; _vm.reloadPlayer();}}}):_vm._e(),_c('Importer',{ref:\"importer\",on:{\"select\":_vm.importFileSelect,\"progress\":function($event){_vm.importProgress=$event},\"cancel\":_vm.importCancel}}),_c('vue-snotify')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('NativeVideo',{ref:\"video\",on:{\"resize\":function($event){return _vm.$emit('resize')},\"meta\":function($event){return _vm.$emit('render')},\"playing\":function($event){return _vm.$emit('playing',$event)},\"finished\":function($event){return _vm.$emit('finished')},\"render\":function($event){return _vm.$emit('render')},\"loading\":function($event){return _vm.$emit('loading')},\"loaddone\":function($event){return _vm.$emit('loaddone')},\"timeupdate\":function($event){return _vm.$emit('timeupdate',$event)}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","let session = Math.random()\n    .toString()\n    .substr(2, 8);\nlet Level = {\n    debug: 1,\n    verbose: 2,\n    info: 3,\n    warn: 4,\n    error: 5,\n    silent: 6,\n};\n\nlet level = Level.info;\n\nlet Logger = {\n    Level,\n    verbose() {\n        if (level > Level.verbose) return;\n        window.console.debug.apply(window.console, arguments);\n    },\n    info() {\n        if (level > Level.info) return;\n        window.console.info.apply(window.console, arguments);\n    },\n    warn() {\n        if (level > Level.warn) return;\n        window.console.warn.apply(window.console, arguments);\n    },\n    error() {\n        if (level > Level.error) return;\n        window.console.error.apply(window.console, arguments);\n    },\n    uilog(path, msg) {\n        if (level > Level.info) return;\n        window.console.log(`[ugcsdk.uipath](${session}:${path}): ${msg}`);\n    },\n    set loglevel(v) {\n        level = v;\n    },\n    get loglevel() {\n        return level;\n    },\n};\n\nexport default Logger;\n","import axios from \"axios\";\nimport md5 from \"md5\";\nimport extend from \"extend\";\nimport cordovaModel from \"./CordovaModel\";\nimport Const from \"../const\";\nimport Log from \"./Log\";\n\nlet NOREMOTE = false;\n\nwindow.clearAllCache = async function() {\n    let fs = await new Promise(\n        window.requestFileSystem.bind(window, window.TEMPORARY, 0)\n    );\n\n    let f = await new Promise(\n        fs.root.getDirectory.bind(fs.root, \"ugc_res\", {})\n    );\n\n    return await new Promise(f.removeRecursively.bind(f));\n};\n\nlet ResourceManager = {\n    remoteResRoot:\n        location.protocol == \"file:\"\n            ? \"http://zb.vgemv.com/app_download/ugc/sdk/resource\"\n            : \"ugc\",\n    localResRoot: \"ugc_res\",\n    assetResRoot_android: \"jsugcsdk_www/dist/ugc\",\n    assetResRoot_ios: \"ugcsdk.bundle/dist/ugc\",\n    get assetResRoot() {\n        if (cordovaModel.isIOS()) {\n            return cordova.file.applicationDirectory + this.assetResRoot_ios;\n        } else {\n            return (\n                cordova.file.applicationDirectory + this.assetResRoot_android\n            );\n        }\n    },\n    ResType: {\n        image: \"image\",\n        music: \"music\",\n        audio: \"audio\",\n        filter: \"filter\",\n        font: \"font\",\n        fontbg: \"fontbg\",\n        mosic: \"mosic\",\n    },\n    get remoteResRootJson() {\n        return this.remoteResRoot + \"/res.json\";\n    },\n    get assetResRootJson() {\n        return this.assetResRoot + \"/res.json\";\n    },\n    tempFs: null,\n    folders: {},\n    async filesystem() {\n        if (!this.tempFs) {\n            this.tempFs = await new Promise(\n                window.requestFileSystem.bind(\n                    window,\n                    window.TEMPORARY,\n                    5 * 1024 * 1024\n                )\n            );\n        }\n        return this.tempFs;\n    },\n    remoteRel2Abs(rel1, rel2) {\n        return (\n            this.remoteResRoot +\n            (rel1 ? \"/\" + rel1 : \"\") +\n            (rel2 ? \"/\" + rel2 : \"\")\n        );\n    },\n    localRel2Abs(rel1, rel2) {\n        return (\n            this.localResRoot +\n            (rel1 ? \"/\" + rel1 : \"\") +\n            (rel2 ? \"/\" + rel2 : \"\")\n        );\n    },\n    assetRel2Abs(rel1, rel2) {\n        return (\n            this.assetResRoot +\n            (rel1 ? \"/\" + rel1 : \"\") +\n            (rel2 ? \"/\" + rel2 : \"\")\n        );\n    },\n    async assetReadText(url) {\n        let fEntry = await new Promise(\n            window.resolveLocalFileSystemURL.bind(window, url)\n        );\n        let file = await new Promise(fEntry.file.bind(fEntry));\n        let reader = new FileReader();\n        let result = (\n            await new Promise((o, x) => {\n                reader.onload = o;\n                reader.onerror = x;\n                reader.readAsText(file);\n            })\n        ).target.result;\n\n        // Log.verbose(\"Asset text:\",url, result);\n        return result;\n    },\n    async assetReadAsDataUrl(url) {\n        let fEntry = await new Promise(\n            window.resolveLocalFileSystemURL.bind(window, url)\n        );\n        let file = await new Promise(fEntry.file.bind(fEntry));\n        let reader = new FileReader();\n        let result = (\n            await new Promise((o, x) => {\n                reader.onload = o;\n                reader.onerror = x;\n                reader.readAsDataURL(file);\n            })\n        ).target.result;\n\n        // Log.verbose(\"Asset text:\",url, result);\n        return result;\n    },\n    md5source(source) {\n        return (\n            md5(\n                source\n                    .split(\".\")\n                    .slice(0, -1)\n                    .join(\".\")\n            ) +\n            \".\" +\n            source.split(\".\").reverse()[0]\n        );\n    },\n    async getFolder(resType, folder) {\n        let fs = await this.filesystem();\n        let result;\n\n        folder = this.localRel2Abs(resType, folder);\n\n        if (this.folders[folder]) {\n            return this.folders[folder];\n        }\n\n        //确保目录存在\n        let splited = folder.split(\"/\");\n        for (let i = 0; i <= splited.length; i++) {\n            let currentFolder = splited.slice(0, i).join(\"/\");\n            result = await new Promise(\n                fs.root.getDirectory.bind(fs.root, currentFolder, {\n                    create: true,\n                })\n            );\n            this.folders[currentFolder] = result;\n        }\n        return result;\n    },\n    async getTempFolder() {\n        let fs = await this.filesystem();\n        let folder = this.folders[\"ugc_temp\"];\n        if (!folder) {\n            folder = await new Promise(\n                fs.root.getDirectory.bind(fs.root, \"ugc_temp\", { create: true })\n            );\n        }\n        return folder;\n    },\n    async getExportPosterFolder() {\n        let fs = await this.filesystem();\n        let folder = this.folders[\"ugc_poster\"];\n        if (!folder) {\n            folder = await new Promise(\n                fs.root.getDirectory.bind(fs.root, \"ugc_poster\", {\n                    create: true,\n                })\n            );\n        }\n        return folder;\n    },\n    async clearTempFiles(wait) {\n        let fs = await this.filesystem();\n        let temp = await this.getTempFolder();\n        let thumbs = await new Promise(\n            fs.root.getDirectory.bind(fs.root, \"thumbs/\", { create: true })\n        );\n        let all = [\n            new Promise(temp.removeRecursively.bind(temp)),\n            new Promise(thumbs.removeRecursively.bind(thumbs)),\n        ];\n        if (wait) {\n            await Promise.all(all);\n        }\n    },\n    async fetchAssetResList(resType) {\n        let resIdx = JSON.parse(\n            await this.assetReadText(this.assetResRootJson)\n        );\n        let resList = JSON.parse(\n            await this.assetReadText(this.assetRel2Abs(resIdx[resType]))\n        );\n\n        //修正相对路径\n        resList = resList.map((i) => {\n            if (i.list) {\n                i.list = i.list.map((j) => {\n                    if (j.source) {\n                        j.source_asset_url = this.assetRel2Abs(\n                            resType,\n                            j.source\n                        );\n                    }\n                    if (j.source_list) {\n                        j.source_list_asset_url = j.source_list.map((i) =>\n                            this.assetRel2Abs(resType, i)\n                        );\n                    }\n                    return j;\n                });\n            } else if (i.source) {\n                i.source_asset_url = this.assetRel2Abs(resType, i.source);\n            }\n\n            return i;\n        });\n        return resList;\n    },\n    //获取本地的资源列表\n    async fetchLocalResList(resType) {\n        if (!window.requestFileSystem) {\n            return [];\n        }\n\n        let folder = await this.getFolder(resType);\n\n        let reader = folder.createReader();\n\n        let entries = await new Promise(reader.readEntries.bind(reader));\n\n        //读一层目录\n        let files = await Promise.all(\n            entries.map(async (d) => {\n                if (d.isDirectory) {\n                    let reader = d.createReader();\n                    let entries = await new Promise(\n                        reader.readEntries.bind(reader)\n                    );\n                    return {\n                        ...d,\n                        list: entries,\n                    };\n                } else return d;\n            })\n        );\n\n        return files;\n    },\n    //获取服务端的资源列表\n    async fetchRemoteResList(resType) {\n        let resIdx = (await axios.get(this.remoteResRootJson)).data;\n        let resList = (await axios.get(this.remoteRel2Abs(resIdx[resType])))\n            .data;\n\n        //修正相对路径\n        resList = resList.map((i) => {\n            if (i.list) {\n                i.list = i.list.map((j) => {\n                    if (j.source) {\n                        j.source_remote_url = this.remoteRel2Abs(\n                            resType,\n                            j.source\n                        );\n                        j.download = null;\n                    }\n                    if (j.source_list) {\n                        j.source_list_remote_url = j.source_list.map((i) =>\n                            this.remoteRel2Abs(resType, i)\n                        );\n                        j.download = null;\n                    }\n                    return j;\n                });\n            } else if (i.source) {\n                i.source_remote_url = this.remoteRel2Abs(resType, i.source);\n                i.download = null;\n            }\n\n            return i;\n        });\n        return resList;\n    },\n    copyedResTypes: {},\n    //获取资源列表，包含本地记录\n    async fetchResList(resType) {\n        let local = await this.fetchLocalResList(resType);\n        let asset;\n        try {\n            asset = await this.fetchAssetResList(resType);\n        } catch (e) {\n            Log.warn(\"asset resource not found\");\n            /* */\n        }\n\n        let remote;\n        try {\n            remote = NOREMOTE ? asset : await this.fetchRemoteResList(resType);\n        } catch (e) {\n            remote = asset;\n            Log.warn(\"remote resource not found\");\n        }\n\n        Log.verbose(\"remote\", remote);\n        Log.verbose(\"local\", local);\n        Log.verbose(\"asset\", asset);\n\n        if (!remote) {\n            return;\n        }\n\n        let needCopyAsset = [];\n        let processItem = (directoryName, i) => {\n            // 处理一个资源的函数\n            let filename = this.md5source(i.source);\n            let name = i.name;\n            i.local_file = local.filter((j) => j.name == filename)[0];\n\n            i.thumb_remote_url = this.remoteRel2Abs(resType, i.thumb);\n            i.thumb_rel_url = \"ugc/\" + resType + \"/\" + (i.thumb || \"\");\n\n            if (i.source_list) {\n                i.local_file_list = i.source_list.map((i) => {\n                    let filename = this.md5source(i);\n                    return local.filter((j) => j.name == filename)[0];\n                });\n            }\n\n            //未下载，检查asset有没有，有则从asset复制\n            if (!i.local_file && asset && !this.copyedResTypes[resType]) {\n                let assetList = asset.filter(\n                    (i) => i.name == directoryName && i.list\n                )[0];\n                let assetFound =\n                    (assetList &&\n                        assetList.list.filter((i) => i.name == name)[0]) ||\n                    asset.filter((i) => i.name == name)[0];\n\n                if (assetFound) {\n                    needCopyAsset.push(\n                        this.copyAssetRes(resType, i, assetFound)\n                    );\n                }\n\n                //TODO:\n                // 不访问网络的情况下，去掉 asset 里面没有找到本地资源的条目\n            }\n\n            return i;\n        };\n\n        //比对\n        //只识别一层目录\n        let result = remote.map((i) => {\n            //是目录\n            if (i.list) {\n                let directoryName = i.name;\n                i.list = i.list.flatMap(processItem.bind(this, directoryName));\n            } else {\n                processItem(null, i);\n            }\n            return i;\n        });\n\n        //等待 copy asset 完成\n        //Promise.allSettled 有兼容问题。这里令 needCopyAsset 里面的内容不抛错误来解决 Promise.all 会被错误终止的问题。\n        // await Promise.all(needCopyAsset);// 添加了download属性，让用户在复制时不会同时下载文件\n        Promise.all(needCopyAsset).then(() => {\n            this.copyedResTypes[resType] = true;\n        });\n\n        return result;\n    },\n    async createResFile(resType, sourceUrl) {\n        let fs = await this.filesystem();\n\n        //确保目录存在\n        await this.getFolder(resType);\n        let filename = this.md5source(sourceUrl);\n\n        // Log.verbose(\"createResFile: folder:\",folder)\n        let absUrl = this.localRel2Abs(resType, filename);\n        Log.verbose(\"createResFile:\", absUrl);\n        return await new Promise(\n            fs.root.getFile.bind(fs.root, absUrl, { create: true })\n        );\n    },\n    async downloadRes(resType, resItem, progress) {\n        let sourceRemoteUrl = resItem.source_remote_url;\n\n        resItem.download = {\n            percent: 0,\n        };\n\n        let allProgress = [0];\n        let totalItem =\n            1 + ((resItem.source_list && resItem.source_list.length) || 0);\n\n        let fEntry = await this.createResFile(resType, resItem.source);\n\n        try {\n            await this.download(sourceRemoteUrl, fEntry, (p) => {\n                resItem.download.percent = p;\n                allProgress[0] = p;\n                progress &&\n                    progress(allProgress.reduce((a, b) => a + b) / totalItem);\n            });\n\n            if (resItem.source_list) {\n                let local_file_list = [];\n                await Promise.all(\n                    resItem.source_list_remote_url.map(async (i, idx) => {\n                        let fEntry = await this.createResFile(\n                            resType,\n                            resItem.source_list[idx]\n                        );\n                        try {\n                            await this.download(\n                                i,\n                                fEntry,\n                                (p) =>\n                                    (allProgress[idx + 1] =\n                                        p &&\n                                        progress &&\n                                        progress(\n                                            allProgress.reduce(\n                                                (a, b) => a + b\n                                            ) / totalItem\n                                        ))\n                            );\n                            local_file_list.push(fEntry);\n                        } catch (e) {\n                            fEntry.remove();\n                            Log.warn(`download file failed:${i}`);\n                        }\n                    })\n                );\n\n                resItem.local_file_list = local_file_list;\n            }\n\n            delete resItem.download;\n\n            // res.source 的素材会下载并记录在 res.local_file 里面\n            resItem.local_file = fEntry;\n\n            return fEntry;\n        } catch (e) {\n            fEntry.remove();\n            resItem.download = null; // delete不会触发vue更新\n\n            Log.warn(`download file failed:${sourceRemoteUrl}`);\n            throw e;\n        }\n    },\n\n    async download(url, fEntry, progress) {\n        Log.info(`begin download:${url}`);\n\n        let data = await new Promise((o, x) => {\n            var xhr = new XMLHttpRequest();\n            xhr.open(\"GET\", url, true);\n            xhr.responseType = \"blob\";\n            xhr.onprogress = async (e) => {\n                // Log.verbose(\"download\",url,e.loaded)\n                progress && progress(e.loaded / e.total);\n            };\n            xhr.onerror = x;\n            xhr.onload = function() {\n                if (this.status == 200) {\n                    o(this.response);\n                    // var blob = new Blob([this.response], { type: 'image/png' });\n                    // saveFile(dirEntry, blob, \"downloadedImage.png\");\n                } else {\n                    x(this.status);\n                }\n            };\n            xhr.send();\n        });\n\n        let writer = await new Promise(fEntry.createWriter.bind(fEntry));\n\n        await new Promise((o, x) => {\n            writer.onwriteend = o;\n            writer.onerror = x;\n            writer.write(data);\n        });\n    },\n    copingAssetRes: {},\n    async copyAssetRes(resType, resItem, assetResItem) {\n        let key = resType + \"_\" + resItem.source + assetResItem.source;\n        let loader = this.copingAssetRes[key];\n        if (loader) {\n            return loader;\n        }\n\n        try {\n            loader = this.copingAssetRes[key] = this.copyAssetResIntenal(\n                resType,\n                resItem,\n                assetResItem\n            );\n            await loader;\n            delete this.copingAssetRes[key];\n            return loader;\n        } catch (e) {\n            delete this.copingAssetRes[key];\n            Log.warn(`copy asset failed:${key}`);\n            throw e;\n        }\n    },\n    async copyAssetResIntenal(resType, resItem, assetResItem) {\n        // 防止和下载冲突\n        resItem.download = {\n            percent: 0,\n        };\n\n        // 先让界面渲染\n        await new Promise((o) => setTimeout(o, 100));\n\n        let fEntry = await this.createResFile(resType, resItem.source);\n        // let dEntry = await new Promise(fEntry.getParent.bind(fEntry));\n        // 改为getFolder, 有缓存\n        let dEntry = await this.getFolder(resType);\n\n        try {\n            await new Promise(fEntry.remove.bind(fEntry));\n        } catch (e) {\n            //\n        }\n\n        let file;\n        try {\n            file = await new Promise(\n                resolveLocalFileSystemURL.bind(\n                    null,\n                    assetResItem.source_asset_url\n                )\n            );\n        } catch (e) {\n            resItem.download = null;\n            Log.warn(assetResItem, \"not found\");\n            return;\n        }\n\n        try {\n            //此处，如果glsl文件重复的话（如 lut3d）会导致拷贝失败（前一个已经拷贝过来了）。忽略，因为文件已经有了。\n            fEntry = await new Promise(\n                file.copyTo.bind(file, dEntry, fEntry.name)\n            );\n        } catch (e) {\n            ///\n        }\n\n        resItem.local_file = fEntry;\n        resItem.download = null;\n\n        if (assetResItem.source_list_asset_url) {\n            resItem.local_file_list = await Promise.all(\n                assetResItem.source_list_asset_url.map(async (i, idx) => {\n                    let fEntry = await this.createResFile(\n                        resType,\n                        resItem.source_list[idx]\n                    );\n                    let dEntry = await new Promise(\n                        fEntry.getParent.bind(fEntry)\n                    );\n\n                    try {\n                        await new Promise(fEntry.remove.bind(fEntry));\n                    } catch (e) {\n                        //\n                    }\n\n                    let file;\n                    try {\n                        file = await new Promise(\n                            resolveLocalFileSystemURL.bind(null, i)\n                        );\n                    } catch (e) {\n                        Log.verbose(assetResItem, \"not found\");\n                        return;\n                    }\n\n                    try {\n                        //可能已存在\n                        return await new Promise(\n                            file.copyTo.bind(file, dEntry, fEntry.name)\n                        );\n                    } catch (e) {\n                        return fEntry;\n                    }\n                })\n            );\n        }\n    },\n\n    async getBeautySource() {\n        let allFilter = await this.fetchResList(this.ResType.filter);\n        let beautyFilter = allFilter.find((i) => i.name == \"美颜\");\n        return beautyFilter.local_file.toNativeURL();\n    },\n    async getMosicSource() {\n        let allFilter = await this.fetchResList(this.ResType.filter);\n        let found = allFilter\n            .reduce((pre, nxt) => pre.concat(nxt.list || []), [...allFilter])\n            .find((i) => i.name == \"马赛克\");\n        return found.local_file.toNativeURL();\n    },\n    async getTransformSource() {\n        let allFilter = await this.fetchResList(this.ResType.filter);\n        let found = allFilter.find((i) => i.name == \"transform\");\n        return found.local_file.toNativeURL();\n    },\n    async pickAudio() {\n        return await new Promise(UGCApp.pickAudio.bind(UGCApp));\n    },\n    // 片尾\n    _ending: null,\n    getLastEnding() {\n        try {\n            return (\n                this._ending || JSON.parse(localStorage.getItem(\"last-ending\"))\n            );\n        } catch (error) {\n            return this._ending;\n        }\n    },\n    saveLastEnding(data) {\n        this._ending = data;\n        try {\n            localStorage.setItem(\"last-ending\", JSON.stringify(data));\n        } catch (error) {\n            //\n        }\n    },\n};\n\nexport default ResourceManager;\n","// isCordova = isCordova || true\nimport UGCRes from \"./UGCResourceManager\";\nimport Log from \"./Log\";\nlet portraitListener = null;\nlet portraitQuery = window.matchMedia(\"(orientation: portrait)\");\nlet isCordova = navigator.userAgent.indexOf(\"(cordova)\") >= 0;\nexport default {\n    isCordova() {\n        return isCordova;\n    },\n    isIOS() {\n        return navigator.userAgent.toLowerCase().indexOf(\"iphone\") >= 0;\n    },\n    isAndroid() {\n        return navigator.userAgent.toLowerCase().indexOf(\"android\") >= 0;\n    },\n    isPortrait(onchange) {\n        if (onchange) {\n            portraitListener && portraitQuery.removeListener(portraitListener);\n            portraitQuery.addListener((portraitListener = onchange));\n        }\n        return portraitQuery.matches;\n    },\n    config: {\n        noReady: true,\n        input: \"\",\n        output: \"\",\n        output_thumb: \"\",\n    },\n    async getConfig() {\n        if (this.config.noReady) {\n            this.config = await new Promise(UGCApp.getConfig);\n            Log.verbose(\"config: \", this.config);\n        }\n        return this.config;\n    },\n    setConfig(config) {\n        this.config = config;\n    },\n    StatusCode: {\n        // from init()\n    },\n    async finish(result) {\n        await UGCRes.clearTempFiles();\n        await UGCApp.ffplay.stop(false);\n        await new Promise(UGCApp.done.bind(UGCApp, result));\n    },\n    async init() {\n        if (!this.isCordova() || window.Cordova) return;\n\n        let sysFile = window.File;\n        await new Promise((o, x) => {\n            let s = document.createElement(\"script\");\n            if (this.isAndroid()) s.src = \"cordova/android/cordova.js\";\n            else if (this.isIOS()) s.src = \"cordova/ios/cordova.js\";\n            s.onload = () => {\n                document.addEventListener(\"deviceready\", o);\n            };\n            s.onerror = x;\n            document.head.appendChild(s);\n        });\n        // cordova-plugin-file 会覆盖 window.File 导致上传组件(stream-v1.js)错误\n        window.File = sysFile;\n\n        this.StatusCode = UGCApp.StatusCode;\n        let loglevel = (await this.getConfig()).loglevel;\n        if(loglevel !== undefined && loglevel > 0)\n            Log.loglevel = loglevel;\n        Log.info(\"cordova init finished\");\n    },\n    async getCdvUrl(i) {\n        if (i.indexOf(\"http://localhost\") == 0) {\n            i = i.replace(/http:\\/\\/localhost:.*?\\//, \"cdvfile://localhost/\");\n        }\n        if (i.indexOf(\"/\") == 0) {\n            i = \"file://\" + i;\n        }\n        return await new Promise((o, x) =>\n            resolveLocalFileSystemURL(\n                i,\n                function(entry) {\n                    o(entry.toInternalURL());\n                },\n                () => {\n                    x();\n                }\n            )\n        );\n    },\n};\n","import CordovaModel from \"./CordovaModel\";\nimport Const from \"../const\";\nimport UGCResourceManager from \"./UGCResourceManager\";\nimport Log from \"./Log\";\n\nfunction roundFloat(val) {\n    return +val.toFixed(10);\n}\n\nlet VFPreset = {\n    blur: \"avgblur\",\n    brown: \"colorchannelmixer=.393:.769:.189:0:.349:.686:.168:0:.272:.534:.131\",\n    colorful: \"geq=r='X/W*r(X,Y)':g='(1-X/W)*g(X,Y)':b='(H-Y)/H*b(X,Y)'\",\n    flash: \"hue=H=2*PI*t:s=sin(2*PI*t)+1\",\n    oldfilm: \"vignette='PI/4+random(1)*PI/50':eval=frame\",\n    line:\n        \"split[a][b],[a]curves=darker[a],[a][b]blend=all_expr='if(eq(0,mod(Y,2)),A,B)':shortest=1\",\n    red_border: \"drawbox=color=red:t='min(iw,ih)/20'\",\n    pink_border: \"drawbox=color=pink:t='min(iw,ih)/20'\",\n    black_border: \"drawbox=color=black:t='min(iw,ih)/20'\",\n    colormix: \"edgedetect=mode=colormix\",\n};\n\nlet VFPresetName = {\n    blur: \"模糊\",\n    brown: \"旧照片\",\n    colorful: \"流光溢彩\",\n    flash: \"闪光\",\n    oldfilm: \"旧影片\",\n    line: \"黑条纹\",\n    double: \"双画面\",\n    red_border: \"红框\",\n    pink_border: \"粉框\",\n    black_border: \"黑框\",\n    colormix: \"彩绘\",\n};\n\nlet DARPreset = {\n    auto: [0, 0],\n    // \"9:16\":[9, 16],\n    // \"16:9\":[16, 9],\n    // \"1:1\":[1, 1],\n    // \"3:4\":[3, 4],\n    // \"4:3\":[4, 3]\n};\n\nNumber.prototype.toEven = function() {\n    let ret = +this.toFixed(0);\n    if (ret % 2 != 0) return ret - 1;\n    else return ret;\n};\n\nlet timelineIdSeq = 0;\nlet overlayIdSeq = 1; // 贴图/贴字/音效，共用一个id序列, 0给封面用\n// let amixIdSeq = 0;\n\nasync function timeline_format(timelines) {\n    let ret = await Promise.all(\n        timelines.map(async (val) => {\n            if (val.total_sec) return val;\n\n            let src = val.url;\n\n            let format = await new Promise(\n                UGCApp.ffmpeg.format.bind(null, src)\n            );\n\n            if (!format.duration) {\n                // 文件不存在\n                throw new Error(\"导入失败，文件可能不存在或没有权限\");\n            }\n\n            if ((90 + format.video.rotate) % 180 == 0) {\n                let _cacheWidth = format.video.width;\n                format.video.width = format.video.height;\n                format.video.height = _cacheWidth;\n            }\n\n            // offset_sec += format.duration/1000;\n            return {\n                url: src,\n                src_rotate: format.video.rotate,\n                width: format.video.width,\n                height: format.video.height,\n                start_sec: 0,\n                end_sec: format.duration / 1000,\n                total_sec: format.duration / 1000,\n            };\n        })\n    );\n    return ret;\n}\nlet THIS = {\n    VFPreset,\n    VFPresetName,\n    DARPreset,\n    editlist: {\n        _time_sec: 0,\n        video_min_sec: 0.1, //视频裁剪最小时长限制\n        get time_sec() {\n            return this._time_sec;\n        },\n        set time_sec(v) {\n            this._time_sec = v;\n            this._cur_timeline_id = this.get_cur_timeline_id();\n        },\n        _timelines: [],\n        get_next_timelineId() {\n            return ++timelineIdSeq;\n        },\n        get timelines() {\n            return this._timelines;\n        },\n        set timelines(v) {\n            // 得到最大的 id\n            timelineIdSeq = v.reduce((pre, nxt) => {\n                return Math.max(pre, nxt.id);\n            }, timelineIdSeq);\n\n            this._timelines.splice(0, this._timelines.length, ...v);\n        },\n        get total_sec() {\n            if (this.timelines.length == 0) return 0;\n\n            let first = this.timelines[0].end_sec - this.timelines[0].start_sec;\n\n            if (this.timelines.length == 1) return first;\n            else\n                return [first, ...this.timelines.slice(1)].reduce(\n                    (pre, nxt) => {\n                        return pre + nxt.end_sec - nxt.start_sec;\n                    }\n                );\n        },\n        _cur_timeline_id: -1,\n        get cur_timeline_id() {\n            return this._cur_timeline_id;\n        },\n        get_cur_timeline_id() {\n            let time_sec = this.time_sec;\n            let cur;\n\n            for (let i = 0; i < this.timelines.length; i++) {\n                cur = this.timelines[i];\n                if (\n                    time_sec <\n                    this.timelines[i].offset_sec +\n                        this.timelines[i].end_sec -\n                        this.timelines[i].start_sec\n                )\n                    break;\n            }\n\n            let ret = -1;\n            if (cur) ret = cur.id;\n            else if (this.timelines.length) ret = this.timelines[0].id;\n\n            return ret;\n        },\n        cur_timeline(force_update) {\n            if(force_update){\n                this._cur_timeline_id = this.get_cur_timeline_id();\n            }\n            \n            let cur_id = this.cur_timeline_id;\n            let cur = this.timelines.filter((o) => {\n                return o.id == cur_id;\n            })[0];\n            return cur;\n        },\n        async add_timelines(tl) {\n            Log.verbose(\"add timelines:\", tl);\n\n            tl = await timeline_format(tl);\n\n            Log.verbose(\"add timelines with format:\", tl);\n\n            let timelines = tl.map((o) => {\n                return {\n                    id: this.get_next_timelineId(),\n                    url: \"\",\n                    thumbs: [],\n                    active: false,\n                    left_drag_offset: 0,\n                    focus: false,\n                    width: 0,\n                    height: 0,\n                    start_sec: 0,\n                    offset_sec: 0,\n                    end_sec: 0,\n                    total_sec: 0,\n                    rotate: 0,\n                    vflip: 0,\n                    hflip: 0,\n                    eq: {\n                        brightness: 0,\n                        contrast: 1,\n                        saturation: 1,\n                        gamma: 1,\n                    },\n                    // 内置getter会导致撤销出错，改为函数getRotatedWidth\n                    // get rotated_width(){\n                    //     if(this.rotate % 180 == 0)return this.width;\n                    //     else return this.height;\n                    // },\n                    // get rotated_height(){\n                    //     if(this.rotate % 180 == 0)return this.height;\n                    //     else return this.width;\n                    // },\n                    ...o,\n                };\n            });\n\n            if (\n                this.timelines.length &&\n                this.timelines[this.timelines.length - 1].ending\n            ) {\n                timelines = [\n                    ...this.timelines.slice(0, this.timelines.length - 1),\n                    ...timelines,\n                    this.timelines[this.timelines.length - 1],\n                ];\n            } else {\n                timelines = [...this.timelines, ...timelines];\n            }\n\n            timelines.reduce((pre, nxt, idx) => {\n                if (idx == 1) {\n                    pre.offset_sec = 0;\n                    pre = pre.end_sec - pre.start_sec;\n                }\n                nxt.offset_sec = pre;\n                return nxt.offset_sec + nxt.end_sec - nxt.start_sec;\n            });\n\n            this.timelines = timelines;\n\n            this._cur_timeline_id = this.get_cur_timeline_id(); // 更新 cur_timeline_id\n        },\n        getRotatedWidth(timeline) {\n            if (timeline.rotate % 180 == 0) return timeline.width;\n            else return timeline.height;\n        },\n        getRotatedHeight(timeline) {\n            if (timeline.rotate % 180 == 0) return timeline.height;\n            else return timeline.width;\n        },\n        update_timelines(timelines) {\n            if (!timelines) timelines = this.timelines;\n            timelines.reduce((pre, nxt, idx) => {\n                if (idx == 1) {\n                    pre.offset_sec = 0;\n                    pre = pre.end_sec - pre.start_sec;\n                }\n                nxt.offset_sec = pre;\n                return nxt.offset_sec + nxt.end_sec - nxt.start_sec;\n            });\n\n            timelines.forEach((i, idx) => {\n                UGCApp.ffplay.command(\"sp|ugc_movie@master\" + idx, i.start_sec);\n                UGCApp.ffplay.command(\"ep|ugc_movie@master\" + idx, i.end_sec);\n                // UGCApp.ffplay.command(\"offset|ugc_movie@master\"+idx,i.offset_sec);\n            });\n        },\n        update_timeline_videobase(timeline) {\n            let idx = [-1, ...this.timelines].reduce((pre, nxt, idx) => {\n                return nxt.id == timeline.id ? idx - 1 : pre;\n            });\n\n            UGCApp.ffplay.command(\n                \"brightness|eq@master\" + idx,\n                timeline.eq.brightness\n            );\n            UGCApp.ffplay.command(\n                \"saturation|eq@master\" + idx,\n                timeline.eq.saturation\n            );\n            UGCApp.ffplay.command(\"gamma|eq@master\" + idx, timeline.eq.gamma);\n            UGCApp.ffplay.command(\n                \"contrast|eq@master\" + idx,\n                timeline.eq.contrast\n            );\n        },\n        amix: [],\n        add_amix(o) {\n            let ret;\n            this.amix.push(\n                (ret = {\n                    id: overlayIdSeq++,\n                    new: true,\n                    active: false,\n                    offset_sec: this.time_sec,\n                    end_sec: 5,\n                    url: o.local_file.toNativeURL().replace(\"file://\", \"\"),\n                    ...o,\n                })\n            );\n            return ret;\n        },\n        update_amix(o) {\n            if (!window.UGCApp) {\n                window.console.log(\"no ugcapp\");\n                return;\n            }\n\n            let found = this.amix.filter((i) => i.id == o.id);\n            if (!found.length) return;\n            else found = found[0];\n\n            UGCApp.ffplay.command(\n                \"ep|ugc_movie@slave\" + o.id,\n                o.end_sec.toFixed(0)\n            );\n            UGCApp.ffplay.command(\n                \"offset|ugc_movie@slave\" + o.id,\n                o.offset_sec.toFixed(0)\n            );\n            UGCApp.ffplay.command(\n                \"visible|overlay_opengl@slave\" + o.id,\n                o.active ? \"0\" : \"1\"\n            );\n        },\n        overlay: [], //坐标基于 dar * 1000\n        add_overlay(o, poster) {\n            let ret;\n            let overlay = poster ? this.poster.overlay : this.overlay;\n            overlay.push(\n                (ret = {\n                    id: overlayIdSeq++,\n                    new: true,\n                    x: 0,\n                    y: 0,\n                    w: 0,\n                    h: 0,\n                    rotate: 0,\n                    active: false,\n                    offset_sec: Math.max(0, this.time_sec - 0.05),\n                    end_sec: 3,\n                    url: \"\",\n                    ...o,\n                })\n            );\n\n            Log.verbose(\"add overlay:\", ret);\n            return ret;\n        },\n        async update_overlay(o, poster) {\n            let found = (poster ? this.poster.overlay : this.overlay).filter(\n                (i) => i.id == o.id\n            );\n            if (!found.length) return;\n            else found = found[0];\n\n            let scale = this.preview_resolution[0] / this.resolution_dar[0];\n            let allPromise = [];\n            allPromise.push(\n                THIS.ffplayCommand(\n                    \"w|overlay_opengl@slave\" + o.id,\n                    (o.w * scale).toEven()\n                )\n            );\n            allPromise.push(\n                THIS.ffplayCommand(\n                    \"h|overlay_opengl@slave\" + o.id,\n                    (o.h * scale).toEven()\n                )\n            );\n            allPromise.push(\n                THIS.ffplayCommand(\"a|overlay_opengl@slave\" + o.id, o.rotate)\n            );\n            allPromise.push(\n                THIS.ffplayCommand(\n                    \"x|overlay_opengl@slave\" + o.id,\n                    (o.x * scale).toFixed(0)\n                )\n            );\n            allPromise.push(\n                THIS.ffplayCommand(\n                    \"y|overlay_opengl@slave\" + o.id,\n                    (o.y * scale).toFixed(0)\n                )\n            );\n            // allPromise.push(THIS.ffplayCommand(\n            //     \"sp|ugc_movie@slave\"+o.id, (o.start_sec).toFixed(0)\n            // ));\n            allPromise.push(\n                THIS.ffplayCommand(\n                    \"ep|ugc_movie@slave\" + o.id,\n                    o.end_sec.toFixed(3)\n                )\n            );\n            allPromise.push(\n                THIS.ffplayCommand(\n                    \"offset|ugc_movie@slave\" + o.id,\n                    o.offset_sec.toFixed(3)\n                )\n            );\n            allPromise.push(\n                THIS.ffplayCommand(\n                    \"visible|overlay_opengl@slave\" + o.id,\n                    o.active ? \"0\" : \"1\"\n                )\n            );\n\n            await Promise.all(allPromise);\n\n            Log.verbose(\"update overlay:\", o);\n        },\n        remove_overlay(id) {\n            //overlay\n            if (this.overlay.filter((i) => i.id == id).length) {\n                let idx = [-1, ...this.overlay].reduce((pre, nxt, idx) => {\n                    return nxt.id == id ? idx - 1 : pre;\n                });\n                // 不能对 this.overlay 重新复制。否则部分控件会丢失this.overlay的引用\n                this.overlay.splice(idx, 1);\n            }\n            //poseter overlay\n            if (this.poster.overlay.filter((i) => i.id == id).length) {\n                let idx = [-1, ...this.poster.overlay].reduce(\n                    (pre, nxt, idx) => {\n                        return nxt.id == id ? idx - 1 : pre;\n                    }\n                );\n                // 不能对 this.overlay 重新复制。否则部分控件会丢失this.overlay的引用\n                this.poster.overlay.splice(idx, 1);\n            }\n            //amix\n            if (this.amix.filter((i) => i.id == id).length) {\n                let idx = [-1, ...this.amix].reduce((pre, nxt, idx) => {\n                    return nxt.id == id ? idx - 1 : pre;\n                });\n                // 不能对 this.overlay 重新复制。否则部分控件会丢失this.overlay的引用\n                this.amix.splice(idx, 1);\n            }\n            //mosic\n            if (this.mosic.filter((i) => i.id == id).length) {\n                let idx = [-1, ...this.mosic].reduce((pre, nxt, idx) => {\n                    return nxt.id == id ? idx - 1 : pre;\n                });\n                // 不能对 this.overlay 重新复制。否则部分控件会丢失this.overlay的引用\n                this.mosic.splice(idx, 1);\n            }\n        },\n        _transform_source: null, // 马赛克滤镜\n        get transform_source() {\n            return this._transform_source || \"\";\n        },\n        set transform_source(v) {\n            this._transform_source = v;\n        },\n        mosic: [], //坐标基于 dar * 1000\n        mosic_source: null, // 马赛克滤镜\n        add_mosic(o) {\n            let ret;\n            let mosic = this.mosic;\n            mosic.push(\n                (ret = {\n                    id: overlayIdSeq++,\n                    type: Const.Overlay.Type.Mosic,\n                    new: false,\n                    x: 0,\n                    y: 0,\n                    w: 0,\n                    h: 0,\n                    rotate: 0,\n                    active: false,\n                    offset_sec: Math.max(0, this.time_sec - 0.05),\n                    end_sec: 3,\n                    ...o,\n                })\n            );\n            Log.verbose(\"add mosic:\", ret);\n            return ret;\n        },\n        update_mosic(o) {\n            if (!window.UGCApp) {\n                window.console.log(\"no ugcapp\");\n                return;\n            }\n\n            let found = this.mosic.filter((i) => i.id == o.id);\n            if (!found.length) return;\n            else found = found[0];\n\n            let scale = this.preview_resolution[0] / this.resolution_dar[0];\n\n            UGCApp.ffplay.command(\n                \"rect|glfilter@mosic\" + o.id,\n                [\n                    (o.x * scale).toFixed(0),\n                    (o.y * scale).toFixed(0),\n                    (o.w * scale).toFixed(0),\n                    (o.h * scale).toFixed(0),\n                ].join(\",\")\n            );\n            UGCApp.ffplay.command(\n                \"ep|glfilter@mosic\" + o.id,\n                o.end_sec.toFixed(3)\n            );\n            UGCApp.ffplay.command(\n                \"offset|glfilter@mosic\" + o.id,\n                o.offset_sec.toFixed(3)\n            );\n            UGCApp.ffplay.command(\"percent|glfilter@mosic\" + o.id, \"100\");\n            Log.verbose(\"update mosic:\", o);\n        },\n        filter: [],\n        set filter_source(s) {\n            UGCApp.ffplay.command(\n                \"source|glfilter@filter\",\n                s.replace(\"file://\", \"\")\n            );\n        },\n        set filter_reset(s) {\n            UGCApp.ffplay.command(\"reset|glfilter@filter\", s);\n        },\n        set filter_percent(p) {\n            UGCApp.ffplay.command(\"percent|glfilter@filter\", p);\n        },\n        get filter_percent() {\n            return (\n                (this.filter && this.filter.length && this.filter[0].percent) ||\n                100\n            );\n        },\n        face: {\n            beauty_level: 0,\n            beauty_source: \"\",\n        },\n        set beauty_source(s) {\n            s = s.replace(\"file://\", \"\");\n\n            if (this.face.beauty_source == s) return;\n\n            this.face.beauty_source = s;\n            UGCApp.ffplay.command(\"source|glfilter@beauty\", s);\n        },\n        set beauty_level(l) {\n            this.face.beauty_level = l;\n            UGCApp.ffplay.command(\"percent|glfilter@beauty\", l * 10);\n        },\n        get beauty_level() {\n            return this.face.beauty_level;\n        },\n        video: {\n            cut: [0, 0, 0, 0],\n            dar: DARPreset.auto, //target dar\n        },\n        audio: {\n            _volume: 100,\n            get volume() {\n                return this._volume;\n            },\n            set volume(v) {\n                UGCApp.ffplay.command(\"volume|volume@master\", v / 100);\n                this._volume = v;\n            },\n        },\n        bgm: {\n            _volume: 100,\n            get volume() {\n                return this._volume;\n            },\n            set volume(v) {\n                UGCApp.ffplay.command(\"volume|volume@bgm\", v / 100);\n                this._volume = v;\n            },\n            url: \"\",\n        },\n        poster: {\n            url: \"\",\n            rotate: 0, // 视频旋转后，封面也加上旋转角度，重新设置封面的时候清除\n            overlay: [],\n        },\n        set dar(v) {\n            // update overlay Rect\n            let old = this.resolution_dar;\n            this.video.dar = v;\n            let dar = this.resolution_dar;\n\n            let scale = old[0] / dar[0];\n            [...this.overlay, ...this.mosic].forEach((o) => {\n                let center = [\n                    (o.x + o.w / 2) / old[0],\n                    (o.y + o.h / 2) / old[1],\n                ];\n                o.w /= scale;\n                o.h /= scale;\n                o.x = center[0] * dar[0] - o.w / 2;\n                o.y = center[1] * dar[1] - o.h / 2;\n            });\n        },\n        get dar() {\n            // 加了撤销，不能使用==DARPreset.auto了\n            let isAuto = !Object.keys(DARPreset.auto).find(\n                (k) => this.video.dar[k] != DARPreset.auto[k]\n            );\n            if (!isAuto) return this.video.dar;\n            else if (this.timelines.length == 0) return [0, 0];\n            else {\n                return [\n                    // this.getRotatedWidth(this.timelines[0]),\n                    // this.getRotatedHeight(this.timelines[0]),\n                    this.timelines[0].width,\n                    this.timelines[0].height,\n                ];\n            }\n        },\n        get dar_d() {\n            return this.dar[0] / this.dar[1];\n        },\n        get resolution_dar() {\n            //用来布局的参考尺寸，根据dar生成\n            if (this.dar[0] < 100 || this.dar[1] < 100)\n                return this.dar.map((o) => o * 1000);\n            else return this.dar;\n        },\n        get resolution_box_src() {\n            let ret;\n            if (!this.timelines.length) ret = [0, 0];\n            else if (this.timelines.length == 1)\n                ret = [\n                    this.getRotatedWidth(this.timelines[0]),\n                    this.getRotatedHeight(this.timelines[0]),\n                ];\n            else\n                ret = this.timelines.reduce((pre, nxt, idx) => {\n                    if (idx == 1)\n                        pre = [\n                            this.getRotatedWidth(pre),\n                            this.getRotatedHeight(pre),\n                        ];\n                    return [\n                        Math.max(pre[0], this.getRotatedWidth(nxt)),\n                        Math.max(pre[1], this.getRotatedHeight(nxt)),\n                    ];\n                });\n\n            return [ret[0].toEven(), ret[1].toEven()];\n        },\n        previewparam: {\n            resolution_box: [1920, 1920],\n            // resolution_box:[640,640],\n        },\n        get preview_resolution() {\n            //不能大于源的最大尺寸\n            let maxWidth = Math.min(\n                this.resolution_box_src[0],\n                this.previewparam.resolution_box[0]\n            );\n            let maxHeight = Math.min(\n                this.resolution_box_src[1],\n                this.previewparam.resolution_box[1]\n            );\n\n            if (this.dar_d > 1)\n                return [maxWidth.toEven(), (maxWidth / this.dar_d).toEven()];\n            else return [(maxHeight * this.dar_d).toEven(), maxHeight.toEven()];\n        },\n        encodeparam: {\n            preset: \"low\",\n            hardware_encoder: true,\n            resolution_box: [0, 0],\n            bitrate: 0,\n        },\n        get low_encodeparam() {\n            let ret = {\n                ...this.encodeparam,\n                resolution_box: [960, 960],\n            };\n\n            //不能大于源的最大尺寸\n            let maxWidth = Math.min(\n                this.resolution_box_src[0],\n                ret.resolution_box[0]\n            );\n            let maxHeight = Math.min(\n                this.resolution_box_src[1],\n                ret.resolution_box[1]\n            );\n\n            if (this.dar_d > 1)\n                ret.resolution = [\n                    maxWidth.toEven(),\n                    (maxWidth / this.dar_d).toEven(),\n                ];\n            else\n                ret.resolution = [\n                    (maxHeight * this.dar_d).toEven(),\n                    maxHeight.toEven(),\n                ];\n\n            ret.bitrate = Math.min(ret.resolution[0], ret.resolution[1]) * 2;\n\n            return ret;\n        },\n        get high_encodeparam() {\n            let ret = {\n                ...this.encodeparam,\n                resolution_box: [1920, 1920],\n                // resolution_box:[3840,3840],\n            };\n\n            //不能大于源的最大尺寸\n            let maxWidth = Math.min(\n                this.resolution_box_src[0],\n                ret.resolution_box[0]\n            );\n            let maxHeight = Math.min(\n                this.resolution_box_src[1],\n                ret.resolution_box[1]\n            );\n\n            if (this.dar_d > 1)\n                ret.resolution = [\n                    maxWidth.toEven(),\n                    (maxWidth / this.dar_d).toEven(),\n                ];\n            else\n                ret.resolution = [\n                    (maxHeight * this.dar_d).toEven(),\n                    maxHeight.toEven(),\n                ];\n\n            ret.bitrate = Math.min(ret.resolution[0], ret.resolution[1]) * 3;\n\n            return ret;\n        },\n        get preset_encodeparam() {\n            if (this.encodeparam.preset == \"high\") {\n                return this.high_encodeparam;\n            } else return this.low_encodeparam;\n        },\n    },\n    async ffplayCommand(cmd, args) {\n        return new Promise((o, x) => {\n            UGCApp.ffplay.command(cmd, args, o, x);\n        });\n    },\n    getUGCParam(opt) {\n        let editlist = THIS.editlist;\n        let timelines = THIS.editlist.timelines;\n\n        let main_w = opt.resolution[0]; //editlist.preview_resolution[0];//timelines[0].width;\n        let main_h = opt.resolution[1]; //editlist.preview_resolution[1];//timelines[0].height;\n        let poster = opt.poster;\n        let oformat = opt.oformat || \"rgba\";\n\n        let endingTimeline = null;\n        // if(timelines.length && timelines[timelines.length - 1].ending) {\n        //     endingTimeline = timelines[timelines.length - 1];\n        //     timelines = timelines.slice(0, timelines.length - 1);\n        // }\n\n        let input = \"\";\n\n        if (timelines.length <= 0) return \"\";\n\n        let gltransform = 1;\n\n        //处理 timelines\n        if (gltransform) {\n            let movie =\n                \"ugc_movie@master{idx}='{src}':sp={sp}:ep={ep}:s=v+a[v{idx}][a{idx}]\" +\n                // + \",[v{idx}]format=yuv420p,scale={w}:{h},format=rgba[v{idx}]\"\n                // + \",[v{idx}]hwdownload,format=yuv420p[v{idx}]\"\n                \",[v{idx}]{ending}gltransform=w={w}:h={h}:rotate={transpose}:oformat={oformat}[v{idx}]\";\n            // + \",[v{idx}]eq@master{idx}=contrast={contrast}:brightness={brightness}:saturation={saturation}:gamma={gamma}[v{idx}]\"\n            let concat =\n                \"[v{in}][a{in}][v{idx}][a{idx}]ugc_concat@master{idx}=delta_ts={delta}:v=1:a=1[v{idx}][a{idx}]\";\n\n            let RotateToTranspose = {\n                0: \"0\",\n                90: \"1\",\n                180: \"2\",\n                270: \"3\",\n            };\n\n            let width = main_w;\n            let height = main_h;\n\n            let item = timelines[0];\n            let transpose = (item.src_rotate + item.rotate) % 360;\n\n            if (transpose == 90 || transpose == 270) {\n                width = main_h;\n                height = main_w;\n            }\n            input = movie\n                .replace(/{idx}/g, 0)\n                .replace(\"{src}\", item.url.replace(\"file://\", \"\"))\n                .replace(\"{sp}\", item.start_sec)\n                .replace(\"{ep}\", item.end_sec)\n                .replace(/{w}/g, width)\n                .replace(/{h}/g, height)\n                .replace(\n                    \"{source}\",\n                    THIS.editlist.transform_source.replace(\"file://\", \"\")\n                )\n                .replace(\"{transpose}\", RotateToTranspose[transpose] || \"0\")\n                .replace(\"{contrast}\", item.eq.contrast)\n                .replace(\"{brightness}\", item.eq.brightness)\n                .replace(\"{saturation}\", item.eq.saturation)\n                .replace(\"{gamma}\", item.eq.gamma)\n                .replace(/{oformat}/g, oformat)\n                .replace(\n                    \"{ending}\",\n                    item.ending ? \"format=rgba,hwupload,\" : \"\"\n                );\n\n            if (timelines.length > 1) {\n                input = [input, ...timelines.slice(1)].reduce(\n                    (pre, nxt, idx) => {\n                        let transpose = (nxt.src_rotate + nxt.rotate) % 360;\n                        width = main_w;\n                        height = main_h;\n\n                        if (transpose == 90 || transpose == 270) {\n                            width = main_h;\n                            height = main_w;\n                        }\n                        return (\n                            pre +\n                            \",\" +\n                            movie\n                                .replace(/{idx}/g, idx)\n                                .replace(\n                                    \"{src}\",\n                                    nxt.url.replace(\"file://\", \"\")\n                                )\n                                .replace(\"{sp}\", nxt.start_sec)\n                                .replace(\"{ep}\", nxt.end_sec)\n                                .replace(/{w}/g, width)\n                                .replace(/{h}/g, height)\n                                .replace(\n                                    \"{source}\",\n                                    THIS.editlist.transform_source.replace(\n                                        \"file://\",\n                                        \"\"\n                                    )\n                                )\n                                .replace(\n                                    \"{transpose}\",\n                                    RotateToTranspose[transpose] || \"0\"\n                                )\n                                .replace(\"{contrast}\", nxt.eq.contrast)\n                                .replace(\"{brightness}\", nxt.eq.brightness)\n                                .replace(\"{saturation}\", nxt.eq.saturation)\n                                .replace(\"{gamma}\", nxt.eq.gamma)\n                                .replace(/{oformat}/g, oformat)\n                                .replace(\n                                    \"{ending}\",\n                                    nxt.ending ? \"format=rgba,hwupload,\" : \"\"\n                                ) +\n                            \",\" +\n                            concat\n                                .replace(/{in}/g, idx - 1)\n                                .replace(/{idx}/g, idx)\n                                .replace(\"{delta}\", nxt.offset_sec)\n                        );\n                    }\n                );\n            }\n\n            let max_num = timelines.length - 1;\n\n            input = input\n                .replace(new RegExp(\"\\\\[v\" + max_num + \"\\\\]\", \"g\"), \"[out1]\")\n                .replace(new RegExp(\"\\\\[a\" + max_num + \"\\\\]\", \"g\"), \"[out0]\");\n        }\n        //处理 timelines\n        else {\n            let movie =\n                \"ugc_movie@master{idx}={src}:sp={sp}:ep={ep}:s=v+a[v{idx}][a{idx}]\" +\n                \",[v{idx}]scale={w}:{h}:force_original_aspect_ratio=decrease,pad={w}:{h}:(ow-iw)/2:(oh-ih)/2,{transpose}{vflip}{hflip}setsar=1/1[v{idx}]\" +\n                \",[v{idx}]eq@master{idx}=contrast={contrast}:brightness={brightness}:saturation={saturation}:gamma={gamma}[v{idx}]\";\n            let concat =\n                \"[v{in}][a{in}][v{idx}][a{idx}]ugc_concat@master{idx}=delta_ts={delta}:v=1:a=1[v{idx}][a{idx}]\";\n\n            let RotateToTranspose = {\n                0: \"\",\n                90: \"transpose=1,\",\n                180: \"hflip,vflip,\",\n                270: \"transpose=2,\",\n            };\n\n            let width = main_w;\n            let height = main_h;\n\n            let item = timelines[0];\n            let transpose = (item.src_rotate + item.rotate) % 360;\n\n            if (transpose == 90 || transpose == 270) {\n                width = main_h;\n                height = main_w;\n            }\n            input = movie\n                .replace(/{idx}/g, 0)\n                .replace(\"{src}\", item.url.replace(\"file://\", \"\"))\n                .replace(\"{sp}\", item.start_sec)\n                .replace(\"{ep}\", item.end_sec)\n                .replace(/{w}/g, width)\n                .replace(/{h}/g, height)\n                .replace(\"{transpose}\", RotateToTranspose[transpose])\n                .replace(\"{vflip}\", item.vflip ? \"vflip,\" : \"\")\n                .replace(\"{hflip}\", item.hflip ? \"hflip,\" : \"\")\n                .replace(\"{contrast}\", item.eq.contrast)\n                .replace(\"{brightness}\", item.eq.brightness)\n                .replace(\"{saturation}\", item.eq.saturation)\n                .replace(\"{gamma}\", item.eq.gamma);\n\n            if (timelines.length > 1) {\n                input = [input, ...timelines.slice(1)].reduce(\n                    (pre, nxt, idx) => {\n                        let transpose = (nxt.src_rotate + nxt.rotate) % 360;\n                        width = main_w;\n                        height = main_h;\n                        if (transpose == 90 || transpose == 270) {\n                            width = main_h;\n                            height = main_w;\n                        }\n\n                        return (\n                            pre +\n                            \",\" +\n                            movie\n                                .replace(/{idx}/g, idx)\n                                .replace(\n                                    \"{src}\",\n                                    nxt.url.replace(\"file://\", \"\")\n                                )\n                                .replace(\"{sp}\", nxt.start_sec)\n                                .replace(\"{ep}\", nxt.end_sec)\n                                .replace(/{w}/g, width)\n                                .replace(/{h}/g, height)\n                                .replace(\n                                    \"{transpose}\",\n                                    RotateToTranspose[transpose]\n                                )\n                                .replace(\"{vflip}\", nxt.vflip ? \"vflip,\" : \"\")\n                                .replace(\"{hflip}\", nxt.hflip ? \"hflip,\" : \"\")\n                                .replace(\"{contrast}\", nxt.eq.contrast)\n                                .replace(\"{brightness}\", nxt.eq.brightness)\n                                .replace(\"{saturation}\", nxt.eq.saturation)\n                                .replace(\"{gamma}\", nxt.eq.gamma) +\n                            \",\" +\n                            concat\n                                .replace(/{in}/g, idx - 1)\n                                .replace(/{idx}/g, idx)\n                                .replace(\"{delta}\", nxt.offset_sec)\n                        );\n                    }\n                );\n            }\n\n            let max_num = timelines.length - 1;\n\n            // 片尾\n            if (timelines.length > 0 && endingTimeline && !poster) {\n                let movie =\n                    \"ugc_movie@master{idx}={src}:ep={ep}:s=v+a[v{idx}][a{idx}]\" +\n                    \",[v{idx}]scale={w}:{h}:force_original_aspect_ratio=decrease,pad={w}:{h}:(ow-iw)/2:(oh-ih)/2,{transpose}{vflip}{hflip}setsar=1/1[v{idx}]\" +\n                    \",[v{idx}]eq@master{idx}=contrast={contrast}:brightness={brightness}:saturation={saturation}:gamma={gamma}[v{idx}]\";\n\n                let concat =\n                    \"[v{in}][a{in}][v{idx}][a{idx}]ugc_concat@master{idx}=delta_ts={delta}:v=1:a=1[v{idx}][a{idx}]\";\n                let idx = timelines.length;\n                let width = main_w;\n                let height = main_h;\n                input +=\n                    \",\" +\n                    movie\n                        .replace(/{idx}/g, idx)\n                        .replace(\n                            \"{src}\",\n                            endingTimeline.url.replace(\"file://\", \"\")\n                        )\n                        .replace(/{ep}/g, endingTimeline.end_sec)\n                        .replace(/{w}/g, width)\n                        .replace(/{h}/g, height)\n                        .replace(\"{transpose}\", RotateToTranspose[0])\n                        .replace(\n                            \"{vflip}\",\n                            endingTimeline.vflip ? \"vflip,\" : \"\"\n                        )\n                        .replace(\n                            \"{hflip}\",\n                            endingTimeline.hflip ? \"hflip,\" : \"\"\n                        )\n                        .replace(\"{contrast}\", endingTimeline.eq.contrast)\n                        .replace(\"{brightness}\", endingTimeline.eq.brightness)\n                        .replace(\"{saturation}\", endingTimeline.eq.saturation)\n                        .replace(\"{gamma}\", endingTimeline.eq.gamma) +\n                    \",\" +\n                    concat\n                        .replace(/{in}/g, idx - 1)\n                        .replace(/{idx}/g, idx)\n                        .replace(\"{delta}\", endingTimeline.offset_sec);\n\n                max_num++;\n            }\n\n            input = input\n                .replace(new RegExp(\"\\\\[v\" + max_num + \"\\\\]\", \"g\"), \"[out1]\")\n                .replace(new RegExp(\"\\\\[a\" + max_num + \"\\\\]\", \"g\"), \"[out0]\");\n        }\n\n        //处理 filters\n        if (editlist.filter.length) {\n            input +=\n                \",[out1]\" +\n                editlist.filter\n                    .map((i) => {\n                        let lutpng = \"\";\n                        if (i.local_file_list && i.local_file_list.length) {\n                            lutpng =\n                                \":lutpng=\" +\n                                i.local_file_list\n                                    .map((i) =>\n                                        i.toNativeURL().replace(\"file://\", \"\")\n                                    )\n                                    .join(\"|\");\n                        }\n\n                        return \"glfilter@filter=source={source}{lutpng}:percent={percent}\"\n                            .replace(\n                                \"{source}\",\n                                i.local_file\n                                    .toNativeURL()\n                                    .replace(\"file://\", \"\")\n                            )\n                            .replace(\"{lutpng}\", lutpng)\n                            .replace(\"{percent}\", i.percent || 0);\n                    })\n                    .reduce((pre, nxt) => {\n                        return pre + \",\" + nxt;\n                    }) +\n                \"[out1]\";\n        } else {\n            input += \",[out1]glfilter@filter=percent=100[out1]\";\n        }\n\n        //处理 mosic\n        if (editlist.mosic.length) {\n            let scale = main_w / editlist.resolution_dar[0];\n            input +=\n                \",[out1]\" +\n                editlist.mosic\n                    .map((i) => {\n                        // :x={x}:y={y}:w={w}:h={h}:offset={ss}:ep={t}\n                        return \"glfilter@mosic{id}=source={source}:percent={percent}:x={x}:y={y}:w={w}:h={h}:offset={ss}:ep={t}\"\n                            .replace(\n                                \"{source}\",\n                                editlist.mosic_source.replace(\"file://\", \"\")\n                            )\n                            .replace(\"{percent}\", 100)\n                            .replace(/{ss}/g, +i.offset_sec.toFixed(2) || 0)\n                            .replace(/{t}/g, i.end_sec)\n                            .replace(\"{w}\", +(i.w * scale).toEven())\n                            .replace(\"{h}\", +(i.h * scale).toEven())\n                            .replace(\"{x}\", +(i.x * scale).toFixed(0))\n                            .replace(\"{y}\", +(i.y * scale).toFixed(0))\n                            .replace(/{id}/g, i.id);\n                    })\n                    .reduce((pre, nxt) => {\n                        return pre + \",\" + nxt;\n                    }) +\n                \"[out1]\";\n        } else {\n            // input += \",[out1]glfilter@filter[out1]\";\n        }\n\n        //beauty\n        input += \",[out1]glfilter@beauty=source={source}:percent={percent}[out1]\"\n            .replace(\"{source}\", editlist.face.beauty_source)\n            .replace(\"{percent}\", (editlist.face.beauty_level * 10).toFixed(0));\n\n        //处理 overlay\n\n        if (poster)\n            editlist.poster.overlay.forEach((i) => {\n                i.offset_sec = 0;\n                i.end_sec = editlist.total_sec;\n            });\n\n        let overlay = [\n            ...editlist.overlay,\n            ...(poster ? editlist.poster.overlay : []),\n        ];\n        if (overlay.length) {\n            // let template = \"ugc_movie@slave{id}='{url}':offset={ss}:ep={t}:loop=0,\" +\n            //     \"scale@slave{id}={w}:{h},rotate@slave{id}='a={rotate}*PI/180:ow=hypot(iw,ih):oh=ow:c=0x00000000',\"+\n            //     \"[out1]overlay@slave{id}='{x}:{y}:shortest=0:offset={ss}:ep={t}:format=auto'[out1]\"\n            let template =\n                \"ugc_movie@slave{id}='{url}':offset={ss}:ep={t}:loop=0,format=rgba,hwupload,\" +\n                \"[out1]overlay_opengl@slave{id}=x={x}:y={y}:w={w}:h={h}:a={rotate}:offset={ss}:ep={t}[out1]\";\n            let scale = main_w / editlist.resolution_dar[0];\n            let enabled = overlay.filter((o) => o.enabled);\n            input = [input, ...enabled].reduce((pre, nxt) => {\n                let end_sec = nxt.end_sec;\n                let offset_sec = +nxt.offset_sec.toFixed(2) || 0;\n                if (end_sec <= 0) {\n                    end_sec = editlist.total_sec - offset_sec;\n                }\n                // if(poster) {\n                //     offset_sec = 0;\n                //     end_sec = editlist.total_sec;\n                // }\n                return (\n                    pre +\n                    \",\" +\n                    template\n                        .replace(\n                            \"{url}\",\n                            nxt.url.replace(\"file://\", \"\").replace(/[?].*$/, \"\")\n                        )\n                        .replace(/{ss}/g, offset_sec)\n                        .replace(/{t}/g, end_sec)\n                        .replace(\"{w}\", +(nxt.w * scale).toEven())\n                        .replace(\"{h}\", +(nxt.h * scale).toEven())\n                        .replace(\"{x}\", +(nxt.x * scale).toFixed(0))\n                        .replace(\"{y}\", +(nxt.y * scale).toFixed(0))\n                        .replace(\"{rotate}\", nxt.rotate)\n                        .replace(/{id}/g, nxt.id)\n                );\n            });\n        }\n\n        //处理 poster\n\n        if (!poster && editlist.poster.url) {\n            // 加上offset,ep在调整第一段视频的开始时间时才会一直显示在前面\n            // let template = \"ugc_movie@slave{id}='{url}':offset=0:ep=0.1,\" +\n            // \"scale@slave{id}={w}:{h},\"+\n            // \"[out1]overlay@slave{id}={x}:{y}:shortest=0:offset=0:ep=0.1:format=auto[out1]\";\n\n            // input = input + \",\" +template\n            //         .replace(\"{url}\", editlist.poster.url.replace(\"file://\",\"\").replace(/[?].*$/, \"\"))\n            //         .replace(\"{w}\", main_w)\n            //         .replace(\"{h}\", main_h)\n            //         .replace(\"{x}\", '0')\n            //         .replace(\"{y}\", '0')\n            //         .replace(/{id}/g, '0')\n\n            let template =\n                \"ugc_movie@slave{id}='{url}':offset=0:ep=0.1:loop=0,format=rgba,hwupload,\" +\n                \"[out1]overlay_opengl@slave{id}=x={x}:y={y}:w={w}:h={h}:a={rotate}:offset=0:ep=0.1[out1]\";\n            // 修正视频旋转封面没旋转的问题（修改封面时会将rotate置0）\n            let width = main_w;\n            let height = main_h;\n            let rotate = editlist.poster.rotate;\n\n            // if(rotate % 180 != 0) {\n            //     width = main_h;\n            //     height = main_w;\n            // }\n\n            // let box = Math.hypot(width, height);\n            // let x =  (main_w - box)/ 2;\n            // let y =  (main_h - box)/ 2;\n\n            input =\n                input +\n                \",\" +\n                template\n                    .replace(\n                        \"{url}\",\n                        editlist.poster.url\n                            .replace(\"file://\", \"\")\n                            .replace(/[?].*$/, \"\")\n                    )\n                    .replace(\"{w}\", width)\n                    .replace(\"{h}\", height)\n                    .replace(\"{x}\", 0)\n                    .replace(\"{y}\", 0)\n                    .replace(\"{rotate}\", rotate)\n                    .replace(/{id}/g, \"0\");\n        }\n\n        //处理 audio\n        {\n            input += \",[out0]volume@master={volume}[out0]\".replace(\n                \"{volume}\",\n                editlist.audio.volume / 100\n            );\n        }\n\n        //处理 amix\n        {\n            let template =\n                \"ugc_movie@slave{id}='{url}':offset={ss}:ep={t}:sp=0:loop=0:s=a,\" +\n                \"[out0]amix@slave{id}=offset={ss}:ep={t}[out0]\";\n            input = [input, ...editlist.amix].reduce((pre, nxt) => {\n                let end_sec = nxt.end_sec;\n                if (end_sec <= 0) {\n                    end_sec = editlist.total_sec - nxt.offset_Sec;\n                }\n                return (\n                    pre +\n                    \",\" +\n                    template\n                        .replace(\"{url}\", nxt.url.replace(\"file://\", \"\"))\n                        .replace(/{ss}/g, +nxt.offset_sec.toFixed(2) || 0)\n                        .replace(/{t}/g, end_sec)\n                        .replace(/{id}/g, nxt.id)\n                );\n            });\n        }\n\n        //处理 BGM\n        if (editlist.bgm && editlist.bgm.url) {\n            input += \",ugc_movie@slave999='{url}':sp=0:ep={t}:offset=0:loop=0:s=a[ba0],[ba0]volume@bgm={volume}[ba0],[out0][ba0]amix@slave999=offset=0:ep={t}:duration=shortest[out0]\"\n                .replace(\n                    \"{url}\",\n                    decodeURIComponent(editlist.bgm.url.replace(\"file://\", \"\"))\n                )\n                .replace(/{t}/g, editlist.total_sec)\n                .replace(\"{volume}\", editlist.bgm.volume / 100);\n        }\n\n        return input;\n    },\n    getLoglevel() {\n        switch (Log.loglevel) {\n            case Log.Level.debug:\n                return \"debug\";\n            case Log.Level.verbose:\n                return \"verbose\";\n            case Log.Level.info:\n                return \"info\";\n            case Log.Level.warn:\n                return \"warning\";\n            case Log.Level.error:\n                return \"error\";\n            case Log.Level.silient:\n                return \"quiet\";\n        }\n\n        return \"error\";\n    },\n    getPosterPlayerParam(ugcParamOnly) {\n        let cmd = `ffplay -hide_banner -nostats -loglevel ${this.getLoglevel()} -ss {ss} -f ugc -i \"{src}\"`;\n\n        let ugcparam = this.getUGCParam({\n            resolution: this.editlist.preview_resolution,\n            poster: true,\n            oformat: \"opengl\",\n        });\n\n        cmd = cmd\n            .replace(\"{ss}\", this.editlist.time_sec)\n            .replace(\"{src}\", ugcparam);\n        return ugcParamOnly ? ugcparam : cmd;\n    },\n    getPlayerParam(ugcParamOnly) {\n        // 加入 -an 切到后台回来后会黑屏\n        let cmd = `ffplay -hide_banner -nostats -loglevel ${this.getLoglevel()} -ss {ss} -f ugc -i \"{src}\"`;\n        // let cmd = `ffplay -hide_banner -loglevel verbose -ss {ss} -i \"${this.editlist.timelines[0].url}\"`;\n        let ugcparam = this.getUGCParam({\n            resolution: this.editlist.preview_resolution,\n            oformat: \"opengl\",\n        });\n\n        cmd = cmd\n            .replace(\"{ss}\", this.editlist.time_sec)\n            .replace(\"{src}\", ugcparam);\n\n        // window.console.log(cmd);\n\n        // return `ffplay -f ugc -i testsrc2,gltransform=source=${this.editlist.transform_source.replace(\"file://\",\"\")}:w=320:h=240:oformat=rgba`;\n        // return `ffplay -loglevel verbose -ss ${this.editlist.time_sec} -f ugc -i \"ugc_movie@master0=${this.editlist.poster.url.replace(\"file://\",\"\")}:ep=0.1\"`\n        return ugcParamOnly ? ugcparam : cmd;\n    },\n    getExportParam(des) {\n        //\n        // 在 oppo a73 android 7.1.1 上  main 2.2/4.0 编码初始化失败\n        //\n\n        let cmd = `ffmpeg -hide_banner -loglevel ${this.getLoglevel()} -f ugc -i \"{src}\" -acodec aac -b:v {b:v} -preset fast -profile:v high -vcodec {vcodec} -use_editlist 0 -movflags faststart -f mp4 -y {des}`;\n        // let cmd = `ffmpeg -hide_banner -loglevel verbose -noautorotate -f ugc  -i \"ugc_movie@master0=${this.editlist.timelines[0].url}:sp=0:ep=50:s=v+a[out0][out1]\" -acodec aac -vcodec h264_videotoolbox -use_editlist 0 -f mp4 -y {des}`;\n        // let cmd = `ffmpeg -hide_banner -loglevel verbose -noautorotate -hwaccel videotoolbox -hwaccel_output_format videotoolbox_vld  -i \"${this.editlist.timelines[0].url}\" -acodec aac -vcodec h264_videotoolbox -use_editlist 0 -f mp4 -y {des}`;\n\n        let encodeparam = this.editlist.preset_encodeparam;\n\n        // let des = cordova.file.cacheDirectory + \"output.mp4\";\n\n        let vcodec = \"h264\";\n        if (CordovaModel.isAndroid() && encodeparam.hardware_encoder) {\n            vcodec = \"libhw_avc\";\n            // 使用 h264_mediacodec 解码时间戳错乱，不可用\n            // vdcodec = \"-vcodec h264_mediacodec\";\n        }\n        if (CordovaModel.isIOS() && encodeparam.hardware_encoder) {\n            vcodec = \"h264_videotoolbox\";\n            // 使用 videotoolbox 解码更慢，原因不明\n            // vdcodec = \"h264 -hwaccel videotoolbox\";\n        }\n\n        let ugccmd = this.getUGCParam({\n            resolution: encodeparam.resolution,\n            oformat: \"opengl\",\n        });\n\n        if (vcodec == \"h264\") {\n            ugccmd += \",[out1]hwdownload,format=rgba,format=yuv420p[out1]\";\n        }\n\n        cmd = cmd\n            .replace(\"{vcodec}\", vcodec)\n            .replace(\"{b:v}\", encodeparam.bitrate + \"k\")\n            .replace(\"{src}\", ugccmd)\n            .replace(\"{des}\", des);\n\n        return cmd;\n    },\n};\n\nexport default THIS;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"native-video-main\",class:{show:_vm.showscreen}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"native-video-main\" :class=\"{show:showscreen}\"></div>\n</template>\n<style scoped>\n.native-video-main {\n    background: black !important;\n}\n.native-video-main.show {\n    background: transparent !important;\n}\n</style>\n<script>\n/***\n * 输入：src, play, pause, seek\n *\n * 输出：position, duration\n *\n * 事件：meta, timeupdate\n */\nimport cordovaModel from \"../model/CordovaModel\";\nimport ResizeObserver from \"resize-observer-polyfill\";\nimport throttle from \"lodash.throttle\";\nimport Log from \"../model/Log\";\n\nlet EventID = {\n    EnterForeground: -1,\n    Meta: 1,\n    Render: 2,\n    Timeupdate: 3,\n    Finished: 4,\n    Error: 5,\n    End: 6,\n    SeekDone: 7,\n    toString(id) {\n        for (let i in EventID) {\n            if (EventID[i] == id) return i;\n        }\n    },\n};\n\nlet FFPlay = {\n    rect() {},\n    play() {},\n    running() {},\n    pause() {},\n    stop() {},\n    seek() {},\n    duration() {},\n    position() {},\n    mute() {},\n    thumb() {},\n    refresh() {},\n    setEventCallback() {},\n};\n\nexport default {\n    data() {\n        return {\n            cmd: \"\",\n            ready: false,\n            playing: false,\n            loaded: false,\n            keep_screen: false,\n            lastPosition: 0,\n            timeupdateTmr: null,\n            seeking: false,\n            throttle_ing: false,\n        };\n    },\n    computed: {\n        showscreen() {\n            return true; // this.loaded || this.keep_screen;\n        },\n    },\n    watch: {\n        playing(p) {\n            this.$emit(\"playing\", p);\n        },\n    },\n    methods: {\n        async resize() {\n            let rect = this.$el.getBoundingClientRect();\n            Log.verbose(`[player] resize: ${JSON.stringify(rect)}`);\n            await this.rect(rect);\n            this.$emit(\"resize\");\n        },\n        async rect(_rect) {\n            let rect = {\n                x: _rect.left,\n                y: _rect.top,\n                width: _rect.right - _rect.left,\n                height: _rect.bottom - _rect.top,\n            };\n\n            if (!rect.width || !rect.height) return;\n\n            Log.verbose(\n                \"[player] update player rect: \" +\n                    [rect.x, rect.y, rect.width, rect.height].join(\",\")\n            );\n            await new Promise(\n                FFPlay.rect.bind(null, rect.x, rect.y, rect.width, rect.height)\n            );\n\n            // android: 修改尺寸后，刷新有问题，原因不明，这里强制再刷新一次，临时解决\n            await new Promise((o) => setTimeout(o, 150));\n            await new Promise(FFPlay.refresh.bind(null));\n        },\n        async reload(cmd) {\n            Log.verbose(`[player] reload: ${cmd.replace(\"ffplay\", \"\")}`);\n            FFPlay.command(\"reload|ffplay\", cmd);\n        },\n        async load(cmd) {\n            await this.stop();\n            this.ready = false;\n            this.playing = false;\n            this.loaded = false;\n            this.seeking = false;\n            this.throttle_ing = false;\n            this.cmd = cmd;\n\n            FFPlay.setEventCallback(this.onEvent);\n            if (cmd) {\n                Log.info(\"[player] load player\");\n                Log.verbose(\n                    \"reload player param: \" + cmd.replace(\"ffplay\", \"\")\n                );\n                this.$emit(\"loading\");\n\n                await new Promise(FFPlay.play.bind(null, cmd));\n\n                await new Promise((o, x) => {\n                    let timeout = 15 * 1000;\n                    let i = setInterval(() => {\n                        timeout -= 100;\n                        if (timeout < 0) {\n                            clearInterval(i);\n                            x(\"failed to wait NativePlayer.load\");\n                        } else if (this.loaded) {\n                            clearInterval(i);\n                            o();\n                        }\n                    }, 100);\n                });\n            }\n        },\n        async running() {\n            return await new Promise(FFPlay.running);\n        },\n        resume() {\n            this.playing = true;\n            FFPlay.mute(0);\n            FFPlay.resume();\n            Log.verbose(`[player] resume`);\n        },\n        pause() {\n            this.playing = false;\n            FFPlay.mute(1);\n            FFPlay.pause();\n            Log.verbose(`[player] pause`);\n        },\n        async stop(keep_screen) {\n            this.playing = false;\n            Log.verbose(`[player] stop`);\n            let ret = await new Promise(FFPlay.stop.bind(null, !!keep_screen));\n            return ret;\n        },\n        async doSeek2(pos) {\n            if (pos == -1) pos = await this.duration();\n\n            this.lastPosition = pos;\n            this.playing = false;\n            this.$emit(\"loading\");\n            FFPlay.seek(pos);\n            this.throttle_ing = false;\n        },\n        doSeek: throttle(async function (sec) {\n            if (sec == -1) sec = await this.duration();\n\n            this.lastPosition = sec;\n            this.playing = false;\n            this.$emit(\"loading\");\n            FFPlay.seek(sec);\n\n            this.throttle_ing = false;\n        }, 100),\n        seek(sec) {\n            this.seeking = true;\n            this.throttle_ing = true;\n            this.doSeek(sec);\n        },\n        async duration() {\n            return await new Promise(FFPlay.duration);\n        },\n        async position() {\n            return await new Promise(FFPlay.position);\n        },\n        onResume() {\n            FFPlay.refresh();\n        },\n        checkAndSendLoaddone() {\n            if (this.loaded && !this.seeking && !this.throttle_ing) {\n                this.$emit(\"loaddone\");\n            }\n        },\n        async onEvent(event) {\n            Log.verbose(\"got player event: \" + EventID.toString(event));\n            switch (event) {\n                case EventID.EnterForeground:\n                    {\n                        // （旧问题备注）目前，使用过一次 ugc activity 后，再次进入后，切换到后台，再回到前台会黑屏，这里强制reload一次解决\n                        // 已修正 SDL，目前没有这个问题。\n                        // this.$emit(\"needreload\");\n                    }\n                    break;\n                case EventID.Meta:\n                    {\n                        //先让 rect 生效，然后再加载播放器\n                        // await new Promise( o=>setTimeout(o, 500));\n                        // FFPlay.refresh();\n                        this.$emit(\"meta\", {\n                            duration: await this.duration(),\n                        });\n                    }\n                    break;\n                case EventID.Render:\n                    {\n                        if (!this.loaded) {\n                            await new Promise((o) => setTimeout(o, 100));\n                            await this.resize();\n                            this.loaded = true;\n                        }\n                        this.$emit(\"render\");\n                        this.checkAndSendLoaddone();\n                    }\n                    break;\n                case EventID.Timeupdate:\n                    {\n                        // this.$emit(\"timeupdate\",\n                        //     await this.position()\n                        // );\n                    }\n                    break;\n                case EventID.Finished:\n                    {\n                        this.$emit(\"finished\");\n                        if (this.seeking && !this.throttle_ing) {\n                            this.seeking = false;\n                            this.$emit(\"seekdone\");\n                        }\n                        this.checkAndSendLoaddone();\n                    }\n                    break;\n                case EventID.End:\n                    {\n                        this.loaded = false;\n                        this.$emit(\"end\");\n                    }\n                    break;\n                case EventID.SeekDone:\n                    {\n                        if (!this.throttle_ing) this.seeking = false;\n                        this.$emit(\"seekdone\");\n                        this.checkAndSendLoaddone();\n                    }\n                    break;\n            }\n        },\n    },\n    mounted() {\n        if (cordovaModel.isCordova()) {\n            FFPlay = UGCApp.ffplay;\n            this.resize();\n\n            document.addEventListener(\"resume\", this.onResume, false);\n        }\n\n        this._resizeOb = new ResizeObserver(() => {\n            this.resize();\n        });\n\n        this._resizeOb.observe(this.$el);\n    },\n    beforeDestroy() {\n        document.removeEventListener(\"resume\", this.onResume, false);\n        this._resizeOb.disconnect();\n    },\n};\n</script>","import mod from \"-!../../../webui/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../webui/node_modules/thread-loader/dist/cjs.js!../../../webui/node_modules/babel-loader/lib/index.js!../../../webui/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../webui/node_modules/vue-loader/lib/index.js??vue-loader-options!./NativeVideo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../webui/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../webui/node_modules/thread-loader/dist/cjs.js!../../../webui/node_modules/babel-loader/lib/index.js!../../../webui/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../webui/node_modules/vue-loader/lib/index.js??vue-loader-options!./NativeVideo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NativeVideo.vue?vue&type=template&id=1a42391a&scoped=true&\"\nimport script from \"./NativeVideo.vue?vue&type=script&lang=js&\"\nexport * from \"./NativeVideo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NativeVideo.vue?vue&type=style&index=0&id=1a42391a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../webui/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a42391a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <NativeVideo\n        ref=\"video\"\n        @resize=\"$emit('resize')\"\n        @meta=\"$emit('render')\"\n        @playing=\"$emit('playing',$event)\"\n        @finished=\"$emit('finished')\"\n        @render=\"$emit('render')\"\n        @loading=\"$emit('loading')\"\n        @loaddone=\"$emit('loaddone')\"\n        @timeupdate=\"$emit('timeupdate',$event)\"\n    />\n</template>\n<style scoped>\n</style>\n<script>\nimport Editlist from \"../model/Editlist\";\nimport NativeVideo from \"../components/NativeVideo\";\nimport UGCRes from \"../model/UGCResourceManager\";\nimport Log from \"../model/Log\";\n\nlet FFPlayInstance = null;\n\nexport default {\n    components: { NativeVideo },\n    props: [\"pause\", \"postermode\"],\n    data() {\n        return {};\n    },\n    watch: {\n        pause(p) {\n            if (p) this.$refs.video.pause();\n            else this.$refs.video.resume();\n        },\n    },\n    methods: {\n        seek(sec) {\n            if (sec === undefined) sec = Editlist.editlist.time_sec;\n            this.$refs.video.seek(sec);\n        },\n        async stop() {\n            this.loaded = false;\n            await this.$refs.video.stop();\n        },\n        async makeThumb() {\n            let dir = await UGCRes.getTempFolder();\n\n            // 撤销的需求，不能覆盖原来的文件\n            let fileName =\n                \"poster_\" +\n                Math.random().toString(16).replace(\"0.\", \"\") +\n                \".jpg\";\n\n            let des = dir.nativeURL + \"/\" + fileName;\n\n            try {\n                let ret = await this.thumb(des);\n                if (ret) {\n                    // 等一下再试一次\n                    await new Promise((o) => {\n                        setTimeout(o, 500);\n                    });\n                    let ret = await this.$refs.preview.thumb(des);\n\n                    if (ret) throw new Error(\"make poster error\" + ret);\n                }\n\n                Editlist.editlist.poster.url = des + \"?\" + Math.random();\n                Editlist.editlist.poster.rotate = 0;\n            } catch (e) {\n                this.$snotify.error(\"截取封面失败\");\n            }\n        },\n        async thumb(des) {\n            let ret = await new Promise(\n                UGCApp.ffplay.thumb.bind(null, des.replace(\"file://\", \"\"))\n            );\n            return ret;\n        },\n        async position() {\n            return await new Promise(UGCApp.ffplay.position);\n        },\n        async reload() {\n            // ffplay 实例不在这个 player ，重新加载\n            // ffplay 未运行，重新加载\n            if (\n                !(FFPlayInstance == this) ||\n                !(await this.$refs.video.running())\n            ) {\n                return await this.load();\n            }\n\n            this.throttle_ing = this.seeking = false;\n\n            let cmd = this.postermode\n                ? Editlist.getPosterPlayerParam(true)\n                : Editlist.getPlayerParam(true);\n\n            await this.$refs.video.reload(cmd);\n        },\n        async load() {\n            // if (!Editlist.editlist.transform_source) {\n            //     try {\n            //         Editlist.editlist.transform_source = await UGCRes.getTransformSource();\n            //         window.transform_source =\n            //             Editlist.editlist.transform_source;\n            //     } catch (e) {\n            //         //get error\n            //         Log.error(\"get player transform glsl failed\");\n            //     }\n            // }\n\n            FFPlayInstance = this;\n            this.throttle_ing = this.seeking = false;\n            if (this.postermode)\n                await this.$refs.video.load(Editlist.getPosterPlayerParam());\n            else await this.$refs.video.load(Editlist.getPlayerParam());\n\n            if (!Editlist.editlist.poster.url) await this.makeThumb();\n        },\n    },\n};\n</script>","import mod from \"-!../../../webui/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../webui/node_modules/thread-loader/dist/cjs.js!../../../webui/node_modules/babel-loader/lib/index.js!../../../webui/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../webui/node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewPlayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../webui/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../webui/node_modules/thread-loader/dist/cjs.js!../../../webui/node_modules/babel-loader/lib/index.js!../../../webui/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../webui/node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewPlayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PreviewPlayer.vue?vue&type=template&id=5c8ea6fe&scoped=true&\"\nimport script from \"./PreviewPlayer.vue?vue&type=script&lang=js&\"\nexport * from \"./PreviewPlayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../webui/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5c8ea6fe\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._t(\"default\",null,{\"progress\":_vm.exportProgress,\"error\":_vm.error})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <slot :progress=\"exportProgress\" :error=\"error\"></slot>\n    </div>\n</template>\n<style scoped>\n</style>\n<script>\nimport Editlist from \"../model/Editlist\";\nimport CordovaModel from \"../model/CordovaModel\";\nimport Log from \"../model/Log\";\n\nlet Transcode = {\n    async thumb(src, des, ss, duration, span) {\n        let timebase = 1000000;\n        // TODO 加入旋转参数\n        return await new Promise(\n            UGCApp.ffmpeg.thumb.bind(\n                null,\n                src,\n                des,\n                ss * timebase,\n                duration * timebase,\n                span * timebase\n            )\n        );\n    },\n};\n\nexport default {\n    Transcode,\n    props: [],\n    data() {\n        return {\n            error: \"\",\n            exportProgress: 0,\n        };\n    },\n    methods: {\n        async begin() {\n            let config = await CordovaModel.getConfig();\n            if (!config.output) {\n                // 如果客户没指定输出文件，使用默认文件\n                config.output = cordova.file.cacheDirectory + \"output.mp4\";\n                CordovaModel.setConfig(config);\n                Log.info(\n                    `config.output not set, use default: ${config.output}`\n                );\n            }\n\n            // 导出到客户调用SDK时指定的文件\n            let des = config.output.replace(\"file://\", \"\");\n\n            let cmd = Editlist.getExportParam(des);\n            Log.info(\"begin export\");\n            Log.verbose(`begin export with param: ${cmd}`);\n            let ret = await new Promise(UGCApp.ffmpeg.start.bind(null, cmd));\n            if (ret) {\n                this.error = \"导出未能开始：\" + ret;\n                Log.error(`export failed: ${this.error}`);\n                this.$emit(\"error\", {\n                    code: ret,\n                    message: this.error,\n                });\n                return;\n            }\n\n            let total_sec = Editlist.editlist.total_sec;\n            let progress_sec = 0;\n            let status;\n            let progress;\n\n            await new Promise((o) => {\n                setTimeout(o, 1000);\n            });\n\n            do {\n                status = await new Promise(UGCApp.ffmpeg.status);\n                progress = await new Promise(UGCApp.ffmpeg.progress);\n                progress_sec = progress.pts / 1000;\n\n                this.exportProgress = +Math.max(\n                    0,\n                    Math.min(100, (progress_sec / total_sec) * 100)\n                ).toFixed(1);\n\n                this.$emit(\"progress\", this.exportProgress);\n\n                await new Promise((o) => {\n                    setTimeout(o, 500);\n                });\n                Log.verbose(\n                    \"export progress:\" + progress.pts + \", status:\" + status\n                );\n            } while (status == 1);\n\n            let result = await new Promise(UGCApp.ffmpeg.report);\n\n            if (result == 0) {\n                let desSrc;\n                if (CordovaModel.isIOS()) {\n                    // await new Promise((o, x) => UGCApp.sendToDCIM(des, o, x));\n                    desSrc = (await CordovaModel.getCdvUrl(des)).replace(\n                        \"cdvfile:\",\n                        \"http:\"\n                    );\n                } else {\n                    // await new Promise((o, x) => UGCApp.sendToDCIM(des, o, x));\n                    desSrc = await CordovaModel.getCdvUrl(des);\n                }\n\n                // export poster\n                try {\n                    if (!config.output_thumb) {\n                        // 如果客户没指定输出文件，使用默认文件\n                        config.output_thumb =\n                            cordova.file.cacheDirectory + \"output.jpg\";\n                        CordovaModel.setConfig(config);\n                        Log.info(\n                            `config.output_thumb not set, use default: ${config.output_thumb}`\n                        );\n                    }\n                    // 复制封面到指定输出目录，如果没指定则放到app的cahce/poster/下\n                    await this.copyPosterTo(config.output_thumb);\n                } catch (error) {\n                    this.error = \"导出封面失败\";\n                    Log.error(`export poster failed: ${this.error}`);\n                    this.$emit(\"error\", {\n                        code: result,\n                        message: this.error,\n                    });\n                }\n\n                this.$emit(\"success\", desSrc);\n            } else {\n                this.error = \"导出失败\";\n                Log.error(`export failed: ${this.error}, ret:${result}`);\n                this.$emit(\"error\", {\n                    code: result,\n                    message: this.error,\n                });\n            }\n        },\n        async cancel() {\n            await new Promise(UGCApp.ffmpeg.cancel);\n        },\n        // 导出封面图， cache/tmp下的文件会被删除，需要复制到cache/poster或参数指定的目录下\n        async copyPosterTo(outputFile) {\n            let posterUrl = Editlist.editlist.poster.url;\n            if (\"/\" == posterUrl[0]) {\n                posterUrl = \"file://\" + posterUrl;\n            }\n            if (\"/\" == outputFile[0]) {\n                outputFile = \"file://\" + outputFile;\n            }\n\n            let posterFileEntity = await new Promise(\n                resolveLocalFileSystemURL.bind(window, posterUrl)\n            );\n\n            // create export dir\n            let outDirEntity = null;\n            let outDir = outputFile.split(\"/\").slice(0, -1).join(\"/\");\n            let outName = outputFile.split(\"/\").reverse()[0];\n\n            try {\n                let outFileEntity = await new Promise(\n                    resolveLocalFileSystemURL.bind(window, outputFile)\n                );\n                outFileEntity.remove();\n            } catch (e) {\n                //\n            }\n\n            outDirEntity = await new Promise(\n                resolveLocalFileSystemURL.bind(window, outDir)\n            );\n\n            // copy poster\n            return await new Promise(\n                posterFileEntity.copyTo.bind(\n                    posterFileEntity,\n                    outDirEntity,\n                    outName\n                )\n            );\n        },\n        async createPoster() {\n            let dir = await UGCRes.getTempFolder();\n\n            let des =\n                dir.nativeURL +\n                \"/poster_\" +\n                String(Math.random()).replace(\"0.\", \"\") +\n                \".jpg\";\n            des = des.replace(\"file://\", \"\");\n            let ret = await new Promise(UGCApp.ffplay.thumb.bind(null, des));\n            if (!ret) {\n                Log.error(\"make poster error:\" + ret);\n                // return;\n            }\n            this.posterUrl = des;\n            this.isTempPoster = true;\n        },\n    },\n    async mouted() {\n        await new Promise(UGCApp.ffplay.stop.bind(null, false));\n    },\n    beforeDestroy() {\n        this.cancel();\n    },\n};\n</script>","import mod from \"-!../../../webui/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../webui/node_modules/thread-loader/dist/cjs.js!../../../webui/node_modules/babel-loader/lib/index.js!../../../webui/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../webui/node_modules/vue-loader/lib/index.js??vue-loader-options!./Export.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../webui/node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../webui/node_modules/thread-loader/dist/cjs.js!../../../webui/node_modules/babel-loader/lib/index.js!../../../webui/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../webui/node_modules/vue-loader/lib/index.js??vue-loader-options!./Export.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Export.vue?vue&type=template&id=3eb2ec04&scoped=true&\"\nimport script from \"./Export.vue?vue&type=script&lang=js&\"\nexport * from \"./Export.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../webui/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3eb2ec04\",\n  null\n  \n)\n\nexport default component.exports","import PreviewPlayer from \"./components/PreviewPlayer\";\nimport Export from \"./components/Export\";\nimport CordovaModel from \"./model/CordovaModel\";\nimport Editlist from \"./model/Editlist\";\nimport UGCResourceManager from \"./model/UGCResourceManager\";\nimport Log from \"./model/Log\";\nimport Const from \"./const\";\n\nconst install = function(Vue) {\n    Vue.component(\"PreviewPlayer\", PreviewPlayer);\n    Vue.component(\"Export\", Export);\n};\n\n/* istanbul ignore if */\nif (typeof window !== \"undefined\" && window.Vue) {\n    install(window.Vue);\n}\n\nexport {\n    Const,\n    Log,\n    PreviewPlayer,\n    Export,\n    CordovaModel,\n    Editlist,\n    UGCResourceManager,\n};\n\nexport default {\n    version: \"1.1.2\",\n    install,\n    Const,\n    Log,\n    PreviewPlayer,\n    Export,\n    CordovaModel,\n    Editlist,\n    UGCResourceManager,\n};\n","import { Const } from \"jsugc-websdk\";\r\nlet i;\r\nlet ret = {\r\n    CaptureVideo: {\r\n        Duration: 10 * 60, //seconds\r\n    },\r\n    Operate: {\r\n        Init: Operate(\"初始\", (i = 0)),\r\n        VideoAdd: Operate(\"添加视频\", ++i),\r\n        VideoSplit: Operate(\"分割视频\", ++i),\r\n        VideoTimeModify: Operate(\"视频时间修改\", ++i),\r\n        VideoRemove: Operate(\"删除视频\", ++i),\r\n        VideoParamsModify: Operate(\"视频参数修改\", ++i),\r\n        VideoSort: Operate(\"视频排序\", ++i),\r\n        VideoRotate: Operate(\"视频旋转\", ++i),\r\n        VideoVFlip: Operate(\"上下翻转视频\", ++i),\r\n        VideoHFlip: Operate(\"左右翻转视频\", ++i),\r\n        VideoAspect: Operate(\"画幅比例修改\", ++i),\r\n        PosterModify: Operate(\"封面修改\", ++i),\r\n        EndingModify: Operate(\"片尾修改\", ++i),\r\n        ImageAdd: Operate(\"添加贴纸\", ++i),\r\n        ImageRemove: Operate(\"删除贴纸\", ++i),\r\n        ImageModify: Operate(\"贴纸修改\", ++i),\r\n        ImageTimeModify: Operate(\"贴纸时间修改\", ++i),\r\n        MosicAdd: Operate(\"添加马赛克\", ++i),\r\n        MosicRemove: Operate(\"删除马赛克\", ++i),\r\n        MosicModify: Operate(\"马赛克修改\", ++i),\r\n        MosicTimeModify: Operate(\"马赛克时间修改\", ++i),\r\n        TextAdd: Operate(\"添加文字\", ++i),\r\n        TextRemove: Operate(\"删除文字\", ++i),\r\n        TextModify: Operate(\"文字修改\", ++i),\r\n        TextTimeModify: Operate(\"文字时间修改\", ++i),\r\n        FilterEnable: Operate(\"启用滤镜\", ++i),\r\n        FilterDisable: Operate(\"关闭滤镜\", ++i),\r\n        FilterModify: Operate(\"滤镜参数修改\", ++i),\r\n        FaceEnable: Operate(\"启用美颜\", ++i),\r\n        FaceDisable: Operate(\"关闭美颜\", ++i),\r\n        FaceModify: Operate(\"美颜参数修改\", ++i),\r\n        BGMSet: Operate(\"设置背景音\", ++i),\r\n        BGMUnset: Operate(\"删除背景音\", ++i),\r\n        BGMParamsModify: Operate(\"背景音参数修改\", ++i),\r\n        AudioParamsModify: Operate(\"音频参数修改\", ++i),\r\n        AudioEffectAdd: Operate(\"添加音效\", ++i),\r\n        AudioEffectRemove: Operate(\"删除音效\", ++i),\r\n        AudioEffectModify: Operate(\"音效修改\", ++i),\r\n        AudioEffectTimeModify: Operate(\"音效时间修改\", ++i),\r\n        AutoModify: Operate(\"自动调整\", ++i),\r\n    },\r\n    ...Const,\r\n};\r\n\r\nfunction Operate(Name, Type, Reload) {\r\n    return {\r\n        Name,\r\n        Type,\r\n        Reload,\r\n    };\r\n}\r\n\r\nexport default ret;\r\n","/**\r\n * 保留10位小数：\r\n * 比较时使用，消除浮点算数错误导致的比较错误\r\n * @param {*} val\r\n */\r\nexport function roundFloat(val) {\r\n    return +val.toFixed(10);\r\n}\r\n\r\n/**\r\n * ox, oy: 原点\r\n * sx, sy: 源\r\n * degrees: 旋转角度\r\n */\r\nexport function rotateVector(ox, oy, sx, sy, degrees) {\r\n    sx -= ox;\r\n    sy -= oy;\r\n\r\n    let radians = (degrees * Math.PI) / 180;\r\n    let x = sx * Math.cos(radians) - sy * Math.sin(radians);\r\n    let y = sx * Math.sin(radians) + sy * Math.cos(radians);\r\n\r\n    return {\r\n        x: x + ox,\r\n        y: y + oy,\r\n    };\r\n}\r\n","import { Editlist, Log } from \"jsugc-websdk\";\nimport extend from \"extend\";\nimport Const from \"@/const\";\nexport default {\n    // 操作历史\n    operateHistory: [],\n    async undo(playerRef) {\n        let his = this.undoOperateHistory();\n        if (his) {\n            let undoOp = his.undo; // 被撤销的操作和数据\n            let restoreOp = his.restore; // 被撤销的操作的前一个操作和数据\n\n            let restoreArray = (target, src) => {\n                target.splice(0, target.length);\n                src.forEach((e) => target.push(extend(true, {}, e)));\n            };\n\n            restoreArray(Editlist.editlist.timelines, restoreOp.timelines);\n            restoreArray(Editlist.editlist.amix, restoreOp.amix);\n            restoreArray(Editlist.editlist.overlay, restoreOp.overlay);\n            restoreArray(Editlist.editlist.mosic, restoreOp.mosic);\n            restoreArray(Editlist.editlist.filter, restoreOp.filter);\n\n            Editlist.editlist.face = restoreOp.face;\n            Editlist.editlist.video = restoreOp.video;\n            Editlist.editlist.audio = restoreOp.audio;\n            Editlist.editlist.bgm = restoreOp.bgm;\n            Editlist.editlist.poster = restoreOp.poster;\n\n            let undoOpKey = Object.keys(Const.Operate).find(\n                (k) => Const.Operate[k].Type == undoOp.operateType\n            );\n\n            let target;\n            switch (undoOp.operateType) {\n                case Const.Operate.VideoRemove.Type:\n                    target = Editlist.editlist.timelines.find(\n                        (e) => undoOp.targetId == e.id\n                    );\n                    target.active = true;\n                    playerRef.seek(target.offset_sec);\n                    break;\n            }\n\n            if (Editlist.editlist.time_sec > Editlist.editlist.total_sec) {\n                playerRef.seek(Editlist.editlist.total_sec);\n            }\n\n            // playerRef.pause = true;\n            // this.$refs.overlayEditor.blur();\n            // if (this.activeItem) {\n            //     this.activeItem.active = false;\n            // }\n\n            playerRef.reload();\n\n            return \"撤销 \" + Const.Operate[undoOpKey].Name;\n            // this.$mResToast.success(\n            //     \"撤销 \" + Const.Operate[undoOpKey].Name\n            // );\n            // window.console.log(\"undo: \", restoreOp);\n        } else {\n            // this.$mResToast.success(\"没有可撤销的内容了！\");\n            return \"没有可撤销的内容了！\";\n        }\n    },\n    undoOperateHistory() {\n        let ops = this.getOperateHistory();\n        if (ops && ops.length > 1) {\n            let undo = ops.pop();\n\n            this.saveOperateHistory(ops);\n\n            return {\n                restore: extend(true, {}, ops[ops.length - 1]),\n                undo: extend(true, {}, undo),\n                history: ops,\n            };\n        }\n    },\n    getOperateHistory() {\n        if (!this.operateHistory) {\n            try {\n                // return this.operateHistory = JSON.parse(sessionStorage.getItem(\"operate-history\"));\n            } catch (error) {\n                //\n            }\n        }\n        return this.operateHistory || [];\n    },\n    createOperateHistory(operateType, targetId) {\n        let editlist = Editlist.editlist;\n        let op = extend(\n            true,\n            {},\n            {\n                operateType: operateType,\n                targetId: targetId,\n                timelines: editlist.timelines,\n                amix: editlist.amix,\n                overlay: editlist.overlay,\n                mosic: editlist.mosic,\n                filter: editlist.filter,\n                face: editlist.face,\n                video: editlist.video,\n                audio: editlist.audio,\n                bgm: editlist.bgm,\n                poster: editlist.poster,\n            }\n        );\n        // op.timelines.forEach(e => e.thumbs = []);\n        op.amix.forEach((e) => (e.active = false));\n        op.overlay.forEach((e) => {\n            e.active = false;\n            e.enabled = true;\n        });\n        op.mosic.forEach((e) => {\n            e.active = false;\n            e.enabled = true;\n        });\n\n        Log.verbose(\"create operate history: \", op);\n        return this.pushOperateHistory(op);\n    },\n    // 1.ClipImg自动设置贴纸的位置和尺寸后调用此方法更新之前创建的“贴纸新增”、“马赛克新增”历史\n    // 因为“新增”历史中没有位置和尺寸信息会导致撤销后缩在左上角\n    // 2.TimelineItemThumb生成预览图时调用此方法更新之前创建的“视频新增”历史\n    // 因为“新增”历史中没有预览图会导致撤销后排序里图片显示为空\n    // target: 贴纸或马赛克、timeline\n    updateOperateHistory(operateType, target) {\n        let ops = this.getOperateHistory();\n        let lastOp = ops[ops.length - 1];\n        if (!lastOp) {\n            return ops;\n        }\n\n        if (lastOp.operateType == operateType) {\n            if (operateType == Const.Operate.MosicAdd.Type) {\n                let oldMosic = lastOp.mosic.find((e) => e.id == target.id);\n                if (oldMosic) {\n                    extend(oldMosic, target);\n                    oldMosic.active = false;\n                    oldMosic.enabled = true;\n                }\n            } else if (operateType == Const.Operate.ImageAdd.Type) {\n                let oldOverlay = lastOp.overlay.find(\n                    (e) =>\n                        e.type == Const.Overlay.Type.Image && e.id == target.id\n                );\n                if (oldOverlay) {\n                    extend(oldOverlay, target);\n                    oldOverlay.active = false;\n                    oldOverlay.enabled = true;\n                }\n            } else if (operateType == Const.Operate.TextAdd.Type) {\n                let oldOverlay = lastOp.overlay.find(\n                    (e) =>\n                        e.type == Const.Overlay.Type.Text && e.id == target.id\n                );\n                if (oldOverlay) {\n                    extend(oldOverlay, target);\n                    oldOverlay.active = false;\n                    oldOverlay.enabled = true;\n                }\n            }\n        }\n        // 需要特殊处理Const.Operate.Init.Type\n        if (operateType == Const.Operate.VideoAdd.Type) {\n            if (\n                lastOp.operateType == operateType ||\n                lastOp.operateType == Const.Operate.Init.Type\n            ) {\n                let oldTimeline = lastOp.timelines.find(\n                    (e) => e.id == target.id\n                );\n                if (oldTimeline) {\n                    oldTimeline.thumbs = [];\n                    extend(oldTimeline, target);\n                }\n            }\n        }\n\n        Log.verbose(\"update operate history: \", lastOp);\n        return this.saveOperateHistory(ops);\n    },\n    pushOperateHistory(data) {\n        let ops = this.getOperateHistory();\n        ops.push(data);\n        if (ops.length > 200) {\n            ops.splice(0, 1);\n        }\n        return this.saveOperateHistory(ops);\n    },\n    saveOperateHistory(ops) {\n        try {\n            this.operateHistory = ops;\n            // sessionStorage.setItem(\"operate-history\", JSON.stringify(ops));\n            // 历史存到内存就行了\n        } catch (error) {\n            //\n        }\n        return ops;\n    },\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-title\"},[_c('mu-button',{attrs:{\"large\":\"\",\"icon\":\"\"},on:{\"click\":_vm.exit}},[_c('mu-icon',{attrs:{\"color\":\"white\",\"size\":\"36\",\"value\":\"chevron_left\"}})],1),_c('div',{staticStyle:{\"width\":\"100%\",\"text-align\":\"center\"}}),_c('mu-button',{ref:\"showDlgBtn\",attrs:{\"icon\":\"\",\"large\":\"\"},on:{\"click\":_vm.showDlg}},[_c('mu-icon',{attrs:{\"color\":_vm.setting?'red':'white',\"size\":\"24\",\"value\":\"settings\"}})],1),_c('mu-button',{attrs:{\"color\":\"red\",\"small\":\"\",\"round\":\"\"},on:{\"click\":function($event){return _vm.$emit('export')}}},[_vm._v(\"导出\")]),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.setting),expression:\"setting\"}],ref:\"dlg\",staticClass:\"settings-dlg\",attrs:{\"tabindex\":\"-1\"},on:{\"blur\":_vm.blur}},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"setting-title\"},[_vm._v(\"导出设置\")]),_c('div',{staticClass:\"content-top\"},[_c('div',{staticClass:\"content-item\",class:{active:_vm.encodeparam.preset=='high'},on:{\"click\":function($event){_vm.encodeparam.preset='high'}}},[_vm._v(\" 视频质量优先 \"),_c('div',{staticClass:\"content-desc\"},[_vm._v(\"质量更加，生成速度较慢\")]),_c('div',{staticClass:\"content-resolution\"},[_vm._v(\"分辨率 \"+_vm._s(_vm.high_resolution))])]),_c('div',{staticClass:\"content-item\",class:{active:_vm.encodeparam.preset=='low'},on:{\"click\":function($event){_vm.encodeparam.preset='low'}}},[_vm._v(\" 视频大小优先 \"),_c('div',{staticClass:\"content-desc\"},[_vm._v(\"大小更少，生成速度较快\")]),_c('div',{staticClass:\"content-resolution\"},[_vm._v(\"分辨率 \"+_vm._s(_vm.low_resolution))])])]),_c('div',{staticClass:\"content-other\"},[_vm._v(\" 硬编码 \"),_c('mu-switch',{on:{\"change\":_vm.focus},model:{value:(_vm.encodeparam.hardware_encoder),callback:function ($$v) {_vm.$set(_vm.encodeparam, \"hardware_encoder\", $$v)},expression:\"encodeparam.hardware_encoder\"}})],1)])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"main-title\">\n        <mu-button large icon @click=\"exit\">\n            <mu-icon color=\"white\" size=\"36\" value=\"chevron_left\" />\n        </mu-button>\n        <div style=\"width:100%;text-align:center\"></div>\n        <!-- <div class=\"title-text\" style=\"width:100%;\">视频剪辑</div> -->\n\n        <mu-button ref=\"showDlgBtn\" @click=\"showDlg\" icon large>\n            <mu-icon :color=\"setting?'red':'white'\" size=\"24\" value=\"settings\" />\n        </mu-button>\n        <mu-button @click=\"$emit('export')\" color=\"red\" small round>导出</mu-button>\n        <transition name=\"fade\">\n            <div ref=\"dlg\" v-show=\"setting\" tabindex=\"-1\" @blur=\"blur\" class=\"settings-dlg\">\n                <div class=\"content\">\n                    <div class=\"setting-title\">导出设置</div>\n                    <div class=\"content-top\">\n                        <div\n                            @click=\"encodeparam.preset='high'\"\n                            :class=\"{active:encodeparam.preset=='high'}\"\n                            class=\"content-item\"\n                        >\n                            视频质量优先\n                            <div class=\"content-desc\">质量更加，生成速度较慢</div>\n                            <div class=\"content-resolution\">分辨率 {{high_resolution}}</div>\n                        </div>\n                        <div\n                            @click=\"encodeparam.preset='low'\"\n                            :class=\"{active:encodeparam.preset=='low'}\"\n                            class=\"content-item\"\n                        >\n                            视频大小优先\n                            <div class=\"content-desc\">大小更少，生成速度较快</div>\n                            <div class=\"content-resolution\">分辨率 {{low_resolution}}</div>\n                        </div>\n                    </div>\n                    <div class=\"content-other\">\n                        硬编码\n                        <mu-switch @change=\"focus\" v-model=\"encodeparam.hardware_encoder\"></mu-switch>\n                    </div>\n                </div>\n            </div>\n        </transition>\n    </div>\n</template>\n<style lang=\"less\" scoped>\n.fade-enter-active,\n.fade-leave-active {\n    transition: opacity 0.5s;\n}\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\n    opacity: 0;\n}\n.main-title {\n    display: flex;\n    color: white;\n    align-items: center;\n    padding-right: 20px;\n    flex: 0 0 56px;\n}\n.title-text {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    text-align: center;\n}\n\n.settings-dlg {\n    width: 100%;\n    top: 45px;\n    position: absolute;\n    padding: 10px 0;\n    outline: 0;\n    z-index: 100;\n    overflow: hidden;\n    left: 0;\n    .content {\n        background: #272727;\n        border-top: 1px solid;\n        border-image: linear-gradient(\n                90deg,\n                transparent,\n                rgba(255, 0, 0, 0.4),\n                transparent\n            )\n            1 10;\n        box-shadow: 0px 0px 5px #000;\n        border-radius: 3px;\n        .setting-title {\n            padding: 10px;\n            text-align: center;\n            border-bottom: 1px solid #444;\n        }\n        .content-top {\n            display: flex;\n            justify-content: center;\n            .content-item {\n                text-align: center;\n                padding: 10px;\n                background: #444;\n                margin: 10px;\n                border-radius: 3px;\n                border: 1px solid transparent;\n            }\n            .content-item.active {\n                border: 1px solid red;\n            }\n            .content-desc {\n                font-size: 10px;\n                color: #999;\n            }\n            .content-resolution {\n                display: inline-block;\n                padding: 0px 10px;\n                border-radius: 10px;\n                font-size: 10px;\n                background: #333;\n            }\n        }\n        .content-other {\n            border-top: 1px solid #111;\n            padding: 10px 20px;\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n        }\n    }\n}\n</style>\n<script>\nimport { Editlist, CordovaModel, Log } from \"jsugc-websdk\";\n\nexport default {\n    props: [\"overrideBackbutton\"],\n    data() {\n        return {\n            setting: false,\n            encodeparam: Editlist.editlist.encodeparam,\n            low_resolution: \"\",\n            high_resolution: \"\",\n        };\n    },\n    methods: {\n        onBack() {\n            if (this.overrideBackbutton) this.exit();\n        },\n        async exit(force) {\n            if (!this.$data._confirm_ing) {\n                this.$data._confirm_ing = true;\n                if (\n                    force ||\n                    (await this.$confirm(\"是否退出？编辑的内容会丢失\", \"退出\"))\n                        .result\n                ) {\n                    Log.uilog(\"/\", \"exit (without save)\");\n                    CordovaModel.finish({\n                        statusCode: CordovaModel.StatusCode.Cancel,\n                        message: \"用户取消返回\",\n                        output: \"\",\n                        output_thumb: \"\",\n                    });\n                }\n                this.$data._confirm_ing = false;\n            }\n        },\n        updateData() {\n            this.encodeparam = Editlist.editlist.encodeparam;\n            this.low_resolution = Editlist.editlist.low_encodeparam.resolution.join(\n                \"x\"\n            );\n            this.high_resolution = Editlist.editlist.high_encodeparam.resolution.join(\n                \"x\"\n            );\n        },\n        showDlg() {\n            if (!this.setting) {\n                this.updateData();\n                Log.uilog(\"/top\", \"show settings\");\n                this.setting = true;\n                this.$nextTick(() => {\n                    this.$refs.dlg.focus();\n                });\n            } else this.setting = false;\n        },\n        focus() {\n            this.$refs.dlg.focus();\n        },\n        blur(e) {\n            if (\n                e.relatedTarget != this.$refs.showDlgBtn.$el &&\n                !this.$refs.dlg.contains(e.relatedTarget)\n            ) {\n                this.setting = false;\n            }\n        },\n    },\n    mounted() {\n        document.addEventListener(\"backbutton\", this.onBack, false);\n    },\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ClipTop.vue?vue&type=template&id=f9e36f42&scoped=true&\"\nimport script from \"./ClipTop.vue?vue&type=script&lang=js&\"\nexport * from \"./ClipTop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ClipTop.vue?vue&type=style&index=0&id=f9e36f42&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f9e36f42\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"main\",staticClass:\"tool-box\",class:{overlay:_vm.show_overlay||_vm.show_amix},on:{\"touchstart\":_vm.currentStart,\"touchmove\":_vm.currentMove,\"touchend\":function($event){return _vm.changed()}}},[_c('div',{ref:\"mainLine\",staticClass:\"main-line going\",style:(_vm.mainLineStyle)},[(!_vm.postermode)?_c('div',{staticClass:\"video-post-btn\",on:{\"click\":function($event){return _vm.$emit('on_poster_click')}}},[(_vm.poster_url)?[_c('img',{style:(_vm.posterStyles),attrs:{\"src\":_vm.poster_url},on:{\"error\":_vm.posterLoadError}}),_c('span',{staticClass:\"text\"},[_vm._v(\"封面\")])]:[_c('span',{staticClass:\"text add\"},[_vm._v(\"+选择封面\")])]],2):_vm._e(),_c('div',{staticClass:\"main-timeline\"},_vm._l((_vm.timelines),function(i){return _c('TimelineItem',{key:i.id,attrs:{\"pps\":_vm.pps,\"dragging\":i.ending?true:_vm.dragging,\"focus\":_vm.postermode?false:i.focus,\"active\":(i.ending||_vm.postermode)?false:i.active,\"timeline\":i,\"canload_preview\":_vm.preview_render,\"min_sec\":_vm.video_min_sec},on:{\"change\":function($event){return _vm.timelineChange(i.id,$event)},\"active\":function($event){return _vm.timelineActive(i.id,$event)}},nativeOn:{\"click\":function($event){i.ending? _vm.endingClick($event):''}}})}),1),(!_vm.postermode && !_vm.hasEnding)?_c('div',{staticClass:\"video-ending-btn\",on:{\"click\":_vm.endingClick}},[_c('span',[_vm._v(\"+片尾设置\")])]):_vm._e(),(!_vm.postermode && _vm.show_overlay)?_c('div',{staticClass:\"sub-timeline\",staticStyle:{\"margin-top\":\"35px\"}},[_vm._l((_vm.overlay),function(i){return [(i.type & _vm.overlay_type)?_c('TimelineOverlayItem',{key:i.id,attrs:{\"id\":i.id,\"type\":i.type,\"active\":i.active,\"pps\":_vm.pps,\"end_sec\":i.end_sec,\"offset_sec\":i.offset_sec},on:{\"change\":function($event){return _vm.overlayChange(i.id,$event)},\"active\":function($event){return _vm.overlayActive(i.id,$event)}}}):_vm._e()]})],2):_vm._e(),(!_vm.postermode && _vm.show_amix)?_c('div',{staticClass:\"sub-timeline\",staticStyle:{\"margin-top\":\"35px\"}},_vm._l((_vm.amix),function(i){return _c('TimelineOverlayItem',{key:i.id,attrs:{\"id\":i.id,\"is_amix\":true,\"active\":i.active,\"pps\":_vm.pps,\"end_sec\":i.end_sec,\"offset_sec\":i.offset_sec},on:{\"change\":function($event){return _vm.amixChange(i.id,$event)},\"active\":function($event){return _vm.amixActive(i.id,$event)}}})}),1):_vm._e()]),_c('div',{ref:\"current\",staticClass:\"time-tick\"},[_c('div',{staticClass:\"current-time\",class:{dragging:_vm.dragging}},[_vm._v(\" \"+_vm._s(_vm.currentTimeStr)+\" \")])]),_c('div',{staticClass:\"total-time-tick\"},[_vm._v(_vm._s(_vm.totalTimeStr))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\",class:{active:_vm.active, focus:_vm.focus, span:_vm.timeline.offset_sec},style:(_vm.boxStyle),on:{\"touchend\":_vm.toggleActive}},[_c('mu-button',{ref:\"left\",staticClass:\"left-tick\",attrs:{\"flat\":\"\"},nativeOn:{\"touchstart\":function($event){$event.stopPropagation();return _vm.leftStart($event)},\"touchmove\":function($event){$event.stopPropagation();return _vm.leftMove($event)},\"touchend\":function($event){$event.stopPropagation();return _vm.leftEnd($event)}}},[_c('mu-icon',{class:{ dragging: _vm.leftDragging, outbound: _vm.leftOutBound },attrs:{\"value\":\"keyboard_arrow_left\"}})],1),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"thumb\",class:{overlay:_vm.overlay_mode},style:(_vm.thumbStyle)},[(_vm.timeline.ending)?_c('div',{staticClass:\"video-ending\"},[_c('span',[_vm._v(\"片尾设置\")])]):_c('TimelineItemThumb',{attrs:{\"pps\":_vm.pps,\"timeline\":_vm.timeline,\"canload\":_vm.canload_preview}})],1),_c('div',{staticClass:\"border\"})]),_c('mu-button',{ref:\"right\",staticClass:\"right-tick\",nativeOn:{\"touchstart\":function($event){$event.stopPropagation();return _vm.rightStart($event)},\"touchmove\":function($event){$event.stopPropagation();return _vm.rightMove($event)},\"touchend\":function($event){$event.stopPropagation();return _vm.rightEnd($event)}}},[_c('mu-icon',{class:{ dragging: _vm.rightDragging, outbound: _vm.rightOutBound },attrs:{\"value\":\"keyboard_arrow_right\"}})],1),(!_vm.active)?_c('div',{staticClass:\"left-connect\"},[_c('mu-icon',{attrs:{\"size\":12,\"value\":\"insert_link\"}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\"},_vm._l((_vm.thumbs),function(i,idx){return _c('img',{key:idx,style:({left:i.ss*_vm.pps+'px', width:i.duration*_vm.pps+'px'}),attrs:{\"src\":i.url || _vm.firstThumb},on:{\"error\":function($event){return _vm.thumbLoadError(idx)}}})}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"box\">\n        <img\n            v-for=\"(i,idx) in thumbs\"\n            :key=\"idx\"\n            :src=\"i.url || firstThumb\"\n            :style=\"{left:i.ss*pps+'px', width:i.duration*pps+'px'}\"\n            @error=\"thumbLoadError(idx)\"\n        />\n    </div>\n</template>\n<style scoped>\n.box {\n    position: relative;\n}\n.box img {\n    position: absolute;\n}\n</style>\n<script>\nconst DURATION = 10;\nconst SPAN = 1;\n\nimport { Editlist } from \"jsugc-websdk\";\nimport { CordovaModel } from \"jsugc-websdk\";\nimport { UGCResourceManager as UGCRes } from \"jsugc-websdk\";\nimport { Log } from \"jsugc-websdk\";\nimport { Export } from \"jsugc-websdk\";\nimport Const from \"@/const\";\nimport { roundFloat } from \"@/utils\";\nimport OpHistory from \"@/model/History\";\n\nlet thumbsFolders = {}; // 缓存加速\n\nexport default {\n    props: [\"idx\", \"pps\", \"timeline\", \"rotate\", \"canload\"],\n    data() {\n        return {\n            editlist: Editlist.editlist,\n            thumbs: [],\n        };\n    },\n    watch: {\n        \"editlist.time_sec\": \"update\",\n        \"timeline.start_sec\": \"update\",\n        \"timeline.end_sec\": \"update\",\n        async rotate() {\n            // 如果发生旋转，则重新加载\n            // this.thumbs = [];\n            // await this.makeAllThumb();\n            // this.update();\n        },\n        canload(v) {\n            // 延后加载 避免 mediacodec 资源竞争\n            if (v) this.fetchThumb(this.editlist.time_sec);\n        },\n    },\n    computed: {\n        firstThumb() {\n            let thumb = this.thumbs.find((e) => e.url);\n            return thumb && thumb.url;\n        },\n    },\n    methods: {\n        update() {\n            let pts = Editlist.editlist.time_sec;\n            pts -= this.timeline.offset_sec;\n\n            if (\n                pts < -DURATION ||\n                pts > this.timeline.end_sec - this.timeline.start_sec\n            )\n                return;\n            this.fetchThumb(pts);\n            this.fetchThumb(pts - DURATION);\n        },\n        thumbLoadError(index) {\n            if (this.thumbs[index] && this.thumbs[index].url) {\n                this.thumbs.splice(index, 1);\n                this.update();\n            }\n        },\n        async prepareCacheFolder() {\n            let fileName = \"\" + this.timeline.id;\n            if (!thumbsFolders[fileName]) {\n                let fs = await UGCRes.filesystem();\n\n                //测试发现，getDirectory 不支持 exclusive\n\n                let thumbs = await new Promise(\n                    fs.root.getDirectory.bind(fs.root, \"thumbs/\", {\n                        create: true,\n                    })\n                );\n\n                thumbsFolders[fileName] = await new Promise(\n                    thumbs.getDirectory.bind(thumbs, fileName, { create: true })\n                );\n            }\n        },\n        // async makeThumb(){},\n        async makeThumb(src, des, ss, duration, span) {\n            Log.verbose(\"makeThumb:\" + des);\n\n            await this.prepareCacheFolder();\n\n            // TODO 加入旋转参数\n            return await Export.Transcode.thumb(src, des, ss, duration, span);\n        },\n        async fetchThumb(time) {\n            let pts = roundFloat(Math.max(0, time + this.timeline.start_sec));\n\n            if (pts > roundFloat(this.timeline.end_sec)) {\n                return;\n            }\n\n            let thumb = this.thumbs.find(\n                (i) =>\n                    roundFloat(i.ss) <= roundFloat(pts) &&\n                    roundFloat(i.ss + i.duration) >= roundFloat(pts)\n            );\n\n            // window.console.log(\"fetch thumb:\" + pts)\n\n            if (!thumb || thumb.preload) {\n                let ss = pts - (pts % DURATION);\n                let duration = DURATION;\n                let span = SPAN;\n                let timeline = this.timeline;\n\n                let src = timeline.url;\n                let des = \"{path}/thumbs/{id}/thumb_{ss}_{rn}.jpg\"\n                    .replace(\n                        \"{path}\",\n                        cordova.file.tempDirectory ||\n                            cordova.file.cacheDirectory\n                    )\n                    .replace(\"{id}\", timeline.id)\n                    .replace(\"{ss}\", ss)\n                    // 撤销的需求，不能覆盖原来的文件\n                    .replace(\n                        \"{rn}\",\n                        Math.random().toString(16).replace(\"0.\", \"\")\n                    );\n\n                //先插入记录，让后续的请求可以知道，无需重复请求\n\n                let loaded = thumb;\n                if (loaded) {\n                    loaded.loading = true;\n                    delete loaded.preload;\n                } else {\n                    loaded = {\n                        loading: true,\n                        url: \"\",\n                        ss,\n                        duration,\n                    };\n                    this.thumbs.push(loaded);\n                }\n                this.timeline.thumbs = this.thumbs;\n\n                let ret = await this.makeThumb(src, des, ss, duration, span);\n                if (ret) window.console.error(\"make thumb error:\" + ret);\n\n                delete loaded.loading;\n                loaded.url = await CordovaModel.getCdvUrl(des);\n                Log.verbose(\"make thumb:\" + loaded.url);\n\n                if (time == 0) {\n                    OpHistory.updateOperateHistory(\n                        Const.Operate.VideoAdd.Type,\n                        timeline\n                    );\n                }\n            }\n        },\n        makeAllThumb() {\n            // 预加载所有缩略图（都显示第一张）\n            // this.thumbs\n            let pts = this.timeline.start_sec;\n            let end = this.timeline.end_sec;\n            while (pts <= end) {\n                let ss = pts - (pts % DURATION);\n\n                let preload = {\n                    preload: true,\n                    url: \"\",\n                    ss,\n                    duration: DURATION,\n                };\n\n                this.thumbs.push(preload);\n                this.timeline.thumbs = this.thumbs;\n\n                pts += DURATION;\n            }\n        },\n    },\n    async mounted() {\n        this.thumbs = this.timeline.thumbs; //[...this.timeline.thumbs];\n        if (!this.thumbs.length) this.makeAllThumb();\n        // 咽喉加载缩略图，避免 mediacodec 资源竞争（samsung s9+上无法打开两个 4kmediacodec decoder）\n        if (this.canload) await this.fetchThumb(0);\n    },\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItemThumb.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItemThumb.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TimelineItemThumb.vue?vue&type=template&id=c9388e1e&scoped=true&\"\nimport script from \"./TimelineItemThumb.vue?vue&type=script&lang=js&\"\nexport * from \"./TimelineItemThumb.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TimelineItemThumb.vue?vue&type=style&index=0&id=c9388e1e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c9388e1e\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div\n        class=\"box\"\n        :class=\"{active:active, focus:focus, span:timeline.offset_sec}\"\n        :style=\"boxStyle\"\n        @touchend=\"toggleActive\"\n    >\n        <mu-button\n            flat\n            class=\"left-tick\"\n            ref=\"left\"\n            @touchstart.stop.native=\"leftStart\"\n            @touchmove.stop.native=\"leftMove\"\n            @touchend.stop.native=\"leftEnd\"\n        >\n            <mu-icon\n                :class=\"{ dragging: leftDragging, outbound: leftOutBound }\"\n                value=\"keyboard_arrow_left\"\n            />\n        </mu-button>\n        <div class=\"content\">\n            <div class=\"thumb\" :class=\"{overlay:overlay_mode}\" :style=\"thumbStyle\">\n                <div v-if=\"timeline.ending\" class=\"video-ending\">\n                    <span>片尾设置</span>\n                </div>\n                <TimelineItemThumb\n                    v-else\n                    :pps=\"pps\"\n                    :timeline=\"timeline\"\n                    :canload=\"canload_preview\"\n                />\n            </div>\n            <div class=\"border\"></div>\n        </div>\n        <mu-button\n            class=\"right-tick\"\n            ref=\"right\"\n            @touchstart.stop.native=\"rightStart\"\n            @touchmove.stop.native=\"rightMove\"\n            @touchend.stop.native=\"rightEnd\"\n        >\n            <mu-icon\n                :class=\"{ dragging: rightDragging, outbound: rightOutBound }\"\n                value=\"keyboard_arrow_right\"\n            />\n        </mu-button>\n\n        <div class=\"left-connect\" v-if=\"!active\">\n            <mu-icon :size=\"12\" value=\"insert_link\" />\n        </div>\n    </div>\n</template>\n<style scoped>\n.box {\n    height: 100%;\n    position: absolute;\n}\n.box.active {\n    z-index: 100;\n}\n.box.active .border,\n.box.focus .border {\n    border: 2px #fff solid;\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n}\n.box.span {\n    border-left: 5px solid transparent;\n}\n\n.box.span .thumb {\n    margin-left: -5px;\n}\n.box.span .left-connect {\n    display: flex;\n}\n\n.left-connect {\n    display: none;\n    align-items: center;\n    justify-content: center;\n    /* border: 1px solid black; */\n    color: gray;\n    position: absolute;\n    left: -10px;\n    top: 50%;\n    margin-top: -7.5px;\n    width: 15px;\n    height: 15px;\n    border-radius: 3px;\n    background: white;\n}\n.content {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n}\n.thumb {\n    height: 100%;\n    position: relative;\n    /* background:linear-gradient(90deg, green 0%,red 100%); */\n    background: black;\n}\n.thumb.overlay {\n    background: red;\n}\n.left-tick {\n    background-color: white;\n    width: 20px;\n    position: absolute;\n    height: 100%;\n    top: 0;\n    left: -20px;\n    border-top-left-radius: 5px;\n    border-bottom-left-radius: 5px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: rgba(0, 0, 0, 0.3) 0px 0px 5px;\n    z-index: 1;\n    min-width: auto;\n}\n\n.left-tick > * {\n    font-size: 30px;\n}\n\n.right-tick {\n    background-color: white;\n    width: 20px;\n    position: absolute;\n    height: 100%;\n    top: 0;\n    right: -20px;\n    border-top-right-radius: 5px;\n    border-bottom-right-radius: 5px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: rgba(0, 0, 0, 0.3) 0px 0px 5px;\n    z-index: 2;\n    min-width: auto;\n}\n\n.right-tick > * {\n    font-size: 40px;\n}\n\n/* 增大点击面积 */\n.left-tick::before,\n.right-tick::before {\n    display: block;\n    content: \"\";\n    left: -10px;\n    height: 100%;\n    position: absolute;\n    right: -10px;\n}\n\n.box .left-tick {\n    display: none;\n}\n.box .right-tick {\n    display: none;\n}\n.box.active .left-tick {\n    display: flex;\n}\n.box.active .right-tick {\n    display: flex;\n}\n.box.active .content {\n    border-color: white;\n}\n.box .dragging {\n    color: orange;\n}\n.box .outbound {\n    color: orangered;\n}\n\n.video-ending {\n    color: #fff;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    font-size: smaller;\n}\n</style>\n<script>\nimport TimelineItemThumb from \"./TimelineItemThumb\";\nimport { Log } from \"jsugc-websdk\";\nexport default {\n    components: { TimelineItemThumb },\n    props: [\n        \"pps\",\n        \"dragging\",\n        \"active\",\n        \"focus\",\n        \"overlay_mode\",\n        \"timeline\",\n        \"min_sec\",\n        \"canload_preview\",\n        // \"left_drag_offset\" //左侧拖动修正，令左侧拖动时，靠右停靠\n    ],\n    data() {\n        return {\n            // total_sec:0,\n            // start_sec:0,\n            // end_sec:0,\n            // offset_sec:0,\n            // active:false,\n            // left_drag_offset:0,\n            leftOutBound: false,\n            rightOutBound: false,\n            leftDragging: false,\n            rightDragging: false,\n            boxStyle: {\n                width: 0,\n                left: 0,\n            },\n            thumbStyle: {\n                width: 0,\n                left: 0,\n            },\n        };\n    },\n    watch: {\n        \"timeline.start_sec\": \"update\",\n        \"timeline.total_sec\": \"update\",\n        \"timeline.end_sec\": \"update\",\n        \"timeline.offset_sec\": \"update\",\n        \"timeline.left_drag_offset\": \"update\",\n    },\n    methods: {\n        update() {\n            if (this.timeline.end_sec <= this.timeline.start_sec)\n                this.timeline.end_sec = this.timeline.start_sec;\n            this.boxStyle.width =\n                (this.timeline.end_sec - this.timeline.start_sec) * this.pps +\n                \"px\";\n            this.boxStyle.left =\n                (this.timeline.left_drag_offset + this.timeline.offset_sec) *\n                    this.pps +\n                \"px\";\n            this.thumbStyle.width = this.timeline.total_sec * this.pps + \"px\";\n            this.thumbStyle.left =\n                this.timeline.start_sec * this.pps * -1 + \"px\";\n        },\n        toggleActive() {\n            Log.uilog(\"/timeline/item\", `active: ${this.timeline.id}`);\n            //使用 touchend 配合 dragging 判断父元素是否在拖动中，拖动中则不响应点击\n            //如果使用 click 事件的话，父元素的 touchend 会首先触发，dragging 恒为 false\n            if (this.dragging) return;\n            this.$emit(\"active\", !this.active);\n        },\n        leftStart(e) {\n            this._pageX = e.changedTouches[0].pageX;\n            this._value = this.timeline.start_sec;\n            this.leftDragging = true;\n            this.leftMove(e);\n        },\n        leftMove(e) {\n            let offset_sec =\n                (e.changedTouches[0].pageX - this._pageX) / this.pps;\n\n            let start_sec = Math.min(\n                this.timeline.end_sec - this.min_sec,\n                Math.max(0, this._value + offset_sec)\n            );\n\n            if (\n                start_sec == this.timeline.end_sec - this.min_sec ||\n                start_sec == 0\n            ) {\n                this.leftOutBound = true;\n            } else {\n                this.leftOutBound = false;\n            }\n\n            this.changed({\n                seek_sec: 0,\n                start_sec,\n                left_drag_offset: start_sec - this._value,\n            });\n            return true;\n        },\n        leftEnd() {\n            Log.uilog(\n                \"/timeline/item\",\n                `modify startTime: ${this.timeline.start_sec}`\n            );\n            this.leftDragging = false;\n            this.leftOutBound = false;\n            this.changed();\n        },\n        rightStart(e) {\n            this._pageX = e.changedTouches[0].pageX;\n            this._value = this.timeline.end_sec;\n            this.rightDragging = true;\n            this.rightMove(e);\n        },\n        rightMove(e) {\n            let offset_sec =\n                (e.changedTouches[0].pageX - this._pageX) / this.pps;\n\n            let end_sec = Math.min(\n                this.timeline.total_sec,\n                Math.max(\n                    this.timeline.start_sec + this.min_sec,\n                    this._value + offset_sec\n                )\n            );\n\n            if (\n                end_sec == this.timeline.start_sec + this.min_sec ||\n                end_sec == this.timeline.total_sec\n            ) {\n                this.rightOutBound = true;\n            } else {\n                this.rightOutBound = false;\n            }\n\n            this.changed({\n                seek_sec: end_sec - this.timeline.start_sec,\n                end_sec,\n            });\n            return true;\n        },\n        rightEnd() {\n            Log.uilog(\n                \"/timeline/item\",\n                `modify endTime: ${this.timeline.end_sec}`\n            );\n            this.rightDragging = false;\n            this.rightOutBound = false;\n            this.changed();\n        },\n        changed(opt) {\n            let end = !opt;\n            if (!opt)\n                opt = {\n                    left_drag_offset: 0,\n                };\n\n            this.$emit(\"change\", {\n                end,\n                start_sec: this.timeline.start_sec,\n                end_sec: this.timeline.end_sec,\n                left_drag_offset: this.timeline.left_drag_offset,\n                ...opt,\n            });\n        },\n    },\n    mounted() {\n        this.update();\n        if (!this.pps) {\n            this.pps = screen.width / 10;\n        }\n    },\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TimelineItem.vue?vue&type=template&id=0a27f5e2&scoped=true&\"\nimport script from \"./TimelineItem.vue?vue&type=script&lang=js&\"\nexport * from \"./TimelineItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TimelineItem.vue?vue&type=style&index=0&id=0a27f5e2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a27f5e2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\",class:{active:_vm.active,amix:_vm.is_amix},style:([_vm.boxStyle, {height: _vm.active ? '100%' : '0'}]),attrs:{\"tabindex\":\"-1\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleActive($event)}}},[_c('div',{staticClass:\"left-icon\"},[_c('mu-button',{attrs:{\"fab\":\"\",\"small\":\"\",\"color\":_vm.is_amix?'orange':'red'}},[_c('mu-icon',{attrs:{\"color\":\"white\",\"size\":\"20\",\"value\":_vm.typeIcon}})],1)],1),_c('div',{staticClass:\"left-drag\",on:{\"touchstart\":function($event){$event.stopPropagation();return _vm.dragStart($event)},\"touchmove\":function($event){$event.stopPropagation();return _vm.dragMove($event)},\"touchend\":function($event){$event.stopPropagation();return _vm.dragEnd()}}},[_c('mu-button',{attrs:{\"fab\":\"\",\"small\":\"\",\"color\":\"white\",\"textColor\":\"red\"}},[_c('mu-icon',{attrs:{\"size\":\"20\",\"value\":\"code\"}})],1)],1),_c('mu-button',{ref:\"left\",staticClass:\"left-tick\",attrs:{\"flat\":\"\"},nativeOn:{\"touchstart\":function($event){$event.stopPropagation();return _vm.leftStart($event)},\"touchmove\":function($event){$event.stopPropagation();return _vm.leftMove($event)},\"touchend\":function($event){$event.stopPropagation();return _vm.changed()}}},[_c('mu-icon',{class:{ dragging: _vm.leftDragging },attrs:{\"value\":\"keyboard_arrow_left\"}})],1),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"thumb overlay\"},[_c('mu-icon',{attrs:{\"value\":_vm.typeIcon}}),_c('span',[_vm._v(_vm._s(_vm.typeText))]),_c('span',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.fmtSeconds(_vm.end_sec)))])],1)]),_c('mu-button',{ref:\"right\",staticClass:\"right-tick\",nativeOn:{\"touchstart\":function($event){$event.stopPropagation();return _vm.rightStart($event)},\"touchmove\":function($event){$event.stopPropagation();return _vm.rightMove($event)},\"touchend\":function($event){$event.stopPropagation();return _vm.changed()}}},[_c('mu-icon',{class:{ dragging: _vm.rightDragging },attrs:{\"value\":\"keyboard_arrow_right\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\r\n// 磁力吸附\r\n// \r\n// 示例：\r\n// let m = new Magnet(...);\r\n// newLayout = m.check(oldLayout,newLayout, null, ondock);\r\n// xxdom.style.left = newLayout.left;\r\n// xxdom.style.top = newLayout.top;\r\n// \r\n// layout属性:\r\n//  {left, top, right, bottom, width, height, angle}\r\n// \r\n\r\n/**\r\n * 默认选项\r\n */\r\nconst DefaultOptions = {\r\n    span: 5, // 吸附距离\r\n    features: ['inside', 'outside', 'center', 'middle'], // 启用的能力\r\n    layouts: [], // 吸附对象\r\n    angles: [0, 90, 180, 270, 360], // 角度检查时的匹配对象\r\n    dynamicLayouts: function () { // 动态获取吸附对象\r\n        return this.layouts;\r\n    },\r\n    render: function (x, y) { // 渲染停靠线\r\n        if (x != null) {\r\n            x; // do something\r\n        } else if (y != null) {\r\n            y; // do something\r\n        }\r\n    },\r\n    renderAngle: function (angle) { // 渲染角度对齐线\r\n        if (angle != null) {\r\n            // do something\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * 可选吸附能力\r\n * this = Magnet\r\n */\r\nconst Features = {\r\n    leftToLeft(span, layout, target) {\r\n        if (layout.left - span <= target.left &&\r\n            layout.left + span >= target.left) {\r\n            return {\r\n                diff: layout.left - target.left,\r\n                from: 'left',\r\n                to: 'left'\r\n            };\r\n        }\r\n    },\r\n    leftToRight(span, layout, target) {\r\n        if (layout.left - span <= target.right &&\r\n            layout.left + span >= target.right) {\r\n            return {\r\n                diff: layout.left - target.right,\r\n                from: 'left',\r\n                to: 'right'\r\n            };\r\n        }\r\n    },\r\n    rightToLeft(span, layout, target) {\r\n        if (layout.right - span <= target.left &&\r\n            layout.right + span >= target.left) {\r\n            return {\r\n                diff: layout.right - target.left,\r\n                from: 'right',\r\n                to: 'left'\r\n            };\r\n        }\r\n    },\r\n    rightToRight(span, layout, target) {\r\n        if (layout.right - span <= target.right &&\r\n            layout.right + span >= target.right) {\r\n            return {\r\n                diff: layout.right - target.right,\r\n                from: 'right',\r\n                to: 'right'\r\n            };\r\n        }\r\n    },\r\n    leftToCenter(span, layout, target) {\r\n        let targetHF = target.left + target.width / 2;\r\n        if (layout.left - span <= targetHF &&\r\n            layout.left + span >= targetHF) {\r\n            return {\r\n                diff: layout.left - targetHF,\r\n                from: 'left',\r\n                to: 'center'\r\n            };\r\n        }\r\n    },\r\n    rightToCenter(span, layout, target) {\r\n        let targetHF = target.left + target.width / 2;\r\n        if (layout.right - span <= targetHF &&\r\n            layout.right + span >= targetHF) {\r\n            return {\r\n                diff: layout.right - targetHF,\r\n                from: 'right',\r\n                to: 'center'\r\n            };\r\n        }\r\n    },\r\n    centerToCenter(span, layout, target) {\r\n        let layoutHF = layout.left + layout.width / 2;\r\n        let targetHF = target.left + target.width / 2;\r\n        if (layoutHF - span <= targetHF &&\r\n            layoutHF + span >= targetHF) {\r\n            return {\r\n                diff: layoutHF - targetHF,\r\n                from: 'center',\r\n                to: 'center'\r\n            };\r\n        }\r\n    },\r\n    centerToLeft(span, layout, target) {\r\n        let layoutHF = layout.left + layout.width / 2;\r\n        if (layoutHF - span <= target.left &&\r\n            layoutHF + span >= target.left) {\r\n            return {\r\n                diff: layoutHF - target.left,\r\n                from: 'center',\r\n                to: 'center'\r\n            };\r\n        }\r\n    },\r\n    centerToRight(span, layout, target) {\r\n        let layoutHF = layout.left + layout.width / 2;\r\n        if (layoutHF - span <= target.right &&\r\n            layoutHF + span >= target.right) {\r\n            return {\r\n                diff: layoutHF - target.right,\r\n                from: 'center',\r\n                to: 'center'\r\n            };\r\n        }\r\n    },\r\n    topToTop(span, layout, target) {\r\n        if (layout.top - span <= target.top &&\r\n            layout.top + span >= target.top) {\r\n            return {\r\n                diff: layout.top - target.top,\r\n                from: 'top',\r\n                to: 'top'\r\n            };\r\n        }\r\n    },\r\n    topToBottom(span, layout, target) {\r\n        if (layout.top - span <= target.bottom &&\r\n            layout.top + span >= target.bottom) {\r\n            return {\r\n                diff: layout.top - target.bottom,\r\n                from: 'top',\r\n                to: 'bottom'\r\n            };\r\n        }\r\n    },\r\n    bottomToTop(span, layout, target) {\r\n        if (layout.bottom - span <= target.top &&\r\n            layout.bottom + span >= target.top) {\r\n            return {\r\n                diff: layout.bottom - target.top,\r\n                from: 'bottom',\r\n                to: 'top'\r\n            };\r\n        }\r\n    },\r\n    bottomToBottom(span, layout, target) {\r\n        if (layout.bottom - span <= target.bottom &&\r\n            layout.bottom + span >= target.bottom) {\r\n            return {\r\n                diff: layout.bottom - target.bottom,\r\n                from: 'bottom',\r\n                to: 'bottom'\r\n            };\r\n        }\r\n    },\r\n    topToMiddle(span, layout, target) {\r\n        let targetHF = target.top + target.height / 2;\r\n        if (layout.top - span <= targetHF &&\r\n            layout.top + span >= targetHF) {\r\n            return {\r\n                diff: layout.top - targetHF,\r\n                from: 'top',\r\n                to: 'middle'\r\n            };\r\n        }\r\n    },\r\n    bottomToMiddle(span, layout, target) {\r\n        let targetHF = target.top + target.height / 2;\r\n        if (layout.bottom - span <= targetHF &&\r\n            layout.bottom + span >= targetHF) {\r\n            return {\r\n                diff: layout.bottom - targetHF,\r\n                from: 'bottom',\r\n                to: 'middle'\r\n            };\r\n        }\r\n    },\r\n    middleToMiddle(span, layout, target) {\r\n        let layoutHF = layout.top + layout.height / 2;\r\n        let targetHF = target.top + target.height / 2;\r\n        if (layoutHF - span <= targetHF &&\r\n            layoutHF + span >= targetHF) {\r\n            return {\r\n                diff: layoutHF - targetHF,\r\n                from: 'middle',\r\n                to: 'middle'\r\n            };\r\n        }\r\n    },\r\n    middleToTop(span, layout, target) {\r\n        let layoutHF = layout.top + layout.height / 2;\r\n        if (layoutHF - span <= target.top &&\r\n            layoutHF + span >= target.top) {\r\n            return {\r\n                diff: layoutHF - target.top,\r\n                from: 'middle',\r\n                to: 'top'\r\n            };\r\n        }\r\n    },\r\n    middleToBottom(span, layout, target) {\r\n        let layoutHF = layout.top + layout.height / 2;\r\n        if (layoutHF - span <= target.bottom &&\r\n            layoutHF + span >= target.bottom) {\r\n            return {\r\n                diff: layoutHF - target.bottom,\r\n                from: 'middle',\r\n                to: 'bottom'\r\n            };\r\n        }\r\n    },\r\n    inside(span, layout, target) {\r\n        return [\r\n            Features.leftToLeft.call(this, span, layout, target),\r\n            Features.rightToRight.call(this, span, layout, target),\r\n            Features.topToTop.call(this, span, layout, target),\r\n            Features.bottomToBottom.call(this, span, layout, target)\r\n        ].filter(r => r);\r\n    },\r\n    outside(span, layout, target) {\r\n        return [\r\n            Features.leftToRight.call(this, span, layout, target),\r\n            Features.rightToLeft.call(this, span, layout, target),\r\n            Features.topToBottom.call(this, span, layout, target),\r\n            Features.bottomToTop.call(this, span, layout, target)\r\n        ].filter(r => r);\r\n    },\r\n    center(span, layout, target) {\r\n        return [\r\n            Features.leftToCenter.call(this, span, layout, target),\r\n            Features.rightToCenter.call(this, span, layout, target),\r\n            Features.centerToCenter.call(this, span, layout, target),\r\n            Features.centerToLeft.call(this, span, layout, target),\r\n            Features.centerToRight.call(this, span, layout, target)\r\n        ].filter(r => r);\r\n    },\r\n    middle(span, layout, target) {\r\n        return [\r\n            Features.topToMiddle.call(this, span, layout, target),\r\n            Features.bottomToMiddle.call(this, span, layout, target),\r\n            Features.middleToMiddle.call(this, span, layout, target),\r\n            Features.middleToTop.call(this, span, layout, target),\r\n            Features.middleToBottom.call(this, span, layout, target)\r\n        ].filter(r => r);\r\n    },\r\n    angle(span, layout, angle) {\r\n        let dock = layout.angle + span >= angle && layout.angle - span <= angle;\r\n        if (dock) {\r\n            return {\r\n                diff: angle - layout.angle,\r\n                value: angle\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default class Magnet {\r\n    constructor(options = DefaultOptions) {\r\n        this.options = Object.assign({}, DefaultOptions, options);\r\n        this.features = Object.create(Features);\r\n    }\r\n    /**\r\n     * 获取所有吸附距离内的layout\r\n     */\r\n    findTargets(layout, features) {\r\n        features = features || this.options.features;\r\n\r\n        let span = this.options.span;\r\n        return this.options.dynamicLayouts().flatMap(l =>\r\n            features.map(feature => this.features[feature])\r\n            .flatMap(featureFn => featureFn.call(this, span, layout, l))\r\n            .filter(target => target)\r\n            .map(target => {\r\n                target.layout = l;\r\n                return target;\r\n            }))\r\n    }\r\n    getTargetPosition(target) {\r\n        if (target.to == 'center') {\r\n            return target.layout.left + target.layout.width / 2;\r\n        } else if (target.to == 'middle') {\r\n            return target.layout.top + target.layout.height / 2;\r\n        } else {\r\n            return target.layout[target.to];\r\n        }\r\n    }\r\n    /**\r\n     * 返回吸附后的layout\r\n     */\r\n    createLayout(layout, xTarget, yTarget, angle) {\r\n        layout = Object.assign({}, layout);\r\n        if (xTarget) {\r\n            // to\r\n            let x = this.getTargetPosition(xTarget);\r\n            // from\r\n            if (xTarget.from == 'center') {\r\n                layout.left = x - layout.width / 2;\r\n                layout.right = layout.left + layout.width;\r\n            } else {\r\n                layout[xTarget.from] = x;\r\n                if (xTarget.from == 'left') {\r\n                    layout.right = layout.left + layout.width;\r\n                } else if (xTarget.from == 'right') {\r\n                    layout.left = layout.right - layout.width;\r\n                }\r\n            }\r\n        }\r\n        if (yTarget) {\r\n            // to\r\n            let y = this.getTargetPosition(yTarget);\r\n            // from\r\n            if (yTarget.from == 'middle') {\r\n                layout.top = y - layout.height / 2;\r\n                layout.bottom = layout.top + layout.height;\r\n            } else {\r\n                layout[yTarget.from] = y;\r\n                if (yTarget.from == 'top') {\r\n                    layout.bottom = layout.top + layout.height;\r\n                } else if (yTarget.from == 'bottom') {\r\n                    layout.top = layout.bottom - layout.height;\r\n                }\r\n            }\r\n        }\r\n        if (angle != null) {\r\n            layout.angle = angle;\r\n        }\r\n        return layout;\r\n    }\r\n    /**\r\n     * 传入旧、新layout\r\n     * 返回吸附后的layout\r\n     * @param layout 旧layout\r\n     * @param newLayout 新layout\r\n     * @param features 能力\r\n     */\r\n    check(layout, newLayout, features) {\r\n        let targets = this.findTargets(newLayout, features);\r\n\r\n        // 获取距离最近的吸附对象作为目标\r\n        let xNearestTarget = null;\r\n        let yNearestTarget = null;\r\n        let x = null;\r\n        let y = null;\r\n\r\n        targets.forEach(t => {\r\n            if (t.to == 'left' || t.to == 'center' || t.to == 'right') {\r\n                if (!xNearestTarget) {\r\n                    xNearestTarget = t;\r\n                } else if (t.to == Math.abs(t.diff) < Math.abs(xNearestTarget.diff)) {\r\n                    xNearestTarget = t;\r\n                }\r\n            } else {\r\n                if (!yNearestTarget) {\r\n                    yNearestTarget = t;\r\n                } else if (Math.abs(t.diff) < Math.abs(yNearestTarget.diff)) {\r\n                    yNearestTarget = t;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (xNearestTarget || yNearestTarget) {\r\n            if (xNearestTarget) {\r\n                x = this.getTargetPosition(xNearestTarget);\r\n            }\r\n            if (yNearestTarget) {\r\n                y = this.getTargetPosition(yNearestTarget);\r\n            }\r\n\r\n            newLayout = this.createLayout(newLayout, xNearestTarget, yNearestTarget);\r\n        }\r\n        this.options.render(x, y, newLayout);\r\n        return newLayout;\r\n    }\r\n    /**\r\n     * 传入layout\r\n     * 返回吸附后的layout\r\n     */\r\n    checkAngle(layout) {\r\n        let targets = this.options.angles.flatMap(a => [\r\n            this.features.angle.call(this, this.options.angleSpan, layout, -a),\r\n            this.features.angle.call(this, this.options.angleSpan, layout, a)\r\n        ]).filter(e => e);\r\n\r\n        let nearestTarget = null;\r\n        let angle = null;\r\n        targets.forEach(target => {\r\n            if (nearestTarget == null) {\r\n                nearestTarget = target;\r\n            } else if (Math.abs(target.diff) < Math.abs(nearestTarget.diff)) {\r\n                nearestTarget = target;\r\n            }\r\n        })\r\n\r\n        if (nearestTarget) {\r\n            angle = nearestTarget.value;\r\n            layout = this.createLayout(layout, null, null, angle);\r\n        }\r\n        this.options.renderAngle(angle, layout);\r\n        return layout;\r\n    }\r\n}","<template>\n    <div\n        tabindex=\"-1\"\n        class=\"box\"\n        :class=\"{active:active,amix:is_amix}\"\n        :style=\"[boxStyle, {height: active ? '100%' : '0'}]\"\n        @click.stop=\"toggleActive\"\n    >\n        <div class=\"left-icon\">\n            <mu-button fab small :color=\"is_amix?'orange':'red'\">\n                <mu-icon color=\"white\" size=\"20\" :value=\"typeIcon\" />\n            </mu-button>\n        </div>\n        <div\n            class=\"left-drag\"\n            @touchstart.stop=\"dragStart\"\n            @touchmove.stop=\"dragMove\"\n            @touchend.stop=\"dragEnd()\"\n        >\n            <mu-button fab small color=\"white\" textColor=\"red\">\n                <mu-icon size=\"20\" value=\"code\" />\n            </mu-button>\n        </div>\n        <mu-button\n            class=\"left-tick\"\n            ref=\"left\"\n            flat\n            @touchstart.stop.native=\"leftStart\"\n            @touchmove.stop.native=\"leftMove\"\n            @touchend.stop.native=\"changed()\"\n        >\n            <mu-icon :class=\"{ dragging: leftDragging }\" value=\"keyboard_arrow_left\" />\n        </mu-button>\n        <div class=\"content\">\n            <div class=\"thumb overlay\">\n                <mu-icon :value=\"typeIcon\" />\n                <span>{{typeText}}</span>\n                <span class=\"time\">{{fmtSeconds(end_sec)}}</span>\n            </div>\n        </div>\n        <mu-button\n            class=\"right-tick\"\n            ref=\"right\"\n            @touchstart.stop.native=\"rightStart\"\n            @touchmove.stop.native=\"rightMove\"\n            @touchend.stop.native=\"changed()\"\n        >\n            <mu-icon :class=\"{ dragging: rightDragging }\" value=\"keyboard_arrow_right\" />\n        </mu-button>\n    </div>\n</template>\n<style lang=\"less\" scoped>\n.box {\n    height: 0;\n    position: absolute;\n    outline: 0;\n}\n.box.active {\n    z-index: 100;\n\n    .content {\n        border: 0;\n        height: 100%;\n    }\n    .left-drag {\n        display: block;\n    }\n\n    .left-icon {\n        display: none;\n    }\n    .left-tick {\n        height: 100%;\n        min-width: auto;\n    }\n    .right-tick {\n        height: 100%;\n        min-width: auto;\n    }\n}\n.box.span {\n    border-left: 5px solid transparent;\n}\n\n.box.span .thumb {\n    margin-left: -5px;\n}\n\n.box .time {\n    margin-left: 0.5em;\n    padding-left: 0.25em;\n    border-left: 1px solid rgba(255, 255, 255, 0.5);\n}\n\n.left-icon {\n    position: absolute;\n    left: -15px;\n    margin-top: 14px;\n    button {\n        width: 30px;\n        height: 30px;\n        // border-radius:0;\n        border-top-right-radius: 1px;\n        transform: rotate(-45deg);\n    }\n}\n\n.left-drag {\n    display: none;\n    position: absolute;\n    left: -60px;\n    top: 50%;\n    margin-top: -15px;\n    color: white;\n    button {\n        width: 30px;\n        height: 30px;\n    }\n}\n.content {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    border-top: 3px solid red;\n    transition: all 0.3s;\n    height: 0px;\n}\n.amix .content {\n    border-color: orange;\n}\n.thumb {\n    height: 100%;\n    position: relative;\n    background: linear-gradient(90deg, green 0%, red 100%);\n}\n.thumb.overlay {\n    width: 100%;\n    background: red;\n    color: #eee;\n    display: flex;\n    align-items: center;\n    padding: 0 10px;\n    font-size: 12px;\n}\n\n.amix .thumb.overlay {\n    background: orange;\n}\n.left-tick {\n    background-color: white;\n    width: 20px;\n    position: absolute;\n    height: 100%;\n    top: 0;\n    left: -20px;\n    border-top-left-radius: 5px;\n    border-bottom-left-radius: 5px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: rgba(0, 0, 0, 0.3) 0px 0px 5px;\n    overflow: hidden;\n    transition: all 0.3s;\n    height: 0;\n}\n\n.left-tick > * {\n    font-size: 30px;\n}\n\n.right-tick {\n    background-color: white;\n    width: 20px;\n    position: absolute;\n    height: 100%;\n    top: 0;\n    right: -20px;\n    border-top-right-radius: 5px;\n    border-bottom-right-radius: 5px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: rgba(0, 0, 0, 0.3) 0px 0px 5px;\n    overflow: hidden;\n    transition: all 0.3s;\n    height: 0;\n}\n\n.right-tick > * {\n    font-size: 30px;\n}\n\n.box.active .left-tick {\n    display: flex;\n}\n.box.active .right-tick {\n    display: flex;\n}\n.box.active .content {\n    border-color: white;\n}\n.box .dragging {\n    color: orange;\n}\n</style>\n<script>\nimport Const from \"@/const\";\nimport { Editlist, Log } from \"jsugc-websdk\";\nimport Magnet from \"@/model/Magnet\";\n\nconst MIN_SPAN = 0.1;\n\nexport default {\n    props: [\"pps\", \"active\", \"end_sec\", \"offset_sec\", \"is_amix\", \"type\", \"id\"],\n    data() {\n        return {\n            overallDragging: false,\n            leftDragging: false,\n            rightDragging: false,\n            boxStyle: {\n                width: 0,\n                left: 0,\n            },\n        };\n    },\n    watch: {\n        end_sec: \"update\",\n        offset_sec: \"update\",\n    },\n    computed: {\n        typeIcon() {\n            return this.is_amix\n                ? \"music_note\"\n                : Const.Overlay.Type.Text == this.type\n                ? \"font_download\"\n                : Const.Overlay.Type.Image == this.type\n                ? \"image\"\n                : \"blur_on\";\n        },\n        typeText() {\n            return this.is_amix\n                ? \"音效\"\n                : Const.Overlay.Type.Text == this.type\n                ? \"文字\"\n                : Const.Overlay.Type.Image == this.type\n                ? \"贴纸\"\n                : \"马赛克\";\n        },\n    },\n    methods: {\n        fmtSeconds(v) {\n            let s = (v % 60).toFixed(0);\n            let m = ((v / 60) % 60).toFixed(0);\n            let h = ((v / 60 / 60) % 60).toFixed(0);\n            return h + \":\" + m + \":\" + s;\n        },\n\n        update() {\n            if (this.end_sec <= 0) this.end_sec = MIN_SPAN;\n            this.boxStyle.width = this.end_sec * this.pps + \"px\";\n            this.boxStyle.left = this.offset_sec * this.pps + \"px\";\n        },\n        toggleActive() {\n            Log.uilog(\"/timeline/overlay\", `active: ${this.id}`);\n            if (!this.active) {\n                this.$nextTick(() => {\n                    // 阻止focus时滚动，滚动会导致整个界面偏移\n                    this.$el.focus({ preventScroll: true });\n                });\n                this.$emit(\"active\", !this.active);\n            }\n        },\n        dragStart(e) {\n            this._pageX = e.changedTouches[0].pageX;\n            this._value = this.offset_sec;\n            this.overallDragging = true;\n            this.dragMove(e);\n        },\n        dragMove(e) {\n            let oldOffset = this._value;\n            let offset_sec =\n                (e.changedTouches[0].pageX - this._pageX) / this.pps;\n            // to absolute\n            offset_sec = oldOffset + offset_sec;\n\n            // dock begin\n            let oldLayout = this.createMagnetLayout({\n                left: oldOffset,\n                width: this.end_sec,\n            });\n            let newLayout = this.createMagnetLayout({\n                left: offset_sec,\n                width: this.end_sec,\n            });\n            newLayout = this.magnet.check(oldLayout, newLayout);\n            (offset_sec = newLayout.left),\n                // dock end\n\n                (offset_sec = Math.max(0, offset_sec));\n            offset_sec = Math.min(Editlist.editlist.total_sec, offset_sec);\n\n            this.changed({\n                offset_sec,\n                overallDragging: this.overallDragging,\n            });\n            return true;\n        },\n        dragEnd() {\n            Log.uilog(\n                \"/timeline/overlay\",\n                `modify offsetTime: ${this.offset_sec}`\n            );\n            this.overallDragging = false;\n            this.leftDragging = false;\n            this.rightDragging = false;\n            this.changed();\n        },\n        leftStart(e) {\n            this._pageX = e.changedTouches[0].pageX;\n            this._value = this.offset_sec;\n            this._value2 = this.end_sec;\n            this.leftDragging = true;\n            this.leftMove(e);\n        },\n        leftMove(e) {\n            let oldOffset = this._value;\n            let oldEnd = this._value2;\n            let offset_sec =\n                (e.changedTouches[0].pageX - this._pageX) / this.pps;\n            // to absolute\n            offset_sec = oldOffset + offset_sec;\n\n            // dock begin: 因为只移动一端，所以只给left做检测，width=0，让right与left相等\n            let oldLayout = this.createMagnetLayout({\n                left: oldOffset,\n                width: 0,\n            });\n            let newLayout = this.createMagnetLayout({\n                left: offset_sec,\n                width: 0,\n            });\n            newLayout = this.magnet.check(oldLayout, newLayout);\n            offset_sec = newLayout.left;\n            // dock end\n\n            offset_sec = Math.max(0, offset_sec);\n            offset_sec = Math.min(oldOffset + oldEnd - MIN_SPAN, offset_sec);\n\n            let end_sec = Math.max(0, oldEnd + oldOffset - offset_sec);\n\n            this.changed({\n                offset_sec,\n                end_sec,\n            });\n            return true;\n        },\n        rightStart(e) {\n            this._pageX = e.changedTouches[0].pageX;\n            this._value = this.end_sec;\n            this.rightDragging = true;\n            this.rightMove(e);\n        },\n        rightMove(e) {\n            let oldEnd = this._value;\n            let offset_sec =\n                (e.changedTouches[0].pageX - this._pageX) / this.pps;\n            let end_sec = oldEnd + offset_sec;\n\n            // dock begin\n            let oldLayout = this.createMagnetLayout({\n                left: this.offset_sec + oldEnd,\n                width: 0,\n            });\n            let newLayout = this.createMagnetLayout({\n                left: this.offset_sec + end_sec,\n                width: 0,\n            });\n            newLayout = this.magnet.check(oldLayout, newLayout);\n            end_sec = newLayout.left - this.offset_sec;\n            // dock end\n\n            end_sec = Math.min(\n                Editlist.editlist.total_sec - this.offset_sec,\n                end_sec\n            );\n            end_sec = Math.max(MIN_SPAN, end_sec);\n\n            this.changed({\n                end_sec,\n            });\n            return true;\n        },\n        changed(opt) {\n            let end = !opt;\n\n            if (end)\n                Log.uilog(\n                    \"/timeline/overlay\",\n                    `modify: ${JSON.stringify({\n                        offset_sec: this.offset_sec,\n                        end_sec: this.end_sec,\n                    })}`\n                );\n\n            this.$emit(\"change\", {\n                end,\n                offset_sec: this.offset_sec,\n                end_sec: this.end_sec,\n                ...opt,\n            });\n        },\n        createMagnetLayout(layout) {\n            return {\n                left: layout.left,\n                width: layout.width,\n                right: layout.left + layout.width,\n                top: 0,\n                height: 0,\n                bottom: 0,\n            };\n        },\n        // 停靠时震动\n        vibrate() {\n            navigator.vibrate([100]);\n        },\n    },\n    mounted() {\n        this.update();\n        if (!this.pps) {\n            this.pps = screen.width / 10;\n        }\n        this.magnet = new Magnet({\n            span: 6 / this.pps, // seconds\n            features: [\"inside\", \"outside\"],\n            render: (x) => {\n                if (x != null) {\n                    this.vibrate();\n                }\n            },\n            dynamicLayouts: () => {\n                let overlay = [];\n                if (this.is_amix) {\n                    overlay = Editlist.editlist.amix;\n                } else if (\n                    this.type === Const.Overlay.Type.Mosic ||\n                    this.type === Const.Overlay.Type.Image\n                ) {\n                    overlay = [\n                        ...Editlist.editlist.mosic,\n                        ...Editlist.editlist.overlay.filter(\n                            (e) => e.type == Const.Overlay.Type.Image\n                        ),\n                    ];\n                } else {\n                    overlay = Editlist.editlist.overlay.filter(\n                        (e) => e.type == this.type\n                    );\n                }\n                let layouts = overlay\n                    .filter((o) => o.id != this.id)\n                    .map((o) =>\n                        this.createMagnetLayout({\n                            left: o.offset_sec,\n                            width: o.end_sec,\n                        })\n                    );\n                // 加入时间轴指针\n                if (!this.overallDragging) {\n                    layouts.push({\n                        left: Editlist.editlist.time_sec,\n                        width: 0,\n                    });\n                }\n                return layouts;\n            },\n        });\n    },\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineOverlayItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineOverlayItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TimelineOverlayItem.vue?vue&type=template&id=332828ec&scoped=true&\"\nimport script from \"./TimelineOverlayItem.vue?vue&type=script&lang=js&\"\nexport * from \"./TimelineOverlayItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TimelineOverlayItem.vue?vue&type=style&index=0&id=332828ec&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"332828ec\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div\n        class=\"tool-box\"\n        ref=\"main\"\n        :class=\"{overlay:show_overlay||show_amix}\"\n        @touchstart=\"currentStart\"\n        @touchmove=\"currentMove\"\n        @touchend=\"changed()\"\n    >\n        <div class=\"main-line going\" ref=\"mainLine\" :style=\"mainLineStyle\">\n            <div v-if=\"!postermode\" @click=\"$emit('on_poster_click')\" class=\"video-post-btn\">\n                <template v-if=\"poster_url\">\n                    <img :src=\"poster_url\" @error=\"posterLoadError\" :style=\"posterStyles\" />\n                    <span class=\"text\">封面</span>\n                </template>\n                <template v-else>\n                    <!-- <span class=\"material-icons\">insert_photo</span> -->\n                    <span class=\"text add\">+选择封面</span>\n                </template>\n            </div>\n            <div class=\"main-timeline\" style>\n                <!-- 普通片段 -->\n                <!-- 片尾，不允许激活, 修改时间 -->\n                <!-- 此处不能使用 slot，因为 slot 会导致 TimelineItem 强制重新渲染，严重影响时间轴的拖动性能 -->\n                <TimelineItem\n                    v-for=\"(i) in timelines\"\n                    :key=\"i.id\"\n                    @change=\"timelineChange(i.id,$event)\"\n                    @active=\"timelineActive(i.id,$event)\"\n                    @click.native=\"i.ending? endingClick($event):''\"\n                    :pps=\"pps\"\n                    :dragging=\"i.ending?true:dragging\"\n                    :focus=\"postermode?false:i.focus\"\n                    :active=\"(i.ending||postermode)?false:i.active\"\n                    :timeline=\"i\"\n                    :canload_preview=\"preview_render\"\n                    :min_sec=\"video_min_sec\"\n                ></TimelineItem>\n            </div>\n\n            <div v-if=\"!postermode && !hasEnding\" @click=\"endingClick\" class=\"video-ending-btn\">\n                <span>+片尾设置</span>\n            </div>\n\n            <div v-if=\"!postermode && show_overlay\" class=\"sub-timeline\" style=\"margin-top:35px;\">\n                <template v-for=\"(i) in overlay\">\n                    <TimelineOverlayItem\n                        v-if=\"i.type & overlay_type\"\n                        :key=\"i.id\"\n                        @change=\"overlayChange(i.id,$event)\"\n                        @active=\"overlayActive(i.id,$event)\"\n                        :id=\"i.id\"\n                        :type=\"i.type\"\n                        :active=\"i.active\"\n                        :pps=\"pps\"\n                        :end_sec=\"i.end_sec\"\n                        :offset_sec=\"i.offset_sec\"\n                    ></TimelineOverlayItem>\n                </template>\n            </div>\n            <div v-if=\"!postermode && show_amix\" class=\"sub-timeline\" style=\"margin-top:35px;\">\n                <TimelineOverlayItem\n                    v-for=\"(i) in amix\"\n                    :key=\"i.id\"\n                    @change=\"amixChange(i.id,$event)\"\n                    @active=\"amixActive(i.id,$event)\"\n                    :id=\"i.id\"\n                    :is_amix=\"true\"\n                    :active=\"i.active\"\n                    :pps=\"pps\"\n                    :end_sec=\"i.end_sec\"\n                    :offset_sec=\"i.offset_sec\"\n                ></TimelineOverlayItem>\n            </div>\n        </div>\n\n        <div class=\"time-tick\" ref=\"current\">\n            <div class=\"current-time\" :class=\"{dragging:dragging}\">\n                <!-- <mu-icon v-if=\"modal.playing\" type=\"play_arrow\" />\n                <mu-icon v-else type=\"pause\" />-->\n                {{currentTimeStr}}\n            </div>\n        </div>\n        <div class=\"total-time-tick\">{{totalTimeStr}}</div>\n    </div>\n</template>\n\n<style lang=\"less\" scoped>\n.tool-box {\n    bottom: 0;\n    position: relative;\n    display: flex;\n    width: 100%;\n    height: 80px;\n}\n.tool-box.overlay {\n    height: 130px;\n}\n\n.main-line.going {\n    transition: transform 0s linear;\n}\n.main-timeline {\n    //wkwebview 莫名奇妙的会在 post_btn 和 maintimeline 之间出现黑块，加入这个可以去掉\n    margin-top: 0.1px;\n}\n.main-line {\n    width: 100%;\n    height: 34px;\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-top: -17px;\n    background: transparent;\n    will-change: transform;\n\n    .video-post-btn {\n        position: absolute;\n        top: 0;\n        left: -100px;\n        background: gray;\n        border-radius: 5px;\n        height: 34px;\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        align-items: center;\n        padding: 5px;\n        color: white;\n        font-size: 12px;\n\n        img {\n            display: block;\n            width: 24px;\n            height: 24px;\n            position: relative;\n            border-radius: 5px;\n            object-fit: cover;\n        }\n        .material-icons {\n            font-size: 32px;\n        }\n        .text {\n            display: block;\n            position: relative;\n            margin-left: 5px;\n\n            &.add {\n                margin-right: 5px;\n            }\n        }\n    }\n\n    .main-timeline {\n        z-index: 1;\n    }\n\n    .video-ending-btn {\n        position: absolute;\n        right: -121px;\n        background: gray;\n        border-radius: 5px;\n        height: 34px;\n        padding: 5px 0;\n        width: 7em;\n        color: white;\n        font-size: 12px;\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        align-items: center;\n    }\n}\n\n.time-tick {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    height: 45px;\n    width: 2px;\n    background-color: white;\n    margin-left: -1px;\n    margin-top: -25px;\n    border-radius: 10px;\n    padding-top: 5px;\n    box-sizing: content-box;\n    display: flex;\n    justify-content: center;\n}\n\n.tick-mask {\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 100%;\n    width: 100%;\n}\n\n.current-time.dragging {\n    font-size: 12px;\n    opacity: 1;\n}\n.current-time {\n    position: absolute;\n    background: white;\n    color: black;\n    border-radius: 2px;\n    padding: 0 3px;\n    font-size: 8px;\n    top: -15px;\n    opacity: 0.5;\n    display: flex;\n    align-items: center;\n    white-space: nowrap;\n    transition: font-size 0.1s;\n}\n\n.total-time-tick {\n    position: absolute;\n    right: 0%;\n    top: 0%;\n    height: 45px;\n    color: white;\n    font-size: 10px;\n    padding: 0 5px;\n    top: 50%;\n    margin-top: -40px;\n}\n</style>\n\n<script>\n/***\n * 输入：position, timelines\n *\n * 修改：position, timelines\n *\n * 输出：position, timelines\n *\n * 事件：timeChange, timelinesChange\n */\nimport TimelineItem from \"./TimelineItem\";\nimport TimelineOverlayItem from \"./TimelineOverlayItem\";\nimport { CordovaModel } from \"jsugc-websdk\";\nimport { Editlist } from \"jsugc-websdk\";\nimport { Log } from \"jsugc-websdk\";\nimport Const from \"@/const\";\n\nlet Helper = {\n    toTimeStr(sec = 0) {\n        let min = sec / 60;\n        let hour = min / 60;\n        let millisec = Math.floor((sec % 1) * 10);\n        return (\n            Math.floor(hour) +\n            \":\" +\n            Math.floor(min) +\n            \":\" +\n            Math.floor(sec % 60) +\n            \".\" +\n            millisec\n        );\n    },\n};\nexport default {\n    components: {\n        TimelineItem,\n        TimelineOverlayItem,\n    },\n    props: [\n        \"playing\",\n        \"show_overlay\",\n        \"show_amix\",\n        \"postermode\",\n        \"poster\",\n        \"overlay_type\",\n        \"preview_render\",\n        \"player\",\n    ],\n    data() {\n        return {\n            Const,\n            pps: screen.width / 10,\n            timelines: Editlist.editlist.timelines,\n            amix: Editlist.editlist.amix,\n            video_min_sec: Editlist.editlist.video_min_sec,\n            time_sec: Editlist.editlist.time_sec,\n            mainLineStyle: {\n                width: 0,\n                transform: \"\",\n                \"transition-duration\": \"0s\",\n            },\n            poster_url: \"\",\n            dragging: false,\n            timelineChanging: false,\n            timer: null,\n        };\n    },\n    watch: {\n        async playing(v) {\n            if (v) {\n                //同步粒度 s\n                let UpdateRate = 0.5;\n\n                this.mainLineStyle[\"transition-duration\"] = UpdateRate + \"s\";\n\n                let fun = async () => {\n                    if (this._moveSpeed) return; //not dragging\n                    try {\n                        let cur = await this.player.position();\n\n                        if (!(cur >= 0)) return;\n\n                        if (cur > this.total_sec) cur = this.total_sec;\n\n                        //暂停未完成的动画，如果不暂停就设置新动画，css值会回到初始状态，导致闪动\n                        let x = this.getComputedTransformX(cur);\n\n                        let curPos = cur;\n                        let timeRemain = this.total_sec - curPos;\n                        let timeRemain2 =\n                            (this.total_sec * this.pps + x) / this.pps;\n\n                        this.mainLineStyle[\"transition-duration\"] =\n                            Math.max(0, timeRemain) + \"s\";\n\n                        this.mainLineStyle.transform = `translateX(${x}px)`;\n                        this.mainLineStyle.transform =\n                            \"translateX(-\" +\n                            (this.total_sec + Math.random() / 1000) * this.pps +\n                            \"px)\";\n\n                        Log.verbose(\n                            `left:${this.total_sec * this.pps + x} total:${\n                                this.total_sec * this.pps\n                            } remain:${timeRemain}/${timeRemain2} speed:${\n                                (this.total_sec * this.pps + x) / timeRemain\n                            }`\n                        );\n\n                        this.time_sec = cur;\n                        if (!this.playing) {\n                            clearInterval(this._goingTmr);\n                            //暂停动画\n                            let x = this.getComputedTransformX(cur);\n                            this.mainLineStyle[\"transition-duration\"] = \"0s\";\n                            this.mainLineStyle.transform =\n                                \"translateX(\" + x + \"px)\";\n                        }\n                    } catch (e) {\n                        Log.warn(\"timeline animation fail\");\n                    }\n                };\n\n                fun();\n\n                this._goingTmr = setInterval(fun, UpdateRate * 1000);\n            } else {\n                // {\n                clearInterval(this._goingTmr);\n\n                //暂停动画\n                let x = this.getComputedTransformX(this.time_sec);\n                this.mainLineStyle[\"transition-duration\"] = \"0s\";\n                this.mainLineStyle.transform = \"translateX(\" + x + \"px)\";\n                // }\n\n                //修正时间\n                try {\n                    let cur = await this.player.position();\n                    if (cur >= 0) {\n                        this.time_sec = cur;\n                        Editlist.editlist.time_sec = cur;\n                    }\n                } catch (e) {\n                    Log.warn(\"timeline animation fail\");\n                }\n\n                //结束的时候设置动画\n                if (Math.abs(this.time_sec - this.total_sec) < 1) {\n                    this.mainLineStyle[\"transition-duration\"] = \"0.1s\";\n\n                    this.mainLineStyle.transform =\n                        \"translateX(-\" +\n                        (this.time_sec + Math.random() / 1000) * this.pps +\n                        \"px)\";\n                    setTimeout(() => {\n                        this.mainLineStyle[\"transition-duration\"] = \"0s\";\n                    }, 150);\n                } else {\n                    // 非结束的时候不需要动画，因为播放过程中，拖动的话，会导致有动画lag\n                    // this.mainLineStyle[\"transition-duration\"] = \"0s\";\n                    // this.mainLineStyle.transform = \"translateX(\"+(x)+\"px)\";\n                }\n\n                // clearInterval(this._goingTmr2);\n            }\n        },\n        time_sec(v) {\n            this.update();\n\n            Editlist.editlist.time_sec = v;\n            this.refreshUI();\n        },\n        async \"poster.url\"(url) {\n            this.poster_url =\n                (await CordovaModel.getCdvUrl(url)) + \"?\" + Math.random();\n        },\n        timelines() {\n            this.update(true);\n        },\n    },\n    computed: {\n        overlay() {\n            return [...Editlist.editlist.overlay, ...Editlist.editlist.mosic];\n        },\n        total_sec() {\n            return this.timelines.reduce((pre, nxt) => {\n                return pre + nxt.end_sec - nxt.start_sec;\n            }, 0);\n        },\n        currentTimeStr() {\n            // console.log(\"update time:\"+this.modal.current)\n            return Helper.toTimeStr(this.time_sec).replace(\"0:0\", \"0\");\n        },\n        totalTimeStr() {\n            return Helper.toTimeStr(this.total_sec)\n                .split(\".\")[0]\n                .replace(\"0:0\", \"0\");\n        },\n        hasEnding() {\n            return this.timelines.find((e) => e.ending);\n        },\n        posterStyles() {\n            if (this.poster.rotate) {\n                return this.poster.rotate\n                    ? \"transform: rotate(\" + this.poster.rotate + \"deg)\"\n                    : \"\";\n            }\n            return {};\n        },\n    },\n    methods: {\n        async updateFrame() {},\n        seek(sec) {\n            if (this.dragging) return;\n\n            this.time_sec = sec;\n            this.update(true);\n        },\n        //序号是 idx 的片段的当前时间。用于生成缩略图\n        time_sec_idx(idx) {\n            let found = this.timelines.filter((o, i) => {\n                return (\n                    i == idx &&\n                    o.offset_sec <= this.timeSec &&\n                    o.offset_sec + (o.end_sec - o.start_sec) > this.timeSec\n                );\n            });\n            if (found.length) return this.time_sec - found[0].offset_sec;\n            else return -1;\n        },\n        update_time_sec(v) {\n            this.time_sec = v;\n            this.update(true);\n        },\n        update(computeTransform) {\n            if (this.timelineChanging) {\n                return;\n            }\n\n            //计算总长度\n            this.mainLineStyle.width = this.total_sec * this.pps + \"px\";\n\n            //计算位移\n            if (this._moveSpeed || computeTransform) {\n                this.mainLineStyle.transform =\n                    \"translateX(-\" + this.time_sec * this.pps + \"px)\";\n            }\n\n            //修正每个块的位置\n            // this.timelines.reduce((pre, nxt) => {\n            //     nxt.offset_sec = pre;\n            //     return pre + nxt.end_sec - nxt.start_sec;\n            // }, 0);\n        },\n        overlayActive(id, active) {\n            if (active) {\n                this.overlay.forEach((v) => {\n                    v.active = v.id == id;\n                });\n                this.$emit(\n                    \"overlayActive\",\n                    this.overlay.filter((o) => o.id == id)[0]\n                );\n            } else {\n                this.overlay.filter((o) => o.id == id)[0].active = false;\n                this.$emit(\"overlayActive\");\n            }\n        },\n        overlayChange(id, event) {\n            let found = this.overlay.filter((o) => o.id == id)[0];\n            found.offset_sec = event.offset_sec;\n            found.end_sec = event.end_sec;\n\n            if (event.overallDragging) {\n                this.time_sec = found.offset_sec;\n                this.changed({\n                    time_sec: this.time_sec,\n                });\n                this.update(true);\n            }\n\n            // window.console.log(\"overlayCHange:\"+event.end)\n            if (event.end)\n                this.$emit(\n                    \"overlayChange\",\n                    this.overlay.filter((o) => o.id == id)[0]\n                );\n        },\n        amixChange(id, event) {\n            let found = this.amix.filter((o) => o.id == id)[0];\n            found.offset_sec = event.offset_sec;\n            found.end_sec = event.end_sec;\n            if (event.end)\n                this.$emit(\n                    \"amixChange\",\n                    this.amix.filter((o) => o.id == id)[0]\n                );\n        },\n        amixActive(id, active) {\n            if (active) {\n                this.amix.forEach((v) => {\n                    v.active = v.id == id;\n                });\n                this.$emit(\n                    \"amixActive\",\n                    this.amix.filter((o) => o.id == id)[0]\n                );\n            } else {\n                this.amix.filter((o) => o.id == id)[0].active = false;\n                this.$emit(\"amixActive\");\n            }\n        },\n        timelineActive(id, active) {\n            if (active)\n                this.timelines.forEach((v) => {\n                    if (v.id == id) {\n                        v.active = true;\n\n                        if (this.time_sec < v.offset_sec) {\n                            this.time_sec = v.offset_sec + 0.01;\n                        } else if (\n                            this.time_sec >=\n                            v.offset_sec + v.end_sec - v.start_sec\n                        ) {\n                            // 加0.0001让time_sec处于v的timeline中\n                            this.time_sec =\n                                v.offset_sec + v.end_sec - v.start_sec - 0.0001;\n                        }\n                    } else {\n                        v.active = false;\n                    }\n                });\n            else this.timelines.find((o) => o.id == id).active = false;\n            this.update(true);\n        },\n        timelineChange(id, event) {\n            let found = this.timelines.filter((o) => o.id == id)[0];\n            found.start_sec = event.start_sec;\n            found.end_sec = event.end_sec;\n            this.timelineChanging = !event.end;\n\n            let offset_sec = found.offset_sec;\n            if (event.left_drag_offset) {\n                //修正后面所有 timeline item 的左侧偏移\n                this.timelines.forEach((v) => {\n                    if (v.offset_sec < offset_sec) return;\n                    v.left_drag_offset = event.left_drag_offset;\n                });\n            } else {\n                this.timelines.forEach((v) => {\n                    v.left_drag_offset = 0;\n                });\n            }\n\n            // 因为暂时无法解决seek超过最后时间点，导致无法显示最后画面的问题，所以这里无法使用实时显示拖动位置画面\n            // if(event.end){\n            //拖动中，让画面seek到拖动点\n            if (event.seek_sec !== undefined) {\n                let foundIdx = this.timelines.indexOf(found);\n\n                // event.seek_sec 是当前片段的seek点，需要加入前方的片段长度才是整个视频的seek点\n                let seek_sec =\n                    event.seek_sec +\n                    [0, ...this.timelines.slice(0, foundIdx)].reduce(\n                        (pre, nxt) => {\n                            return pre + nxt.end_sec - nxt.start_sec;\n                        }\n                    );\n\n                this.time_sec = Math.max(0, seek_sec);\n                this.changed({\n                    time_sec: this.time_sec,\n                });\n            }\n            Editlist.editlist.update_timelines(this.timelines);\n            // }\n\n            if (event.end) {\n                this.$emit(\"timelinesChange\", this.timelines);\n                this.update(true);\n            }\n\n            this.update();\n        },\n        currentStart(e) {\n            this._pageX = e.changedTouches[0].pageX;\n            this._value = this.time_sec;\n            Log.uilog(\"/timeline\", `seek begin: ${this.time_sec}`);\n        },\n        currentMove(e) {\n            let offset = e.changedTouches[0].pageX - this._pageX;\n\n            this.dragging = true;\n            //记录最后一次移动的幅度，用于惯性动画\n            if (this._preOffset) this._moveSpeed = -offset + this._preOffset;\n            this._preOffset = offset;\n\n            this.time_sec = Math.max(\n                0,\n                Math.min(this.total_sec, this._value - offset / this.pps)\n            );\n\n            this.changed({\n                time_sec: this.time_sec,\n            });\n\n            return true;\n        },\n        async changed(opt) {\n            let isEnd = !opt;\n\n            if (this.timer) {\n                clearTimeout(this.timer);\n                this.timer = null;\n            }\n\n            if (isEnd && Math.abs(this._moveSpeed) > 1) {\n                let speed = this._moveSpeed * 5;\n                speed = Math.max(-60, Math.min(60, speed));\n                // let ts = Date.now();\n                while (Math.abs(speed) > 1) {\n                    let newVal = this.time_sec + speed / this.pps;\n                    // let now = Date.now();\n\n                    //减速\n                    speed *= 0.8;\n                    // speed *= Math.pow(0.8, (now-ts)/20);\n\n                    // ts = now;\n                    this.time_sec = Math.max(\n                        0,\n                        Math.min(this.total_sec, newVal)\n                    );\n\n                    await new Promise((o) => {\n                        this.timer = setTimeout(o, 20);\n                    });\n                }\n            }\n\n            if (isEnd) {\n                this._preOffset = 0;\n                this._moveSpeed = 0;\n                this.dragging = false;\n                Log.uilog(\"/timeline\", `seek end: ${this.time_sec}`);\n            }\n\n            this.$emit(\"timeChange\", {\n                time_sec: this.time_sec,\n                ...opt,\n            });\n        },\n        posterLoadError() {\n            this.poster_url = null;\n        },\n        endingClick() {\n            this.$emit(\"on_ending_click\");\n        },\n        refreshUI() {\n            if (this.timelineChanging) {\n                return;\n            }\n            let cur = Editlist.editlist.cur_timeline();\n            if (cur) {\n                cur.focus = true;\n\n                this.timelines.forEach(\n                    (e) => e.id != cur.id && (e.focus = false)\n                );\n\n                if (!cur.active) {\n                    this.timelines.forEach((e) => (e.active = false));\n                }\n            }\n        },\n        getComputedTransformX(time) {\n            let style = window.getComputedStyle(this.$refs.mainLine);\n            let x = Number.parseFloat(style.transform.split(/[(,)]/)[5]);\n            // 如果mainLine被隐藏，style.transform会取到none\n            if (isNaN(x)) {\n                x = -time * this.pps;\n            }\n            return x;\n        },\n    },\n    mounted() {\n        this.update(true);\n        this.updateFrame();\n    },\n    beforeDestroy() {\n        clearInterval(this._goingTmr);\n    },\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTimeline.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTimeline.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ClipTimeline.vue?vue&type=template&id=5f3d8022&scoped=true&\"\nimport script from \"./ClipTimeline.vue?vue&type=script&lang=js&\"\nexport * from \"./ClipTimeline.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ClipTimeline.vue?vue&type=style&index=0&id=5f3d8022&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5f3d8022\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"controlBox\"},[_c('mu-icon',{staticStyle:{\"position\":\"absolute\",\"left\":\"0\"},attrs:{\"value\":\"aspect_ratio\"},on:{\"click\":function($event){return _vm.$emit('event',{eventID:_vm.EventID.AspectRatio})}}}),_c('mu-icon',{attrs:{\"value\":\"skip_previous\"},on:{\"click\":function($event){return _vm.$emit('event',{eventID:_vm.EventID.SeekBegin})}}}),_c('mu-button',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"},{name:\"show\",rawName:\"v-show\",value:(!_vm.playing),expression:\"!playing\"}],staticStyle:{\"padding\":\"0\",\"overflow\":\"visible\"},attrs:{\"data-mu-loading-size\":\"20\",\"data-mu-loading-overlay-color\":\"rgba(0, 0, 0, 0)\",\"data-mu-loading-color\":\"white\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.$emit('event',{eventID:_vm.EventID.Play})}}},[_c('mu-icon',{attrs:{\"value\":\"play_arrow\"}})],1),_c('mu-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.$emit('event',{eventID:_vm.EventID.Pause})}}},[_c('mu-icon',{attrs:{\"value\":\"pause\"}})],1),_c('mu-icon',{attrs:{\"value\":\"skip_next\"},on:{\"click\":function($event){return _vm.$emit('event',{eventID:_vm.EventID.SeekEnd})}}}),_c('mu-icon',{class:[_vm.hasHistory ? '' : 'disabled'],staticStyle:{\"position\":\"absolute\",\"right\":\"0\"},attrs:{\"value\":\"undo\"},on:{\"click\":function($event){_vm.hasHistory && _vm.$emit('event',{eventID:_vm.EventID.Undo})}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"controlBox\">\n        <mu-icon\n            value=\"aspect_ratio\"\n            @click=\"$emit('event',{eventID:EventID.AspectRatio})\"\n            style=\"position:absolute;left:0\"\n        />\n        <mu-icon value=\"skip_previous\" @click=\"$emit('event',{eventID:EventID.SeekBegin})\" />\n        <mu-button\n            v-loading=\"loading\"\n            style=\"padding:0;overflow:visible\"\n            data-mu-loading-size=\"20\"\n            data-mu-loading-overlay-color=\"rgba(0, 0, 0, 0)\"\n            data-mu-loading-color=\"white\"\n            icon\n            v-show=\"!playing\"\n            @click=\"$emit('event',{eventID:EventID.Play})\"\n        >\n            <mu-icon value=\"play_arrow\" />\n        </mu-button>\n        <mu-button v-show=\"playing\" icon @click=\"$emit('event',{eventID:EventID.Pause})\">\n            <mu-icon value=\"pause\" />\n        </mu-button>\n        <mu-icon value=\"skip_next\" @click=\"$emit('event',{eventID:EventID.SeekEnd})\" />\n        <mu-icon\n            value=\"undo\"\n            :class=\"[hasHistory ? '' : 'disabled']\"\n            @click=\"hasHistory && $emit('event',{eventID:EventID.Undo})\"\n            style=\"position:absolute;right:0\"\n        />\n    </div>\n</template>\n<style lang=\"less\" scoped>\n.controlBox {\n    text-align: center;\n    color: white;\n    font-size: 25px;\n\n    & > * {\n        padding: 10px 20px;\n    }\n}\n.disabled {\n    opacity: 0.5;\n}\n</style>\n<script>\n// import { Editlist } from \"jsugc-websdk\";\nimport OpHistory from \"@/model/History\";\n\nlet EventID = {\n    Play: 0,\n    Pause: 1,\n    SeekBegin: 2,\n    SeekEnd: 3,\n    AspectRatio: 4,\n    Undo: 5\n};\nexport default {\n    EventID,\n    props: [\"playing\", \"loading\"],\n    data() {\n        return {\n            EventID,\n            history: OpHistory\n        };\n    },\n    computed: {\n        hasHistory() {\n            return this.history.operateHistory.length > 1;\n        }\n    },\n    created() {\n        // 让直接对Editlist.editlist.operate.history做的操作可以被监控\n        // Editlist.editlist.operate = this.editlist.operate;\n    }\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerController.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerController.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlayerController.vue?vue&type=template&id=270f6bbc&scoped=true&\"\nimport script from \"./PlayerController.vue?vue&type=script&lang=js&\"\nexport * from \"./PlayerController.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlayerController.vue?vue&type=style&index=0&id=270f6bbc&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"270f6bbc\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"toolTabBox\"},[_c('div',{staticClass:\"middleBox\"},[_c('transition',{attrs:{\"name\":\"fade\"}},[_c('OverlayToolTab',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeItem&&_vm.activeItem.active),expression:\"activeItem&&activeItem.active\"}],ref:\"overlayToolTab\",class:{hide:_vm.toolTab!='overlaytool'},attrs:{\"activeItem\":_vm.activeItem},on:{\"select\":_vm.overlayTabSelect}})],1),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('HScrollBar',{staticClass:\"m-cut tabBox\",class:{hide:_vm.toolTab!='cut'}},[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"note_add\",\"text\":\"添加\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.VideoAdd)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"disabled\":!_vm.isCurTimelineRemovable,\"icon\":\"delete_forever\",\"text\":\"删除\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.VideoRemove)}}}),_c('div',{staticStyle:{\"margin\":\"10px\",\"border-right\":\"1px solid gray\"}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"disabled\":_vm.curTimelineIsEnding,\"icon\":\"view_agenda\",\"text\":\"分割\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.VideoSplit)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"view_column\",\"text\":\"排序\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.VideoSort)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"disabled\":_vm.curTimelineIsEnding,\"icon\":\"sync\",\"text\":\"旋转\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.VideoRotate)}}})],1)],1),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"m-image tabBox\",class:{hide:_vm.toolTab!='image'}},[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"image\",\"text\":\"贴纸\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.AddImage)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"photo_library\",\"text\":\"本地贴纸\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.AddLocalImage)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"blur_on\",\"text\":\"马赛克\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.Mosic)}}})],1)]),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"m-text tabBox\",class:{hide:_vm.toolTab!='text'}},[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"textsms\",\"text\":\"添加文字\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.AddText)}}})],1)]),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"m-filter tabBox\",class:{hide:_vm.toolTab!='filter'}},[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"disabled\":_vm.curTimelineIsEnding,\"icon\":\"face\",\"text\":\"美颜\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.Face)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"photo_filter\",\"disabled\":_vm.curTimelineIsEnding,\"text\":\"滤镜\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.Filter)}}})],1)]),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"m-music tabBox\",class:{hide:_vm.toolTab!='music'}},[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"volume_up\",\"text\":\"调整音量\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.AudioBase)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"surround_sound\",\"text\":\"添加背景音\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.BGM)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"audiotrack\",\"text\":\"音效\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.AudioEffect)}}})],1)])],1),_c('div',{staticClass:\"bottomBox\"},[_c('mu-icon',{class:{active:_vm.toolTab=='cut'},attrs:{\"value\":\"duo\",\"size\":\"28\",\"color\":\"white\"},on:{\"click\":function($event){_vm.toolTab='cut';}}}),_c('mu-icon',{class:{active:_vm.toolTab=='image'},attrs:{\"value\":\"add_photo_alternate\",\"size\":\"28\",\"color\":\"white\"},on:{\"click\":function($event){_vm.toolTab='image';}}}),_c('mu-icon',{class:{active:_vm.toolTab=='text'},attrs:{\"value\":\"post_add\",\"size\":\"28\",\"color\":\"white\"},on:{\"click\":function($event){_vm.toolTab='text';}}}),_c('mu-icon',{class:{active:_vm.toolTab=='music'},attrs:{\"value\":\"music_note\",\"size\":\"28\",\"color\":\"white\"},on:{\"click\":function($event){_vm.toolTab='music';}}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\",class:{active:_vm.active,disabled:_vm.disabled},on:{\"click\":_vm.clicked}},[(!_vm.src)?_c('mu-icon',{attrs:{\"value\":_vm.icon}}):(_vm.src)?_c('div',{staticClass:\"img\"},[_c('img',{attrs:{\"alt\":\" \",\"src\":_vm.src},on:{\"~error\":function($event){$event.target.src=_vm.src2}}}),_c('div')]):_vm._e(),_c('span',[_vm._v(_vm._s(_vm.text))]),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <span class=\"icon\" :class=\"{active:active,disabled:disabled}\" @click=\"clicked\">\n        <mu-icon v-if=\"!src\" :value=\"icon\" />\n        <div v-else-if=\"src\" class=\"img\">\n            <img alt=\" \" :src=\"src\" @error.once=\"$event.target.src=src2\" />\n            <div />\n        </div>\n        <span>{{text}}</span>\n        <slot />\n    </span>\n</template>\n<style scoped>\n.disabled {\n    opacity: 0.5;\n}\n.icon {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: 24px;\n    color: white;\n    padding: 5px;\n    position: relative;\n}\n.icon > span {\n    zoom: 0.5;\n    white-space: nowrap;\n}\n.icon > .img {\n    border-radius: 3px;\n    width: 30px;\n    height: 30px;\n    overflow: hidden;\n    position: relative;\n}\n.icon > .img > img {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n}\n.icon > .img > div {\n    display: none;\n}\n.icon.active > .img > div {\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    background: rgba(255, 0, 0, 0.6);\n    display: block;\n}\n\n.icon.active {\n    color: red;\n}\n</style>\n<script>\nexport default {\n    props: [\"text\", \"icon\", \"src\", \"src2\", \"ricon\", \"active\", \"disabled\"],\n    methods: {\n        clicked(e) {\n            if (!this.disabled) {\n                this.$emit(\"click\", e);\n            }\n        },\n    },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipBtn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipBtn.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ClipBtn.vue?vue&type=template&id=f8360a66&scoped=true&\"\nimport script from \"./ClipBtn.vue?vue&type=script&lang=js&\"\nexport * from \"./ClipBtn.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ClipBtn.vue?vue&type=style&index=0&id=f8360a66&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f8360a66\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"bar\",attrs:{\"HScrollBar\":\"\"}},[(_vm.visibleLeftArrow)?_c('span',{staticClass:\"material-icons left-icon\"},[_vm._v(\"keyboard_arrow_left\")]):_vm._e(),(_vm.visibleRightArrow)?_c('span',{staticClass:\"material-icons right-icon\"},[_vm._v(\"keyboard_arrow_right\")]):_vm._e(),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- 水平滚动条: 能滚动时显示箭头 -->\r\n<template>\r\n    <div HScrollBar ref=\"bar\">\r\n        <span v-if=\"visibleLeftArrow\" class=\"material-icons left-icon\">keyboard_arrow_left</span>\r\n        <span v-if=\"visibleRightArrow\" class=\"material-icons right-icon\">keyboard_arrow_right</span>\r\n        <slot></slot>\r\n    </div>\r\n</template>\r\n<style scoped>\r\n.left-icon {\r\n    position: fixed;\r\n    z-index: 1;\r\n    margin-top: 5px;\r\n    left: 0;\r\n    color: white;\r\n    opacity: 0.7;\r\n    animation: fade 3s infinite;\r\n    text-shadow: 0 0 3px black;\r\n}\r\n.right-icon {\r\n    position: fixed;\r\n    z-index: 1;\r\n    margin-top: 5px;\r\n    right: 0;\r\n    color: white;\r\n    opacity: 0.7;\r\n    animation: fade 3s infinite;\r\n    text-shadow: 0 0 3px black;\r\n}\r\n@keyframes fade {\r\n    40% {\r\n        opacity: 0.7;\r\n    }\r\n    50% {\r\n        opacity: 0;\r\n    }\r\n    60% {\r\n        opacity: 0.7;\r\n    }\r\n}\r\n</style>\r\n<script>\r\nlet MASK_SPAN = 20; //px\r\n\r\nexport default {\r\n    props: [\"scroller\"],\r\n    data() {\r\n        return {\r\n            visibleLeftArrow: false,\r\n            visibleRightArrow: false\r\n        };\r\n    },\r\n    watch: {\r\n        scroller: \"refresh\"\r\n    },\r\n    methods: {\r\n        refresh() {\r\n            let $scroller = this.scroller || this.$el;\r\n            let sLeft = $scroller.scrollLeft;\r\n            let sWidth = $scroller.scrollWidth;\r\n            let width = $scroller.offsetWidth;\r\n\r\n            this.visibleLeftArrow = sLeft > MASK_SPAN;\r\n            this.visibleRightArrow = sLeft + width + MASK_SPAN < sWidth;\r\n        }\r\n    },\r\n    beforeDestroy() {\r\n        this.$refs.bar.removeEventListener(\"scroll\", this.onscroll, true);\r\n    },\r\n    mounted() {\r\n        this.onscroll = this.refresh.bind(this);\r\n        this.$nextTick(this.onscroll);\r\n        setTimeout(this.onscroll, 1000);\r\n        this.$refs.bar.addEventListener(\"scroll\", this.onscroll, true);\r\n    }\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HScrollBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HScrollBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HScrollBar.vue?vue&type=template&id=54853b12&scoped=true&\"\nimport script from \"./HScrollBar.vue?vue&type=script&lang=js&\"\nexport * from \"./HScrollBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HScrollBar.vue?vue&type=style&index=0&id=54853b12&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54853b12\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"overlayToolTabBox\"},[_c('div',{staticClass:\"overlayToolTab\"},[(_vm.activeItem && _vm.activeItem.text)?[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"edit\",\"text\":\"编辑\"},nativeOn:{\"click\":function($event){return _vm.select(_vm.TabID.Edit)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"format_paint\",\"text\":\"样式\"},nativeOn:{\"click\":function($event){return _vm.select(_vm.TabID.Template)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"tune\",\"text\":\"调整\"},nativeOn:{\"click\":function($event){return _vm.select(_vm.TabID.Settings)}}})]:_vm._e(),[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"delete_forever\",\"text\":\"删除\"},nativeOn:{\"click\":function($event){return _vm.select(_vm.TabID.Remove)}}}),_c('ClipBtn',{staticClass:\"done-btn\",attrs:{\"icon\":\"done\"},nativeOn:{\"click\":function($event){return _vm.select(_vm.TabID.Done)}}})]],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"overlayToolTabBox\">\r\n        <div class=\"overlayToolTab\">\r\n            <template v-if=\"activeItem && activeItem.text\">\r\n                <ClipBtn @click.native=\"select(TabID.Edit)\" class=\"item-btn\" icon=\"edit\" text=\"编辑\" />\r\n                <ClipBtn\r\n                    @click.native=\"select(TabID.Template)\"\r\n                    class=\"item-btn\"\r\n                    icon=\"format_paint\"\r\n                    text=\"样式\"\r\n                />\r\n                <ClipBtn\r\n                    @click.native=\"select(TabID.Settings)\"\r\n                    class=\"item-btn\"\r\n                    icon=\"tune\"\r\n                    text=\"调整\"\r\n                />\r\n            </template>\r\n            <template>\r\n                <ClipBtn\r\n                    @click.native=\"select(TabID.Remove)\"\r\n                    class=\"item-btn\"\r\n                    icon=\"delete_forever\"\r\n                    text=\"删除\"\r\n                />\r\n                <ClipBtn @click.native=\"select(TabID.Done)\" class=\"done-btn\" icon=\"done\" />\r\n            </template>\r\n        </div>\r\n    </div>\r\n</template>\r\n<style lang=\"less\" scoped>\r\n.fade-enter-active {\r\n    transition: all 0.5s;\r\n}\r\n.fade-leave-active {\r\n    transition: all 0.2s;\r\n}\r\n.fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\r\n    opacity: 0;\r\n}\r\n.fade-enter /* .fade-leave-active below version 2.1.8 */ {\r\n    opacity: 0;\r\n}\r\n\r\n.overlayToolTabBox {\r\n    height: 50px;\r\n    position: absolute;\r\n    display: flex;\r\n    justify-content: center;\r\n    width: 100%;\r\n    background: #323232;\r\n    z-index: 100;\r\n}\r\n.overlayToolTab {\r\n    margin-top: 5px;\r\n    border-radius: 5px;\r\n    overflow: hidden;\r\n    background-color: #444;\r\n    display: flex;\r\n    flex-direction: row;\r\n    white-space: nowrap;\r\n    justify-content: center;\r\n    width: auto !important;\r\n\r\n    &.hide {\r\n        display: none;\r\n    }\r\n\r\n    .item-btn {\r\n        padding: 5px 15px;\r\n    }\r\n\r\n    .done-btn {\r\n        padding: 0 8px;\r\n        background: #555;\r\n    }\r\n}\r\n</style>\r\n<script>\r\nimport ClipBtn from \"@/components/ClipBtn\";\r\n\r\nlet __tabid = 0;\r\nconst TabID = {\r\n    Edit: __tabid++,\r\n    Template: __tabid++,\r\n    Settings: __tabid++,\r\n    Remove: __tabid++,\r\n    Done: __tabid++\r\n};\r\n\r\nexport default {\r\n    TabID,\r\n    components: {\r\n        ClipBtn\r\n    },\r\n    props: [\"activeItem\"],\r\n    data() {\r\n        return {\r\n            TabID\r\n        };\r\n    },\r\n    methods: {\r\n        select(id) {\r\n            this.$emit(\"select\", id, this.activeItem);\r\n        }\r\n    }\r\n};\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverlayToolTab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverlayToolTab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OverlayToolTab.vue?vue&type=template&id=44fcf3a9&scoped=true&\"\nimport script from \"./OverlayToolTab.vue?vue&type=script&lang=js&\"\nexport * from \"./OverlayToolTab.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OverlayToolTab.vue?vue&type=style&index=0&id=44fcf3a9&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44fcf3a9\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"toolTabBox\">\n        <div class=\"middleBox\">\n            <transition name=\"fade\">\n                <OverlayToolTab\n                    ref=\"overlayToolTab\"\n                    v-show=\"activeItem&&activeItem.active\"\n                    :class=\"{hide:toolTab!='overlaytool'}\"\n                    :activeItem=\"activeItem\"\n                    @select=\"overlayTabSelect\"\n                />\n            </transition>\n\n            <transition name=\"fade\">\n                <HScrollBar class=\"m-cut tabBox\" :class=\"{hide:toolTab!='cut'}\">\n                    <ClipBtn\n                        @click=\"select(TabID.VideoAdd)\"\n                        class=\"item-btn\"\n                        icon=\"note_add\"\n                        text=\"添加\"\n                    />\n                    <ClipBtn\n                        @click=\"select(TabID.VideoRemove)\"\n                        :disabled=\"!isCurTimelineRemovable\"\n                        class=\"item-btn\"\n                        icon=\"delete_forever\"\n                        text=\"删除\"\n                    />\n                    <div style=\"margin:10px;border-right:1px solid gray\"></div>\n                    <ClipBtn\n                        @click=\"select(TabID.VideoSplit)\"\n                        :disabled=\"curTimelineIsEnding\"\n                        class=\"item-btn\"\n                        icon=\"view_agenda\"\n                        text=\"分割\"\n                    />\n                    <!-- <ClipBtn @click=\"select(TabID.VideoBase)\" class=\"item-btn\" icon=\"exposure\" text=\"视频参数\" /> -->\n                    <ClipBtn\n                        @click=\"select(TabID.VideoSort)\"\n                        class=\"item-btn\"\n                        icon=\"view_column\"\n                        text=\"排序\"\n                    />\n                    <ClipBtn\n                        @click=\"select(TabID.VideoRotate)\"\n                        :disabled=\"curTimelineIsEnding\"\n                        class=\"item-btn\"\n                        icon=\"sync\"\n                        text=\"旋转\"\n                    />\n                    <!-- <ClipBtn @click=\"select(TabID.VideoVFlip)\" :disabled=\"curTimelineIsEnding\" class=\"item-btn\" icon=\"swap_vert\" text=\"上下翻转\" />\n                    <ClipBtn @click=\"select(TabID.VideoHFlip)\" :disabled=\"curTimelineIsEnding\" class=\"item-btn\" icon=\"swap_horiz\" text=\"左右翻转\" />-->\n                </HScrollBar>\n            </transition>\n            <transition name=\"fade\">\n                <div class=\"m-image tabBox\" :class=\"{hide:toolTab!='image'}\">\n                    <ClipBtn\n                        @click=\"select(TabID.AddImage)\"\n                        class=\"item-btn\"\n                        icon=\"image\"\n                        text=\"贴纸\"\n                    />\n                    <ClipBtn\n                        class=\"item-btn\"\n                        icon=\"photo_library\"\n                        @click=\"select(TabID.AddLocalImage)\"\n                        text=\"本地贴纸\"\n                    />\n                    <ClipBtn\n                        class=\"item-btn\"\n                        icon=\"blur_on\"\n                        @click=\"select(TabID.Mosic)\"\n                        text=\"马赛克\"\n                    />\n                </div>\n            </transition>\n            <transition name=\"fade\">\n                <div class=\"m-text tabBox\" :class=\"{hide:toolTab!='text'}\">\n                    <ClipBtn\n                        @click=\"select(TabID.AddText)\"\n                        class=\"item-btn\"\n                        icon=\"textsms\"\n                        text=\"添加文字\"\n                    />\n                </div>\n            </transition>\n            <transition name=\"fade\">\n                <div class=\"m-filter tabBox\" :class=\"{hide:toolTab!='filter'}\">\n                    <ClipBtn\n                        @click=\"select(TabID.Face)\"\n                        :disabled=\"curTimelineIsEnding\"\n                        class=\"item-btn\"\n                        icon=\"face\"\n                        text=\"美颜\"\n                    />\n                    <ClipBtn\n                        class=\"item-btn\"\n                        icon=\"photo_filter\"\n                        :disabled=\"curTimelineIsEnding\"\n                        @click=\"select(TabID.Filter)\"\n                        text=\"滤镜\"\n                    />\n                </div>\n            </transition>\n            <transition name=\"fade\">\n                <div class=\"m-music tabBox\" :class=\"{hide:toolTab!='music'}\">\n                    <ClipBtn\n                        @click=\"select(TabID.AudioBase)\"\n                        class=\"item-btn\"\n                        icon=\"volume_up\"\n                        text=\"调整音量\"\n                    />\n                    <!-- <ClipBtn class=\"item-btn\" icon=\"md-microphone\" text=\"调整音调\"/> -->\n                    <ClipBtn\n                        @click=\"select(TabID.BGM)\"\n                        class=\"item-btn\"\n                        icon=\"surround_sound\"\n                        text=\"添加背景音\"\n                    />\n                    <ClipBtn\n                        @click=\"select(TabID.AudioEffect)\"\n                        class=\"item-btn\"\n                        icon=\"audiotrack\"\n                        text=\"音效\"\n                    />\n                </div>\n            </transition>\n        </div>\n        <div class=\"bottomBox\">\n            <mu-icon\n                value=\"duo\"\n                :class=\"{active:toolTab=='cut'}\"\n                size=\"28\"\n                color=\"white\"\n                @click=\"toolTab='cut';\"\n            />\n            <mu-icon\n                value=\"add_photo_alternate\"\n                :class=\"{active:toolTab=='image'}\"\n                size=\"28\"\n                color=\"white\"\n                @click=\"toolTab='image';\"\n            />\n            <mu-icon\n                value=\"post_add\"\n                :class=\"{active:toolTab=='text'}\"\n                size=\"28\"\n                color=\"white\"\n                @click=\"toolTab='text';\"\n            />\n            <!-- <mu-icon\n                value=\"movie_filter\"\n                :class=\"{active:toolTab=='filter'}\"\n                size=\"28\"\n                color=\"white\"\n                @click=\"toolTab='filter'\"\n            /> -->\n            <mu-icon\n                value=\"music_note\"\n                :class=\"{active:toolTab=='music'}\"\n                size=\"28\"\n                color=\"white\"\n                @click=\"toolTab='music';\"\n            />\n        </div>\n    </div>\n</template>\n<style lang=\"less\" scoped>\n.toolTabBox {\n    width: 100%;\n    background: rgba(50, 50, 50, 1);\n    position: relative;\n\n    & > * {\n        width: 100%;\n    }\n\n    .middleBox {\n        padding: 5px;\n        margin-top: 5px;\n        // background: #111;\n\n        .tabBox.hide {\n            display: none;\n        }\n\n        .tabBox {\n            display: flex;\n            flex-direction: row;\n            white-space: nowrap;\n            justify-content: center;\n        }\n\n        .item-btn {\n            padding: 5px 20px;\n        }\n\n        .m-cut {\n            overflow-x: auto;\n            justify-content: flex-start;\n        }\n\n        .m-filter .item-btn.active {\n            background: white;\n            color: black;\n            border-radius: 5px;\n        }\n    }\n\n    .bottomBox {\n        display: flex;\n        flex-flow: row;\n        padding: 10px 0px;\n        width: 100%;\n        justify-content: space-around;\n        align-items: center;\n        background: black;\n        border-top: 0.5px solid #666;\n\n        & > *.active {\n            color: transparent !important;\n            background: linear-gradient(45deg, white 50%, red 50%);\n            -webkit-background-clip: text;\n            background-clip: text;\n        }\n    }\n}\n</style>\n\n<script>\nimport { Editlist } from \"jsugc-websdk\";\nimport ClipBtn from \"@/components/ClipBtn\";\nimport HScrollBar from \"@/components/HScrollBar\";\nimport OverlayToolTab from \"@/views/Bottom/OverlayToolTab\";\nimport Const from \"@/const\";\n\nlet __tabid = 0;\nlet TabID = {\n    VideoAdd: __tabid++,\n    VideoRemove: __tabid++,\n    VideoRotate: __tabid++,\n    VideoSort: __tabid++,\n    VideoSplit: __tabid++,\n    VideoVFlip: __tabid++,\n    VideoHFlip: __tabid++,\n    VideoBase: __tabid++,\n\n    AddImage: __tabid++,\n    AddLocalImage: __tabid++,\n    AddText: __tabid++,\n    AudioBase: __tabid++,\n    BGM: __tabid++,\n    Face: __tabid++,\n    Filter: __tabid++,\n    Mosic: __tabid++,\n    AudioEffect: __tabid++,\n    AspectRatio: __tabid++,\n\n    ImageTab: __tabid++,\n    TextTab: __tabid++,\n    AudioTab: __tabid++,\n    OtherTab: __tabid++,\n\n    ToolEdit: __tabid++,\n    ToolTemplate: __tabid++,\n    ToolSettings: __tabid++,\n    ToolRemove: __tabid++,\n    ToolDone: __tabid++,\n};\n\nexport default {\n    TabID,\n    components: {\n        ClipBtn,\n        OverlayToolTab,\n        HScrollBar,\n    },\n    props: [\"activeItem\"],\n    data() {\n        return {\n            TabID,\n            toolTab: \"cut\",\n        };\n    },\n    watch: {\n        activeItem(o) {\n            if (o) {\n                if (o.type == Const.Overlay.Type.Text) {\n                    this.toolTab = \"text\";\n                } else if (\n                    o.type == Const.Overlay.Type.Image ||\n                    o.type == Const.Overlay.Type.Mosic\n                ) {\n                    this.toolTab = \"image\";\n                }\n            }\n        },\n\n        toolTab(v) {\n            if (v == \"image\") this.$emit(\"select\", TabID.ImageTab);\n            else if (v == \"text\") this.$emit(\"select\", TabID.TextTab);\n            else if (v == \"music\") this.$emit(\"select\", TabID.AudioTab);\n            else this.$emit(\"select\", TabID.OtherTab);\n        },\n    },\n    computed: {\n        isCurTimelineRemovable() {\n            let timelines = Editlist.editlist.timelines;\n            if (timelines.length <= 1) {\n                return false;\n            }\n            let hasEnding = timelines[timelines.length - 1].ending;\n            if (hasEnding) {\n                let cur_id = Editlist.editlist.cur_timeline_id;\n                let cur = Editlist.editlist.timelines.filter(\n                    (o) => o.id == cur_id\n                )[0];\n                if (cur.ending) {\n                    return true;\n                }\n                if (timelines.length <= 2) {\n                    return false;\n                }\n            }\n            return true;\n        },\n        curTimelineIsEnding() {\n            let cur_id = Editlist.editlist.cur_timeline_id;\n            let cur = Editlist.editlist.timelines.filter(\n                (o) => o.id == cur_id\n            )[0];\n            return cur && cur.ending;\n        },\n    },\n    methods: {\n        select(tabID) {\n            this.$emit(\"select\", tabID);\n        },\n        overlayTabSelect(toolTabID, item) {\n            let tabID;\n            switch (toolTabID) {\n                case OverlayToolTab.TabID.Edit:\n                    tabID = TabID.ToolEdit;\n                    break;\n                case OverlayToolTab.TabID.Template:\n                    tabID = TabID.ToolTemplate;\n                    break;\n                case OverlayToolTab.TabID.Settings:\n                    tabID = TabID.ToolSettings;\n                    break;\n                case OverlayToolTab.TabID.Remove:\n                    tabID = TabID.ToolRemove;\n                    break;\n                case OverlayToolTab.TabID.Done:\n                    tabID = TabID.ToolDone;\n                    break;\n                default:\n                    return;\n            }\n            this.$emit(\"select\", tabID, item);\n        },\n    },\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolTab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolTab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ToolTab.vue?vue&type=template&id=28e2578a&scoped=true&\"\nimport script from \"./ToolTab.vue?vue&type=script&lang=js&\"\nexport * from \"./ToolTab.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ToolTab.vue?vue&type=style&index=0&id=28e2578a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28e2578a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"},on:{\"after-leave\":function($event){return _vm.$emit('close')}}},[(_vm.tabid >= 0)?_c('div',{staticClass:\"dialog-main\",style:(_vm.style)},[_c('div',{staticClass:\"dialog-content\"},[(_vm.tabid == _vm.TabID.AudioBase)?_c('AudioBase',{ref:\"audiobBase\",attrs:{\"title\":_vm.title},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e(),(_vm.tabid == _vm.TabID.VideoSort)?_c('Sort',{ref:\"sort\",attrs:{\"title\":_vm.title,\"accept\":_vm.dialogAccept},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e(),(_vm.tabid == _vm.TabID.BGM)?_c('BGM',{ref:\"bgm\",attrs:{\"title\":_vm.title,\"accept\":_vm.dialogAccept},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e(),(_vm.tabid == _vm.TabID.AudioEffect)?_c('AudioEffect',{ref:\"audioEffect\",attrs:{\"title\":_vm.title,\"accept\":_vm.dialogAccept},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e(),(_vm.tabid == _vm.TabID.Filter)?_c('VFilter',{ref:\"vfilter\",attrs:{\"title\":_vm.title},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e(),(_vm.tabid == _vm.TabID.Face)?_c('Face',{ref:\"face\",attrs:{\"title\":_vm.title},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e(),(_vm.tabid == _vm.TabID.AddImage)?_c('ImageOverlay',{ref:\"imageOverlay\",attrs:{\"title\":_vm.title,\"options\":_vm.options,\"postermode\":_vm.postermode},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change,\"beforechange\":_vm.beforechange}}):_vm._e(),(_vm.tabid == _vm.TabID.AddText)?_c('TextOverlay',{ref:\"textOverlay\",attrs:{\"title\":_vm.title,\"postermode\":_vm.postermode,\"accept\":_vm.dialogAccept,\"options\":_vm.options},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change,\"beforechange\":_vm.beforechange}}):_vm._e(),(_vm.tabid == _vm.TabID.VideoBase)?_c('VideoBase',{ref:\"videoBase\",attrs:{\"title\":_vm.title},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e(),(_vm.tabid == _vm.TabID.AspectRatio)?_c('AspectRatio',{ref:\"aspectRatio\",attrs:{\"title\":_vm.title},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e()],1),_c('div',{staticClass:\"bottom-title\"},[(!_vm.dialogAcceptable)?_c('mu-button',{staticClass:\"accept-btn\",attrs:{\"flat\":\"\",\"color\":\"white\"},on:{\"click\":_vm.close}},[_c('mu-icon',{attrs:{\"value\":\"\"}})],1):_vm._e(),(_vm.dialogAcceptable)?_c('mu-button',{staticClass:\"close-btn\",attrs:{\"flat\":\"\",\"color\":\"white\"},on:{\"click\":_vm.close}},[_c('mu-icon',{attrs:{\"value\":\"close\"}})],1):_vm._e(),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))]),(_vm.dialogAcceptable)?_c('mu-button',{staticClass:\"accept-btn\",attrs:{\"flat\":\"\",\"color\":\"white\"},on:{\"click\":_vm.accept}},[_c('mu-icon',{attrs:{\"value\":\"check\"}})],1):_vm._e(),(!_vm.dialogAcceptable)?_c('mu-button',{staticClass:\"accept-btn\",attrs:{\"flat\":\"\",\"color\":\"white\"},on:{\"click\":_vm.close}},[_c('mu-icon',{attrs:{\"value\":\"keyboard_arrow_down\"}})],1):_vm._e()],1)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"audio-base-main\",on:{\"touchend\":_vm.touchend}},[_c('span',{staticStyle:{\"color\":\"white\",\"width\":\"100px\"}},[_vm._v(\"音量(\"+_vm._s(_vm.volume)+\")\")]),_c('mu-slider',{staticStyle:{\"margin\":\"0\"},attrs:{\"min\":0,\"max\":300,\"step\":1},model:{value:(_vm.volume),callback:function ($$v) {_vm.volume=$$v},expression:\"volume\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"audio-base-main\" @touchend=\"touchend\">\n        <span style=\"color:white;width:100px\">音量({{volume}})</span>\n        <mu-slider style=\"margin:0\" :min=\"0\" :max=\"300\" :step=\"1\" v-model=\"volume\" />\n    </div>\n</template>\n<style scoped>\n.audio-base-main {\n    display: flex;\n}\n</style>\n<script>\nimport { Editlist, Log } from \"jsugc-websdk\";\nimport Const from \"@/const\";\nimport throttle from \"lodash.throttle\";\nimport OpHistory from \"@/model/History\";\nexport default {\n    props: [\"title\"],\n    data() {\n        return {\n            volume: 100,\n        };\n    },\n    watch: {\n        volume(v) {\n            this.changeVolume(v);\n        },\n    },\n    methods: {\n        changeVolume: throttle((v) => {\n            Editlist.editlist.audio.volume = v;\n            Log.uilog(\"/tool/volume\", `changed: ${v}`);\n        }, 500),\n        touchend() {\n            // this.$emit('change')\n        },\n        onDialogClose() {\n            if (this.initState) {\n                if (this.initState.volume != this.audio.volume) {\n                    OpHistory.createOperateHistory(\n                        Const.Operate.AudioParamsModify.Type\n                    );\n                }\n            }\n        },\n    },\n    mounted() {\n        this.volume = Editlist.editlist.audio.volume;\n        this.$emit(\"update:title\", \"音量\");\n        this.initState = {\n            volume: this.audio.volume,\n        };\n    },\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioBase.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioBase.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioBase.vue?vue&type=template&id=e285fa2e&scoped=true&\"\nimport script from \"./AudioBase.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioBase.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AudioBase.vue?vue&type=style&index=0&id=e285fa2e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e285fa2e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"100%\",\"padding\":\"5px 10px\",\"height\":\"100%\",\"display\":\"flex\",\"flex-direction\":\"column\"}},[_c('div',{staticStyle:{\"color\":\"white\",\"padding\":\"5px 0\"}},[_vm._v(\" 当前背景乐: \"),_c('span',{staticStyle:{\"background\":\"white\",\"color\":\"gray\",\"border-radius\":\"3px\",\"padding\":\"3px 5px\"},on:{\"click\":_vm.remove}},[_vm._v(_vm._s(_vm.bgm&&_vm.bgm.name||\"无\")+\" \"+_vm._s(_vm.bgm&&_vm.bgm.name&&\"删除\"))])]),_c('div',{staticClass:\"audio-base-main\",staticStyle:{\"padding\":\"5px 0\"},on:{\"touchend\":_vm.touchend}},[_c('span',{staticStyle:{\"color\":\"white\",\"width\":\"100px\",\"white-space\":\"nowrap\",\"padding-right\":\"10px\"}},[_vm._v(\"背景音量(\"+_vm._s(_vm.volume)+\")\")]),_c('mu-slider',{staticStyle:{\"margin\":\"0\"},attrs:{\"min\":0,\"max\":300,\"step\":1},model:{value:(_vm.volume),callback:function ($$v) {_vm.volume=$$v},expression:\"volume\"}})],1),_c('div',{staticStyle:{\"border-top\":\"1px solid gray\",\"width\":\"100%\",\"display\":\"flex\"}},[_c('HScrollBar',{staticClass:\"tabs\"},[(_vm.isAndroid())?_c('div',{staticClass:\"tab\",on:{\"click\":_vm.pickAudio}},[_vm._v(\"本地音乐\")]):_vm._e(),_vm._l((_vm.allBGM.filter(function (i){ return i.list; })),function(item,idx){return _c('div',{key:idx,staticClass:\"tab\",class:{active:_vm.active==idx},on:{\"click\":function($event){_vm.active=idx}}},[_vm._v(_vm._s(item.name))])})],2)],1),_vm._l((_vm.allBGM.filter(function (i){ return i.list; })),function(list,idx){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.active == idx),expression:\"active == idx\"}],key:list.name,staticStyle:{\"height\":\"100%\",\"overflow\":\"auto\"}},_vm._l((list.list),function(item){return _c('div',{key:list.name+item.name,staticClass:\"bgmItem\",class:{active:_vm.selectedBGMName == item.name},on:{\"click\":function($event){return _vm.toggleBGM(item)}}},[(item.playing)?_c('div',{staticClass:\"playing musicmu-icon\"},[_c('mu-icon',{staticClass:\"icon\",attrs:{\"value\":\"format_align_left\",\"size\":\"16\"}})],1):_c('mu-icon',{staticClass:\"musicmu-icon\",attrs:{\"size\":\"14\",\"value\":\"music_note\"}}),_c('span',{staticClass:\"musicName\"},[_vm._v(_vm._s(item.name))]),_c('span',{staticClass:\"musicDuration\"},[_vm._v(_vm._s(item.duration))]),(!item.local_file&&!item.download)?_c('mu-icon',{staticClass:\"musicPlaymu-icon\",attrs:{\"value\":\"arrow_downward\"}}):_vm._e(),(item.download)?_c('mu-circular-progress',{staticStyle:{\"zoom\":\"0.2\",\"margin-left\":\"10px\"},attrs:{\"value\":item.download.percent,\"size\":60,\"color\":\"gray\",\"stroke-width\":10}}):_vm._e()],1)}),0)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div style=\"width:100%;padding:5px 10px;height:100%;display:flex;flex-direction:column\">\n        <div style=\"color:white;padding:5px 0\">\n            当前背景乐:\n            <span\n                @click=\"remove\"\n                style=\"background:white;color:gray;border-radius:3px;padding:3px 5px\"\n            >{{bgm&&bgm.name||\"无\"}} {{bgm&&bgm.name&&\"删除\"}}</span>\n        </div>\n        <div style=\"padding:5px 0\" class=\"audio-base-main\" @touchend=\"touchend\">\n            <span\n                style=\"color:white;width:100px;white-space:nowrap;padding-right:10px\"\n            >背景音量({{volume}})</span>\n            <mu-slider style=\"margin:0\" :min=\"0\" :max=\"300\" :step=\"1\" v-model=\"volume\" />\n        </div>\n\n        <div style=\"border-top:1px solid gray;width:100%;display:flex\">\n            <HScrollBar class=\"tabs\">\n                <div class=\"tab\" v-if=\"isAndroid()\" @click=\"pickAudio\">本地音乐</div>\n                <div\n                    class=\"tab\"\n                    @click=\"active=idx\"\n                    :class=\"{active:active==idx}\"\n                    v-for=\"(item,idx) in allBGM.filter(i=>i.list)\"\n                    :key=\"idx\"\n                >{{item.name}}</div>\n            </HScrollBar>\n        </div>\n\n        <div\n            style=\"height:100%;overflow:auto\"\n            :key=\"list.name\"\n            v-show=\"active == idx\"\n            v-for=\"(list,idx) in allBGM.filter(i=>i.list)\"\n        >\n            <div\n                v-for=\"item in list.list\"\n                :key=\"list.name+item.name\"\n                @click=\"toggleBGM(item)\"\n                :class=\"{active:selectedBGMName == item.name}\"\n                class=\"bgmItem\"\n            >\n                <div v-if=\"item.playing\" class=\"playing musicmu-icon\">\n                    <mu-icon value=\"format_align_left\" class=\"icon\" size=\"16\"></mu-icon>\n                </div>\n                <mu-icon v-else class=\"musicmu-icon\" size=\"14\" value=\"music_note\" />\n                <span class=\"musicName\">{{ item.name }}</span>\n                <span class=\"musicDuration\">{{item.duration}}</span>\n                <mu-icon\n                    v-if=\"!item.local_file&&!item.download\"\n                    class=\"musicPlaymu-icon\"\n                    value=\"arrow_downward\"\n                />\n                <mu-circular-progress\n                    v-if=\"item.download\"\n                    :value=\"item.download.percent\"\n                    :size=\"60\"\n                    style=\"zoom:0.2;margin-left:10px\"\n                    color=\"gray\"\n                    :stroke-width=\"10\"\n                />\n            </div>\n        </div>\n    </div>\n</template>\n<style lang=\"less\" scoped>\n.tabs {\n    width: 100%;\n    white-space: nowrap;\n    padding: 5px;\n    overflow: auto;\n}\n.tab {\n    display: inline-block;\n    color: white;\n    padding: 10px 10px;\n}\n.tab.active {\n    border-bottom: 2px solid red;\n}\n.audio-base-main {\n    display: flex;\n}\n\n.bgmItem.active {\n    background: white;\n    border-radius: 5px;\n    color: black;\n}\n\n.bgmItem {\n    color: white;\n    display: flex;\n    align-items: center;\n    font-size: 14px;\n    margin: 10px 0;\n\n    .musicmu-icon {\n        margin: 0 10px;\n    }\n\n    .playing {\n        overflow: hidden;\n        height: 10px;\n\n        .icon {\n            transform: rotate(-90deg);\n            animation: playing 0.7s infinite linear;\n        }\n    }\n    .musicPlaymu-icon {\n        margin: 0 10px;\n\n        border-radius: 10px;\n        background: rgba(255, 0, 0, 0.3);\n        font-size: 10px;\n    }\n\n    .musicName {\n        max-width: 50%;\n        display: inline-block;\n    }\n\n    .musicDuration {\n        font-size: 12px;\n        color: gray;\n        margin-left: 5px;\n        zoom: 0.7;\n    }\n    @keyframes playing {\n        from {\n            transform: rotate(-90deg) skewX(0deg) scaleX(1);\n        }\n        30% {\n            transform: rotate(-90deg) skewX(-40deg) scaleX(1.8);\n        }\n        70% {\n            transform: rotate(-90deg) skewX(40deg) scaleX(1);\n        }\n        to {\n            transform: rotate(-90deg) skewX(0deg) scaleX(0.5);\n        }\n    }\n}\n</style>\n<script>\nimport HScrollBar from \"@/components/HScrollBar\";\nimport { UGCResourceManager as RManager } from \"jsugc-websdk\";\nimport { Editlist, Log } from \"jsugc-websdk\";\nimport Const from \"@/const\";\nimport throttle from \"lodash.throttle\";\nimport OpHistory from \"@/model/History\";\nexport default {\n    components: { HScrollBar },\n    data() {\n        return {\n            active: 0,\n            volume: 100,\n            allBGM: [],\n            bgm: null,\n        };\n    },\n    props: [\"accept\"],\n    computed: {\n        selectedBGMName() {\n            return this.bgm ? this.bgm.name : \"无背景音\";\n        },\n    },\n    watch: {\n        async accept(v) {\n            await this.stop();\n            // await new Promise(o => {\n            //     // 等待下载完成\n            //     let download = () => {\n            //         if (this.bgm && !this.bgm.local_file) {\n            //             setTimeout(download, 200);\n            //         } else {\n            //             o();\n            //         }\n            //     };\n            //     download();\n            // });\n\n            if (v) {\n                let oldBgmUrl = Editlist.editlist.bgm.url;\n\n                if (this.bgm) {\n                    Editlist.editlist.bgm.url = this.bgm.local_file.toNativeURL();\n                    Editlist.editlist.bgm.volume = this.volume;\n                } else {\n                    Editlist.editlist.bgm.url = \"\";\n                }\n\n                //|| this.volume != this.initState.volume\n                if (oldBgmUrl != Editlist.editlist.bgm.url) {\n                    Log.uilog(\"/tool/bgm\", `change: ${this.bgm}`);\n                    this.$emit(\"change\");\n\n                    if (!Editlist.editlist.bgm.url) {\n                        OpHistory.createOperateHistory(\n                            Const.Operate.BGMUnset.Type\n                        );\n                    } else if (!oldBgmUrl) {\n                        OpHistory.createOperateHistory(\n                            Const.Operate.BGMSet.Type\n                        );\n                    } else if (this.initState.volume != this.volume) {\n                        OpHistory.createOperateHistory(\n                            Const.Operate.BGMParamsModify.Type\n                        );\n                    }\n                }\n\n                this.$parent.close();\n            }\n        },\n        volume(v) {\n            if (this._audio) {\n                this._audio.volume = Math.min(1, v / 100);\n            }\n\n            this.changeVolume(v);\n        },\n    },\n    methods: {\n        async toggleBGM(bgm) {\n            if (bgm.playing && bgm == this.bgm) await this.stop();\n            else await this.play(bgm);\n        },\n        changeVolume: throttle((v) => {\n            Editlist.editlist.bgm.volume = v;\n        }),\n        remove() {\n            this.bgm = null;\n            this.stop();\n        },\n        touchend() {\n            // this.$emit('change')\n        },\n        async stop() {\n            //暂停当前音乐播放\n            if (this._audio) {\n                this._audio.pause();\n                this._audio.removeAttribute(\"src\");\n                this._audio.load();\n                this._audio.onended && this._audio.onended();\n                await new Promise((o) => setTimeout(o, 100));\n            }\n        },\n        async play(music) {\n            if (!music.local_file && !music.download) {\n                RManager.downloadRes(RManager.ResType.music, music);\n                return;\n            }\n\n            this.bgm = music;\n\n            if (music.local_file) {\n                await this.stop();\n\n                // 无\n                if (music.nobgm) {\n                    this.bgm = null;\n                    return;\n                }\n\n                music.playing = true;\n                this.bgm = null;\n                this.bgm = music; //触发响应\n                await new Promise((o, x) => {\n                    this._audio = this._audio || new Audio();\n                    this._audio.src = music.local_file.toInternalURL();\n                    this._audio.onended = o;\n                    this._audio.onerror = x;\n                    this._audio.volume = Math.min(1, this.volume / 100);\n                    this._audio.play();\n                });\n                music.playing = false;\n                this.bgm = null;\n                this.bgm = music; //触发响应\n                // this.subList = this.subList.slice(0);\n            }\n        },\n        async pickAudio() {\n            let result = await RManager.pickAudio();\n            if (!result.path) {\n                this.$snotify.error(\"选择失败\");\n                return;\n            }\n            let music = await this.getLocalAudio(\"file://\" + result.path);\n            this.play(music);\n        },\n        async getLocalAudio(url) {\n            let fileEntry = await new Promise(\n                resolveLocalFileSystemURL.bind(window, url)\n            );\n            let music = {\n                name: fileEntry.name,\n                local_file: fileEntry,\n            };\n            return music;\n        },\n    },\n    async mounted() {\n        this.$emit(\"update:title\", \"背景音乐\");\n\n        this.$parent.acceptable();\n\n        this.allBGM = await RManager.fetchResList(RManager.ResType.music);\n\n        this.bgm = this.allBGM\n            .flatMap((i) => i.list)\n            .filter((i) => {\n                return (\n                    i.local_file &&\n                    i.local_file.toNativeURL() == Editlist.editlist.bgm.url\n                );\n            })[0];\n\n        if (!this.bgm && Editlist.editlist.bgm.url) {\n            this.bgm = await this.getLocalAudio(Editlist.editlist.bgm.url);\n        }\n\n        this.volume = Editlist.editlist.bgm.volume;\n\n        this.initState = {\n            volume: this.volume,\n        };\n    },\n    beforeDestroy() {\n        this.stop();\n    },\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BGM.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BGM.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BGM.vue?vue&type=template&id=020c8ca4&scoped=true&\"\nimport script from \"./BGM.vue?vue&type=script&lang=js&\"\nexport * from \"./BGM.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BGM.vue?vue&type=style&index=0&id=020c8ca4&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"020c8ca4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"audioEffect\"},[_c('mu-list',{staticClass:\"main\",attrs:{\"value\":_vm.mainActive},on:{\"change\":function($event){_vm.mainActive=$event}}},_vm._l((_vm.allAudio),function(item){return _c('mu-list-item',{key:item.name,class:{active: _vm.mainActive==item.name},attrs:{\"value\":item.name,\"button\":true}},[_c('mu-list-item-title',[_vm._v(_vm._s(item.name))])],1)}),1),_c('mu-list',{staticClass:\"sub\"},_vm._l((_vm.subList),function(item){return _c('mu-list-item',{key:item.name,attrs:{\"button\":true},on:{\"click\":function($event){return _vm.chooseSubItem(item)}}},[_c('mu-list-item-title',{staticClass:\"subItem\",class:{active: _vm.subActive && _vm.subActive.name==item.name}},[(item.playing)?_c('div',{staticClass:\"playing\"},[_c('mu-icon',{staticClass:\"icon\",attrs:{\"value\":\"format_align_left\",\"size\":\"16\"}})],1):_c('mu-icon',{attrs:{\"value\":\"music_note\",\"size\":\"16\"}}),_c('div',{staticClass:\"text\"},[_vm._v(_vm._s(item.name))]),(!item.local_file&&!item.download)?_c('mu-icon',{staticClass:\"musicPlaymu-icon\",attrs:{\"value\":\"arrow_downward\"}}):_vm._e(),_c('div',{staticStyle:{\"text-align\":\"right\"}},[(item.download)?_c('mu-icon',{staticClass:\"loading\",attrs:{\"value\":\"rotate_left\",\"size\":\"16\"}}):_c('span',[_vm._v(_vm._s(item.duration)+\"″\")])],1)],1)],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"audioEffect\">\n        <mu-list class=\"main\" @change=\"mainActive=$event\" :value=\"mainActive\">\n            <mu-list-item\n                v-for=\"item in allAudio\"\n                :key=\"item.name\"\n                :value=\"item.name\"\n                :class=\"{active: mainActive==item.name}\"\n                :button=\"true\"\n            >\n                <mu-list-item-title>{{item.name}}</mu-list-item-title>\n            </mu-list-item>\n        </mu-list>\n        <mu-list class=\"sub\">\n            <mu-list-item\n                @click=\"chooseSubItem(item)\"\n                v-for=\"item in subList\"\n                :key=\"item.name\"\n                :button=\"true\"\n            >\n                <mu-list-item-title\n                    class=\"subItem\"\n                    :class=\"{active: subActive && subActive.name==item.name}\"\n                >\n                    <div v-if=\"item.playing\" class=\"playing\">\n                        <mu-icon value=\"format_align_left\" class=\"icon\" size=\"16\"></mu-icon>\n                    </div>\n                    <mu-icon v-else value=\"music_note\" size=\"16\"></mu-icon>\n                    <div class=\"text\">{{item.name}}</div>\n                    <mu-icon\n                        v-if=\"!item.local_file&&!item.download\"\n                        class=\"musicPlaymu-icon\"\n                        value=\"arrow_downward\"\n                    />\n                    <div style=\"text-align:right\">\n                        <mu-icon v-if=\"item.download\" value=\"rotate_left\" class=\"loading\" size=\"16\"></mu-icon>\n                        <span v-else>{{item.duration}}″</span>\n                    </div>\n                </mu-list-item-title>\n            </mu-list-item>\n        </mu-list>\n    </div>\n</template>\n<style lang=\"less\" scoped>\n.audioEffect {\n    width: 100%;\n    display: flex;\n    flex-direction: row;\n    background-color: #333;\n    font-size: 12px;\n\n    .main {\n        width: 100px;\n        text-align: center;\n\n        .active {\n            border-right: 2px solid red;\n            background: rgba(255, 255, 255, 0.1);\n        }\n    }\n\n    .sub {\n        .subItem {\n            font-size: 12px;\n            color: white;\n            display: flex;\n            flex-direction: row;\n            align-items: center;\n\n            &.active {\n                color: red;\n            }\n\n            .text {\n                flex: 1;\n                margin: 0 10px;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n\n            .musicPlaymu-icon {\n                margin: 0 10px;\n\n                border-radius: 10px;\n                background: rgba(255, 0, 0, 0.3);\n                font-size: 10px;\n            }\n            .playing {\n                overflow: hidden;\n                height: 10px;\n\n                .icon {\n                    transform: rotate(-90deg);\n                    animation: playing 0.7s infinite linear;\n                }\n            }\n\n            .loading {\n                animation: loading 0.5s infinite linear;\n            }\n        }\n    }\n}\n@keyframes loading {\n    from {\n        transform: rotate(0deg);\n    }\n    to {\n        transform: rotate(-360deg);\n    }\n}\n@keyframes playing {\n    from {\n        transform: rotate(-90deg) skewX(0deg) scaleX(1);\n    }\n    30% {\n        transform: rotate(-90deg) skewX(-40deg) scaleX(1.8);\n    }\n    70% {\n        transform: rotate(-90deg) skewX(40deg) scaleX(1);\n    }\n    to {\n        transform: rotate(-90deg) skewX(0deg) scaleX(0.5);\n    }\n}\n</style>\n<style>\n.audioEffect .mu-item-sub-title,\n.audioEffect .mu-item-title {\n    color: #fff;\n    font-size: 12px;\n}\n.audioEffect .mu-list {\n    padding: 0;\n}\n.audioEffect .mu-item-action {\n    width: 30px;\n    min-width: 30px;\n}\n</style>\n<script>\nimport { UGCResourceManager as RManager } from \"jsugc-websdk\";\nimport { Editlist, Log } from \"jsugc-websdk\";\nimport Const from \"@/const\";\nimport OpHistory from \"@/model/History\";\nexport default {\n    props: [\"accept\"],\n    data() {\n        return {\n            mainActive: 1,\n            subActive: null,\n            allAudio: [],\n            subList: null,\n        };\n    },\n    watch: {\n        mainActive(v) {\n            let found = this.allAudio.filter((i) => i.name == v)[0];\n            if (found) this.subList = found.list;\n        },\n        async accept(v) {\n            await this.stop();\n\n            if (v && this.subActive) {\n                Editlist.editlist.add_amix(this.subActive);\n                Log.uilog(\n                    \"/tool/audio_effect\",\n                    `change: ${JSON.stringify(this.subActive)}`\n                );\n                this.$emit(\"change\");\n                OpHistory.createOperateHistory(\n                    Const.Operate.AudioEffectAdd.Type\n                );\n            }\n\n            this.$parent.close();\n        },\n    },\n    methods: {\n        async chooseSubItem(music) {\n            if (this.subActive == music && music.playing) {\n                await this.stop();\n                return;\n            }\n\n            await this.play(music);\n        },\n        async stop() {\n            //暂停当前音乐播放\n            if (this._audio) {\n                this._audio.pause();\n                this._audio.removeAttribute(\"src\");\n                this._audio.load();\n                this._audio.onended && this._audio.onended();\n                await new Promise((o) => setTimeout(o, 100));\n            }\n        },\n        async play(music) {\n            if (!music.local_file && !music.download) {\n                RManager.downloadRes(RManager.ResType.audio, music);\n                return;\n            }\n\n            this.subActive = music;\n\n            if (music.local_file) {\n                await this.stop();\n\n                music.playing = true;\n                this.subList = this.subList.slice(0); //触发响应\n                await new Promise((o, x) => {\n                    this._audio = this._audio || new Audio();\n                    this._audio.src = music.local_file.toInternalURL();\n                    this._audio.onended = o;\n                    this._audio.onerror = x;\n                    this._audio.play();\n                });\n                music.playing = false;\n                this.subList = this.subList.slice(0);\n            }\n        },\n    },\n    async mounted() {\n        this.$emit(\"update:title\", \"音效\");\n        this.$parent.acceptable();\n\n        this.allAudio = await RManager.fetchResList(RManager.ResType.audio);\n        this.mainActive = this.allAudio[0].name;\n    },\n    beforeDestroy() {\n        this.stop();\n    },\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioEffect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioEffect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioEffect.vue?vue&type=template&id=7807f21b&scoped=true&\"\nimport script from \"./AudioEffect.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioEffect.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AudioEffect.vue?vue&type=style&index=0&id=7807f21b&lang=less&scoped=true&\"\nimport style1 from \"./AudioEffect.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7807f21b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"filter-box\"},[_c('div',{staticClass:\"filter-slider\",style:({visibility:(_vm.filter && _vm.filter.percent >= 0?'':'hidden')})},[_c('span',[_vm._v(_vm._s(_vm.filter&&_vm.filter.name))]),_c('mu-slider',{staticClass:\"slider\",attrs:{\"min\":0,\"max\":100,\"step\":5,\"color\":\"red\"},model:{value:(_vm.percent),callback:function ($$v) {_vm.percent=$$v},expression:\"percent\"}}),_c('span',{staticStyle:{\"width\":\"50px\",\"text-align\":\"center\"}},[_vm._v(_vm._s(_vm.percent))])],1),_c('mu-tabs',{attrs:{\"value\":_vm.active,\"color\":\"transparent\",\"indicator-color\":\"red\",\"text-color\":\"white\",\"left\":\"\"},on:{\"update:value\":function($event){_vm.active=$event}}},_vm._l((_vm.allFilter.filter(function (i){ return i.list; })),function(item,idx){return _c('mu-tab',{key:idx},[_vm._v(_vm._s(item.name))])}),1),_c('div',{staticClass:\"filter-main\"},[_c('ClipBtn',{staticClass:\"item-btn\",class:{active:_vm.noactive},attrs:{\"icon\":\"check\",\"text\":\"无滤镜\"},nativeOn:{\"click\":function($event){return _vm.toggleEffect()}}}),_c('div',{staticStyle:{\"margin\":\"10px\",\"height\":\"60%\",\"border-right\":\"1px solid gray\"}}),_vm._l((_vm.allFilter.filter(function (i){ return i.list; })),function(item,idx){return [(_vm.active == idx)?_c('div',{key:idx,staticStyle:{\"display\":\"flex\"}},_vm._l((item.list),function(e){return _c('ClipBtn',{key:e.name,staticClass:\"item-btn\",attrs:{\"active\":_vm.filter && (e.name == _vm.filter.name),\"src\":e.thumb_remote_url,\"src2\":e.thumb_rel_url,\"text\":e.name},nativeOn:{\"click\":function($event){return _vm.toggleEffect(e)}}},[(_vm.isNeedDownload(e))?_c('mu-icon',{staticClass:\"downloadmu-icon\",attrs:{\"value\":\"arrow_downward\"}}):_vm._e(),(e.download)?_c('mu-circular-progress',{staticClass:\"loadingmu-icon\",staticStyle:{\"zoom\":\"0.2\",\"margin-left\":\"10px\"},attrs:{\"value\":e.download.percent,\"size\":60,\"color\":\"white\",\"stroke-width\":10}}):_vm._e()],1)}),1):_vm._e()]})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"filter-box\">\n        <div\n            :style=\"{visibility:(filter && filter.percent >= 0?'':'hidden')}\"\n            class=\"filter-slider\"\n        >\n            <span>{{filter&&filter.name}}</span>\n            <mu-slider class=\"slider\" :min=\"0\" :max=\"100\" :step=\"5\" color=\"red\" v-model=\"percent\" />\n            <span style=\"width:50px;text-align:center\">{{percent}}</span>\n        </div>\n        <mu-tabs\n            :value.sync=\"active\"\n            color=\"transparent\"\n            indicator-color=\"red\"\n            text-color=\"white\"\n            left\n        >\n            <mu-tab v-for=\"(item,idx) in allFilter.filter(i=>i.list)\" :key=\"idx\">{{item.name}}</mu-tab>\n        </mu-tabs>\n        <div class=\"filter-main\">\n            <ClipBtn\n                @click.native=\"toggleEffect()\"\n                :class=\"{active:noactive}\"\n                class=\"item-btn\"\n                icon=\"check\"\n                text=\"无滤镜\"\n            />\n            <div style=\"margin:10px;height:60%;border-right:1px solid gray\"></div>\n            <template v-for=\"(item,idx) in allFilter.filter(i=>i.list)\">\n                <div style=\"display:flex\" v-if=\"active == idx\" :key=\"idx\">\n                    <ClipBtn\n                        v-for=\"e in item.list\"\n                        :key=\"e.name\"\n                        @click.native=\"toggleEffect(e)\"\n                        :active=\"filter && (e.name == filter.name)\"\n                        class=\"item-btn\"\n                        :src=\"e.thumb_remote_url\"\n                        :src2=\"e.thumb_rel_url\"\n                        :text=\"e.name\"\n                    >\n                        <mu-icon\n                            v-if=\"isNeedDownload(e)\"\n                            class=\"downloadmu-icon\"\n                            value=\"arrow_downward\"\n                        />\n                        <mu-circular-progress\n                            class=\"loadingmu-icon\"\n                            v-if=\"e.download\"\n                            :value=\"e.download.percent\"\n                            :size=\"60\"\n                            style=\"zoom:0.2;margin-left:10px\"\n                            color=\"white\"\n                            :stroke-width=\"10\"\n                        />\n                    </ClipBtn>\n                </div>\n            </template>\n        </div>\n    </div>\n</template>\n<style scoped>\n.filter-box {\n    display: flex;\n    flex-flow: column;\n    width: 100%;\n}\n.filter-slider > .slider {\n    margin: 0 10px;\n}\n.filter-slider {\n    display: flex;\n    color: white;\n    padding-bottom: 10px;\n    border-bottom: 1px solid #222;\n    white-space: nowrap;\n    font-size: 12px;\n    line-height: 25px;\n}\n.filter-main {\n    display: flex;\n    height: 70px;\n    overflow: auto;\n    width: 100%;\n}\n.item-btn {\n    padding: 5px 10px;\n    width: 60px;\n}\n\n.downloadmu-icon {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    border-radius: 10px;\n    background: red;\n    font-size: 10px;\n}\n\n.loadingmu-icon {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n}\n</style>\n<script>\nimport { Editlist, Log } from \"jsugc-websdk\";\nimport ClipBtn from \"@/components/ClipBtn\";\nimport { UGCResourceManager as RManager } from \"jsugc-websdk\";\nimport Const from \"@/const\";\nimport OpHistory from \"@/model/History\";\nexport default {\n    components: { ClipBtn },\n    data() {\n        return {\n            allFilter: [],\n            active: 0,\n            percent: 100,\n            filter: null,\n        };\n    },\n    watch: {\n        percent: function (p) {\n            Editlist.editlist.filter_percent = p;\n            if (this.filter) this.filter.percent = p;\n        },\n    },\n    computed: {\n        noactive() {\n            return !this.filter;\n        },\n    },\n    methods: {\n        isNeedDownload(res) {\n            return (\n                (!res.local_file ||\n                    (res.source_list &&\n                        res.source_list.filter(\n                            (i, idx) => !res.local_file_list[idx]\n                        ).length) ||\n                    false) &&\n                !res.download\n            );\n        },\n        async toggleEffect(e) {\n            if (!e) {\n                Editlist.editlist.filter.length = 0;\n                Editlist.editlist.filter_reset = \"\";\n                this.filter = null;\n                // this.$emit(\"change\", e);\n                return;\n            }\n\n            if (!this.filter || e.name != this.filter.name) {\n                if (this.isNeedDownload(e)) {\n                    await RManager.downloadRes(\n                        RManager.ResType.filter,\n                        e,\n                        (percent) => {\n                            e.download.percent = Math.ceil(percent * 100);\n                        }\n                    );\n                }\n                if (e.local_file) {\n                    Editlist.editlist.filter.length = 0;\n                    Log.uilog(\"/tool/filter\", `change: ${JSON.stringify(e)}`);\n                    Editlist.editlist.filter.push(e);\n                    Editlist.editlist.filter_reset = [\n                        e.local_file.toNativeURL(),\n                        ...((e.local_file_list &&\n                            e.local_file_list.map((i) => i.toNativeURL())) ||\n                            []),\n                    ]\n                        .map((i) => i.replace(\"file://\", \"\"))\n                        .join(\"|\");\n\n                    this.filter = e;\n                    e.percent = 100;\n                }\n                // this.$emit(\"change\", e);\n            }\n        },\n        onDialogClose() {\n            if (this.initState) {\n                let newFilterName =\n                    Editlist.editlist.filter[0] &&\n                    Editlist.editlist.filter[0].name;\n                if (!this.initState.filterName && newFilterName) {\n                    OpHistory.createOperateHistory(\n                        Const.Operate.FilterEnable.Type\n                    );\n                } else if (this.initState.filterName && !newFilterName) {\n                    OpHistory.createOperateHistory(\n                        Const.Operate.FilterDisable.Type\n                    );\n                } else if (\n                    this.initState.filterName != newFilterName ||\n                    this.percent != this.initState.percent\n                ) {\n                    OpHistory.createOperateHistory(\n                        Const.Operate.FilterModify.Type\n                    );\n                }\n            }\n        },\n    },\n    async mounted() {\n        this.$emit(\"update:title\", \"滤镜\");\n        this.allFilter = await RManager.fetchResList(RManager.ResType.filter);\n        if (Editlist.editlist.filter.length) {\n            this.allFilter.forEach((i) => {\n                let found =\n                    i.list &&\n                    i.list.filter((i) => {\n                        return i.name == Editlist.editlist.filter[0].name;\n                    })[0];\n                if (found) {\n                    this.filter = found;\n                }\n            });\n        }\n\n        this.initState = {\n            percent: (this.percent = Editlist.editlist.filter_percent),\n            filterName:\n                Editlist.editlist.filter[0] && Editlist.editlist.filter[0].name,\n        };\n    },\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Filter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Filter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Filter.vue?vue&type=template&id=1c097dd7&scoped=true&\"\nimport script from \"./Filter.vue?vue&type=script&lang=js&\"\nexport * from \"./Filter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Filter.vue?vue&type=style&index=0&id=1c097dd7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c097dd7\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"image-main\"},[_c('ScrollTab',{attrs:{\"value\":_vm.active,\"color\":\"transparent\",\"indicator-color\":\"red\",\"text-color\":\"white\",\"left\":\"\"},on:{\"update:value\":function($event){_vm.active=$event}}},_vm._l((_vm.allSticker),function(item,idx){return _c('mu-tab',{key:idx},[_vm._v(_vm._s(item.name))])}),1),_vm._l((_vm.allSticker),function(folder,idx){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.active == idx),expression:\"active == idx\"}],key:idx,staticClass:\"tab-box\"},_vm._l((folder.list),function(item){return _c('div',{key:item.name,staticClass:\"stickerItem\",on:{\"click\":function($event){return _vm.chooseSticker(item)}}},[_c('img',{attrs:{\"loop\":\"0\",\"alt\":\" \",\"src\":item.thumb_remote_url+'/'+item.source+'.thumb.apng'},on:{\"~error\":function($event){$event.target.src = item.thumb_rel_url + item.source + '.thumb.apng'}}}),(!item.local_file&&!item.download)?_c('mu-icon',{staticClass:\"downloadmu-icon\",attrs:{\"value\":\"arrow_downward\"}}):_vm._e(),(item.download)?_c('mu-circular-progress',{staticClass:\"loadingmu-icon\",staticStyle:{\"zoom\":\"0.2\",\"margin-left\":\"10px\"},attrs:{\"value\":item.download.percent,\"size\":60,\"color\":\"white\",\"stroke-width\":10}}):_vm._e()],1)}),0)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('HScrollBar',{staticClass:\"scroll-tab\",attrs:{\"scroller\":_vm.scroller}},[_c('mu-tabs',_vm._b({ref:\"tab\",on:{\"update:value\":function($event){return _vm.$emit('update:value',$event)},\"change\":function($event){_vm.fixTab($event);_vm.$emit('change',$event)}}},'mu-tabs',_vm.$attrs,false),[_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <HScrollBar :scroller=\"scroller\" class=\"scroll-tab\">\r\n        <mu-tabs\r\n            ref=\"tab\"\r\n            v-bind=\"$attrs\"\r\n            @update:value=\"$emit('update:value',$event)\"\r\n            @change=\"fixTab($event);$emit('change',$event)\"\r\n        >\r\n            <slot></slot>\r\n        </mu-tabs>\r\n    </HScrollBar>\r\n</template>\r\n<style>\r\n.scroll-tab {\r\n    width: 100%;\r\n}\r\n.scroll-tab .mu-tabs {\r\n    overflow-x: auto;\r\n    -webkit-overflow-scrolling: touch;\r\n}\r\n</style>\r\n<script>\r\nimport HScrollBar from \"./HScrollBar\";\r\n\r\nexport default {\r\n    components: { HScrollBar },\r\n    data() {\r\n        return {\r\n            scroller: null\r\n        };\r\n    },\r\n    methods: {\r\n        fixTab(value) {\r\n            // 修正mu-tabs添加滚动条后红线位置错误的问题\r\n            let tabDom = this.$refs.tab.$el;\r\n            let lineDom = tabDom.querySelector(\".mu-tab-link-highlight\");\r\n            let left = tabDom.children[value].offsetLeft;\r\n            tabDom.children[value].scrollIntoView(true);\r\n            this.$nextTick(() => {\r\n                let cssText = lineDom.style.cssText;\r\n                lineDom.style.cssText = cssText.replace(\r\n                    /(translate\\().*,/,\r\n                    \"$1\" + left + \"px,\"\r\n                );\r\n            });\r\n        }\r\n    },\r\n    mounted() {\r\n        this.$nextTick(() => {\r\n            this.scroller = this.$refs.tab.$el;\r\n        });\r\n    }\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScrollTab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScrollTab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ScrollTab.vue?vue&type=template&id=f0718aea&\"\nimport script from \"./ScrollTab.vue?vue&type=script&lang=js&\"\nexport * from \"./ScrollTab.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ScrollTab.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"image-main\">\n        <ScrollTab\n            :value.sync=\"active\"\n            color=\"transparent\"\n            indicator-color=\"red\"\n            text-color=\"white\"\n            left\n        >\n            <mu-tab v-for=\"(item,idx) in allSticker\" :key=\"idx\">{{item.name}}</mu-tab>\n        </ScrollTab>\n        <div class=\"tab-box\" v-show=\"active == idx\" v-for=\"(folder,idx) in allSticker\" :key=\"idx\">\n            <div\n                v-for=\"(item) in folder.list\"\n                :key=\"item.name\"\n                @click=\"chooseSticker(item)\"\n                class=\"stickerItem\"\n            >\n                <img\n                    loop=\"0\"\n                    alt=\" \"\n                    :src=\"item.thumb_remote_url+'/'+item.source+'.thumb.apng'\"\n                    @error.once=\"$event.target.src = item.thumb_rel_url + item.source + '.thumb.apng'\"\n                />\n                <mu-icon\n                    v-if=\"!item.local_file&&!item.download\"\n                    class=\"downloadmu-icon\"\n                    value=\"arrow_downward\"\n                />\n                <mu-circular-progress\n                    class=\"loadingmu-icon\"\n                    v-if=\"item.download\"\n                    :value=\"item.download.percent\"\n                    :size=\"60\"\n                    style=\"zoom:0.2;margin-left:10px\"\n                    color=\"white\"\n                    :stroke-width=\"10\"\n                />\n            </div>\n        </div>\n    </div>\n</template>\n<style lang=\"less\" scoped>\n.image-main {\n    display: flex;\n    flex-flow: column;\n}\n.tab-box {\n    width: 100%;\n    padding: 5px 10px;\n    display: flex;\n    justify-content: center;\n    flex-wrap: wrap;\n}\n.stickerItem {\n    width: 80px;\n    height: 50px;\n    position: relative;\n    color: white;\n    flex: 0 0 15%;\n    margin: 10px;\n\n    .downloadmu-icon {\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        border-radius: 10px;\n        background: rgba(255, 0, 0, 0.3);\n        font-size: 10px;\n    }\n\n    .loadingmu-icon {\n        position: absolute;\n        right: 0;\n        bottom: 0;\n    }\n\n    img {\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n    }\n}\n</style>\n<script>\nimport { UGCResourceManager as RManager } from \"jsugc-websdk\";\nimport { Editlist, Log } from \"jsugc-websdk\";\nimport ScrollTab from \"@/components/ScrollTab\";\nimport Const from \"@/const\";\nimport OpHistory from \"@/model/History\";\nexport default {\n    props: [\"postermode\"],\n    components: {\n        ScrollTab,\n    },\n    data() {\n        return {\n            active: 0,\n            allSticker: [],\n        };\n    },\n    methods: {\n        async chooseSticker(item) {\n            if (!item.local_file && !item.download) {\n                RManager.downloadRes(\n                    RManager.ResType.image,\n                    item,\n                    (percent) => {\n                        item.download.percent = Math.ceil(percent * 100);\n                    }\n                );\n                return;\n            }\n\n            let canAdd =\n                Editlist.editlist.overlay.filter((o) => o.new).length == 0;\n            if (item.local_file && canAdd) {\n                this.$emit(\"beforechange\", {\n                    overlay,\n                });\n\n                let overlay = Editlist.editlist.add_overlay(\n                    {\n                        end_sec: +item.duration,\n                        url: item.local_file.toURL(),\n                        type: Const.Overlay.Type.Image,\n                    },\n                    this.postermode\n                );\n                Log.uilog(\"/tool/overlay\", `choose ${JSON.stringify(overlay)}`);\n                this.$emit(\"change\", {\n                    overlay,\n                });\n\n                OpHistory.createOperateHistory(\n                    Const.Operate.ImageAdd.Type,\n                    overlay.id\n                );\n\n                this.$parent.close();\n            }\n        },\n    },\n    async mounted() {\n        this.allSticker = await RManager.fetchResList(RManager.ResType.image);\n        this.$emit(\"update:title\", \"贴纸\");\n    },\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageOverlay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageOverlay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImageOverlay.vue?vue&type=template&id=769a1834&scoped=true&\"\nimport script from \"./ImageOverlay.vue?vue&type=script&lang=js&\"\nexport * from \"./ImageOverlay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ImageOverlay.vue?vue&type=style&index=0&id=769a1834&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"769a1834\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"textOverlay\"},[_c('TextRender',_vm._b({directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.overlay.text),expression:\"overlay.text\"}],ref:\"textRender\",staticClass:\"text-render\"},'TextRender',_vm.overlay,false)),_c('mu-tabs',{attrs:{\"value\":_vm.active,\"color\":\"transparent\",\"indicator-color\":\"red\",\"text-color\":\"white\",\"left\":\"\"},on:{\"update:value\":function($event){_vm.active=$event}}},[_c('mu-tab',{attrs:{\"value\":_vm.TabID.Edit}},[_c('mu-icon',{attrs:{\"value\":\"keyboard\"}}),_vm._v(\"文字 \")],1),_c('mu-tab',{attrs:{\"value\":_vm.TabID.Template}},[_c('mu-icon',{attrs:{\"value\":\"extension\"}}),_vm._v(\"样式 \")],1),_c('mu-tab',{attrs:{\"value\":_vm.TabID.Settings}},[_c('mu-icon',{attrs:{\"value\":\"tune\"}}),_vm._v(\"调整 \")],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.active == _vm.TabID.Edit),expression:\"active == TabID.Edit\"}]},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.overlay.text),expression:\"overlay.text\"}],ref:\"input\",staticStyle:{\"width\":\"100%\",\"border\":\"1px solid #666\",\"border-radius\":\"5px\",\"font-size\":\"16px\",\"height\":\"32px\",\"line-height\":\"2\",\"padding\":\"0 10px\"},style:(_vm.inputStyles),attrs:{\"type\":\"text\",\"placeholder\":\"请输入文本\"},domProps:{\"value\":(_vm.overlay.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.overlay, \"text\", $event.target.value)}}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.active == _vm.TabID.Template),expression:\"active == TabID.Template\"}]},[_c('mu-tabs',{attrs:{\"value\":_vm.templateActive,\"color\":\"transparent\",\"indicator-color\":\"rgba(255,255,255,0.3)\",\"text-color\":\"white\",\"left\":\"\"},on:{\"update:value\":function($event){_vm.templateActive=$event}}},_vm._l((_vm.allBg),function(e){return _c('mu-tab',{key:e.name,attrs:{\"value\":e.name}},[_vm._v(_vm._s(e.name))])}),1),_vm._l((_vm.allBg),function(e){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.templateActive == e.name),expression:\"templateActive == e.name\"}],key:e.name,staticClass:\"y-scroller stickerList\",attrs:{\"value\":e.name}},[_c('div',{staticClass:\"stickerItem none\",on:{\"click\":_vm.clearTemplate}},[_c('mu-icon',{attrs:{\"value\":\"block\",\"size\":\"24\",\"color\":\"#eee\"}})],1),_vm._l((e.list),function(item,idx){return _c('div',{key:idx,staticClass:\"stickerItem\",class:{active:item.name==_vm.overlay.templateName},on:{\"click\":function($event){return _vm.chooseBubble(item)}}},[_c('img',{attrs:{\"alt\":\" \",\"src\":item.thumb_remote_url},on:{\"~error\":function($event){$event.target.src=item.thumb_rel_url}}}),(!item.local_file&&!item.download)?_c('mu-icon',{staticClass:\"downloadmu-icon\",attrs:{\"value\":\"arrow_downward\"}}):_vm._e(),(item.download)?_c('mu-circular-progress',{staticClass:\"loadingmu-icon\",staticStyle:{\"zoom\":\"0.2\",\"margin-left\":\"10px\"},attrs:{\"value\":item.download.percent,\"size\":60,\"color\":\"white\",\"stroke-width\":10}}):_vm._e()],1)})],2)})],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.active == _vm.TabID.Settings),expression:\"active == TabID.Settings\"}]},[_c('div',{staticClass:\"scroller\"},[_c('div',{staticClass:\"stickerList nowrap\"},[_c('div',{staticClass:\"stickerItem fontItem\",class:{active:null==_vm.overlay.font},on:{\"click\":_vm.clearFont}},[_vm._v(\"系统字体\")]),_vm._l((_vm.allFont),function(item,idx){return _c('div',{key:idx,staticClass:\"stickerItem fontItem\",class:{active:item.family==_vm.overlay.font},on:{\"click\":function($event){return _vm.chooseFont(item)}}},[_c('img',{attrs:{\"alt\":\" \",\"src\":item.thumb_remote_url},on:{\"~error\":function($event){$event.target.src=item.thumb_rel_url}}}),(!item.local_file&&!item.download)?_c('mu-icon',{staticClass:\"downloadmu-icon\",attrs:{\"value\":\"arrow_downward\"}}):_vm._e(),(item.download)?_c('mu-circular-progress',{staticClass:\"loadingmu-icon\",staticStyle:{\"zoom\":\"0.2\",\"margin-left\":\"10px\",\"line-height\":\"0\"},attrs:{\"value\":item.download.percent,\"size\":50,\"color\":\"white\",\"stroke-width\":10}}):_vm._e()],1)})],2)]),_c('div',{staticClass:\"stickerList align\"},[_c('mu-icon',{staticClass:\"alignItem\",class:{active:_vm.Const.Overlay.Align.Left==_vm.overlay.align},attrs:{\"value\":\"format_align_left\"},on:{\"click\":function($event){return _vm.chooseAlign(_vm.Const.Overlay.Align.Left)}}}),_c('mu-icon',{staticClass:\"alignItem\",class:{active:_vm.Const.Overlay.Align.Center==_vm.overlay.align},attrs:{\"value\":\"format_align_center\"},on:{\"click\":function($event){return _vm.chooseAlign(_vm.Const.Overlay.Align.Center)}}}),_c('mu-icon',{staticClass:\"alignItem\",class:{active:_vm.Const.Overlay.Align.Right==_vm.overlay.align},attrs:{\"value\":\"format_align_right\"},on:{\"click\":function($event){return _vm.chooseAlign(_vm.Const.Overlay.Align.Right)}}})],1),_c('div',[_c('mu-tabs',{attrs:{\"value\":_vm.colorTabActive,\"color\":\"transparent\",\"indicator-color\":\"rgba(255,255,255,0.3)\",\"text-color\":\"white\",\"left\":\"\"},on:{\"update:value\":function($event){_vm.colorTabActive=$event}}},[_c('mu-tab',{attrs:{\"value\":\"文字颜色\"}},[_vm._v(\"文字颜色\")]),_c('mu-tab',{attrs:{\"value\":\"描边\"}},[_vm._v(\"描边\")]),_c('mu-tab',{attrs:{\"value\":\"阴影\"}},[_vm._v(\"阴影\")]),_c('mu-tab',{attrs:{\"value\":\"背景\"}},[_vm._v(\"背景\")])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.colorTabActive == '文字颜色'),expression:\"colorTabActive == '文字颜色'\"}]},[_c('div',{staticClass:\"stickerList nowrap colorList scroller\"},_vm._l((_vm.ColorPreset),function(item,idx){return _c('div',{key:idx,staticClass:\"colorItem\",class:{active:item==_vm.overlay.color},style:({background:item}),on:{\"click\":function($event){_vm.overlay.color = item}}})}),0),_c('div',{staticClass:\"bottomSlider\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"透明度\")]),_c('mu-slider',{staticClass:\"slider\",attrs:{\"track-color\":\"#666\",\"max\":1,\"min\":0,\"step\":0.01},model:{value:(_vm.overlay.transparent),callback:function ($$v) {_vm.$set(_vm.overlay, \"transparent\", $$v)},expression:\"overlay.transparent\"}})],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.colorTabActive == '描边'),expression:\"colorTabActive == '描边'\"}]},[_c('div',{staticClass:\"stickerList nowrap colorList scroller\"},[_c('div',{staticClass:\"colorItem none\",on:{\"click\":function($event){_vm.overlay.borderColor=null}}},[_vm._v(\"无\")]),_vm._l((_vm.ColorPreset),function(item,idx){return _c('div',{key:idx,staticClass:\"colorItem\",class:{active:item==_vm.overlay.borderColor},style:({background:item}),on:{\"click\":function($event){_vm.overlay.borderColor = item}}})})],2),_c('div',{staticClass:\"bottomSlider\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"粗细\")]),_c('mu-slider',{staticClass:\"slider\",attrs:{\"track-color\":\"#666\",\"max\":5,\"min\":1,\"step\":0.01},model:{value:(_vm.overlay.borderSize),callback:function ($$v) {_vm.$set(_vm.overlay, \"borderSize\", $$v)},expression:\"overlay.borderSize\"}})],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.colorTabActive == '阴影'),expression:\"colorTabActive == '阴影'\"}]},[_c('div',{staticClass:\"stickerList nowrap colorList scroller\"},[_c('div',{staticClass:\"colorItem none\",on:{\"click\":function($event){_vm.overlay.shadowColor=null}}},[_vm._v(\"无\")]),_vm._l((_vm.ColorPreset),function(item,idx){return _c('div',{key:idx,staticClass:\"colorItem\",class:{active:item==_vm.overlay.shadowColor},style:({background:item}),on:{\"click\":function($event){_vm.overlay.shadowColor = item}}})})],2),_c('div',{staticClass:\"bottomSlider\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"强度\")]),_c('mu-slider',{staticClass:\"slider\",attrs:{\"track-color\":\"#666\",\"max\":10,\"min\":0,\"step\":0.01},model:{value:(_vm.overlay.shadowLevel),callback:function ($$v) {_vm.$set(_vm.overlay, \"shadowLevel\", $$v)},expression:\"overlay.shadowLevel\"}})],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.colorTabActive == '背景'),expression:\"colorTabActive == '背景'\"}]},[_c('div',{staticClass:\"stickerList nowrap colorList scroller\"},[_c('div',{staticClass:\"colorItem none\",on:{\"click\":function($event){_vm.overlay.backgroundColor=null}}},[_vm._v(\"无\")]),_vm._l((_vm.ColorPreset),function(item,idx){return _c('div',{key:idx,staticClass:\"colorItem\",class:{active:item==_vm.overlay.backgroundColor},style:({background:item}),on:{\"click\":function($event){_vm.overlay.backgroundColor = item}}})})],2),_c('div',{staticClass:\"bottomSlider\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"透明度\")]),_c('mu-slider',{staticClass:\"slider\",attrs:{\"track-color\":\"#666\",\"max\":1,\"min\":0,\"step\":0.01},model:{value:(_vm.overlay.backgroundTransparent),callback:function ($$v) {_vm.$set(_vm.overlay, \"backgroundTransparent\", $$v)},expression:\"overlay.backgroundTransparent\"}})],1)])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"border\"},[(_vm.loading)?_c('mu-icon',{staticClass:\"loading\",attrs:{\"value\":\"refresh\",\"size\":\"30\"}}):_vm._e(),_c('canvas',{ref:\"canvas\",staticClass:\"main\",style:(_vm.canvasStyles),attrs:{\"width\":\"1024\",\"height\":\"500\"}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"box\">\n        <div class=\"border\">\n            <mu-icon v-if=\"loading\" value=\"refresh\" class=\"loading\" size=\"30\"></mu-icon>\n            <canvas class=\"main\" ref=\"canvas\" width=\"1024\" height=\"500\" :style=\"canvasStyles\"></canvas>\n        </div>\n    </div>\n</template>\n<style scoped>\n.box {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    justify-content: center;\n    align-items: flex-end;\n    display: flex;\n    background: rgba(0, 0, 0, 1);\n}\n.border {\n    display: inline-block;\n    background: rgba(0, 0, 0, 1);\n    /* height:30px; */\n    border: 1px solid #555;\n    border-radius: 5px;\n    padding: 10px 10px;\n    padding-bottom: 10px;\n    box-sizing: content-box;\n    position: relative;\n}\n.main {\n    object-fit: contain;\n    display: inline-block;\n    max-width: 100%;\n}\n\n.loading {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    animation: loading 0.3s infinite linear;\n    color: #fff;\n    text-shadow: 0 0 30px #000;\n    opacity: 0.9;\n    transform-origin: 0 0;\n}\n\n@keyframes loading {\n    from {\n        transform: rotate(0deg) translate(-50%, -50%);\n    }\n    to {\n        transform: rotate(360deg) translate(-50%, -50%);\n    }\n}\n</style>\n<script>\nimport colorAlpha from \"color-alpha\";\nimport Const from \"@/const\";\n// import {UGCResourceManager as RManager} from \"jsugc-websdk\";\nimport throttle from \"lodash.throttle\";\nimport CanvasTextWrapper from \"@/model/CanvasTextWrapper\";\n\nlet DefaultSize = 1000;\nlet DefaultFont = \"黑体\";\n\nexport default {\n    props: [\n        \"text\",\n        \"font\",\n        \"fontUrl\",\n        \"align\",\n        \"color\",\n        \"transparent\",\n        \"borderColor\",\n        \"borderSize\",\n        \"shadowColor\",\n        \"shadowLevel\",\n        \"backgroundColor\",\n        \"backgroundTransparent\",\n        \"templateName\",\n        \"templateBgUrl\",\n        \"endX\",\n        \"endY\",\n        \"startX\",\n        \"startY\",\n        \"wordCount\"\n    ],\n    watch: {\n        text: \"delayRefresh\",\n        font: \"delayRefresh\",\n        fontUrl: \"delayRefresh\",\n        align: \"delayRefresh\",\n        color: \"delayRefresh\",\n        transparent: \"delayRefresh\",\n        borderColor: \"delayRefresh\",\n        borderSize: \"delayRefresh\",\n        shadowColor: \"delayRefresh\",\n        shadowLevel: \"delayRefresh\",\n        backgroundColor: \"delayRefresh\",\n        backgroundTransparent: \"delayRefresh\",\n\n        templateBgUrl: \"delayRefresh\",\n        startX: \"delayRefresh\",\n        startY: \"delayRefresh\",\n        endX: \"delayRefresh\",\n        endY: \"delayRefresh\",\n        wordCount: \"delayRefresh\"\n    },\n    data() {\n        return {\n            loading: false,\n            delayRefresh: throttle(\n                () => {\n                    if (this.$refs.canvas) this.refresh();\n                },\n                200,\n                {\n                    leading: false,\n                    trailing: true\n                }\n            ),\n            textSize: DefaultSize,\n            textAreaWidth: 0,\n            textAreaHeight: 0,\n            textLines: []\n        };\n    },\n    computed: {\n        canvasStyles() {\n            return {\n                \"max-height\": this.templateBgUrl\n                    ? \"80px\"\n                    : this.isHorizontal\n                    ? \"50px\"\n                    : \"120px\"\n            };\n        }\n    },\n    methods: {\n        async refresh() {\n            // var a = Date.now();\n            let can = this.$refs.canvas;\n            let ctx = this.canvasCtx;\n\n            // 加载资源\n            await this._loadFont();\n\n            if (this.templateBgUrl) {\n                let bgImg = await new Promise((o, x) => {\n                    const img = new Image();\n                    img.onload = () => o(img);\n                    img.onerror = x;\n                    img.crossOrigin = \"anonymous\";\n                    img.src = this.templateBgUrl;\n                });\n\n                can.width = bgImg.naturalWidth;\n                can.height = bgImg.naturalHeight;\n                ctx.clearRect(0, 0, can.width, can.height);\n\n                // 背景颜色\n                if (this.backgroundColor) {\n                    ctx.fillStyle = colorAlpha(\n                        this.backgroundColor,\n                        1 - this.backgroundTransparent\n                    );\n                    ctx.fillRect(0, 0, can.width, can.height);\n                }\n\n                // 背景图片\n                if (bgImg && bgImg.width) {\n                    ctx.drawImage(bgImg, 0, 0, can.width, can.height);\n                }\n\n                // 文字\n                if (this.text.length) {\n                    let rect = {\n                        x: bgImg.naturalWidth * this.startX,\n                        y: bgImg.naturalHeight * this.startY,\n                        width: bgImg.naturalWidth * (this.endX - this.startX),\n                        height: bgImg.naturalHeight * (this.endY - this.startY)\n                    };\n                    let textCanvas = this.drawText(this.text, rect, {\n                        textAlign:\n                            this.align == Const.Overlay.Align.Left\n                                ? \"left\"\n                                : this.align == Const.Overlay.Align.Right\n                                ? \"right\"\n                                : this.align == Const.Overlay.Align.Top\n                                ? \"top\"\n                                : \"center\"\n                    });\n                    ctx.drawImage(textCanvas, rect.x, rect.y);\n                }\n            } else {\n                // 按文字的宽高比设置画布宽高\n                // 文字size=1时，忽略间距，宽高比=最长行字数/行数\n                let lines = this.text.split(\"\\n\");\n                let maxLen = lines.reduce(\n                    (p, n) =>\n                        Math.max(p, n.replace(/[^\\x0-\\xff]/g, \"xx\").length / 2),\n                    0\n                );\n\n                let text = this.text;\n                if (this.align == Const.Overlay.Align.Top) {\n                    can.width = Math.ceil(\n                        (DefaultSize / maxLen) * lines.length\n                    );\n                    can.height = DefaultSize;\n                } else {\n                    can.width = DefaultSize;\n                    can.height = Math.ceil(\n                        (DefaultSize / maxLen) * lines.length\n                    );\n                }\n\n                // 背景颜色\n                if (this.backgroundColor) {\n                    ctx.fillStyle = colorAlpha(\n                        this.backgroundColor,\n                        1 - this.backgroundTransparent\n                    );\n                    ctx.fillRect(0, 0, can.width, can.height);\n                }\n\n                if (this.text.length) {\n                    let rect = {\n                        x: 0,\n                        y: 0,\n                        width: can.width,\n                        height: can.height\n                    };\n\n                    let textCanvas = this.drawText(text, rect, {\n                        lineBreak: \"word\",\n                        textAlign:\n                            this.align == Const.Overlay.Align.Left\n                                ? \"left\"\n                                : this.align == Const.Overlay.Align.Right\n                                ? \"right\"\n                                : this.align == Const.Overlay.Align.Top\n                                ? \"top\"\n                                : \"center\"\n                    });\n                    ctx.drawImage(textCanvas, rect.x, rect.y);\n                }\n            }\n            // window.console.log(\"TextRender time: \", Date.now() - a);\n        },\n        // 把 text 绘制到 rect 区域，尽量填满，根据 align 对齐\n        drawText(text, rect, opt) {\n            let canvas = document.createElement(\"canvas\");\n            let context = canvas.getContext(\"2d\");\n            canvas.width = rect.width;\n            canvas.height = rect.height;\n            context.shadowColor = this.shadowColor;\n            context.strokeStyle = this.borderColor;\n            context.fillStyle = colorAlpha(this.color, 1 - this.transparent);\n\n            if (text)\n                CanvasTextWrapper(canvas, text, {\n                    textAlign: \"center\",\n                    verticalAlign: \"middle\",\n                    sizeToFill: true,\n                    strokeText: true,\n                    renderHDPI: false,\n                    font: \"10px \" + (this.font || DefaultFont),\n                    lineWidth: (0.05 * this.borderSize) / 5,\n                    shadowBlur: (0.5 * this.shadowLevel) / 10,\n                    paddingX: Math.min(rect.width, rect.height) / 20,\n                    paddingY: Math.min(rect.width, rect.height) / 20,\n                    ...opt\n                });\n\n            return canvas;\n        },\n        async _loadFont() {\n            if (this.fontUrl) {\n                if (document.fonts) {\n                    // ios 10 & android 5\n                    let font = new FontFace(\n                        this.font,\n                        \"url(\" + this.fontUrl + \")\"\n                    );\n                    await font.load();\n                    document.fonts.add(font);\n                } else {\n                    // all h5\n                    var newStyle = document.createElement(\"style\");\n                    newStyle.appendChild(\n                        document.createTextNode(\n                            \"\\\n                        @font-face {\\\n                        font-family: '\" +\n                                this.font +\n                                \"';\\\n                        src: url('\" +\n                                this.fontUrl +\n                                \"');\\\n                        }\\\n                    \"\n                        )\n                    );\n                    document.head.appendChild(newStyle);\n                }\n            }\n        },\n        getDataPng() {\n            return this.$refs.canvas.toDataURL();\n        },\n        async getBlob() {\n            this.loading = true;\n            let blob = null;\n            // let ts = new Date();\n            try {\n                blob = await new Promise(o => {\n                    this.$refs.canvas.toBlob(o);\n                });\n            } finally {\n                this.loading = false;\n                //不明原因，toBlob 偶尔会很慢。打开console的预览的时候，就会很快。\n                // window.console.log(\"blob time:\", new Date() - ts);\n            }\n            return blob;\n        }\n    },\n    mounted() {\n        this.canvasCtx = this.$refs.canvas.getContext(\"2d\");\n        this.refresh();\n    }\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextRender.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextRender.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TextRender.vue?vue&type=template&id=0c62ceba&scoped=true&\"\nimport script from \"./TextRender.vue?vue&type=script&lang=js&\"\nexport * from \"./TextRender.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TextRender.vue?vue&type=style&index=0&id=0c62ceba&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c62ceba\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"textOverlay\">\n        <TextRender v-show=\"overlay.text\" ref=\"textRender\" class=\"text-render\" v-bind=\"overlay\" />\n        <mu-tabs\n            :value.sync=\"active\"\n            color=\"transparent\"\n            indicator-color=\"red\"\n            text-color=\"white\"\n            left\n        >\n            <mu-tab :value=\"TabID.Edit\">\n                <mu-icon value=\"keyboard\"></mu-icon>文字\n            </mu-tab>\n            <mu-tab :value=\"TabID.Template\">\n                <mu-icon value=\"extension\"></mu-icon>样式\n            </mu-tab>\n            <mu-tab :value=\"TabID.Settings\">\n                <mu-icon value=\"tune\"></mu-icon>调整\n            </mu-tab>\n        </mu-tabs>\n        <!-- 编辑 -->\n        <div v-show=\"active == TabID.Edit\">\n            <textarea\n                style=\"\n                    width:100%;\n                    border:1px solid #666;\n                    border-radius:5px;\n                    font-size: 16px;\n                    height: 32px;\n                    line-height: 2;\n                    padding:0 10px;\n                \"\n                type=\"text\"\n                ref=\"input\"\n                placeholder=\"请输入文本\"\n                v-model=\"overlay.text\"\n                :style=\"inputStyles\"\n            />\n        </div>\n        <!-- 样式 -->\n        <div v-show=\"active == TabID.Template\">\n            <mu-tabs\n                :value.sync=\"templateActive\"\n                color=\"transparent\"\n                indicator-color=\"rgba(255,255,255,0.3)\"\n                text-color=\"white\"\n                left\n            >\n                <mu-tab v-for=\"e in allBg\" :value=\"e.name\" :key=\"e.name\">{{e.name}}</mu-tab>\n            </mu-tabs>\n\n            <div\n                v-show=\"templateActive == e.name\"\n                class=\"y-scroller stickerList\"\n                v-for=\"e in allBg\"\n                :value=\"e.name\"\n                :key=\"e.name\"\n            >\n                <div class=\"stickerItem none\" @click=\"clearTemplate\">\n                    <mu-icon value=\"block\" size=\"24\" color=\"#eee\"></mu-icon>\n                </div>\n                <div\n                    v-for=\"(item,idx) in e.list\"\n                    :key=\"idx\"\n                    @click=\"chooseBubble(item)\"\n                    class=\"stickerItem\"\n                    :class=\"{active:item.name==overlay.templateName}\"\n                >\n                    <img  alt=\" \" :src=\"item.thumb_remote_url\" @error.once=\"$event.target.src=item.thumb_rel_url\" />\n                    <mu-icon\n                        v-if=\"!item.local_file&&!item.download\"\n                        class=\"downloadmu-icon\"\n                        value=\"arrow_downward\"\n                    />\n                    <mu-circular-progress\n                        class=\"loadingmu-icon\"\n                        v-if=\"item.download\"\n                        :value=\"item.download.percent\"\n                        :size=\"60\"\n                        style=\"zoom:0.2;margin-left:10px\"\n                        color=\"white\"\n                        :stroke-width=\"10\"\n                    />\n                </div>\n            </div>\n        </div>\n        <!-- 调整 -->\n        <div v-show=\"active == TabID.Settings\">\n            <!-- 字体 -->\n            <div class=\"scroller\">\n                <div class=\"stickerList nowrap\">\n                    <div\n                        class=\"stickerItem fontItem\"\n                        :class=\"{active:null==overlay.font}\"\n                        @click=\"clearFont\"\n                    >系统字体</div>\n                    <div\n                        v-for=\"(item,idx) in allFont\"\n                        :key=\"idx\"\n                        @click=\"chooseFont(item)\"\n                        class=\"stickerItem fontItem\"\n                        :class=\"{active:item.family==overlay.font}\"\n                    >\n                        <img  alt=\" \" :src=\"item.thumb_remote_url\" @error.once=\"$event.target.src=item.thumb_rel_url\"/>\n                        <mu-icon\n                            v-if=\"!item.local_file&&!item.download\"\n                            class=\"downloadmu-icon\"\n                            value=\"arrow_downward\"\n                        />\n                        <mu-circular-progress\n                            class=\"loadingmu-icon\"\n                            v-if=\"item.download\"\n                            :value=\"item.download.percent\"\n                            :size=\"50\"\n                            style=\"zoom:0.2;margin-left:10px;line-height:0\"\n                            color=\"white\"\n                            :stroke-width=\"10\"\n                        />\n                    </div>\n                </div>\n            </div>\n            <!-- 对齐方式 -->\n            <div class=\"stickerList align\">\n                <mu-icon\n                    class=\"alignItem\"\n                    :class=\"{active:Const.Overlay.Align.Left==overlay.align}\"\n                    value=\"format_align_left\"\n                    @click=\"chooseAlign(Const.Overlay.Align.Left)\"\n                />\n                <mu-icon\n                    class=\"alignItem\"\n                    :class=\"{active:Const.Overlay.Align.Center==overlay.align}\"\n                    value=\"format_align_center\"\n                    @click=\"chooseAlign(Const.Overlay.Align.Center)\"\n                />\n                <mu-icon\n                    class=\"alignItem\"\n                    :class=\"{active:Const.Overlay.Align.Right==overlay.align}\"\n                    value=\"format_align_right\"\n                    @click=\"chooseAlign(Const.Overlay.Align.Right)\"\n                />\n                <!--                 <mu-icon\n                    class=\"alignItem rotate90\"\n                    :class=\"{active:Const.Overlay.Align.Top==overlay.align}\"\n                    value=\"format_align_right\"\n                    @click=\"chooseAlign(Const.Overlay.Align.Top)\"\n                />-->\n            </div>\n            <!-- 颜色 -->\n            <div>\n                <mu-tabs\n                    :value.sync=\"colorTabActive\"\n                    color=\"transparent\"\n                    indicator-color=\"rgba(255,255,255,0.3)\"\n                    text-color=\"white\"\n                    left\n                >\n                    <mu-tab value=\"文字颜色\">文字颜色</mu-tab>\n                    <mu-tab value=\"描边\">描边</mu-tab>\n                    <mu-tab value=\"阴影\">阴影</mu-tab>\n                    <mu-tab value=\"背景\">背景</mu-tab>\n                </mu-tabs>\n                <!-- 文字颜色 -->\n                <div v-show=\"colorTabActive == '文字颜色'\">\n                    <div class=\"stickerList nowrap colorList scroller\">\n                        <div\n                            class=\"colorItem\"\n                            v-for=\"(item,idx) in ColorPreset\"\n                            :key=\"idx\"\n                            :style=\"{background:item}\"\n                            :class=\"{active:item==overlay.color}\"\n                            @click=\"overlay.color = item\"\n                        ></div>\n                    </div>\n\n                    <div class=\"bottomSlider\">\n                        <label class=\"label\">透明度</label>\n                        <mu-slider\n                            class=\"slider\"\n                            track-color=\"#666\"\n                            :max=\"1\"\n                            :min=\"0\"\n                            :step=\"0.01\"\n                            v-model=\"overlay.transparent\"\n                        ></mu-slider>\n                    </div>\n                </div>\n                <!-- 描边 -->\n                <div v-show=\"colorTabActive == '描边'\">\n                    <div class=\"stickerList nowrap colorList scroller\">\n                        <div class=\"colorItem none\" @click=\"overlay.borderColor=null\">无</div>\n                        <div\n                            class=\"colorItem\"\n                            v-for=\"(item,idx) in ColorPreset\"\n                            :key=\"idx\"\n                            :style=\"{background:item}\"\n                            :class=\"{active:item==overlay.borderColor}\"\n                            @click=\"overlay.borderColor = item\"\n                        ></div>\n                    </div>\n                    <div class=\"bottomSlider\">\n                        <label class=\"label\">粗细</label>\n                        <mu-slider\n                            class=\"slider\"\n                            track-color=\"#666\"\n                            :max=\"5\"\n                            :min=\"1\"\n                            :step=\"0.01\"\n                            v-model=\"overlay.borderSize\"\n                        ></mu-slider>\n                    </div>\n                </div>\n                <!-- 阴影 -->\n                <div v-show=\"colorTabActive == '阴影'\">\n                    <div class=\"stickerList nowrap colorList scroller\">\n                        <div class=\"colorItem none\" @click=\"overlay.shadowColor=null\">无</div>\n                        <div\n                            class=\"colorItem\"\n                            v-for=\"(item,idx) in ColorPreset\"\n                            :key=\"idx\"\n                            :style=\"{background:item}\"\n                            :class=\"{active:item==overlay.shadowColor}\"\n                            @click=\"overlay.shadowColor = item\"\n                        ></div>\n                    </div>\n                    <div class=\"bottomSlider\">\n                        <label class=\"label\">强度</label>\n                        <mu-slider\n                            class=\"slider\"\n                            track-color=\"#666\"\n                            :max=\"10\"\n                            :min=\"0\"\n                            :step=\"0.01\"\n                            v-model=\"overlay.shadowLevel\"\n                        ></mu-slider>\n                    </div>\n                </div>\n                <!-- 背景 -->\n                <div v-show=\"colorTabActive == '背景'\">\n                    <div class=\"stickerList nowrap colorList scroller\">\n                        <div class=\"colorItem none\" @click=\"overlay.backgroundColor=null\">无</div>\n                        <div\n                            class=\"colorItem\"\n                            v-for=\"(item,idx) in ColorPreset\"\n                            :key=\"idx\"\n                            :style=\"{background:item}\"\n                            :class=\"{active:item==overlay.backgroundColor}\"\n                            @click=\"overlay.backgroundColor = item\"\n                        ></div>\n                    </div>\n                    <div class=\"bottomSlider\">\n                        <label class=\"label\">透明度</label>\n                        <mu-slider\n                            class=\"slider\"\n                            track-color=\"#666\"\n                            :max=\"1\"\n                            :min=\"0\"\n                            :step=\"0.01\"\n                            v-model=\"overlay.backgroundTransparent\"\n                        ></mu-slider>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style>\n.textOverlay .display-value-text {\n    color: red;\n}\n</style>\n<style lang=\"less\" scoped>\n.mu-tab .mu-icon {\n    margin-bottom: 0;\n}\n.text-render {\n    position: absolute;\n    top: -100px;\n    left: 0;\n    height: 120px;\n}\n.spliter {\n    border-top: 1px solid #555;\n}\n\n.apply-to-all {\n    text-align: center;\n    color: #eee;\n    font-size: 13px;\n    line-height: 1;\n    padding: 10px;\n\n    input {\n        font-size: 14px;\n        height: 14px;\n        vertical-align: middle;\n    }\n}\n.y-scroller {\n    width: 100%;\n    height: 177px;\n    overflow-y: auto;\n}\n.scroller {\n    widows: 100%;\n    overflow-x: auto;\n    // background-color: #222;\n}\n.stickerList {\n    width: 100%;\n    padding: 0 10px;\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n\n    &.nowrap {\n        flex-wrap: nowrap;\n    }\n\n    &.align {\n        justify-content: left;\n        color: rgba(255, 255, 255, 0.7);\n        // background-color: #222;\n        border-top: 1px solid #2c2c2c;\n        border-bottom: 1px solid #2c2c2c;\n        padding: 14px;\n    }\n\n    &.colorList {\n        padding: 0 20px;\n    }\n}\n\n.stickerItem {\n    width: 55px;\n    height: 55px;\n    margin: 10px;\n    position: relative;\n    color: white;\n    border: 1px solid transparent;\n    border-radius: 5px;\n\n    &.none {\n        line-height: 50px;\n        text-align: center;\n        padding-top: 8px;\n    }\n\n    &.active {\n        border-color: red;\n    }\n\n    &.fontItem {\n        width: 80px;\n        min-width: 80px;\n        height: 34px;\n        line-height: 34px;\n        text-align: center;\n        background-color: #2c2c2c;\n    }\n\n    .downloadmu-icon {\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        border-radius: 10px;\n        background: red;\n        font-size: 10px;\n    }\n\n    .loadingmu-icon {\n        position: absolute;\n        right: 0;\n        bottom: 0;\n    }\n\n    img {\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n    }\n}\n\n.alignItem {\n    margin-right: 20px;\n\n    &.rotate90 {\n        transform: rotate(-90deg);\n    }\n\n    &.active {\n        color: red;\n    }\n}\n\n.colorItem {\n    width: 20px;\n    min-width: 20px;\n    height: 35px;\n    margin-top: 10px;\n    border-radius: 3px;\n    margin-right: 3px;\n    border: 1px solid transparent;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    &.active {\n        border: 1px solid #ee0000;\n    }\n\n    &.none {\n        margin-right: 15px;\n        border-color: #888;\n        color: #888;\n        padding: 0;\n\n        .clear {\n            margin-left: -3px;\n            line-height: 35px;\n        }\n    }\n}\n\n.bottomSlider {\n    padding: 10px 20px 0;\n    display: flex;\n    color: rgba(255, 255, 255, 0.7);\n\n    .label {\n        width: 80px;\n    }\n\n    .slider {\n        flex: 1;\n        margin-bottom: 0;\n    }\n}\n</style>\n\n<script>\nimport TextRender from \"@/views/Editor/TextRender\";\n// import ToolDialogTabs from \"@/components/ToolDialogTabs\";\n// import ToolDialogTabPane from \"@/components/ToolDialogTabPane\";\n// import CategoryTabs from \"@/components/CategoryTabs\";\n// import CategoryTabPane from \"@/components/CategoryTabPane\";\nimport { UGCResourceManager as RManager } from \"jsugc-websdk\";\nimport { Editlist } from \"jsugc-websdk\";\nimport { Log } from \"jsugc-websdk\";\nimport ToolTab from \"../ToolTab\";\nimport Const from \"@/const\";\nimport Vue from \"vue\";\nimport \"muse-ui-loading/dist/muse-ui-loading.css\"; // load css\nimport Loading from \"muse-ui-loading\";\nimport extend from \"extend\";\nimport OpHistory from \"@/model/History\";\nVue.use(Loading);\n\nlet __tabid = 0;\nconst TabID = {\n    Edit: __tabid++,\n    Template: __tabid++,\n    Settings: __tabid++,\n};\n\nlet ColorPreset = [\n    \"#ffffff\",\n    \"#ff0000\",\n    \"#0000ff\",\n    \"#00ff00\",\n    \"#ff0000\",\n    \"#FFC0CB\",\n    \"#FFA500\",\n    \"#777777\",\n    \"#770000\",\n    \"#000077\",\n    \"#007700\",\n    \"#777700\",\n    \"#770077\",\n    \"#775533\",\n];\n\nexport default {\n    TabID,\n    props: [\"accept\", \"postermode\", \"options\"],\n    components: {\n        TextRender,\n        // ToolDialogTabs,\n        // ToolDialogTabPane,\n        // CategoryTabs,\n        // CategoryTabPane\n    },\n    data() {\n        let overlay = this.newOverlay();\n        return {\n            TabID,\n            ColorPreset,\n            Const,\n            active: TabID.Edit,\n            colorTabActive: 0,\n            templateActive: 0,\n            isApplyToAll: false,\n            // 花字模板\n            allTemplateWord: [],\n            // 气泡模板\n            // allBubble: [],\n            // 背景模板\n            allBg: [],\n            // 字体\n            allFont: [],\n            // text model\n            overlay: overlay,\n            overlayProps: Object.keys(overlay).filter((e) => e != \"text\"),\n        };\n    },\n    watch: {\n        options: \"handleOptions\",\n        active() {\n            this.categoryActive = 0;\n\n            this.$nextTick(() => {\n                if (this.active == TabID.Edit) {\n                    this.$refs.input.focus();\n                } else {\n                    this.$refs.input.blur();\n                }\n            });\n        },\n        async accept(v) {\n            let modified = true;\n            if (v && this.overlayInitialState) {\n                modified = Object.keys(this.overlayInitialState).find(\n                    (k) => this.overlayInitialState[k] != this.overlay[k]\n                );\n            }\n\n            if (v && modified && this.overlay.text) {\n                let overlay = this.overlay;\n                let isNew = !overlay.id;\n\n                this.$emit(\"beforechange\", {\n                    overlay,\n                });\n\n                if (this.overlay.id == null)\n                    overlay = Editlist.editlist.add_overlay(\n                        this.overlay,\n                        this.postermode\n                    );\n\n                let data = null;\n                let doExport = async () => {\n                    data = await this.$refs.textRender.getBlob();\n                    if (data == null) {\n                        // render还未准备好\n                        await new Promise((o) => {\n                            this.$nextTick(() => doExport().then(o));\n                        });\n                        return;\n                    }\n                };\n                await doExport();\n\n                // 撤销的需求，不能覆盖原来的文件\n                let dir = await RManager.getTempFolder();\n                let fileName =\n                    dir.name +\n                    \"/textImage_\" +\n                    overlay.id +\n                    \"_\" +\n                    Math.random().toString(16).replace(\"0.\", \"\") +\n                    \".png\";\n                let dataUrl = await this.createCacheFile(data, fileName);\n\n                overlay.url = dataUrl + \"?\" + Math.random();\n\n                this.overlay = overlay;\n                // await this.applyToAll();\n                Log.uilog(\"/tool/text\", `save: ${overlay}`);\n                this.$emit(\"change\", {\n                    overlay,\n                });\n\n                if (!this.postermode) {\n                    if (isNew) {\n                        OpHistory.createOperateHistory(\n                            Const.Operate.TextAdd.Type,\n                            overlay.id\n                        );\n                    } else {\n                        OpHistory.createOperateHistory(\n                            Const.Operate.TextModify.Type\n                        );\n                    }\n                }\n            }\n            this.$parent.close();\n        },\n    },\n    computed: {\n        inputStyles() {\n            // 根据换行自动设置输入框高度，最多不超过3行\n            const lines = Math.min(this.overlay.text.split(/\\n/).length, 3);\n            return {\n                height: (lines <= 1 ? 36 : lines * 20 + 8) + \"px\",\n                \"line-height\": (lines <= 1 ? 36 : 20) + \"px\",\n            };\n        },\n    },\n    methods: {\n        clearTemplate() {\n            this.overlay.templateName = null;\n            this.overlay.templateBgUrl = null;\n            this.overlay.startX = 0;\n            this.overlay.startY = 0;\n            this.overlay.endX = 0;\n            this.overlay.endY = 0;\n            this.overlay.wordCount = 0;\n        },\n        async chooseTemplate(data) {\n            this.templateName = data.name;\n        },\n        async chooseBubble(bubble) {\n            if (window.requestFileSystem) {\n                if (!bubble.local_file && !bubble.download) {\n                    await RManager.downloadRes(RManager.ResType.fontbg, bubble);\n                }\n                if (bubble.local_file) {\n                    this.overlay.templateBgUrl = bubble.local_file.toInternalURL();\n                }\n            } else {\n                this.overlay.templateBgUrl = bubble.source_remote_url;\n            }\n            if (this.overlay.templateBgUrl) this.setBackground(bubble);\n        },\n        clearFont() {\n            this.overlay.font = null;\n            this.overlay.fontUrl = null;\n        },\n        setBackground(template) {\n            this.overlay.templateName = template.name;\n            this.overlay.startX = template.startX;\n            this.overlay.startY = template.startY;\n            this.overlay.endX = template.endX;\n            this.overlay.endY = template.endY;\n            this.overlay.wordCount = template.wordCount;\n        },\n        async chooseFont(font) {\n            if (window.requestFileSystem) {\n                if (!font.local_file) {\n                    await RManager.downloadRes(RManager.ResType.font, font);\n                }\n                if (font.local_file) {\n                    this.overlay.fontUrl = font.local_file.toInternalURL();\n                }\n            } else {\n                this.overlay.fontUrl = font.source_remote_url;\n            }\n            if (this.overlay.fontUrl) this.overlay.font = font.family;\n        },\n        chooseAlign(align) {\n            this.overlay.align = align;\n        },\n        newOverlay() {\n            return {\n                type: Const.Overlay.Type.Text,\n                text: \"\",\n                font: null,\n                fontUrl: null,\n                color: \"grey\",\n                borderColor: null,\n                shadowColor: null,\n                backgroundColor: null,\n                align: Const.Overlay.Align.Left,\n                transparent: 0,\n                borderSize: 1,\n                shadowLevel: 1,\n                backgroundTransparent: 0,\n                // 模板\n                templateName: \"\",\n                templateBgUrl: null,\n                // 模板文字区域 百分比\n                startX: 0,\n                startY: 0,\n                endX: 0,\n                endY: 0,\n                wordCount: 0,\n            };\n        },\n        updateOverlay(overlay) {\n            this.overlay = overlay;\n        },\n        async createCacheFile(data, output) {\n            if (!window.requestFileSystem) {\n                // 兼容PC调试\n                return URL.createObjectURL(data);\n            }\n\n            let fs = await RManager.filesystem();\n            let file = await new Promise((o, x) => {\n                fs.root.getFile(\n                    output,\n                    { create: true, exclusive: false },\n                    o,\n                    x\n                );\n            });\n            let writer = await new Promise((o, x) => {\n                file.createWriter(o, x);\n            });\n\n            await new Promise((o, x) => {\n                writer.onwriteend = o;\n                writer.onerror = x;\n                writer.write(data);\n            });\n\n            return file.nativeURL;\n        },\n\n        handleOptions() {\n            let v = this.options;\n            if (v) {\n                switch (v.operateToolTabId) {\n                    case ToolTab.TabID.ToolEdit:\n                        this.active = TabID.Edit;\n                        break;\n                    case ToolTab.TabID.ToolTemplate:\n                        this.active = TabID.Template;\n                        break;\n                    case ToolTab.TabID.ToolSettings:\n                        this.active = TabID.Settings;\n                        break;\n                    default:\n                        break;\n                }\n            }\n            if (!v || !v.overlay) {\n                this.overlay = this.newOverlay();\n                this.overlayInitialState = null;\n            } else {\n                this.updateOverlay(v.overlay);\n                this.overlayInitialState = extend(true, {}, v.overlay);\n            }\n        },\n        async applyToAll() {\n            // 应用到全部文字贴纸\n            if (this.isApplyToAll) {\n                let currOverlay = this.overlay;\n                let allPromise = Editlist.editlist.overlay.map(\n                    async (overlay) => {\n                        if (\n                            overlay.type == Const.Overlay.Type.Text &&\n                            overlay.id != currOverlay.id\n                        ) {\n                            this.overlayProps.forEach((p) => {\n                                overlay[p] = currOverlay[p];\n                            });\n                            this.overlay = overlay;\n                            try {\n                                this.$refs.textRender.refresh();\n                                let data = await this.$refs.textRender.getBlob();\n                                let dataUrl = await this.createCacheFile(\n                                    data,\n                                    \"textImage_\" + overlay.id + \".png\"\n                                );\n                                overlay.url = dataUrl;\n                            } catch (error) {\n                                Log.error(\"create text image failed\", error);\n                            }\n                        }\n                    }\n                );\n                await Promise.all(allPromise);\n            }\n        },\n    },\n    async mounted() {\n        this.handleOptions();\n        this.$parent.acceptable();\n        this.$refs.input.focus();\n\n        this.allFont = await RManager.fetchResList(RManager.ResType.font);\n\n        this.allBg = await RManager.fetchResList(RManager.ResType.fontbg);\n        this.$emit(\"update:title\", \"贴字\");\n    },\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextOverlay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextOverlay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TextOverlay.vue?vue&type=template&id=2506cfd3&scoped=true&\"\nimport script from \"./TextOverlay.vue?vue&type=script&lang=js&\"\nexport * from \"./TextOverlay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TextOverlay.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./TextOverlay.vue?vue&type=style&index=1&id=2506cfd3&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2506cfd3\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"videobase-item\"},[_c('span',[_vm._v(\"亮度(\"+_vm._s(_vm.eq.brightness)+\")\")]),_c('mu-slider',{attrs:{\"min\":-1,\"max\":1,\"step\":0.02},on:{\"change\":_vm.change},model:{value:(_vm.eq.brightness),callback:function ($$v) {_vm.$set(_vm.eq, \"brightness\", $$v)},expression:\"eq.brightness\"}})],1),_c('div',{staticClass:\"videobase-item\"},[_c('span',[_vm._v(\"对比度(\"+_vm._s(_vm.eq.contrast)+\")\")]),_c('mu-slider',{attrs:{\"min\":0,\"max\":5,\"step\":0.05},on:{\"change\":_vm.change},model:{value:(_vm.eq.contrast),callback:function ($$v) {_vm.$set(_vm.eq, \"contrast\", $$v)},expression:\"eq.contrast\"}})],1),_c('div',{staticClass:\"videobase-item\"},[_c('span',[_vm._v(\"饱和度(\"+_vm._s(_vm.eq.saturation)+\")\")]),_c('mu-slider',{attrs:{\"min\":0,\"max\":3,\"step\":0.03},on:{\"change\":_vm.change},model:{value:(_vm.eq.saturation),callback:function ($$v) {_vm.$set(_vm.eq, \"saturation\", $$v)},expression:\"eq.saturation\"}})],1),_c('div',{staticClass:\"videobase-item\"},[_c('span',[_vm._v(\"伽马值(\"+_vm._s(_vm.eq.gamma)+\")\")]),_c('mu-slider',{attrs:{\"min\":0.1,\"max\":10,\"step\":0.1},on:{\"change\":_vm.change},model:{value:(_vm.eq.gamma),callback:function ($$v) {_vm.$set(_vm.eq, \"gamma\", $$v)},expression:\"eq.gamma\"}})],1),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('mu-button',{attrs:{\"small\":\"\"},on:{\"click\":_vm.resumeNormal}},[_vm._v(\"恢复默认\")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div>\n        <div class=\"videobase-item\">\n            <span>亮度({{eq.brightness}})</span>\n            <mu-slider @change=\"change\" :min=\"-1\" :max=\"1\" :step=\"0.02\" v-model=\"eq.brightness\" />\n        </div>\n        <div class=\"videobase-item\">\n            <span>对比度({{eq.contrast}})</span>\n            <mu-slider @change=\"change\" :min=\"0\" :max=\"5\" :step=\"0.05\" v-model=\"eq.contrast\" />\n        </div>\n        <div class=\"videobase-item\">\n            <span>饱和度({{eq.saturation}})</span>\n            <mu-slider @change=\"change\" :min=\"0\" :max=\"3\" :step=\"0.03\" v-model=\"eq.saturation\" />\n        </div>\n        <div class=\"videobase-item\">\n            <span>伽马值({{eq.gamma}})</span>\n            <mu-slider @change=\"change\" :min=\"0.1\" :max=\"10\" :step=\"0.1\" v-model=\"eq.gamma\" />\n        </div>\n        <div style=\"text-align:center\">\n            <mu-button @click=\"resumeNormal\" small>恢复默认</mu-button>\n        </div>\n    </div>\n</template>\n<style scoped>\n.videobase-item {\n    display: flex;\n    margin-bottom: 10px;\n}\n.videobase-item .mu-slider {\n    margin: 0;\n}\n.videobase-item span {\n    width: 150px;\n    color: white;\n}\n</style>\n<script>\nimport extend from \"extend\";\nimport { Editlist } from \"jsugc-websdk\";\nimport Const from \"@/const\";\nimport OpHistory from \"@/model/History\";\nexport default {\n    data() {\n        return {\n            eq: {\n                brightness: 0,\n                contrast: 0,\n                saturation: 0,\n                gamma: 0\n            }\n        };\n    },\n    methods: {\n        resumeNormal() {\n            this.eq.brightness = 0;\n            this.eq.contrast = 1;\n            this.eq.saturation = 1;\n            this.eq.gamma = 1;\n            this.change();\n        },\n        change() {\n            Editlist.editlist.update_timeline_videobase(\n                Editlist.editlist.cur_timeline()\n            );\n        },\n        onDialogClose() {\n            if (this.initState) {\n                if (\n                    Object.keys(this.eq).find(\n                        k => this.eq[k] != this.initState.eq[k]\n                    )\n                ) {\n                    OpHistory.createOperateHistory(\n                        Const.Operate.VideoParamsModify.Type\n                    );\n                }\n            }\n        }\n    },\n    mounted() {\n        this.eq = Editlist.editlist.cur_timeline().eq;\n        this.$emit(\"update:title\", \"视频参数\");\n        this.initState = {\n            eq: extend(true, {}, this.eq)\n        };\n    }\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoBase.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoBase.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoBase.vue?vue&type=template&id=608f2bee&scoped=true&\"\nimport script from \"./VideoBase.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoBase.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VideoBase.vue?vue&type=style&index=0&id=608f2bee&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"608f2bee\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sort_main\"},[_c('Container',{staticClass:\"sort_box\",attrs:{\"auto-scroll-enabled\":false,\"orientation\":\"horizontal\",\"drag-begin-delay\":200},on:{\"drop\":_vm.onDrop}},[_vm._l((_vm.timelines),function(t){return [(!t.ending)?_c('Draggable',{key:t.id,staticClass:\"sort_item\"},[_c('div',{staticClass:\"sort_head\"},[_vm._v(_vm._s((t.end_sec - t.start_sec).toFixed(1)))]),_c('div',{staticClass:\"sort_thumb\"},[(t.thumbs.length && t.thumbs[0].url)?_c('img',{attrs:{\"src\":t.thumbs[0].url}}):_vm._e()])]):_vm._e()]})],2),_c('div',{staticClass:\"sort_tip\"},[_vm._v(\"长按拖动改变顺序\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"sort_main\">\n        <Container\n            @drop=\"onDrop\"\n            :auto-scroll-enabled=\"false\"\n            orientation=\"horizontal\"\n            :drag-begin-delay=\"200\"\n            class=\"sort_box\"\n        >\n            <template v-for=\"t in timelines\">\n                <Draggable class=\"sort_item\" v-if=\"!t.ending\" :key=\"t.id\">\n                    <div class=\"sort_head\">{{(t.end_sec - t.start_sec).toFixed(1)}}</div>\n                    <div class=\"sort_thumb\">\n                        <img v-if=\"t.thumbs.length && t.thumbs[0].url\" :src=\"t.thumbs[0].url\" />\n                    </div>\n                </Draggable>\n            </template>\n        </Container>\n\n        <div class=\"sort_tip\">长按拖动改变顺序</div>\n    </div>\n</template>\n<style>\n.smooth-dnd-disable-touch-action * {\n    touch-action: inherit !important;\n}\n/* 修复华为手机无法滚动的问题 */\n.sort_main .smooth-dnd-container.horizontal {\n    display: flex;\n}\n</style>\n<style scoped>\n.sort_main {\n    width: 100%;\n}\n.sort_box {\n    width: 100%;\n    overflow: auto;\n    white-space: nowrap;\n    display: flex;\n}\n.sort_box::-webkit-scrollbar-track-piece {\n    background-color: transparent;\n}\n.sort_box::-webkit-scrollbar {\n    width: 5px;\n    height: 5px;\n    -webkit-border-radius: 5px;\n    -moz-border-radius: 5px;\n    border-radius: 5px;\n}\n.sort_box::-webkit-scrollbar-thumb {\n    border: 1px solid #666;\n    background-image: linear-gradient(to left, #666 0%, #666 50%, #777 50%);\n    box-shadow: 0 0 2px rgba(0, 0, 0, 0.5) inset;\n    background-size: 2px 100%;\n    background-position: center;\n    background-clip: padding-box;\n    -webkit-border-radius: 5px;\n    -moz-border-radius: 5px;\n    border-radius: 5px;\n    min-height: 28px;\n}\n.sort_box::-webkit-scrollbar-thumb:hover {\n    background-color: rgba(0, 0, 0, 0.5);\n    -webkit-border-radius: 5px;\n    -moz-border-radius: 5px;\n    border-radius: 5px;\n}\n.sort_item {\n    display: inline-block !important;\n    padding: 10px;\n}\n\n.sort_head {\n    color: white;\n    text-align: center;\n    width: 40px;\n}\n.sort_thumb {\n    height: 40px;\n    width: 40px;\n    overflow: hidden;\n}\n.sort_thumb img {\n    height: 100%;\n    width: 100%;\n    object-fit: cover;\n    object-position: left;\n}\n.sort_thumb {\n    background-color: #000;\n}\n.sort_tip {\n    color: white;\n}\n</style>\n<script>\n// vue-smooth-dnd\n//  https://github.com/kutlugsahin/vue-smooth-dnd/\n\nimport extend from \"extend\";\nimport { Container, Draggable } from \"vue-smooth-dnd\";\nimport { Editlist, Log } from \"jsugc-websdk\";\nimport Const from \"@/const\";\nimport OpHistory from \"@/model/History\";\nexport default {\n    props: [\"accept\"],\n    components: {\n        Container,\n        Draggable,\n    },\n    data() {\n        return {\n            timelines: [],\n        };\n    },\n    watch: {\n        accept(a) {\n            if (a) {\n                Editlist.editlist.update_timelines(this.timelines);\n                Editlist.editlist.timelines = this.timelines;\n\n                Log.uilog(\n                    \"/tool/sort\",\n                    `sorted: ${JSON.stringify(this.timelines.map((a) => a.id))}`\n                );\n                this.$emit(\"change\", \"sort\");\n\n                if (\n                    this.initState.timelines.find(\n                        (e, i) => this.timelines[i].id != e.id\n                    )\n                ) {\n                    OpHistory.createOperateHistory(\n                        Const.Operate.VideoSort.Type\n                    );\n                }\n            }\n            this.$parent.close();\n        },\n    },\n    methods: {\n        onDrop(dropResult) {\n            const { removedIndex, addedIndex, payload } = dropResult;\n            if (removedIndex === null && addedIndex === null) return;\n\n            const result = [...this.timelines];\n            let itemToAdd = payload;\n\n            if (removedIndex !== null) {\n                itemToAdd = result.splice(removedIndex, 1)[0];\n            }\n\n            if (addedIndex !== null) {\n                result.splice(addedIndex, 0, itemToAdd);\n            }\n\n            this.timelines = result;\n        },\n    },\n    mounted() {\n        this.timelines = Editlist.editlist.timelines;\n        this.$emit(\"update:title\", \"排序\");\n        this.$parent.acceptable();\n        this.initState = {\n            timelines: extend(true, [], this.timelines),\n        };\n    },\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sort.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sort.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sort.vue?vue&type=template&id=facd8976&scoped=true&\"\nimport script from \"./Sort.vue?vue&type=script&lang=js&\"\nexport * from \"./Sort.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Sort.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./Sort.vue?vue&type=style&index=1&id=facd8976&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"facd8976\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"face-main\"},[_c('mu-switch',{attrs:{\"color\":\"red\"},model:{value:(_vm.enabled),callback:function ($$v) {_vm.enabled=$$v},expression:\"enabled\"}}),_c('span',{staticStyle:{\"color\":\"white\",\"width\":\"100px\"}},[_vm._v(\"美颜级别\")]),_c('mu-slider',{staticStyle:{\"margin\":\"0\"},attrs:{\"disabled\":!_vm.enabled,\"min\":0,\"max\":10,\"step\":1},model:{value:(_vm.face.level),callback:function ($$v) {_vm.$set(_vm.face, \"level\", $$v)},expression:\"face.level\"}}),_c('div',{staticStyle:{\"width\":\"50px\",\"text-align\":\"center\"}},[_vm._v(_vm._s(_vm.face.level))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"face-main\">\n        <mu-switch v-model=\"enabled\" color=\"red\" />\n        <span style=\"color:white;width:100px\">美颜级别</span>\n        <mu-slider\n            :disabled=\"!enabled\"\n            style=\"margin:0\"\n            :min=\"0\"\n            :max=\"10\"\n            :step=\"1\"\n            v-model=\"face.level\"\n        />\n        <div style=\"width:50px;text-align:center\">{{face.level}}</div>\n    </div>\n</template>\n<style scoped>\n.face-main {\n    display: flex;\n    white-space: nowrap;\n    color: white;\n    line-height: 25px;\n}\n.face-main > * {\n    margin: 0 10px;\n}\n</style>\n<script>\nimport { Editlist, Log } from \"jsugc-websdk\";\nimport { UGCResourceManager as ResourceManager } from \"jsugc-websdk\";\nimport Const from \"@/const\";\nimport OpHistory from \"@/model/History\";\nexport default {\n    data() {\n        return {\n            enabled: false,\n            face: { level: 10 },\n        };\n    },\n    watch: {\n        enabled: async function (e) {\n            Log.uilog(\"/tool/face\", `enabled: ${e}`);\n            if (!e) {\n                Editlist.editlist.beauty_level = 0;\n            } else {\n                if (this.face.level == 0) {\n                    this.face.level = 10;\n                }\n                if (!Editlist.editlist.face.beauty_source) {\n                    Editlist.editlist.beauty_source = await ResourceManager.getBeautySource();\n                }\n                Editlist.editlist.beauty_level = this.face.level;\n            }\n        },\n        \"face.level\": function (l) {\n            Editlist.editlist.beauty_level = l;\n        },\n    },\n    methods: {\n        onDialogClose() {\n            if (this.initeState) {\n                if (this.initeState.enabled != this.enabled) {\n                    if (this.enabled) {\n                        OpHistory.createOperateHistory(\n                            Const.Operate.FaceEnable.Type\n                        );\n                    } else {\n                        OpHistory.createOperateHistory(\n                            Const.Operate.FaceDisable.Type\n                        );\n                    }\n                } else if (\n                    this.initeState.level != Editlist.editlist.beauty_level\n                ) {\n                    OpHistory.createOperateHistory(\n                        Const.Operate.FaceModify.Type\n                    );\n                }\n            }\n        },\n    },\n    async mounted() {\n        this.$emit(\"update:title\", \"美颜\");\n        this.enabled = Editlist.editlist.face.beauty_level > 0;\n        this.face.level = Editlist.editlist.face.beauty_level;\n        this.initeState = {\n            enabled: this.enabled,\n            level: this.face.level,\n        };\n    },\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Face.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Face.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Face.vue?vue&type=template&id=107c639e&scoped=true&\"\nimport script from \"./Face.vue?vue&type=script&lang=js&\"\nexport * from \"./Face.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Face.vue?vue&type=style&index=0&id=107c639e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"107c639e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"aspect-box\"},[_c('div',[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"active\":!_vm.curAspectRatio,\"icon\":'phonelink_lock',\"text\":'原始'},nativeOn:{\"click\":function($event){return _vm.choose(null)}}}),_vm._l((_vm.AspectRatio),function(e,idx){return _c('ClipBtn',{key:e[0]+':'+e[1],staticClass:\"item-btn\",attrs:{\"active\":_vm.curAspectRatio == e,\"src\":_vm.AspectRatioIcon[idx],\"text\":e[0]+':'+e[1]},nativeOn:{\"click\":function($event){return _vm.choose(e)}}})})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"aspect-box\">\n        <div>\n            <ClipBtn\n                :active=\"!curAspectRatio\"\n                @click.native=\"choose(null)\"\n                class=\"item-btn\"\n                :icon=\"'phonelink_lock'\"\n                :text=\"'原始'\"\n            ></ClipBtn>\n            <ClipBtn\n                v-for=\"(e,idx) in AspectRatio\"\n                :key=\"e[0]+':'+e[1]\"\n                :active=\"curAspectRatio == e\"\n                @click.native=\"choose(e)\"\n                class=\"item-btn\"\n                :src=\"AspectRatioIcon[idx]\"\n                :text=\"e[0]+':'+e[1]\"\n            ></ClipBtn>\n        </div>\n    </div>\n</template>\n<style scoped>\n.aspect-box {\n    display: flex;\n    flex-flow: row;\n    width: 100%;\n}\n.aspect-box > div {\n    display: flex;\n    flex-flow: row;\n    width: 100%;\n    justify-content: space-evenly;\n}\n</style>\n<script>\nimport { Editlist, Log } from \"jsugc-websdk\";\nimport ClipBtn from \"@/components/ClipBtn\";\nimport Const from \"@/const\";\nimport OpHistory from \"@/model/History\";\nlet AspectRatio = [\n    [9, 16],\n    [16, 9],\n    [1, 1],\n    [3, 4],\n    [4, 3],\n];\n\nasync function createIcons(AspectRatio) {\n    return await Promise.all(\n        AspectRatio.map(async (i) => {\n            let PADDING = 30;\n            let BOX = 100;\n\n            let can = document.createElement(\"canvas\");\n            can.width = BOX + PADDING * 2;\n            can.height = BOX + PADDING * 2;\n            let ctx = can.getContext(\"2d\");\n            ctx.fillStyle = \"white\";\n            let ratio = i[0] / i[1];\n            if (ratio > 1) {\n                ctx.fillRect(\n                    PADDING,\n                    PADDING + (BOX - BOX / ratio) / 2,\n                    BOX,\n                    BOX / ratio\n                );\n            } else {\n                ctx.fillRect(\n                    PADDING + (BOX - BOX * ratio) / 2,\n                    PADDING,\n                    BOX * ratio,\n                    BOX\n                );\n            }\n            return URL.createObjectURL(await new Promise(can.toBlob.bind(can)));\n        })\n    );\n}\n\nexport default {\n    components: { ClipBtn },\n    data() {\n        return {\n            AspectRatio,\n            AspectRatioIcon: [],\n            curAspectRatio: null,\n        };\n    },\n    methods: {\n        choose(e) {\n            if (this.curAspectRatio == e) return;\n\n            this.curAspectRatio = e;\n            if (e) Editlist.editlist.dar = e;\n            else Editlist.editlist.dar = Editlist.DARPreset.auto;\n\n            Log.uilog(\"/tool/aspect_ratio\", `change: ${e}`);\n            this.$emit(\"change\");\n        },\n        onDialogClose() {\n            if (this.initState) {\n                if (this.initState.aspectRatio != this.curAspectRatio) {\n                    OpHistory.createOperateHistory(\n                        Const.Operate.VideoAspect.Type\n                    );\n                }\n            }\n        },\n    },\n    async mounted() {\n        this.$emit(\"update:title\", \"画幅比例\");\n        this.AspectRatioIcon = await createIcons(AspectRatio);\n        this.curAspectRatio = AspectRatio.filter((i) => {\n            return i.join(\":\") == Editlist.editlist.video.dar.join(\":\");\n        })[0];\n        this.initState = {\n            aspectRatio: this.curAspectRatio,\n        };\n    },\n};\n</script>","const table = new Uint32Array(256);\n\nfor (let i = 0; i < 256; i++) {\n    let c = i;\n    for (let k = 0; k < 8; k++) {\n        c = (c & 1) !== 0 ? 0xedb88320 ^ (c >>> 1) : c >>> 1;\n    }\n    table[i] = c;\n}\n\n/**\n *\n * @param {Uint8Array} bytes\n * @param {number} start\n * @param {number} length\n * @return {number}\n */\nexport default function(bytes, start = 0, length = bytes.length - start) {\n    let crc = -1;\n    for (let i = start, l = start + length; i < l; i++) {\n        crc = (crc >>> 8) ^ table[(crc ^ bytes[i]) & 0xff];\n    }\n    return crc ^ -1;\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AspectRatio.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AspectRatio.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AspectRatio.vue?vue&type=template&id=4eec2d4a&scoped=true&\"\nimport script from \"./AspectRatio.vue?vue&type=script&lang=js&\"\nexport * from \"./AspectRatio.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AspectRatio.vue?vue&type=style&index=0&id=4eec2d4a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4eec2d4a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <transition name=\"fade\" v-on:after-leave=\"$emit('close')\">\n        <div v-if=\"tabid >= 0\" class=\"dialog-main\" :style=\"style\">\n            <div class=\"dialog-content\">\n                <AudioBase\n                    :title.sync=\"title\"\n                    ref=\"audiobBase\"\n                    @change=\"change\"\n                    v-if=\"tabid == TabID.AudioBase\"\n                />\n                <Sort\n                    :title.sync=\"title\"\n                    ref=\"sort\"\n                    :accept=\"dialogAccept\"\n                    @change=\"change\"\n                    v-if=\"tabid == TabID.VideoSort\"\n                />\n                <BGM\n                    :title.sync=\"title\"\n                    ref=\"bgm\"\n                    :accept=\"dialogAccept\"\n                    @change=\"change\"\n                    v-if=\"tabid == TabID.BGM\"\n                />\n                <AudioEffect\n                    :title.sync=\"title\"\n                    ref=\"audioEffect\"\n                    :accept=\"dialogAccept\"\n                    @change=\"change\"\n                    v-if=\"tabid == TabID.AudioEffect\"\n                />\n                <VFilter\n                    :title.sync=\"title\"\n                    ref=\"vfilter\"\n                    @change=\"change\"\n                    v-if=\"tabid == TabID.Filter\"\n                />\n                <Face\n                    :title.sync=\"title\"\n                    ref=\"face\"\n                    @change=\"change\"\n                    v-if=\"tabid == TabID.Face\"\n                />\n                <ImageOverlay\n                    :title.sync=\"title\"\n                    ref=\"imageOverlay\"\n                    :options=\"options\"\n                    :postermode=\"postermode\"\n                    @change=\"change\"\n                    @beforechange=\"beforechange\"\n                    v-if=\"tabid == TabID.AddImage\"\n                />\n                <TextOverlay\n                    :title.sync=\"title\"\n                    ref=\"textOverlay\"\n                    :postermode=\"postermode\"\n                    :accept=\"dialogAccept\"\n                    :options=\"options\"\n                    @change=\"change\"\n                    @beforechange=\"beforechange\"\n                    v-if=\"tabid == TabID.AddText\"\n                />\n                <VideoBase\n                    :title.sync=\"title\"\n                    ref=\"videoBase\"\n                    @change=\"change\"\n                    v-if=\"tabid == TabID.VideoBase\"\n                />\n                <AspectRatio\n                    :title.sync=\"title\"\n                    ref=\"aspectRatio\"\n                    @change=\"change\"\n                    v-if=\"tabid == TabID.AspectRatio\"\n                />\n            </div>\n            <div class=\"bottom-title\">\n                <mu-button\n                    v-if=\"!dialogAcceptable\"\n                    class=\"accept-btn\"\n                    flat\n                    color=\"white\"\n                    @click=\"close\"\n                >\n                    <mu-icon value></mu-icon>\n                </mu-button>\n                <mu-button\n                    v-if=\"dialogAcceptable\"\n                    class=\"close-btn\"\n                    flat\n                    color=\"white\"\n                    @click=\"close\"\n                >\n                    <mu-icon value=\"close\"></mu-icon>\n                </mu-button>\n                <div class=\"title\">{{title}}</div>\n                <mu-button\n                    v-if=\"dialogAcceptable\"\n                    class=\"accept-btn\"\n                    flat\n                    color=\"white\"\n                    @click=\"accept\"\n                >\n                    <mu-icon value=\"check\"></mu-icon>\n                </mu-button>\n                <mu-button\n                    v-if=\"!dialogAcceptable\"\n                    class=\"accept-btn\"\n                    flat\n                    color=\"white\"\n                    @click=\"close\"\n                >\n                    <mu-icon value=\"keyboard_arrow_down\"></mu-icon>\n                </mu-button>\n            </div>\n        </div>\n    </transition>\n</template>\n<style lang=\"less\" scoped>\n.fade-enter-active {\n    transition: all 0.5s;\n}\n.fade-leave-active {\n    transition: all 0.2s;\n}\n.fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\n    opacity: 0;\n    transform: translateY(10px);\n}\n.fade-enter /* .fade-leave-active below version 2.1.8 */ {\n    opacity: 0;\n    transform: translateY(50px);\n}\n\n.dialog-main {\n    width: 100%;\n    // position: absolute;\n    z-index: 100;\n    background: #323232;\n    bottom: 0;\n    left: 0;\n    display: flex;\n    flex-flow: column;\n}\n.bottom-title {\n    display: flex;\n    height: 36px;\n    .title {\n        width: 100%;\n        color: white;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-top: 1px solid;\n        border-image: linear-gradient(\n                90deg,\n                transparent,\n                rgba(255, 0, 0, 0.5),\n                transparent\n            )\n            1 10;\n    }\n    .close-btn {\n        width: 50px;\n    }\n    .accept-btn {\n        width: 50px;\n    }\n}\n.dialog-content {\n    height: 100%;\n    overflow: hidden;\n    display: flex;\n    padding: 20px;\n    padding-bottom: 0;\n}\n\n.dialog-content > div {\n    width: 100%;\n}\n</style>\n<script>\nimport AudioBase from \"@/views/Bottom/Tools/AudioBase\";\nimport BGM from \"@/views/Bottom/Tools/BGM\";\nimport AudioEffect from \"@/views/Bottom/Tools/AudioEffect\";\nimport VFilter from \"@/views/Bottom/Tools/Filter\";\nimport ImageOverlay from \"@/views/Bottom/Tools/ImageOverlay\";\nimport TextOverlay from \"@/views/Bottom/Tools/TextOverlay\";\nimport VideoBase from \"@/views/Bottom/Tools/VideoBase\";\nimport Sort from \"@/views/Bottom/Tools/Sort\";\nimport Face from \"@/views/Bottom/Tools/Face\";\nimport AspectRatio from \"@/views/Bottom/Tools/AspectRatio\";\nimport ToolTab from \"@/views/Bottom/ToolTab\";\n\nexport default {\n    components: {\n        AudioBase,\n        BGM,\n        AudioEffect,\n        VFilter,\n        ImageOverlay,\n        TextOverlay,\n        VideoBase,\n        Sort,\n        Face,\n        AspectRatio\n    },\n    props: [\"postermode\"],\n    data() {\n        return {\n            tabid: -1,\n            title: \"\",\n            dialogAccept: false,\n            dialogAcceptable: false,\n            TabID: ToolTab.TabID,\n            options: null\n        };\n    },\n    computed: {\n        style() {\n            let ret = {\n                height: \"auto\"\n            };\n            if (this.options && this.options.height) {\n                ret.position = \"absolute\";\n                ret.height = this.options.height;\n            }\n\n            return ret;\n        }\n    },\n    methods: {\n        show(tabID, options = null) {\n            this.title = \"\";\n            this.dialogAccept = false;\n            this.dialogAcceptable = false;\n            this.tabid = tabID;\n            this.options = { ...options };\n        },\n        beforechange(e) {\n            this.$emit(\"beforechange\", e);\n        },\n        change(e) {\n            this.$emit(\"change\", e, this.tabid);\n        },\n        acceptable() {\n            this.dialogAcceptable = true;\n        },\n        close() {\n            this.dialogAccept = false;\n            this.triggerClose();\n            this.tabid = -1;\n        },\n        accept() {\n            this.dialogAccept = true;\n\n            //让 dialogAccept 有时间响应\n            // this.$nextTick(\n            //     this.$nextTick.bind(this,this.close))\n            // this.close();\n        },\n        triggerClose() {\n            Object.keys(this.$refs).forEach(r => {\n                this.$refs[r] &&\n                    this.$refs[r].onDialogClose &&\n                    this.$refs[r].onDialogClose();\n            });\n        }\n    }\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ToolDialog.vue?vue&type=template&id=173e9416&scoped=true&\"\nimport script from \"./ToolDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./ToolDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ToolDialog.vue?vue&type=style&index=0&id=173e9416&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"173e9416\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.updateUISize),expression:\"updateUISize\"}],ref:\"mainbox\",on:{\"click\":_vm.boxClick}},[(_vm.overlay)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show && (_vm.loaded||!_vm.overlay.url)),expression:\"show && (loaded||!overlay.url)\"}],ref:\"main\",staticClass:\"clip_img\",style:(_vm.style),attrs:{\"tabindex\":\"-1\"},on:{\"touchstart\":_vm.touchstart,\"touchmove\":_vm.touchmove,\"touchend\":_vm.hideMagnet,\"touchcancel\":_vm.hideMagnet}},[(_vm.url)?_c('APNGPlayer',{key:_vm.url,ref:\"img\",staticClass:\"img\",attrs:{\"overlay\":_vm.overlay,\"src\":_vm.url},on:{\"load\":_vm.imgLoaded,\"error\":_vm.imgLoadError}}):_vm._e(),_c('div',{staticClass:\"border\"}),_c('div',{staticClass:\"remove-btn item-btn\",on:{\"click\":_vm.remove}},[_c('mu-icon',{attrs:{\"value\":\"close\"}})],1),(_vm.edit_filter && _vm.edit_filter(_vm.overlay))?_c('div',{staticClass:\"edit-btn item-btn\",on:{\"click\":function($event){return _vm.$emit('edit', _vm.overlay)}}},[_c('mu-icon',{attrs:{\"value\":\"edit\"}})],1):_vm._e(),_c('div',{staticClass:\"resize-btn item-btn\",on:{\"touchstart\":function($event){$event.stopPropagation();return _vm.resize_start($event)},\"touchmove\":function($event){$event.stopPropagation();return _vm.resize_move($event)},\"touchend\":function($event){$event.stopPropagation();return _vm.resize_end($event)}}},[_c('mu-icon',{attrs:{\"value\":\"code\"}})],1)],1):_vm._e(),(_vm.overlay)?[(_vm.magnetX)?_c('div',{staticClass:\"magnet-x\",style:({left: _vm.magnetX+'px'})}):_vm._e(),(_vm.magnetY)?_c('div',{staticClass:\"magnet-y\",style:({top: _vm.magnetY+'px'})}):_vm._e(),(_vm.magnetCross)?_c('div',{staticClass:\"magnet-cross-x\",style:({left: _vm.magnetCross.x+'px'})}):_vm._e(),(_vm.magnetCross)?_c('div',{staticClass:\"magnet-cross-y\",style:({top: _vm.magnetCross.y+'px'})}):_vm._e(),_c('div',{staticClass:\"video-border video-border-left\",style:(_vm.borderStyles.left)}),_c('div',{staticClass:\"video-border video-border-right\",style:(_vm.borderStyles.right)}),_c('div',{staticClass:\"video-border video-border-top\",style:(_vm.borderStyles.top)}),_c('div',{staticClass:\"video-border video-border-bottom\",style:(_vm.borderStyles.bottom)})]:_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.is_png)?_c('canvas',{ref:\"canvas\"}):_c('img',{ref:\"img\",attrs:{\"src\":_vm.src},on:{\"load\":_vm.onImgLoad,\"error\":function($event){return _vm.$emit('error',$event)}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import EventEmitter from \"events\";\n\nexport default class extends EventEmitter {\n    /** @type {CanvasRenderingContext2D} */\n    context;\n    /** @type {number} */\n    playbackRate = 1.0;\n\n    /** @type {APNG} */\n    _apng;\n    /** @type {Frame} */\n    _prevFrame;\n    /** @type {ImageData} */\n    _prevFrameData;\n    /** @type {number} */\n    _currentFrameNumber = 0;\n\n    /** @type {boolean} */\n    _ended = false;\n    /** @type {boolean} */\n    _paused = true;\n    /** @type {number} */\n    _numPlays = 0;\n\n    /**\n     * @param {APNG} apng\n     * @param {CanvasRenderingContext2D} context\n     * @param {boolean} autoPlay\n     */\n    constructor(apng, context, autoPlay) {\n        super();\n        this._apng = apng;\n        this.context = context;\n        this.stop();\n        if (autoPlay) {\n            this.play();\n        }\n    }\n\n    /**\n     *\n     * @return {number}\n     */\n    get currentFrameNumber() {\n        return this._currentFrameNumber;\n    }\n\n    /**\n     *\n     * @return {Frame}\n     */\n    get currentFrame() {\n        return this._apng.frames[this._currentFrameNumber];\n    }\n\n    renderNextFrame() {\n        this._currentFrameNumber =\n            (this._currentFrameNumber + 1) % this._apng.frames.length;\n        if (this._currentFrameNumber === this._apng.frames.length - 1) {\n            this._numPlays++;\n            if (\n                this._apng.numPlays !== 0 &&\n                this._numPlays >= this._apng.numPlays\n            ) {\n                this._ended = true;\n                this._paused = true;\n            }\n        }\n        this.renderCurrentFrame();\n    }\n\n    renderCurrentFrame() {\n        const frame = this.currentFrame;\n        if (this._prevFrame && this._prevFrame.disposeOp == 1) {\n            this.context.clearRect(\n                this._prevFrame.left,\n                this._prevFrame.top,\n                this._prevFrame.width,\n                this._prevFrame.height\n            );\n        } else if (this._prevFrame && this._prevFrame.disposeOp == 2) {\n            this.context.putImageData(\n                this._prevFrameData,\n                this._prevFrame.left,\n                this._prevFrame.top\n            );\n        }\n\n        this._prevFrame = frame;\n        this._prevFrameData = null;\n        if (frame.disposeOp == 2 && !frame._prevFrameData) {\n            this._prevFrameData = this.context.getImageData(\n                frame.left,\n                frame.top,\n                frame.width,\n                frame.height\n            );\n        }\n        if (frame.blendOp == 0) {\n            this.context.clearRect(\n                frame.left,\n                frame.top,\n                frame.width,\n                frame.height\n            );\n        }\n\n        this.context.drawImage(frame.imageElement, frame.left, frame.top);\n\n        this.emit(\"frame\", this._currentFrameNumber);\n        if (this._ended) {\n            this.emit(\"end\");\n        }\n    }\n\n    // playback\n\n    get paused() {\n        return this._paused;\n    }\n\n    get ended() {\n        return this._ended;\n    }\n\n    /**\n     * @param {number} target\n     */\n    seek(target) {\n        let frames = this._apng.frames;\n        let current = 0;\n        let result = 0;\n        let lastCached = 0;\n\n        this._ended = false;\n        this._pause = true;\n\n        this._numPlays = Math.floor(target / this._apng.playTime);\n        if (target > this._apng.playTime) target %= this._apng.playTime;\n\n        for (let i = 0; i < frames.length; i++) {\n            current += frames[i].delay;\n            result = i;\n            this._nextRenderTimeDelta = current - target;\n            if (frames[i].cache) lastCached = i;\n            if (current >= target) break;\n        }\n\n        this._currentFrameNumber = result;\n        if (this._prevFrame != this.currentFrame) {\n            if (lastCached != 0) this._prevFrame = frames[lastCached - 1];\n            for (let i = lastCached; i < result; i++) {\n                this._currentFrameNumber = i;\n                this.renderCurrentFrame();\n            }\n\n            this._currentFrameNumber = result;\n            this.renderCurrentFrame();\n        }\n    }\n\n    play() {\n        this.emit(\"play\");\n\n        if (this._ended) {\n            this.stop();\n        }\n        this._paused = false;\n\n        let nextRenderTime =\n            performance.now() + this.currentFrame.delay / this.playbackRate;\n\n        nextRenderTime -=\n            this.currentFrame.delay -\n            (this._nextRenderTimeDelta || 0) / this.playbackRate;\n\n        const tick = (now) => {\n            if (this._ended || this._paused) {\n                return;\n            }\n            if (now >= nextRenderTime) {\n                while (\n                    now - nextRenderTime >=\n                    this._apng.playTime / this.playbackRate\n                ) {\n                    nextRenderTime += this._apng.playTime / this.playbackRate;\n                    this._numPlays++;\n                }\n                do {\n                    this.renderNextFrame();\n                    nextRenderTime +=\n                        this.currentFrame.delay / this.playbackRate;\n                } while (!this._ended && now > nextRenderTime);\n            }\n            requestAnimationFrame(tick);\n        };\n        requestAnimationFrame(tick);\n    }\n\n    pause() {\n        this.emit(\"pause\");\n        if (!this._paused) {\n            this.emit(\"pause\");\n            this._paused = true;\n        }\n    }\n\n    stop() {\n        this.emit(\"stop\");\n        this._numPlays = 0;\n        this._ended = false;\n        this._paused = true;\n        // render first frame\n        this._currentFrameNumber = -1;\n        this.context.clearRect(0, 0, this._apng.width, this._apng.height);\n        this.renderNextFrame();\n    }\n}\n","import Player from \"./player\";\n\n/**\n * @property {number} currFrameNumber\n * @property {Frame} currFrame\n * @property {boolean} paused\n * @property {boolean} ended\n */\nexport class APNG {\n    /** @type {number} */\n    width = 0;\n    /** @type {number} */\n    height = 0;\n    /** @type {number} */\n    numPlays = 0;\n    /** @type {number} */\n    playTime = 0;\n    /** @type {Frame[]} */\n    frames = [];\n\n    /**\n     *\n     * @return {Promise.<*>}\n     */\n    createImages() {\n        return Promise.all(this.frames.map((f) => f.createImage()));\n    }\n\n    /**\n     *\n     * @param {CanvasRenderingContext2D} context\n     * @param {boolean} autoPlay\n     * @return {Promise.<Player>}\n     */\n    getPlayer(context, autoPlay = false) {\n        return this.createImages().then(\n            () => new Player(this, context, autoPlay)\n        );\n    }\n}\n\nexport class Frame {\n    /** @type {number} */\n    left = 0;\n    /** @type {number} */\n    top = 0;\n    /** @type {number} */\n    width = 0;\n    /** @type {number} */\n    height = 0;\n    /** @type {number} */\n    delay = 0;\n    /** @type {number} */\n    disposeOp = 0;\n    /** @type {number} */\n    blendOp = 0;\n    /** @type {Blob} */\n    imageData = null;\n    /** @type {HTMLImageElement} */\n    imageElement = null;\n    /** @type {ImageData} */\n    cache = null;\n\n    createImage() {\n        if (this.imageElement) {\n            return Promise.resolve();\n        }\n        return new Promise((resolve, reject) => {\n            const url = URL.createObjectURL(this.imageData);\n            this.imageElement = document.createElement(\"img\");\n            this.imageElement.onload = () => {\n                URL.revokeObjectURL(url);\n                resolve();\n            };\n            this.imageElement.onerror = () => {\n                URL.revokeObjectURL(url);\n                this.imageElement = null;\n                reject(new Error(\"Image creation error\"));\n            };\n            this.imageElement.src = url;\n        });\n    }\n}\n","/*\n    refs: https://github.com/davidmz/apng-js\n*/\nimport crc32 from \"./crc32\";\nimport { APNG, Frame } from \"./structs\";\n\nconst errNotPNG = new Error(\"Not a PNG\");\nconst errNotAPNG = new Error(\"Not an animated PNG\");\n\nexport function isNotPNG(err) {\n    return err === errNotPNG;\n}\nexport function isNotAPNG(err) {\n    return err === errNotAPNG;\n}\n\n// '\\x89PNG\\x0d\\x0a\\x1a\\x0a'\nconst PNGSignature = new Uint8Array([\n    0x89,\n    0x50,\n    0x4e,\n    0x47,\n    0x0d,\n    0x0a,\n    0x1a,\n    0x0a,\n]);\n\n/**\n * Parse APNG data\n * @param {ArrayBuffer} buffer\n * @return {APNG|Error}\n */\nexport default function parseAPNG(buffer) {\n    const bytes = new Uint8Array(buffer);\n\n    if (Array.prototype.some.call(PNGSignature, (b, i) => b !== bytes[i])) {\n        return errNotPNG;\n    }\n\n    // fast animation test\n    let isAnimated = false;\n    eachChunk(bytes, (type) => !(isAnimated = type === \"acTL\"));\n    if (!isAnimated) {\n        return errNotAPNG;\n    }\n\n    const preDataParts = [],\n        postDataParts = [];\n    let headerDataBytes = null,\n        frame = null,\n        frameNumber = 0,\n        apng = new APNG();\n\n    eachChunk(bytes, (type, bytes, off, length) => {\n        const dv = new DataView(bytes.buffer);\n        switch (type) {\n            case \"IHDR\":\n                headerDataBytes = bytes.subarray(off + 8, off + 8 + length);\n                apng.width = dv.getUint32(off + 8);\n                apng.height = dv.getUint32(off + 12);\n                break;\n            case \"acTL\":\n                apng.numPlays = dv.getUint32(off + 8 + 4);\n                break;\n            case \"fcTL\":\n                if (frame) {\n                    apng.frames.push(frame);\n                    frameNumber++;\n                }\n                frame = new Frame();\n                frame.width = dv.getUint32(off + 8 + 4);\n                frame.height = dv.getUint32(off + 8 + 8);\n                frame.left = dv.getUint32(off + 8 + 12);\n                frame.top = dv.getUint32(off + 8 + 16);\n                var delayN = dv.getUint16(off + 8 + 20);\n                var delayD = dv.getUint16(off + 8 + 22);\n                if (delayD === 0) {\n                    delayD = 100;\n                }\n                frame.delay = (1000 * delayN) / delayD;\n                // https://bugzilla.mozilla.org/show_bug.cgi?id=125137\n                // https://bugzilla.mozilla.org/show_bug.cgi?id=139677\n                // https://bugzilla.mozilla.org/show_bug.cgi?id=207059\n                if (frame.delay <= 10) {\n                    frame.delay = 100;\n                }\n                apng.playTime += frame.delay;\n                frame.disposeOp = dv.getUint8(off + 8 + 24);\n                frame.blendOp = dv.getUint8(off + 8 + 25);\n                frame.dataParts = [];\n                if (frameNumber === 0 && frame.disposeOp === 2) {\n                    frame.disposeOp = 1;\n                }\n                break;\n            case \"fdAT\":\n                if (frame) {\n                    frame.dataParts.push(\n                        bytes.subarray(off + 8 + 4, off + 8 + length)\n                    );\n                }\n                break;\n            case \"IDAT\":\n                if (frame) {\n                    frame.dataParts.push(\n                        bytes.subarray(off + 8, off + 8 + length)\n                    );\n                }\n                break;\n            case \"IEND\":\n                postDataParts.push(subBuffer(bytes, off, 12 + length));\n                break;\n            default:\n                preDataParts.push(subBuffer(bytes, off, 12 + length));\n        }\n    });\n\n    if (frame) {\n        apng.frames.push(frame);\n    }\n\n    if (apng.frames.length == 0) {\n        return errNotAPNG;\n    }\n\n    const preBlob = new Blob(preDataParts),\n        postBlob = new Blob(postDataParts);\n\n    apng.frames.forEach((frame) => {\n        var bb = [];\n        bb.push(PNGSignature);\n        headerDataBytes.set(makeDWordArray(frame.width), 0);\n        headerDataBytes.set(makeDWordArray(frame.height), 4);\n        bb.push(makeChunkBytes(\"IHDR\", headerDataBytes));\n        bb.push(preBlob);\n        frame.dataParts.forEach((p) => bb.push(makeChunkBytes(\"IDAT\", p)));\n        bb.push(postBlob);\n        frame.imageData = new Blob(bb, { type: \"image/png\" });\n        delete frame.dataParts;\n        bb = null;\n    });\n\n    return apng;\n}\n\n/**\n * @param {Uint8Array} bytes\n * @param {function(string, Uint8Array, int, int): boolean} callback\n */\nfunction eachChunk(bytes, callback) {\n    const dv = new DataView(bytes.buffer);\n    let off = 8,\n        type,\n        length,\n        res;\n    do {\n        length = dv.getUint32(off);\n        type = readString(bytes, off + 4, 4);\n        res = callback(type, bytes, off, length);\n        off += 12 + length;\n    } while (res !== false && type != \"IEND\" && off < bytes.length);\n}\n\n/**\n *\n * @param {Uint8Array} bytes\n * @param {number} off\n * @param {number} length\n * @return {string}\n */\nfunction readString(bytes, off, length) {\n    const chars = Array.prototype.slice.call(bytes.subarray(off, off + length));\n    return String.fromCharCode.apply(String, chars);\n}\n\n/**\n *\n * @param {string} x\n * @return {Uint8Array}\n */\nfunction makeStringArray(x) {\n    const res = new Uint8Array(x.length);\n    for (let i = 0; i < x.length; i++) {\n        res[i] = x.charCodeAt(i);\n    }\n    return res;\n}\n\n/**\n * @param {Uint8Array} bytes\n * @param {int} start\n * @param {int} length\n * @return {Uint8Array}\n */\nfunction subBuffer(bytes, start, length) {\n    const a = new Uint8Array(length);\n    a.set(bytes.subarray(start, start + length));\n    return a;\n}\n\n/**\n * @param {string} type\n * @param {Uint8Array} dataBytes\n * @return {Uint8Array}\n */\nvar makeChunkBytes = function(type, dataBytes) {\n    const crcLen = type.length + dataBytes.length;\n    const bytes = new Uint8Array(crcLen + 8);\n    const dv = new DataView(bytes.buffer);\n\n    dv.setUint32(0, dataBytes.length);\n    bytes.set(makeStringArray(type), 4);\n    bytes.set(dataBytes, 8);\n    var crc = crc32(bytes, 4, crcLen);\n    dv.setUint32(crcLen + 4, crc);\n    return bytes;\n};\n\nvar makeDWordArray = function(x) {\n    return new Uint8Array([\n        (x >>> 24) & 0xff,\n        (x >>> 16) & 0xff,\n        (x >>> 8) & 0xff,\n        x & 0xff,\n    ]);\n};\n","<template>\n    <canvas v-if=\"is_png\" ref=\"canvas\" />\n    <img ref=\"img\" v-else @load=\"onImgLoad\" @error=\"$emit('error',$event)\" :src=\"src\" />\n</template>\n<style scoped>\n</style>\n<script>\nimport apngjs from \"./apngjs/parser\";\nimport { Log } from \"jsugc-websdk\";\nimport { Editlist } from \"jsugc-websdk\";\nexport default {\n    props: [\"src\", \"overlay\"],\n    data() {\n        return {\n            player: null,\n            is_png: true\n        };\n    },\n    methods: {\n        seek(sec) {\n            if (sec === undefined) sec = this.overlay.offset_sec;\n            sec -= this.overlay.offset_sec;\n            (async () => {\n                this.player && this.player.seek(sec * 1000);\n            })();\n        },\n        play() {\n            this.player && this.player.play();\n        },\n        pause() {\n            this.player && this.player.pause();\n        },\n        onImgLoad() {\n            this.naturalWidth = this.$refs.img.naturalWidth;\n            this.naturalHeight = this.$refs.img.naturalHeight;\n            this.$emit(\"load\");\n        }\n    },\n    async mounted() {\n        Log.verbose(`apng src: ${this.src}`);\n\n        let fEntry = await new Promise(\n            window.resolveLocalFileSystemURL.bind(window, this.src)\n        );\n        let file = await new Promise(fEntry.file.bind(fEntry));\n\n        let reader = new FileReader();\n        let result = (\n            await new Promise((o, x) => {\n                reader.onload = o;\n                reader.onerror = x;\n                reader.readAsArrayBuffer(file);\n            })\n        ).target.result;\n\n        const apng = apngjs(result);\n        if (apng instanceof Error) {\n            this.is_png = false;\n            return;\n        }\n\n        let canvas = this.$refs.canvas;\n        canvas.width = this.naturalWidth = apng.width;\n        canvas.height = this.naturalHeight = apng.height;\n\n        this.player = await apng.getPlayer(canvas.getContext(\"2d\"));\n        this.seek(Editlist.editlist.time_sec);\n        this.$emit(\"load\");\n    }\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./APNGPlayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./APNGPlayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./APNGPlayer.vue?vue&type=template&id=7831d96a&scoped=true&\"\nimport script from \"./APNGPlayer.vue?vue&type=script&lang=js&\"\nexport * from \"./APNGPlayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7831d96a\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div v-resize=\"updateUISize\" ref=\"mainbox\" @click=\"boxClick\">\n        <div\n            tabindex=\"-1\"\n            v-if=\"overlay\"\n            v-show=\"show && (loaded||!overlay.url)\"\n            ref=\"main\"\n            class=\"clip_img\"\n            @touchstart=\"touchstart\"\n            @touchmove=\"touchmove\"\n            @touchend=\"hideMagnet\"\n            @touchcancel=\"hideMagnet\"\n            :style=\"style\"\n        >\n            <!-- 使url=url+'?'+overlay.id,可以修复添加相同同贴纸时url没变导致不触发onload的问题 -->\n            <!-- <img\n                v-show=\"loaded\"\n                @load=\"imgLoaded\"\n                @error=\"imgLoadError\"\n                :src=\"url + '?' + overlay.id\"\n                :key=\"url\"\n                class=\"img\"\n                ref=\"img\"\n            />-->\n            <APNGPlayer\n                v-if=\"url\"\n                @load=\"imgLoaded\"\n                @error=\"imgLoadError\"\n                :overlay=\"overlay\"\n                :src=\"url\"\n                :key=\"url\"\n                class=\"img\"\n                ref=\"img\"\n            />\n            <div class=\"border\" />\n            <div class=\"remove-btn item-btn\" @click=\"remove\">\n                <mu-icon value=\"close\" />\n            </div>\n            <div\n                v-if=\"edit_filter && edit_filter(overlay)\"\n                class=\"edit-btn item-btn\"\n                @click=\"$emit('edit', overlay)\"\n            >\n                <mu-icon value=\"edit\" />\n            </div>\n            <div\n                class=\"resize-btn item-btn\"\n                @touchstart.stop=\"resize_start\"\n                @touchmove.stop=\"resize_move\"\n                @touchend.stop=\"resize_end\"\n            >\n                <mu-icon value=\"code\" />\n            </div>\n        </div>\n        <template v-if=\"overlay\">\n            <!-- 移动对齐线 -->\n            <div class=\"magnet-x\" v-if=\"magnetX\" :style=\"{left: magnetX+'px'}\"></div>\n            <div class=\"magnet-y\" v-if=\"magnetY\" :style=\"{top: magnetY+'px'}\"></div>\n            <!-- 旋转对齐线 -->\n            <div class=\"magnet-cross-x\" v-if=\"magnetCross\" :style=\"{left: magnetCross.x+'px'}\"></div>\n            <div class=\"magnet-cross-y\" v-if=\"magnetCross\" :style=\"{top: magnetCross.y+'px'}\"></div>\n            <!-- 视频边界 -->\n            <div class=\"video-border video-border-left\" :style=\"borderStyles.left\"></div>\n            <div class=\"video-border video-border-right\" :style=\"borderStyles.right\"></div>\n            <div class=\"video-border video-border-top\" :style=\"borderStyles.top\"></div>\n            <div class=\"video-border video-border-bottom\" :style=\"borderStyles.bottom\"></div>\n        </template>\n    </div>\n</template>\n<style>\n.clip_img {\n    position: absolute;\n    width: 100px;\n    height: 100px;\n    left: 0;\n    top: 0;\n    display: flex;\n    outline: 0;\n}\n</style>\n<style lang=\"less\" scoped>\n.img {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n.border {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    border: 1px solid white;\n}\n.item-btn {\n    width: 30px;\n    height: 30px;\n    min-width: 30px;\n    min-height: 30px;\n    background: white;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0;\n    border-radius: 30px;\n    position: absolute;\n    opacity: 0.8;\n}\n.resize-btn {\n    right: -20px;\n    bottom: -20px;\n    transform: rotate(45deg);\n}\n.remove-btn {\n    top: -20px;\n    left: -20px;\n}\n.edit-btn {\n    top: -20px;\n    right: -20px;\n}\n.magnet-x {\n    position: absolute;\n    height: 100%;\n    top: 0;\n    border-left: 1px dashed white;\n}\n.magnet-y {\n    position: absolute;\n    width: 100%;\n    left: 0;\n    border-top: 1px dashed white;\n}\n.magnet-cross-x {\n    position: absolute;\n    height: 100%;\n    top: 0;\n    border-left: 1px dashed orange;\n}\n.magnet-cross-y {\n    position: absolute;\n    width: 100%;\n    left: 0;\n    border-top: 1px dashed orange;\n}\n.video-border {\n    position: absolute;\n    background: rgba(0, 0, 0, 0.7);\n    pointer-events: none;\n\n    &.video-border-top {\n        width: 100%;\n        top: 0;\n    }\n    &.video-border-bottom {\n        width: 100%;\n        bottom: 0;\n    }\n    &.video-border-left {\n        left: 0;\n        height: 100%;\n    }\n    &.video-border-right {\n        right: 0;\n        height: 100%;\n    }\n}\n</style>\n<script>\nimport { Editlist } from \"jsugc-websdk\";\nimport { Log } from \"jsugc-websdk\";\nimport { CordovaModel } from \"jsugc-websdk\";\nimport Const from \"@/const\";\nimport { rotateVector } from \"@/utils\";\nimport Magnet from \"@/model/Magnet\";\nimport APNGPlayer from \"@/views/Helper/APNGPlayer\";\nimport OpHistory from \"@/model/History\";\nfunction angleAndScale(pointA, pointB, pointC) {\n    var lengthAB = Math.sqrt(\n            Math.pow(pointA.X - pointB.X, 2) + Math.pow(pointA.Y - pointB.Y, 2)\n        ),\n        lengthAC = Math.sqrt(\n            Math.pow(pointA.X - pointC.X, 2) + Math.pow(pointA.Y - pointC.Y, 2)\n        ),\n        lengthBC = Math.sqrt(\n            Math.pow(pointB.X - pointC.X, 2) + Math.pow(pointB.Y - pointC.Y, 2)\n        );\n    var cosA =\n        (Math.pow(lengthAB, 2) +\n            Math.pow(lengthAC, 2) -\n            Math.pow(lengthBC, 2)) /\n        (2 * lengthAB * lengthAC);\n\n    //余弦定理得到角度\n    var angleA = Math.round((Math.acos(cosA) * 180) / Math.PI);\n\n    // 判断三点是顺时针还是逆时针方向\n    // 设 p1=(x1,y1)， p2=(x2,y2)， p3=(x3,y3)\n    // 求向量\n    // p12=(x2-x1,y2-y1)\n    // p23=(x3-x2,y3-y2)\n    // 则当 p12 与 p23 的叉乘（向量积）\n    // p12 x p23 = (x2-x1)*(y3-y2)-(y2-y1)*(x3-x2)\n    // 为正时，p1-p2-p3 路径的走向为逆时针，\n    // 为负时，p1-p2-p3 走向为顺时针，\n    // 为零时，p1-p2-p3 所走的方向不变，亦即三点在一直线上。\n\n    let sign =\n        (pointB.X - pointA.X) * (pointC.Y - pointB.Y) -\n        (pointB.Y - pointA.Y) * (pointC.X - pointB.X);\n\n    if (sign < 0) angleA = 180 + 180 - angleA;\n\n    //带正负的角度和缩放比例\n    return {\n        angle: angleA,\n        scale: lengthAC / lengthAB,\n    };\n}\nfunction getElementPageXY(element) {\n    var actualLeft = element.offsetLeft;\n    var parent = element.offsetParent;\n    while (parent != null) {\n        actualLeft +=\n            parent.offsetLeft + (parent.offsetWidth - parent.clientWidth) / 2;\n        parent = parent.offsetParent;\n    }\n\n    var actualTop = element.offsetTop;\n    parent = element.offsetParent;\n    while (parent != null) {\n        actualTop +=\n            parent.offsetTop + (parent.offsetHeight - parent.clientHeight) / 2;\n        parent = parent.offsetParent;\n    }\n    return { x: actualLeft, y: actualTop };\n}\n\nexport default {\n    props: [\"postermode\", \"edit_filter\"],\n    components: { APNGPlayer },\n    data() {\n        return {\n            editlist: Editlist.editlist,\n            userModify: false,\n            overlay: null,\n            show: false,\n            loaded: false,\n            ignoreLoadEvent: false,\n            url: \"\",\n            magnetX: null,\n            magnetY: null,\n            magnetCross: null,\n            box: {\n                width: 0,\n                height: 0,\n                offsetX: 0, //根据sar修正坐标\n                offsetY: 0,\n                scale: 1, // ui 转为 视频像素\n            },\n            style: {\n                left: \"50px\",\n                top: \"50px\",\n                width: \"100px\",\n                height: \"100px\",\n                transform: \"rotate(0deg)\",\n            },\n            temp: {\n                pageX: 0,\n                pageY: 0,\n                offsetX: 0,\n                offsetY: 0,\n            },\n            tempStyle: {\n                x: 0,\n                y: 0,\n                w: 0,\n                h: 0,\n                rotate: 0,\n            },\n        };\n    },\n    watch: {\n        // 监听文字修改\n        \"overlay.url\": \"load\",\n        [\"editlist.time_sec\"](v) {\n            if (!this.overlay) return;\n\n            if (this.delayPlay) {\n                this._delayPlay();\n            }\n            if (this._playing) {\n                if (v < this.overlay.offset_sec + this.overlay.end_sec)\n                    this._delayPause();\n            } else this.updateIsShow();\n        },\n    },\n    computed: {\n        hasActive() {\n            return !!this.overlay;\n        },\n        borderStyles() {\n            return {\n                top: {\n                    display: this.box.offsetY > 0 ? \"block\" : \"none\",\n                    height: this.box.offsetY + \"px\",\n                },\n                bottom: {\n                    display: this.box.offsetY > 0 ? \"block\" : \"none\",\n                    height: this.box.offsetY + \"px\",\n                },\n                left: {\n                    display: this.box.offsetX > 0 ? \"block\" : \"none\",\n                    width: this.box.offsetX + \"px\",\n                },\n                right: {\n                    display: this.box.offsetX > 0 ? \"block\" : \"none\",\n                    width: this.box.offsetX + \"px\",\n                },\n            };\n        },\n    },\n    methods: {\n        //\n        // Player\n        //\n        seek(sec) {\n            if (!this.overlay) return;\n\n            if (\n                sec < this.overlay.offset_sec ||\n                sec > this.overlay.offset_sec + this.overlay.end_sec\n            )\n                return;\n\n            if (this.$refs.img) this.$refs.img.seek(sec);\n        },\n        _delayPlay() {\n            clearTimeout(this._delayPlayTmr);\n            this._delayPlayTmr = setTimeout(() => {\n                this.delayPlay = false;\n                if (this.$refs.img) {\n                    this.$refs.img.seek();\n                    this.$refs.img.play();\n                    this._playing = true;\n                    this.show = true;\n                }\n            }, (this.overlay.offset_sec - Editlist.editlist.time_sec) * 1000);\n        },\n        play() {\n            if (!this.overlay) return;\n\n            clearTimeout(this._delayPlayTmr);\n\n            if (\n                Editlist.editlist.time_sec >\n                this.overlay.offset_sec + this.overlay.end_sec\n            )\n                return;\n\n            this.delayPlay =\n                this.overlay.offset_sec > Editlist.editlist.time_sec;\n            if (this.delayPlay) {\n                this._delayPlay();\n            } else {\n                if (this.$refs.img) this.$refs.img.play();\n                this._playing = true;\n            }\n        },\n        _delayPause() {\n            clearTimeout(this._delayPauseTmr);\n            this._delayPauseTmr = setTimeout(() => {\n                clearTimeout(this._delayPlayTmr);\n                if (this.$refs.img) {\n                    this.$refs.img.pause();\n                    this._playing = false;\n                    this.show = false;\n                }\n            }, (this.overlay.offset_sec + this.overlay.end_sec - Editlist.editlist.time_sec) * 1000);\n        },\n        pause() {\n            this.delayPlay = false;\n            this._playing = false;\n            clearTimeout(this._delayPauseTmr);\n            clearTimeout(this._delayPlayTmr);\n            if (this.$refs.img) this.$refs.img.pause();\n        },\n        //\n        // end of Player\n        //\n        updateIsShow() {\n            this.show =\n                this.overlay &&\n                Editlist.editlist.time_sec >= this.overlay.offset_sec &&\n                Editlist.editlist.time_sec <=\n                    this.overlay.offset_sec + this.overlay.end_sec;\n        },\n        updateUISize() {\n            this.box.width = this.$refs.mainbox.clientWidth;\n            this.box.height = this.$refs.mainbox.clientHeight;\n\n            let darUI = this.box.width / this.box.height;\n            let dar = Editlist.editlist.dar[0] / Editlist.editlist.dar[1];\n\n            if (dar > darUI) {\n                this.box.offsetY = (this.box.height - this.box.width / dar) / 2;\n                this.box.offsetX = 0;\n                this.box.scale =\n                    Editlist.editlist.resolution_dar[0] / this.box.width;\n            } else {\n                this.box.offsetX = (this.box.width - this.box.height * dar) / 2;\n                this.box.offsetY = 0;\n                this.box.scale =\n                    Editlist.editlist.resolution_dar[1] / this.box.height;\n            }\n\n            Log.verbose(\"ClipImg update box: \" + JSON.stringify(this.box));\n        },\n        boxClick(e) {\n            if (this.hasActive) {\n                this.blur();\n                return;\n            }\n\n            let { x, y } = getElementPageXY(this.$refs.mainbox);\n            x = (e.pageX - x - this.box.offsetX) * this.box.scale;\n            y = (e.pageY - y - this.box.offsetY) * this.box.scale;\n\n            let allOverlay = this.postermode\n                ? Editlist.editlist.poster.overlay\n                : [...Editlist.editlist.overlay, ...Editlist.editlist.mosic];\n            let selectedFilter = allOverlay\n                .filter((o) => {\n                    //time_sec 命中 overlay 时间线\n                    return (\n                        o.offset_sec <= Editlist.editlist.time_sec &&\n                        (o.end_sec == 0 ||\n                            o.offset_sec + o.end_sec >=\n                                Editlist.editlist.time_sec)\n                    );\n                })\n                .filter((o) => {\n                    //x,y inset overlay rect\n\n                    let ox = o.x;\n                    let oy = o.y;\n\n                    // overlay存储的是旋转前的坐标，\n                    // 所以需要逆向旋转x, y后再判断包含关系\n                    let p = rotateVector(\n                        ox + o.w / 2,\n                        oy + o.h / 2,\n                        x,\n                        y,\n                        -o.rotate\n                    );\n\n                    return (\n                        ox < p.x && oy < p.y && ox + o.w > p.x && oy + o.h > p.y\n                    );\n                });\n\n            if (selectedFilter.length) {\n                let item = selectedFilter.reverse()[0];\n                this.active(item);\n                this.load();\n                this.$emit(\"overlayActive\", item);\n            } else {\n                this.blur();\n            }\n        },\n        async blur() {\n            if (this.overlay) {\n                Log.uilog(\"/overlay_editor\", `blur`);\n                this.overlay.enabled = true;\n                this.overlay.active = false;\n                if (this.overlay.new) {\n                    this.overlay.new = false;\n                    await this.$emit(\"change\");\n                } else {\n                    if (this.overlay.type == Const.Overlay.Type.Mosic) {\n                        Editlist.editlist.update_mosic(this.overlay);\n                    } else {\n                        await Editlist.editlist.update_overlay(\n                            this.overlay,\n                            this.postermode\n                        );\n                    }\n                }\n\n                if (this.userModify) {\n                    this.createOrUpdateOperateHistory();\n                }\n                let overlay = this.overlay;\n                this.overlay = null;\n                // this.$emit(\"change\");\n                this.$emit(\"overlayDeactive\", overlay);\n            }\n        },\n        async active(overlay) {\n            Log.uilog(\"/overlay_editor\", `active. ${JSON.stringify(overlay)}`);\n            //先让 palyer 隐藏该 overlay\n            // if(overlay.enabled){\n            //     overlay.enabled = false;\n            //     this.$emit(\"change\");\n            // }\n\n            if (this.overlay) {\n                this.overlay.active = false;\n            }\n\n            overlay.active = true;\n            this.overlay = overlay;\n            this.userModify = false;\n\n            if (this.overlay.type == Const.Overlay.Type.Mosic) {\n                this.loaded = false;\n                this.url = \"\";\n                Editlist.editlist.update_mosic(this.overlay);\n            } else {\n                Editlist.editlist.update_overlay(this.overlay, this.postermode);\n            }\n\n            this.updateUI();\n            this.updateIsShow();\n\n            if (!overlay.url && overlay.w <= 10) {\n                // 自动宽度、并居中马赛克\n                this.toCenter(1);\n                this.onChange(true);\n            }\n\n            this.$nextTick(() => {\n                this.$refs.main.focus();\n            });\n\n            Log.verbose(\"ClipImg active: \" + JSON.stringify(this.overlay));\n        },\n        updateUI() {\n            this.updateUISize();\n\n            if (this.overlay) {\n                //使用 overlay_opengl 后无需修正\n                //因为ffmpeg里面使用 对角线 的框来放置overlay，所以需要修正 x,y 坐标\n                // let box = Math.hypot(this.overlay.w, this.overlay.h);\n                let x = this.overlay.x;\n                let y = this.overlay.y;\n                // if(this.overlay.type != Const.Overlay.Type.Mosic) {\n                //     x -= (this.overlay.w - box)/2;\n                //     y -= (this.overlay.h - box)/2;\n                // }\n\n                this.style.left = this.box.offsetX + x / this.box.scale + \"px\";\n                this.style.top = this.box.offsetY + y / this.box.scale + \"px\";\n                this.style.width = this.overlay.w / this.box.scale + \"px\";\n                this.style.height = this.overlay.h / this.box.scale + \"px\";\n                this.style.transform = \"rotate(\" + this.overlay.rotate + \"deg)\";\n            }\n        },\n        imgLoaded() {\n            this.loaded = true;\n            if (\n                this.ignoreLoadEvent ||\n                !this.overlay ||\n                !this.$refs.img.naturalWidth ||\n                !this.$refs.img.naturalHeight\n            ) {\n                return;\n            }\n            this.setDefaultSize();\n        },\n        setDefaultSize() {\n            let modify = false;\n            let oldWidth = this.style.width;\n\n            let ratio =\n                this.$refs.img.naturalWidth / this.$refs.img.naturalHeight;\n            if (+this.style.width.replace(\"px\", \"\") < 10) {\n                this.toCenter(ratio);\n                modify = true;\n            }\n            this.style.width =\n                ratio * this.style.height.replace(\"px\", \"\") + \"px\";\n\n            if (Math.ceil(this.style.width + 0) != Math.ceil(oldWidth + 0)) {\n                modify = true;\n            }\n\n            if (modify) {\n                this.onChange(true);\n            }\n        },\n        imgLoadError(e) {\n            Log.error(\"overlay img load error \", e);\n        },\n        toCenter(ratio) {\n            let width = this.box.width / 2 - this.box.offsetX;\n            let height = this.box.height / 2 - this.box.offsetY;\n            if (ratio > 1) height = width / ratio;\n            else width = height * ratio;\n\n            this.style.left = (this.box.width - width) / 2 + \"px\";\n            this.style.top = (this.box.height - height) / 2 + \"px\";\n            this.style.width = width + \"px\";\n            this.style.height = height + \"px\";\n        },\n        remove() {\n            this.overlay.active = false;\n            let overlays = this.postermode\n                ? Editlist.editlist.poster.overlay\n                : Editlist.editlist.overlay;\n            let idx = overlays.findIndex((e) => e.id == this.overlay.id);\n            if (idx >= 0) overlays.splice(idx, 1);\n\n            idx = Editlist.editlist.mosic.findIndex(\n                (e) => e.id == this.overlay.id\n            );\n            if (idx >= 0) Editlist.editlist.mosic.splice(idx, 1);\n\n            this.overlay = null;\n            this.$emit(\"change\");\n        },\n        resize_start(e) {\n            this.temp.pageX = e.changedTouches[0].pageX;\n            this.temp.pageY = e.changedTouches[0].pageY;\n\n            this.tempStyle.x = +this.style.left.replace(\"px\", \"\");\n            this.tempStyle.y = +this.style.top.replace(\"px\", \"\");\n\n            this.tempStyle.w = +this.style.width.replace(\"px\", \"\");\n            this.tempStyle.h = +this.style.height.replace(\"px\", \"\");\n\n            //鼠标点击的点（本地坐标）\n            let { x, y } = getElementPageXY(this.$refs.main);\n            this.temp.offsetX = this.temp.pageX - (x - this.tempStyle.x);\n            this.temp.offsetY = this.temp.pageY - (y - this.tempStyle.y);\n\n            this.tempStyle.rotate = +this.style.transform.match(/\\d+/)[0];\n\n            return true;\n        },\n        resize_move_scale(e) {\n            let dX = e.changedTouches[0].pageX - this.temp.pageX;\n            let dY = e.changedTouches[0].pageY - this.temp.pageY;\n\n            // angle = angle + this.tempStyle.rotate;\n            // this.style.transform = \"rotate(\" + angle + \"deg)\";\n\n            let dW = dX; //(scale - 1) * this.tempStyle.w;\n            let dH = dY; //(scale - 1) * this.tempStyle.h;\n\n            this.style.left = this.tempStyle.x - dW / 2 + \"px\";\n            this.style.top = this.tempStyle.y - dH / 2 + \"px\";\n            this.style.width = this.tempStyle.w + dW + \"px\";\n            this.style.height = this.tempStyle.h + dH + \"px\";\n\n            this.onChange();\n            e.preventDefault && e.preventDefault();\n            e.returnValue = false;\n            e.stopPropagation && e.stopPropagation();\n            return false;\n        },\n        resize_move(e) {\n            if (this.overlay.type == Const.Overlay.Type.Mosic) {\n                return this.resize_move_scale(e);\n            }\n            let dX = e.changedTouches[0].pageX - this.temp.pageX;\n            let dY = e.changedTouches[0].pageY - this.temp.pageY;\n\n            //根据三点，得到转角和缩放\n            let { angle, scale } = angleAndScale(\n                {\n                    X: this.tempStyle.x + this.tempStyle.w / 2,\n                    Y: this.tempStyle.y + this.tempStyle.h / 2,\n                },\n                {\n                    X: this.temp.offsetX,\n                    Y: this.temp.offsetY,\n                },\n                {\n                    X: this.temp.offsetX + dX,\n                    Y: this.temp.offsetY + dY,\n                }\n            );\n\n            angle = (angle + this.tempStyle.rotate) % 360;\n\n            // angle dock begin\n            let layout = this.createMagnetLayout({\n                angle: angle,\n                left: this.tempStyle.x,\n                top: this.tempStyle.y,\n                width: this.tempStyle.w,\n                height: this.tempStyle.h,\n            });\n            layout = this.magnet.checkAngle(layout);\n            angle = layout.angle;\n            // angle dock end\n\n            this.style.transform = \"rotate(\" + angle + \"deg)\";\n\n            let dW = (scale - 1) * this.tempStyle.w;\n            let dH = (scale - 1) * this.tempStyle.h;\n\n            this.style.left = this.tempStyle.x - dW / 2 + \"px\";\n            this.style.top = this.tempStyle.y - dH / 2 + \"px\";\n            this.style.width = this.tempStyle.w + dW + \"px\";\n            this.style.height = this.tempStyle.h + dH + \"px\";\n\n            this.onChange();\n            e.preventDefault && e.preventDefault();\n            e.returnValue = false;\n            e.stopPropagation && e.stopPropagation();\n            return false;\n        },\n        resize_end() {\n            this.magnetCross = null;\n            Log.uilog(\n                \"/overlay_editor\",\n                `resize end. ${JSON.stringify(this.overlay)}`\n            );\n        },\n        touchstart(e) {\n            this.temp.pageX = e.changedTouches[0].pageX;\n            this.temp.pageY = e.changedTouches[0].pageY;\n            this.tempStyle.x = +this.style.left.replace(\"px\", \"\");\n            this.tempStyle.y = +this.style.top.replace(\"px\", \"\");\n        },\n        touchmove(e) {\n            let newX =\n                this.tempStyle.x + e.changedTouches[0].pageX - this.temp.pageX;\n            let newY =\n                this.tempStyle.y + e.changedTouches[0].pageY - this.temp.pageY;\n\n            // dock begin\n            let oldLayout = this.createMagnetLayout({\n                left: this.tempStyle.x,\n                top: this.tempStyle.y,\n                width: +this.style.width.replace(\"px\", \"\"),\n                height: +this.style.height.replace(\"px\", \"\"),\n            });\n            let newLayout = this.createMagnetLayout({\n                left: newX,\n                top: newY,\n                width: oldLayout.width,\n                height: oldLayout.height,\n            });\n            newLayout = this.magnet.check(oldLayout, newLayout);\n            newX = newLayout.left;\n            newY = newLayout.top;\n            // dock end\n\n            this.style.left = newX + \"px\";\n            this.style.top = newY + \"px\";\n            this.onChange();\n\n            e.preventDefault && e.preventDefault();\n            e.returnValue = false;\n            e.stopPropagation && e.stopPropagation();\n            return false;\n        },\n        onChange(auto) {\n            this.overlay.x =\n                (+this.style.left.replace(\"px\", \"\") - this.box.offsetX) *\n                this.box.scale;\n            this.overlay.y =\n                (+this.style.top.replace(\"px\", \"\") - this.box.offsetY) *\n                this.box.scale;\n            this.overlay.w =\n                +this.style.width.replace(\"px\", \"\") * this.box.scale;\n            this.overlay.h =\n                +this.style.height.replace(\"px\", \"\") * this.box.scale;\n            this.overlay.rotate = +this.style.transform.match(/\\d+/)[0];\n\n            //使用 overlay_opengl 后无需修正\n            // if(this.overlay.type != Const.Overlay.Type.Mosic) {\n            //     //因为ffmpeg里面使用 对角线 的框来放置overlay，所以需要修正 x,y 坐标\n            //     let box = Math.hypot(this.overlay.w, this.overlay.h);\n            //     this.overlay.x += (this.overlay.w - box)/2;\n            //     this.overlay.y += (this.overlay.h - box)/2;\n            // }\n\n            this.overlay.x = +this.overlay.x.toFixed(2);\n            this.overlay.y = +this.overlay.y.toFixed(2);\n            this.overlay.w = +this.overlay.w.toFixed(2);\n            this.overlay.h = +this.overlay.h.toFixed(2);\n\n            // setTimeout(() => {\n            if (this.overlay.type == Const.Overlay.Type.Mosic) {\n                Editlist.editlist.update_mosic(this.overlay);\n            } else {\n                Editlist.editlist.update_overlay(this.overlay, this.postermode);\n            }\n            // }, 500);\n\n            Log.verbose(\n                \"overlay changed: \" +\n                    this.overlay.x +\n                    \",\" +\n                    this.overlay.y +\n                    \",\" +\n                    this.overlay.w +\n                    \",\" +\n                    this.overlay.h\n            );\n\n            if (auto) {\n                this.createOrUpdateOperateHistory(true);\n            } else {\n                this.userModify = true;\n            }\n        },\n        async load() {\n            if (this.overlay && this.overlay.url) {\n                // loaded改变会触发图片的onload\n                this.ignoreLoadEvent = true;\n                this.loaded = false;\n\n                let url;\n\n                try {\n                    url = await CordovaModel.getCdvUrl(this.overlay.url);\n                } catch (error) {\n                    url = this.overlay.url; // 兼容PC调试\n                }\n                this.ignoreLoadEvent = false;\n\n                if (!this.overlay) {\n                    return;\n                }\n\n                // if(this.overlay.type == Const.Overlay.Type.Text) {\n                //     // 修改文字后生成的url没变化，导致没有刷新\n                //     this.url = url + \"?\" + Math.random();\n                // } else {\n                //     // 防止apng重复下载,不加random\n                //     this.url = url;\n                // }\n                // 因为加了撤销功能，现在文字url是会变的\n                this.url = url + \"?\" + this.overlay.id;\n            }\n        },\n        createOrUpdateOperateHistory(isAuto) {\n            if (this.postermode) return;\n\n            if (isAuto) {\n                if (this.overlay.type == Const.Overlay.Type.Mosic) {\n                    OpHistory.updateOperateHistory(\n                        Const.Operate.MosicAdd.Type,\n                        this.overlay\n                    );\n                } else if (this.overlay.type == Const.Overlay.Type.Image) {\n                    OpHistory.updateOperateHistory(\n                        Const.Operate.ImageAdd.Type,\n                        this.overlay\n                    );\n                } else {\n                    OpHistory.updateOperateHistory(\n                        Const.Operate.TextAdd.Type,\n                        this.overlay\n                    );\n                }\n            } else if (this.overlay.type == Const.Overlay.Type.Mosic) {\n                OpHistory.createOperateHistory(Const.Operate.MosicModify.Type);\n            } else if (this.overlay.type == Const.Overlay.Type.Image) {\n                OpHistory.createOperateHistory(Const.Operate.ImageModify.Type);\n            } else {\n                OpHistory.createOperateHistory(Const.Operate.TextModify.Type);\n            }\n        },\n        createMagnetLayout(layout) {\n            return {\n                ...layout,\n                right: layout.left + layout.width,\n                bottom: layout.top + layout.height,\n            };\n        },\n        hideMagnet() {\n            Log.uilog(\n                \"/overlay_editor\",\n                `move end. ${JSON.stringify(this.overlay)}`\n            );\n            this.magnetX = null;\n            this.magnetY = null;\n            this.magnetCross = null;\n        },\n    },\n    mounted() {\n        // this.onChange();\n        let mainbox = this.$refs.mainbox;\n        this.magnet = new Magnet({\n            span: 10, // px\n            angleSpan: 4, // degress\n            features: [\"middleToMiddle\", \"centerToCenter\"],\n            render: (x, y) => {\n                this.magnetX = x;\n                this.magnetY = y;\n            },\n            renderAngle: (angle, layout) => {\n                if (angle != null) {\n                    this.magnetCross = {\n                        x: (layout.left += layout.width / 2),\n                        y: (layout.top += layout.height / 2),\n                    };\n                } else {\n                    this.magnetCross = null;\n                }\n            },\n            dynamicLayouts: () => {\n                return [\n                    this.createMagnetLayout({\n                        left: 0,\n                        top: 0,\n                        width: mainbox.offsetWidth,\n                        height: mainbox.offsetHeight,\n                    }),\n                ];\n            },\n        });\n    },\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverlayEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverlayEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OverlayEditor.vue?vue&type=template&id=e5dbe36a&scoped=true&\"\nimport script from \"./OverlayEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./OverlayEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OverlayEditor.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./OverlayEditor.vue?vue&type=style&index=1&id=e5dbe36a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e5dbe36a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('PosterMakerTop',{attrs:{\"saving\":_vm.saving},on:{\"close\":_vm.close,\"save\":_vm.save}}),_c('div',{staticClass:\"title\"},[_vm._v(\"选择封面\")]),_c('div',{ref:\"mainBox\",staticClass:\"main-box\"},[_c('PreviewPlayer',{ref:\"preview\",staticClass:\"main-video\",attrs:{\"pause\":true,\"postermode\":true,\"player\":_vm.$refs.preview},on:{\"render\":_vm.onPreviewLoaded}}),_c('OverlayEditor',{ref:\"overlayEditor\",staticClass:\"overlay-box\",attrs:{\"postermode\":true,\"edit_filter\":function (e) { return e.type == _vm.Const.Overlay.Type.Text; }},on:{\"change\":_vm.overlayChange,\"edit\":_vm.overlayEdit}})],1),_c('div',{staticClass:\"toolBox\"},[_c('ClipTimeline',{ref:\"timeline\",attrs:{\"playing\":!_vm.player.pause,\"postermode\":true},on:{\"timeChange\":_vm.timeChange}}),_c('PosterToolTab',{on:{\"select\":_vm.tabSelect}}),_c('ToolDialog',{ref:\"toolDlg\",attrs:{\"postermode\":true},on:{\"close\":_vm.mainBoxResized,\"change\":_vm.toolValueChange}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-title\"},[_c('mu-button',{attrs:{\"large\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.$emit('close')}}},[_c('mu-icon',{attrs:{\"color\":\"white\",\"size\":\"36\",\"value\":\"close\"}})],1),_c('div',{staticStyle:{\"width\":\"100%\",\"text-align\":\"center\"}}),_c('mu-button',{attrs:{\"color\":\"red\",\"small\":\"\",\"round\":\"\",\"disabled\":_vm.saving},on:{\"click\":function($event){return _vm.$emit('save')}}},[_vm._v(_vm._s(_vm.saving?\"保存中...\":\"保存\"))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"main-title\">\n        <mu-button @click=\"$emit('close')\" large icon>\n            <mu-icon color=\"white\" size=\"36\" value=\"close\" />\n        </mu-button>\n        <div style=\"width:100%;text-align:center\"></div>\n\n        <mu-button\n            @click=\"$emit('save')\"\n            color=\"red\"\n            small\n            round\n            :disabled=\"saving\"\n        >{{saving?\"保存中...\":\"保存\"}}</mu-button>\n    </div>\n</template>\n<style lang=\"less\" scoped>\n.main-title {\n    display: flex;\n    color: white;\n    align-items: center;\n    padding-right: 20px;\n}\n.title-text {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    text-align: center;\n}\n</style>\n<script>\n// import {Editlist} from \"jsugc-websdk\";\n\nexport default {\n    props: [\"saving\"],\n    data() {\n        return {};\n    },\n    methods: {}\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMakerTop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMakerTop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PosterMakerTop.vue?vue&type=template&id=38988548&scoped=true&\"\nimport script from \"./PosterMakerTop.vue?vue&type=script&lang=js&\"\nexport * from \"./PosterMakerTop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PosterMakerTop.vue?vue&type=style&index=0&id=38988548&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"38988548\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"poster-tab-main\"},[_c('mu-button',{attrs:{\"color\":\"red\",\"small\":\"\",\"round\":\"\"},on:{\"click\":function($event){return _vm.$emit('select',_vm.TabID.AddLocalImage)}}},[_c('mu-icon',{attrs:{\"value\":\"image\",\"left\":\"\"}}),_vm._v(\"贴图 \")],1),_c('mu-button',{attrs:{\"color\":\"red\",\"small\":\"\",\"round\":\"\"},on:{\"click\":function($event){return _vm.$emit('select',_vm.TabID.AddText)}}},[_c('mu-icon',{attrs:{\"value\":\"textsms\",\"left\":\"\"}}),_vm._v(\"贴字 \")],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"poster-tab-main\">\n        <!--         <mu-button @click=\"$emit('select',TabID.AddImage)\" color=\"red\" small round>\n            <mu-icon value=\"image\" left/>贴图\n        </mu-button>\n        -->\n        <mu-button @click=\"$emit('select',TabID.AddLocalImage)\" color=\"red\" small round>\n            <mu-icon value=\"image\" left />贴图\n        </mu-button>\n        <mu-button @click=\"$emit('select',TabID.AddText)\" color=\"red\" small round>\n            <mu-icon value=\"textsms\" left />贴字\n        </mu-button>\n    </div>\n</template>\n<style scoped>\n.poster-tab-main {\n    display: flex;\n    justify-content: space-evenly;\n    padding: 10px;\n}\n</style>\n<script>\nimport ToolTab from \"@/views/Bottom/ToolTab\";\n\nexport default {\n    data() {\n        return {\n            TabID: ToolTab.TabID\n        };\n    }\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterToolTab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterToolTab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PosterToolTab.vue?vue&type=template&id=0f6f2a1b&scoped=true&\"\nimport script from \"./PosterToolTab.vue?vue&type=script&lang=js&\"\nexport * from \"./PosterToolTab.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PosterToolTab.vue?vue&type=style&index=0&id=0f6f2a1b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f6f2a1b\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"main\">\n        <PosterMakerTop @close=\"close\" @save=\"save\" :saving=\"saving\" />\n        <div class=\"title\">选择封面</div>\n        <div ref=\"mainBox\" class=\"main-box\">\n            <PreviewPlayer\n                ref=\"preview\"\n                :pause=\"true\"\n                :postermode=\"true\"\n                :player=\"$refs.preview\"\n                @render=\"onPreviewLoaded\"\n                class=\"main-video\"\n            />\n\n            <OverlayEditor\n                ref=\"overlayEditor\"\n                :postermode=\"true\"\n                :edit_filter=\"e => e.type == Const.Overlay.Type.Text\"\n                @change=\"overlayChange\"\n                @edit=\"overlayEdit\"\n                class=\"overlay-box\"\n            />\n        </div>\n\n        <div class=\"toolBox\">\n            <ClipTimeline\n                ref=\"timeline\"\n                :playing=\"!player.pause\"\n                :postermode=\"true\"\n                @timeChange=\"timeChange\"\n                style\n            />\n            <PosterToolTab @select=\"tabSelect\" />\n            <ToolDialog\n                :postermode=\"true\"\n                @close=\"mainBoxResized\"\n                @change=\"toolValueChange\"\n                ref=\"toolDlg\"\n            />\n        </div>\n    </div>\n</template>\n\n<style lang=\"less\" scoped>\n.title {\n    color: white;\n    text-align: center;\n}\n.spin {\n    background: rgba(0, 0, 0, 0.8);\n    color: white;\n}\n\n.main {\n    background-color: #333;\n    background: transparent;\n    position: relative;\n    justify-content: center;\n    flex-direction: row;\n    flex-wrap: wrap;\n    overflow: hidden;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-flow: column;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    padding-bottom: 20px;\n}\n\n.main-box {\n    background-color: #333;\n    background: transparent;\n    width: 100%;\n    position: relative;\n    overflow: hidden;\n    flex: auto;\n    display: flex;\n    height: 100%;\n    align-items: center;\n    justify-content: center;\n}\n\n.main-video {\n    width: 100%;\n    height: 100%;\n    /* display: flex; */\n    /* height: 100%; */\n}\n.toolBox {\n    width: 100%;\n    background: rgba(50, 50, 50, 0.9);\n    position: relative;\n\n    & > * {\n        width: 100%;\n    }\n}\n\n.overlay-box {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n}\n</style>\n\n<script>\nimport PosterMakerTop from \"@/views/Top/PosterMakerTop\";\nimport ClipTimeline from \"@/views/Bottom/Timeline/ClipTimeline\";\nimport OverlayEditor from \"@/views/Editor/OverlayEditor\";\n// import PreviewPlayer from \"@/views/PreviewPlayer\";\nimport PosterToolTab from \"@/views/Bottom/PosterToolTab\";\nimport ToolDialog from \"@/views/Bottom/ToolDialog\";\nimport ToolTab from \"@/views/Bottom/ToolTab\";\nimport Const from \"@/const\";\nimport { UGCResourceManager } from \"jsugc-websdk\";\nimport { Editlist, Log } from \"jsugc-websdk\";\nimport OpHistory from \"@/model/History\";\n\nlet PosterTimeSec = 0;\n\nexport default {\n    components: {\n        PosterMakerTop,\n        ClipTimeline,\n        OverlayEditor,\n        // PreviewPlayer,\n        PosterToolTab,\n        ToolDialog,\n    },\n    data() {\n        return {\n            Const,\n            player: {\n                // style:{\n                //     left:0,top:0,width:0,height:0\n                // },\n                pause: true,\n                // time_sec:0\n            },\n            saving: false,\n            waitReload: false,\n            importProgress: -1,\n        };\n    },\n    methods: {\n        async save() {\n            if (this.$refs.overlayEditor.hasActive || this.waitReload) {\n                this.saving = true;\n                if (this.$refs.overlayEditor.hasActive) {\n                    this.$refs.overlayEditor.blur();\n                    if (!this.waitReload) await this.reloadPlayer();\n                }\n                await new Promise((o, x) => {\n                    let tmr = setInterval(() => {\n                        if (!this.waitReload) {\n                            clearInterval(tmr);\n                            clearTimeout(timeout);\n                            o();\n                        }\n                    }, 100);\n                    let timeout = setTimeout(() => {\n                        clearInterval(tmr);\n                        x();\n                    }, 5000);\n                });\n                this.saving = false;\n            }\n\n            let dir = await UGCResourceManager.getTempFolder();\n\n            // 撤销的需求，不能覆盖原来的文件\n            let fileName =\n                \"poster_\" +\n                Math.random().toString(16).replace(\"0.\", \"\") +\n                \".jpg\";\n\n            let des = dir.nativeURL + \"/\" + fileName;\n\n            try {\n                let ret = await this.$refs.preview.thumb(des);\n                if (ret) {\n                    // 等一下再试一次\n                    await new Promise((o) => {\n                        setTimeout(o, 500);\n                    });\n                    let ret = await this.$refs.preview.thumb(des);\n\n                    if (ret) throw new Error(\"make poster error\" + ret);\n                }\n\n                Editlist.editlist.poster.url = des + \"?\" + Math.random();\n                Editlist.editlist.poster.rotate = 0;\n\n                this.close();\n\n                OpHistory.createOperateHistory(Const.Operate.PosterModify.Type);\n            } catch (e) {\n                this.$snotify.error(\"截取封面失败\");\n            }\n        },\n        async close() {\n            // this.$refs.preview.stop();\n            Editlist.editlist.time_sec = this.cache_time_sec;\n            this.$emit(\"close\");\n        },\n        onPreviewLoaded() {\n            this.waitReload = false;\n        },\n        async reloadPlayer(dont_keep_screen) {\n            this.waitReload = true;\n            await this.$refs.preview.reload(!dont_keep_screen);\n        },\n        timeChange(e) {\n            this.player.pause = true;\n            this.$refs.preview.seek(e.time_sec);\n            this.$refs.timeline.seek(e.time_sec);\n            Editlist.editlist.time_sec = PosterTimeSec = e.time_sec;\n        },\n        async overlayChange() {\n            await this.reloadPlayer();\n        },\n        overlayEdit(overlay) {\n            this.$refs.toolDlg.show(ToolTab.TabID.AddText, {\n                height: \"auto\",\n                overlay: overlay,\n                operateToolTabId: ToolTab.TabID.ToolSettings,\n            });\n        },\n        // overlayActive(e) {\n        //     // Editlist.editlist.update_overlay(e);\n        // },\n        tabSelect(tabID) {\n            this.$refs.overlayEditor.blur();\n            if (tabID == ToolTab.TabID.AddLocalImage) {\n                this.pickImg();\n            } else {\n                Log.uilog(\"/poster\", \"add text\");\n                this.$refs.toolDlg.show(tabID, {\n                    height: \"auto\",\n                });\n            }\n        },\n        toolValueChange(data) {\n            if (data) {\n                if (data.overlay) {\n                    data.overlay.offset_sec = 0;\n                    data.overlay.end_sec = Editlist.editlist.total_sec;\n                    this.$refs.overlayEditor.active(data.overlay);\n\n                    if (data.overlay.type == Const.Overlay.Type.Text) {\n                        this.reloadPlayer();\n                    }\n\n                    return;\n                }\n            }\n            // this.reloadPlayer();\n        },\n        async pickImg() {\n            Log.uilog(\"/poster\", \"pick image\");\n            // native cordova.camera plugin 需要修正，否则会返回 content:// 路径无法读取\n            // CameraLauncher.java::processResultFromGallery::707 需要修正为返回 fileLocation\n            try {\n                let file = await new Promise((o, x) =>\n                    navigator.camera.getPicture(o, x, {\n                        sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n                        allowEdit: false,\n                        correctOrientation: true,\n                        mediaType: Camera.MediaType.PICTURE,\n                    })\n                );\n\n                // window.console.log(file);\n                if (!file) {\n                    return;\n                }\n\n                let overlay = Editlist.editlist.add_overlay(\n                    {\n                        url: file,\n                        type: Const.Overlay.Type.Image,\n                    },\n                    true\n                );\n                Log.uilog(\n                    \"/poster\",\n                    `pick image done: ${JSON.stringify(overlay)}`\n                );\n                this.toolValueChange({ overlay });\n            } catch (error) {\n                //\n            }\n        },\n        mainBoxResized() {\n            this.$nextTick(() => {\n                this.$refs.overlayEditor.updateUI();\n            });\n        },\n    },\n    beforeMount() {\n        this.cache_time_sec = Editlist.editlist.time_sec;\n        Editlist.editlist.time_sec = PosterTimeSec;\n    },\n    async mounted() {\n        Log.uilog(\"/poster\", \"enter\");\n        this.reloadPlayer();\n        document.addEventListener(\"backbutton\", this.close, false);\n    },\n    async beforeDestroy() {\n        document.removeEventListener(\"backbutton\", this.close, false);\n    },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMaker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMaker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PosterMaker.vue?vue&type=template&id=8650f720&scoped=true&\"\nimport script from \"./PosterMaker.vue?vue&type=script&lang=js&\"\nexport * from \"./PosterMaker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PosterMaker.vue?vue&type=style&index=0&id=8650f720&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8650f720\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ending-main\"},[_c('PosterMakerTop',{on:{\"close\":_vm.close,\"save\":function($event){_vm.rendering=true}}}),_c('div',{staticClass:\"title\"},[_vm._v(\"设置片尾\")]),_c('div',{ref:\"mainBox\",staticClass:\"main-box\"},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('div',{staticClass:\"avatar\",on:{\"click\":_vm.onAvatarClick}},[(!_vm.avatarUrl)?_c('span',{staticClass:\"material-icons\"},[_vm._v(\"account_circle\")]):_c('img',{attrs:{\"src\":_vm.avatarUrl},on:{\"error\":_vm.avatarLoadError}}),_c('div',{staticClass:\"text\"},[_vm._v(\"编辑头像\")])])]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.ending.nickName),expression:\"ending.nickName\"}],attrs:{\"placeholder\":\"请输入昵称信息\",\"maxlength\":\"18\"},domProps:{\"value\":(_vm.ending.nickName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.ending, \"nickName\", $event.target.value)}}})]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.ending.desc),expression:\"ending.desc\"}],attrs:{\"placeholder\":\"请输入描述信息（可为空）\",\"maxlength\":\"23\"},domProps:{\"value\":(_vm.ending.desc)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.ending, \"desc\", $event.target.value)}}})])]),(_vm.rendering)?_c('EndingRender',{ref:\"render\",attrs:{\"avatar-file\":_vm.ending.avatarFile,\"nick-name\":_vm.ending.nickName || _vm.nickNamePlaceholder,\"desc\":_vm.ending.desc},on:{\"rendered\":_vm.save,\"error\":_vm.renderError}}):_vm._e(),(_vm.cropping)?_c('Crop',{ref:\"crop\",attrs:{\"src\":_vm.cropAvatarUrl,\"ratio\":1},on:{\"close\":function($event){_vm.cropping = false; _vm.cropAvatarUrl=''},\"save\":_vm.cropSave}}):_vm._e(),_c('mu-bottom-sheet',{attrs:{\"overlay-close\":true,\"esc-press-close\":true,\"open\":_vm.isMenuOpen},on:{\"update:open\":function($event){_vm.isMenuOpen=$event}}},[_c('mu-list',{on:{\"item-click\":function($event){_vm.isMenuOpen=false}}},[_c('mu-sub-header',[_vm._v(\"选择\")]),_c('mu-list-item',{attrs:{\"button\":\"\"},on:{\"click\":_vm.pickImage}},[_c('mu-list-item-action',[_c('mu-icon',{attrs:{\"value\":\"folder_open\",\"color\":\"orange\"}})],1),_c('mu-list-item-title',{staticStyle:{\"color\":\"#f44336\"}},[_vm._v(\"更换一张照片\")])],1),_c('mu-list-item',{attrs:{\"button\":\"\"},on:{\"click\":_vm.deleteAvatar}},[_c('mu-list-item-action',[_c('mu-icon',{attrs:{\"value\":\"delete\",\"color\":\"orange\"}})],1),_c('mu-list-item-title',[_vm._v(\"删除\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"crop-main\"},[_c('PosterMakerTop',{on:{\"close\":_vm.close,\"save\":_vm.save}}),_c('div',{staticClass:\"title\"},[_vm._v(\"图片裁剪\")]),_c('div',{ref:\"mainBox\",staticClass:\"main-box\"},[_c('VueCropper',{ref:\"cropper\",style:({background: 'transparent'}),attrs:{\"img\":_vm.src,\"outputSize\":1,\"outputType\":\"png\",\"autoCrop\":true,\"fixed\":true,\"fixedNumber\":_vm.fixedNumber,\"full\":true,\"original\":true,\"fixedBox\":true,\"canMoveBox\":false,\"mode\":\"cover\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"crop-main\">\r\n        <PosterMakerTop @close=\"close\" @save=\"save\" />\r\n        <div class=\"title\">图片裁剪</div>\r\n        <div ref=\"mainBox\" class=\"main-box\">\r\n            <VueCropper\r\n                ref=\"cropper\"\r\n                :style=\"{background: 'transparent'}\"\r\n                :img=\"src\"\r\n                :outputSize=\"1\"\r\n                outputType=\"png\"\r\n                :autoCrop=\"true\"\r\n                :fixed=\"true\"\r\n                :fixedNumber=\"fixedNumber\"\r\n                :full=\"true\"\r\n                :original=\"true\"\r\n                :fixedBox=\"true\"\r\n                :canMoveBox=\"false\"\r\n                mode=\"cover\"\r\n            />\r\n        </div>\r\n    </div>\r\n</template>\r\n<style lang=\"less\" scoped>\r\n.title {\r\n    color: white;\r\n    text-align: center;\r\n}\r\n\r\n.crop-main {\r\n    position: absolute;\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    background-color: #333;\r\n    width: 100%;\r\n    height: 100%;\r\n    padding-bottom: 20px;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n.main-box {\r\n    flex: 1;\r\n}\r\n</style>\r\n<script>\r\nimport { VueCropper } from \"vue-cropper\";\r\nimport PosterMakerTop from \"@/views/Top/PosterMakerTop\";\r\n\r\nexport default {\r\n    props: [\"src\", \"ratio\"],\r\n    components: {\r\n        PosterMakerTop,\r\n        VueCropper\r\n    },\r\n    computed: {\r\n        fixedNumber() {\r\n            return [this.ratio, 1];\r\n        }\r\n    },\r\n    methods: {\r\n        close() {\r\n            this.$emit(\"close\");\r\n        },\r\n        async save() {\r\n            let cropper = this.$refs.cropper;\r\n            let blob = await new Promise(cropper.getCropBlob.bind(cropper));\r\n            this.$emit(\"save\", blob);\r\n        }\r\n    },\r\n    mounted() {\r\n        // window.console.log(\"crop src:\" + this.src);\r\n    }\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Crop.vue?vue&type=template&id=00699070&scoped=true&\"\nimport script from \"./Crop.vue?vue&type=script&lang=js&\"\nexport * from \"./Crop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Crop.vue?vue&type=style&index=0&id=00699070&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"00699070\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mask\"},[_c('div',{staticClass:\"loading\"},[_c('mu-icon',{staticClass:\"loading-icon\",attrs:{\"value\":\"refresh\",\"size\":\"30\"}}),_vm._v(\"生成片尾中 \")],1),_c('canvas',{ref:\"canvas\",staticClass:\"render\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"mask\">\r\n        <div class=\"loading\">\r\n            <mu-icon value=\"refresh\" class=\"loading-icon\" size=\"30\"></mu-icon>生成片尾中\r\n        </div>\r\n        <canvas class=\"render\" ref=\"canvas\"></canvas>\r\n    </div>\r\n</template>\r\n<style scoped>\r\n.mask {\r\n    position: absolute;\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    justify-content: center;\r\n    align-items: flex-end;\r\n    display: flex;\r\n    background: rgba(0, 0, 0, 0.7);\r\n}\r\n.render {\r\n    display: none;\r\n    width: 320px;\r\n    height: 320px;\r\n}\r\n\r\n.loading {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    color: #fff;\r\n    text-shadow: 0 0 30px #000;\r\n    transform: translate(-50%, -50%);\r\n}\r\n.loading-icon {\r\n    animation: loading 0.3s infinite linear;\r\n    opacity: 0.9;\r\n    vertical-align: -8px;\r\n}\r\n\r\n@keyframes loading {\r\n    from {\r\n        transform: rotate(0deg);\r\n    }\r\n    to {\r\n        transform: rotate(360deg);\r\n    }\r\n}\r\n</style>\r\n<script>\r\nimport { CordovaModel } from \"jsugc-websdk\";\r\nimport { UGCResourceManager as UGCResource } from \"jsugc-websdk\";\r\n\r\nlet DefaultSize = 1000;\r\nlet DefaultFontSize = 60;\r\nlet DefaultFont = \"黑体\";\r\n\r\nexport default {\r\n    props: [\"avatarFile\", \"nickName\", \"desc\"],\r\n    methods: {\r\n        async render() {\r\n            let avatarSize = 5 * DefaultFontSize;\r\n            let avatarOpt = {\r\n                marginTop: -DefaultFontSize * 1.5 - avatarSize / 2,\r\n                size: avatarSize,\r\n                file: this.avatarFile\r\n            };\r\n            let nickNameOpt = {\r\n                marginTop: 0,\r\n                fontSize: DefaultFontSize,\r\n                color: \"white\",\r\n                font: DefaultFont,\r\n                content: this.nickName\r\n            };\r\n            let descOpt = {\r\n                marginTop: DefaultFontSize * 1.5,\r\n                fontSize: DefaultFontSize * 0.8,\r\n                color: \"#888\",\r\n                font: DefaultFont,\r\n                content: this.desc\r\n            };\r\n\r\n            try {\r\n                this.setupCanvas();\r\n                this.drawBg();\r\n                if (this.avatarFile) {\r\n                    await this.drawImage(avatarOpt);\r\n                }\r\n                if (this.nickName) {\r\n                    this.drawText(nickNameOpt);\r\n                }\r\n                if (this.desc) {\r\n                    this.drawText(descOpt);\r\n                }\r\n                this.$emit(\"rendered\");\r\n            } catch (error) {\r\n                this.$emit(\"error\", error);\r\n            }\r\n        },\r\n        drawBg() {\r\n            // let ctx = this.canvasCtx;\r\n            // ctx.save();\r\n            // ctx.fillStyle = \"black\";\r\n            // ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n            // ctx.restore();\r\n        },\r\n        drawText(opt) {\r\n            let ctx = this.canvasCtx;\r\n            ctx.save();\r\n            ctx.font = opt.fontSize + \"px \" + opt.font;\r\n            ctx.fillStyle = opt.color;\r\n\r\n            let centerX = this.canvas.width / 2;\r\n            let centerY = this.canvas.height / 2;\r\n            let x = centerX;\r\n            let y = centerY + opt.marginTop;\r\n            let content = opt.content;\r\n\r\n            ctx.textAlign = \"center\";\r\n            ctx.textBaseline = \"middle\";\r\n            ctx.fillText(content, x, y);\r\n            ctx.restore();\r\n        },\r\n        async drawImage(opt) {\r\n            let ctx = this.canvasCtx;\r\n            let centerX = this.canvas.width / 2;\r\n            let centerY = this.canvas.height / 2;\r\n            let image = await this.loadImage(opt.file);\r\n            let imageSize = opt.size;\r\n            let imageHeightScaled = 0;\r\n            let imageWidthScaled = 0;\r\n            let x = centerX;\r\n            let y = centerY + opt.marginTop;\r\n\r\n            if (image.naturalHeight > image.naturalWidth) {\r\n                imageWidthScaled = imageSize;\r\n                imageHeightScaled =\r\n                    (imageSize / image.naturalWidth) * image.naturalHeight;\r\n            } else {\r\n                imageWidthScaled =\r\n                    (imageSize / image.naturalHeight) * image.naturalWidth;\r\n                imageHeightScaled = imageSize;\r\n            }\r\n            ctx.save();\r\n\r\n            ctx.beginPath();\r\n            ctx.fillStyle = \"black\";\r\n            ctx.arc(x, y, imageSize / 2, 0, Math.PI * 2);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n            //只显示和园重合的像素\r\n            ctx.globalCompositeOperation = \"source-in\";\r\n            ctx.drawImage(\r\n                image,\r\n                x - imageWidthScaled / 2,\r\n                y - imageHeightScaled / 2,\r\n                imageWidthScaled,\r\n                imageHeightScaled\r\n            );\r\n\r\n            ctx.restore();\r\n        },\r\n        async loadImage(file) {\r\n            return new Promise(async (o, x) => {\r\n                let url = await CordovaModel.getCdvUrl(file);\r\n                if (location.protocol != \"cdvfile:\") {\r\n                    url = await UGCResource.assetReadAsDataUrl(url);\r\n                }\r\n                let image = new Image();\r\n                image.onload = o.bind(image, image);\r\n                image.onerror = x.bind(image, \"load image fail\");\r\n                image.src = url;\r\n            });\r\n        },\r\n        setupCanvas() {\r\n            this.canvas.width = DefaultSize;\r\n            this.canvas.height = DefaultSize;\r\n        },\r\n        getDataPng() {\r\n            return this.$refs.canvas.toDataURL();\r\n        },\r\n        async getBlob() {\r\n            let blob = null;\r\n            blob = await new Promise(o => {\r\n                this.$refs.canvas.toBlob(o);\r\n            });\r\n            return blob;\r\n        }\r\n    },\r\n    mounted() {\r\n        this.canvas = this.$refs.canvas;\r\n        this.canvasCtx = this.$refs.canvas.getContext(\"2d\");\r\n        this.render();\r\n    }\r\n};\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingRender.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingRender.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EndingRender.vue?vue&type=template&id=b5f97684&scoped=true&\"\nimport script from \"./EndingRender.vue?vue&type=script&lang=js&\"\nexport * from \"./EndingRender.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EndingRender.vue?vue&type=style&index=0&id=b5f97684&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b5f97684\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"ending-main\">\n        <PosterMakerTop @close=\"close\" @save=\"rendering=true\" />\n        <div class=\"title\">设置片尾</div>\n        <div ref=\"mainBox\" class=\"main-box\">\n            <div style=\"text-align:center\">\n                <div class=\"avatar\" @click=\"onAvatarClick\">\n                    <span v-if=\"!avatarUrl\" class=\"material-icons\">account_circle</span>\n                    <img :src=\"avatarUrl\" v-else @error=\"avatarLoadError\" />\n                    <div class=\"text\">编辑头像</div>\n                </div>\n            </div>\n            <div class=\"input\">\n                <input v-model=\"ending.nickName\" placeholder=\"请输入昵称信息\" maxlength=\"18\" />\n            </div>\n            <div class=\"input\">\n                <input v-model=\"ending.desc\" placeholder=\"请输入描述信息（可为空）\" maxlength=\"23\" />\n            </div>\n        </div>\n        <EndingRender\n            v-if=\"rendering\"\n            ref=\"render\"\n            @rendered=\"save\"\n            @error=\"renderError\"\n            :avatar-file=\"ending.avatarFile\"\n            :nick-name=\"ending.nickName || nickNamePlaceholder\"\n            :desc=\"ending.desc\"\n        />\n        <Crop\n            v-if=\"cropping\"\n            ref=\"crop\"\n            @close=\"cropping = false; cropAvatarUrl=''\"\n            @save=\"cropSave\"\n            :src=\"cropAvatarUrl\"\n            :ratio=\"1\"\n        />\n        <mu-bottom-sheet :overlay-close=\"true\" :esc-press-close=\"true\" :open.sync=\"isMenuOpen\">\n            <mu-list @item-click=\"isMenuOpen=false\">\n                <mu-sub-header>选择</mu-sub-header>\n                <mu-list-item button @click=\"pickImage\">\n                    <mu-list-item-action>\n                        <mu-icon value=\"folder_open\" color=\"orange\"></mu-icon>\n                    </mu-list-item-action>\n                    <mu-list-item-title style=\"color:#f44336\">更换一张照片</mu-list-item-title>\n                </mu-list-item>\n                <mu-list-item button @click=\"deleteAvatar\">\n                    <mu-list-item-action>\n                        <mu-icon value=\"delete\" color=\"orange\"></mu-icon>\n                    </mu-list-item-action>\n                    <mu-list-item-title>删除</mu-list-item-title>\n                </mu-list-item>\n            </mu-list>\n        </mu-bottom-sheet>\n    </div>\n</template>\n\n<style lang=\"less\" scoped>\n.title {\n    color: white;\n    text-align: center;\n}\n\n.ending-main {\n    background-color: #333;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    padding-bottom: 20px;\n}\n\n.avatar {\n    margin-top: 30px;\n    text-align: center;\n    overflow: hidden;\n    display: inline-block;\n\n    .material-icons {\n        font-size: 80px;\n        color: #555;\n    }\n\n    img {\n        border-radius: 50%;\n        width: 80px;\n        height: 80px;\n    }\n    .text {\n        margin-top: 10px;\n        text-align: center;\n        color: #999;\n    }\n}\n\n.input {\n    padding: 20px;\n\n    input {\n        line-height: 1;\n        width: 100%;\n        padding: 12px 12px;\n        border-radius: 6px;\n        background: #444;\n        border: 0;\n        color: #bbb;\n    }\n}\n</style>\n\n<script>\nimport PosterMakerTop from \"@/views/Top/PosterMakerTop\";\nimport Crop from \"@/components/Crop\";\nimport { Editlist } from \"jsugc-websdk\";\nimport { UGCResourceManager } from \"jsugc-websdk\";\nimport { CordovaModel } from \"jsugc-websdk\";\nimport { Log } from \"jsugc-websdk\";\nimport Const from \"@/const\";\nimport EndingRender from \"@/views/Editor/EndingRender\";\nimport OpHistory from \"@/model/History\";\n\nexport default {\n    components: {\n        PosterMakerTop,\n        EndingRender,\n        Crop,\n    },\n    data() {\n        return {\n            rendering: false,\n            editlist: null,\n            avatarUrl: null,\n            cropAvatarUrl: null,\n            isMenuOpen: false,\n            cropping: false,\n            nickNamePlaceholder: \"请输入昵称信息\",\n            ending: {\n                avatarFile: \"\",\n                nickName: \"\",\n                desc: \"\",\n            },\n        };\n    },\n    methods: {\n        avatarLoadError() {\n            this.avatarUrl = \"\";\n        },\n        onAvatarClick() {\n            if (this.ending.avatarFile) {\n                this.isMenuOpen = true;\n            } else {\n                this.pickImage();\n            }\n        },\n        deleteAvatar() {\n            this.ending.avatarFile = \"\";\n            this.ending.url = \"\";\n            this.avatarUrl = \"\";\n        },\n        async pickImage() {\n            Log.uilog(\"/ending\", \"pick image\");\n            // native cordova.camera plugin 需要修正，否则会返回 content:// 路径无法读取\n            // CameraLauncher.java::processResultFromGallery::707 需要修正为返回 fileLocation\n            let file = await new Promise((o, x) =>\n                navigator.camera.getPicture(o, x, {\n                    sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n                    allowEdit: false,\n                    mediaType: Camera.MediaType.PICTURE,\n                    destinationType: Camera.DestinationType.NATIVE_URI,\n                })\n            );\n\n            if (!file) return;\n\n            this.cropAvatarUrl = await this.fileToImageUrl(file);\n            this.cropping = true;\n\n            Log.uilog(\"/ending\", `pick image done: ${this.cropAvatarUrl}`);\n        },\n        async save() {\n            Log.uilog(\"/ending\", \"save\");\n            let ending = {\n                avatarFile: this.ending.avatarFile,\n                nickName: this.ending.nickName,\n                desc: this.ending.desc,\n                url: null,\n            };\n            UGCResourceManager.saveLastEnding(ending);\n\n            let dir = await UGCResourceManager.getTempFolder();\n            let fileName =\n                dir.name +\n                \"/endingImage_\" +\n                Math.random().toString(16).replace(\"0.\", \"\") +\n                \".png\";\n\n            try {\n                let data = await this.$refs.render.getBlob();\n                let outFile = await this.createCacheFile(data, fileName);\n                ending.url = outFile;\n                Log.verbose(\"created ending file: \" + outFile);\n\n                let curEnding = Editlist.editlist.timelines.find(\n                    (e) => e.ending\n                );\n                if (curEnding) {\n                    Object.assign(curEnding, ending);\n                } else {\n                    await Editlist.editlist.add_timelines([\n                        {\n                            start_sec: 0,\n                            end_sec: 2,\n                            total_sec: 2,\n                            ending: true,\n                            ...ending,\n                        },\n                    ]);\n                }\n\n                this.$emit(\"close\");\n\n                OpHistory.createOperateHistory(Const.Operate.EndingModify.Type);\n            } catch (error) {\n                this.$snotify.error(\"生成片尾失败\");\n\n                this.$emit(\"close\");\n            }\n            this.rendering = false;\n        },\n        async renderError(error) {\n            this.rendering = false;\n            this.$snotify.error(\"生成失败\");\n            window.console.error(error);\n        },\n        async close() {\n            Log.uilog(\"/ending\", \"cancel\");\n            this.$emit(\"close\");\n        },\n        async fileToImageUrl(file) {\n            return await UGCResourceManager.assetReadAsDataUrl(\n                await CordovaModel.getCdvUrl(file)\n            );\n        },\n        async cropSave(data) {\n            // let dir = await UGCResourceManager.getTempFolder() ;\n            // 保证头像不删\n            let dir = await UGCResourceManager.getExportPosterFolder();\n            let fileName =\n                dir.name +\n                \"/avatarCropImage_\" +\n                Math.random().toString(16).replace(\"0.\", \"\") +\n                \".png\";\n\n            let outFile = await this.createCacheFile(data, fileName);\n            this.avatarUrl = await this.fileToImageUrl(outFile);\n            this.ending.avatarFile = outFile;\n            this.cropping = false;\n        },\n        async createCacheFile(data, output) {\n            Log.uilog(\"/ending\", \"begin create image\");\n            if (!window.requestFileSystem) {\n                // 兼容PC调试\n                return URL.createObjectURL(data);\n            }\n\n            let fs = await UGCResourceManager.filesystem();\n            let file = await new Promise((o, x) => {\n                fs.root.getFile(\n                    output,\n                    { create: true, exclusive: false },\n                    o,\n                    x\n                );\n            });\n            let writer = await new Promise((o, x) => {\n                file.createWriter(o, x);\n            });\n\n            await new Promise((o, x) => {\n                writer.onwriteend = o;\n                writer.onerror = x;\n                writer.write(data);\n            });\n\n            Log.uilog(\"/ending\", \"create image done\");\n            return file.nativeURL;\n        },\n    },\n    async mounted() {\n        Log.uilog(\"/ending\", \"enter\");\n\n        let curEnding = Editlist.editlist.timelines.find((e) => e.ending);\n        if (!curEnding) {\n            curEnding = UGCResourceManager.getLastEnding();\n        }\n        if (curEnding) {\n            this.ending = { ...curEnding };\n            this.avatarUrl = await this.fileToImageUrl(this.ending.avatarFile);\n        }\n        document.addEventListener(\"backbutton\", this.close, false);\n    },\n    async beforeDestroy() {\n        document.removeEventListener(\"backbutton\", this.close, false);\n    },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingMaker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingMaker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EndingMaker.vue?vue&type=template&id=ee7ae812&scoped=true&\"\nimport script from \"./EndingMaker.vue?vue&type=script&lang=js&\"\nexport * from \"./EndingMaker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EndingMaker.vue?vue&type=style&index=0&id=ee7ae812&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ee7ae812\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.output.desSrc)?_c('div',{staticClass:\"exporter-main\"},[_c('div',{staticClass:\"main-title\"},[_c('mu-button',{attrs:{\"large\":\"\",\"icon\":\"\"},on:{\"click\":_vm.cancel}},[_c('mu-icon',{attrs:{\"color\":\"white\",\"size\":\"36\",\"value\":\"close\"}})],1)],1),_vm._m(0),_c('Export',{ref:\"export\",staticClass:\"content\",on:{\"error\":_vm.error,\"success\":_vm.success},scopedSlots:_vm._u([{key:\"default\",fn:function(param){return [(_vm.thumbUrl)?_c('img',{style:(_vm.posterStyles),attrs:{\"src\":_vm.thumbUrl}}):_vm._e(),_c('div',{staticClass:\"progress\"},[_c('mu-circular-progress',{staticClass:\"progress-item progress-slave\",attrs:{\"mode\":\"determinate\",\"color\":\"rgba(255,255,255,0.3\",\"value\":100,\"stroke-width\":10,\"size\":105}}),_c('mu-circular-progress',{staticClass:\"progress-item progress-master\",attrs:{\"mode\":\"determinate\",\"color\":\"red\",\"value\":param.progress,\"stroke-width\":5,\"size\":100}}),_c('div',{staticClass:\"progress-item\"},[_vm._v(_vm._s(param.progress)+\"%\")])],1)]}}],null,false,1590960116)}),_c('div',{staticClass:\"bottom\"})],1):_c('div',{staticClass:\"exporter-main\"},[_c('div',{staticClass:\"main-title\"},[_c('mu-button',{attrs:{\"large\":\"\",\"icon\":\"\"},on:{\"click\":_vm.cancel}},[_c('mu-icon',{attrs:{\"color\":\"white\",\"size\":\"36\",\"value\":\"close\"}})],1),_c('mu-button',{staticClass:\"btn-done\",attrs:{\"large\":\"\",\"icon\":\"\"},on:{\"click\":_vm.done}},[_c('mu-icon',{attrs:{\"color\":\"white\",\"size\":\"36\",\"value\":\"done\"}})],1)],1),_c('div',{staticClass:\"title\"},[_c('mu-icon',{attrs:{\"value\":\"check\"}}),_vm._v(\"导出完成 \"),_c('span',[_vm._v(\"视频已保存到系统相册\")])],1),_c('div',{staticClass:\"content\"},[_c('VueVideoPlayer',{ref:\"videoPlayer\",staticClass:\"video-player-box vjs-custom-skin\",attrs:{\"options\":_vm.playerOptions,\"playsinline\":true}})],1),_c('div',{staticClass:\"bottom\"})])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title\"},[_vm._v(\" 导出中 \"),_c('span',[_vm._v(\"期间请不要切换程序\")])])}]\n\nexport { render, staticRenderFns }","<template>\n    <div v-if=\"!output.desSrc\" class=\"exporter-main\">\n        <div class=\"main-title\">\n            <mu-button @click=\"cancel\" large icon>\n                <mu-icon color=\"white\" size=\"36\" value=\"close\" />\n            </mu-button>\n        </div>\n        <div class=\"title\">\n            导出中\n            <span>期间请不要切换程序</span>\n        </div>\n        <Export ref=\"export\" @error=\"error\" @success=\"success\" class=\"content\">\n            <template #default=\"param\">\n                <img :src=\"thumbUrl\" v-if=\"thumbUrl\" :style=\"posterStyles\" />\n                <div class=\"progress\">\n                    <mu-circular-progress\n                        class=\"progress-item progress-slave\"\n                        mode=\"determinate\"\n                        color=\"rgba(255,255,255,0.3\"\n                        :value=\"100\"\n                        :stroke-width=\"10\"\n                        :size=\"105\"\n                    ></mu-circular-progress>\n                    <mu-circular-progress\n                        class=\"progress-item progress-master\"\n                        mode=\"determinate\"\n                        color=\"red\"\n                        :value=\"param.progress\"\n                        :stroke-width=\"5\"\n                        :size=\"100\"\n                    ></mu-circular-progress>\n                    <div class=\"progress-item\">{{param.progress}}%</div>\n                </div>\n            </template>\n        </Export>\n        <div class=\"bottom\"></div>\n    </div>\n    <div v-else class=\"exporter-main\">\n        <div class=\"main-title\">\n            <mu-button @click=\"cancel\" large icon>\n                <mu-icon color=\"white\" size=\"36\" value=\"close\" />\n            </mu-button>\n            <mu-button @click=\"done\" large icon class=\"btn-done\">\n                <mu-icon color=\"white\" size=\"36\" value=\"done\" />\n            </mu-button>\n        </div>\n        <div class=\"title\">\n            <mu-icon value=\"check\" />导出完成\n            <span>视频已保存到系统相册</span>\n        </div>\n        <div class=\"content\">\n            <!-- <video :src=\"output.desSrc\" controls controlslist=\"”nodownload”\" /> -->\n\n            <VueVideoPlayer\n                class=\"video-player-box vjs-custom-skin\"\n                ref=\"videoPlayer\"\n                :options=\"playerOptions\"\n                :playsinline=\"true\"\n            ></VueVideoPlayer>\n        </div>\n        <div class=\"bottom\"></div>\n    </div>\n</template>\n\n<style lang=\"less\" scoped>\n.exporter-main {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-flow: column;\n    background: #333;\n}\n\n.title {\n    color: white;\n    text-align: center;\n    height: 60px;\n    font-size: 20px;\n    span {\n        font-size: 12px;\n        color: gray;\n        display: block;\n    }\n}\n.bottom {\n    color: white;\n    text-align: center;\n    height: 160px;\n}\n\n.main-title {\n    display: flex;\n    color: white;\n    align-items: center;\n    justify-content: space-between;\n    padding-right: 20px;\n    height: 60px;\n}\n\n.btn-done {\n    float: right;\n}\n\n.content {\n    text-align: center;\n    margin: 20px 0;\n    position: relative;\n    align-items: center;\n    justify-content: center;\n    display: flex;\n    flex: 1;\n    min-height: 100px; /*不设置高度，flex会一直撑大 */\n    height: 100%;\n\n    img {\n        object-fit: contain;\n        width: 100%;\n        height: 100%;\n    }\n\n    video,\n    .video-player-box {\n        height: 100%;\n        width: 100%;\n    }\n\n    .progress {\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        left: 0;\n        top: 0;\n        background: #33333388;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        .progress-item {\n            position: absolute;\n            font-size: 25px;\n            color: white;\n        }\n    }\n}\n</style>\n<style>\n.vjs-custom-skin > .video-js {\n    height: 100%;\n}\n</style>\n\n<script>\nimport { Editlist, CordovaModel, Log } from \"jsugc-websdk\";\nimport { videoPlayer, videojs } from \"vue-video-player\";\nimport \"video.js/dist/video-js.css\";\nimport \"vue-video-player/src/custom-theme.css\";\n\n// 解决 seekbar 卡顿问题\nconst SeekBar = videojs.getComponent(\"SeekBar\");\nSeekBar.prototype.getPercent = function getPercent() {\n    // Allows for smooth scrubbing, when player can't keep up.\n    // const time = (this.player_.scrubbing()) ?\n    //   this.player_.getCache().currentTime :\n    //   this.player_.currentTime()\n    const time = this.player_.currentTime();\n    const percent = time / this.player_.duration();\n    return percent >= 1 ? 1 : percent;\n};\n\nSeekBar.prototype.handleMouseMove = function handleMouseMove(event) {\n    let newTime = this.calculateDistance(event) * this.player_.duration();\n    if (newTime === this.player_.duration()) {\n        newTime = newTime - 0.1;\n    }\n    this.player_.currentTime(newTime);\n    this.update();\n};\n\nexport default {\n    components: { VueVideoPlayer: videoPlayer },\n    data() {\n        return {\n            thumbUrl: \"\",\n            posterUrl: \"\",\n            posterRotate: null,\n            isTempPoster: false,\n            exportProgress: 0,\n            output: {\n                desSrc: \"\",\n            },\n            errorMessage: \"\",\n\n            playerOptions: {\n                // nativeControlsForTouch: true,\n                language: \"cn\",\n                sources: [\n                    {\n                        type: \"video/mp4\",\n                        src: \"\",\n                    },\n                ],\n                poster: \"\",\n            },\n        };\n    },\n    computed: {\n        posterStyles() {\n            // 临时生成的封面方向是正确的，不需要旋转\n            if (this.posterRotate && !this.isTempPoster) {\n                return this.posterRotate\n                    ? \"transform: rotate(\" + this.posterRotate + \"deg)\"\n                    : \"\";\n            }\n            return {};\n        },\n    },\n    methods: {\n        async done() {\n            let config = await CordovaModel.getConfig();\n            let result = {\n                statusCode: CordovaModel.StatusCode.Ok,\n                message: this.errorMessage || \"导出成功\",\n                output: config.output,\n                output_thumb: config.output_thumb,\n            };\n            Log.uilog(\"/exporter\", `done. ${JSON.stringify(result)}`);\n            CordovaModel.finish(result);\n        },\n        async cancel() {\n            Log.uilog(\"/exporter\", `cancel`);\n\n            if (this.$refs.export) await this.$refs.export.cancel();\n            this.$emit(\"close\");\n        },\n        error(result) {\n            this.errorMessage = result.message;\n            this.$snotify.error(\"导出失败：\" + this.errorMessage);\n        },\n        async success(desSrc) {\n            this.output.desSrc = this.playerOptions.sources[0].src = desSrc;\n            this.playerOptions.poster = this.thumbUrl;\n        },\n    },\n    async mounted() {\n        this.posterUrl = Editlist.editlist.poster.url;\n        this.posterRotate = Editlist.editlist.poster.rotate;\n\n        try {\n            this.thumbUrl = await CordovaModel.getCdvUrl(this.posterUrl);\n        } catch (error) {\n            this.posterUrl = null;\n            // window.console.error(\"fail get poster\", error, this.posterUrl);\n        }\n\n        document.addEventListener(\"backbutton\", this.cancel, false);\n\n        Log.uilog(\"/exporter\", `begin`);\n        this.$refs.export.begin();\n    },\n    async beforeDestroy() {\n        document.removeEventListener(\"backbutton\", this.cancel, false);\n    },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exporter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exporter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Exporter.vue?vue&type=template&id=fdb28bf6&scoped=true&\"\nimport script from \"./Exporter.vue?vue&type=script&lang=js&\"\nexport * from \"./Exporter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Exporter.vue?vue&type=style&index=0&id=fdb28bf6&lang=less&scoped=true&\"\nimport style1 from \"./Exporter.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fdb28bf6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('mu-bottom-sheet',{attrs:{\"overlay-close\":_vm.editlist.timelines.length > 0,\"esc-press-close\":_vm.editlist.timelines.length > 0,\"open\":_vm.isopen},on:{\"update:open\":function($event){_vm.isopen=$event}}},[_c('mu-list',{on:{\"item-click\":_vm.close}},[_c('mu-sub-header',[_vm._v(\"选择\")]),_c('mu-list-item',{attrs:{\"button\":\"\"},on:{\"click\":_vm.importFile}},[_c('mu-list-item-action',[_c('mu-icon',{attrs:{\"value\":\"folder_open\",\"color\":\"orange\"}})],1),_c('mu-list-item-title',[_vm._v(\"从文件导入\")])],1),_c('mu-list-item',{attrs:{\"button\":\"\"},on:{\"click\":_vm.captureFile}},[_c('mu-list-item-action',[_c('mu-icon',{attrs:{\"value\":\"photo_camera\",\"color\":\"orange\"}})],1),_c('mu-list-item-title',[_vm._v(\"拍摄\")])],1),_c('mu-list-item',{attrs:{\"button\":\"\"},on:{\"click\":function($event){return _vm.$emit('cancel')}}},[_c('mu-list-item-action',[_c('mu-icon',{attrs:{\"value\":\"cancel\",\"color\":\"gray\"}})],1),_c('mu-list-item-title',[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <!-- <mu-dialog width=\"360\" transition=\"slide-bottom\" :open.sync=\"openFullscreen\">\n\n\n    <div class=\"dialog-content\" style=\"\">\n        <mu-button @click=\"importFile\" round large color=\"red\">\n            <mu-icon left size=\"40\" value=\"folder_open\" />\n            从文件导入\n        </mu-button>\n        <mu-button @click=\"captureFile\" round large color=\"red\">\n            <mu-icon left size=\"40\" value=\"folder_open\" />\n            拍摄\n        </mu-button>\n\n        <mu-button slot=\"actions\" flat color=\"primary\" @click=\"close\">取消</mu-button>\n    </div>\n    </mu-dialog>-->\n    <mu-bottom-sheet\n        :overlay-close=\"editlist.timelines.length > 0\"\n        :esc-press-close=\"editlist.timelines.length > 0\"\n        :open.sync=\"isopen\"\n    >\n        <mu-list @item-click=\"close\">\n            <mu-sub-header>选择</mu-sub-header>\n            <mu-list-item button @click=\"importFile\">\n                <mu-list-item-action>\n                    <mu-icon value=\"folder_open\" color=\"orange\"></mu-icon>\n                </mu-list-item-action>\n                <mu-list-item-title>从文件导入</mu-list-item-title>\n            </mu-list-item>\n            <!--   拍摄：安卓无法选择分辨率 -->\n            <mu-list-item button @click=\"captureFile\">\n                <mu-list-item-action>\n                    <mu-icon value=\"photo_camera\" color=\"orange\"></mu-icon>\n                </mu-list-item-action>\n                <mu-list-item-title>拍摄</mu-list-item-title>\n            </mu-list-item>\n            <mu-list-item button @click=\"$emit('cancel')\">\n                <mu-list-item-action>\n                    <mu-icon value=\"cancel\" color=\"gray\"></mu-icon>\n                </mu-list-item-action>\n                <mu-list-item-title>取消</mu-list-item-title>\n            </mu-list-item>\n        </mu-list>\n    </mu-bottom-sheet>\n</template>\n\n<style scoped>\n.dialog-content {\n    padding: 24px;\n    display: flex;\n    flex-flow: column;\n    align-items: center;\n    justify-content: space-evenly;\n    flex-flow: column;\n    height: 200px;\n}\n</style>\n\n<script>\nimport Const from \"@/const\";\nimport { Editlist, Log } from \"jsugc-websdk\";\n\nexport default {\n    data() {\n        return {\n            isopen: false,\n            editlist: Editlist.editlist,\n        };\n    },\n    methods: {\n        open() {\n            this.isopen = true;\n        },\n        close() {\n            this.isopen = false;\n        },\n        async importFile() {\n            Log.uilog(\"/importer\", \"pick video from library\");\n            if (this.isIOS()) {\n                // ios 使用系统 picker 会导致视频被压缩，影响导入效率\n                try {\n                    let result = await new Promise(\n                        MediaPicker.getMedias.bind(MediaPicker, {\n                            selectMode: 102, //101=picker image and video , 100=image , 102=video\n                            maxSelectCount: 1, //default 40 (Optional)\n                            // 'maxSelectSize': 188743680, //188743680=180M (Optional) only android\n                        })\n                    );\n\n                    Log.info(`import file `, result);\n\n                    this.$emit(\"select\", result);\n                } catch (e) {\n                    Log.error(\"import file failed: \", e);\n\n                    // 没导入视频接着显示\n                    if (!Editlist.editlist.timelines.length) {\n                        this.open();\n                    }\n                }\n            } else {\n                try {\n                    let result = await new Promise((o, x) =>\n                        navigator.camera.getPicture(o, x, {\n                            // destinationType: Camera.DestinationType.FILE_URI,\n                            sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n                            allowEdit: true,\n                            mediaType: Camera.MediaType.VIDEO,\n                        })\n                    );\n\n                    Log.info(`import file `, result);\n                    this.$emit(\"select\", [\n                        {\n                            uri: result,\n                        },\n                    ]);\n                } catch (e) {\n                    Log.error(\"import file failed: \", e);\n                    // 没导入视频接着显示\n                    if (!Editlist.editlist.timelines.length) {\n                        this.open();\n                    }\n                }\n            }\n        },\n        async captureFile() {\n            Log.uilog(\"/importer\", \"capture video from camera\");\n            try {\n                // CameraFragment 库 有兼容问题\n                // if(this.isAndroid()) {\n                //     let result = await new Promise((o, x) =>\n                //         UGCApp.captureVideo(o, x, {\n                //             duration: Const.CaptureVideo.Duration\n                //         }));\n                //     window.console.log(result)\n                //     if(!result.path) {\n                //         this.$mResToast.error(\"选择失败\");\n                //         return;\n                //     }\n                //     this.$emit(\"select\", [{ uri: result.path }]);\n                // }\n                // else\n                {\n                    let result = await new Promise((o, x) =>\n                        navigator.device.capture.captureVideo(o, x, {\n                            duration: Const.CaptureVideo.Duration,\n                        })\n                    );\n                    Log.error(\"capture file\", result);\n                    this.$emit(\n                        \"select\",\n                        result.map((o) => ({\n                            uri: o.fullPath,\n                        }))\n                    );\n                }\n            } catch (e) {\n                Log.error(\"capture file failed: \", e);\n                if (!Editlist.editlist.timelines.length) {\n                    this.open();\n                }\n            }\n        },\n        importProgress(progress) {\n            if (progress && progress.status == \"progress\") {\n                this.$emit(\"progress\", progress.index);\n                // window.console.log(\"import:\",progress);\n            }\n        },\n    },\n    mounted() {\n        if (this.isIOS()) {\n            document.addEventListener(\n                \"MediaPicker.CompressVideoEvent\",\n                this.importProgress\n            );\n        }\n    },\n    beforeDestroy() {\n        if (this.isIOS()) {\n            document.removeEventListener(\n                \"MediaPicker.CompressVideoEvent\",\n                this.importProgress\n            );\n        }\n    },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Importer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Importer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Importer.vue?vue&type=template&id=37304692&scoped=true&\"\nimport script from \"./Importer.vue?vue&type=script&lang=js&\"\nexport * from \"./Importer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Importer.vue?vue&type=style&index=0&id=37304692&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37304692\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"main\">\n        <div class=\"main-maker\" v-show=\"!makePoster&&!makeEnding&&!doExport\">\n            <ClipTop\n                ref=\"top\"\n                :overrideBackbutton=\"!doExport&&!makePoster&&!makeEnding\"\n                @export=\"doExport = true\"\n            />\n            <div ref=\"mainBox\" class=\"main-box\">\n                <PreviewPlayer\n                    ref=\"preview\"\n                    :pause=\"player.pause || doExport\"\n                    @finished=\"playerFinished\"\n                    @loading=\"player.loading=true\"\n                    @loaddone=\"previewLoaddone\"\n                    @resize=\"!makePoster&&!makeEnding&&!doExport\"\n                    @render=\"preview_render=true\"\n                    class=\"main-video\"\n                />\n\n                <OverlayEditor\n                    ref=\"overlayEditor\"\n                    @change=\"overlayEditorChange\"\n                    @overlayActive=\"overlayActive\"\n                    @overlayDeactive=\"overlayDeactive\"\n                    class=\"overlay-box\"\n                />\n            </div>\n\n            <div ref=\"toolBox\" class=\"toolBox\">\n                <PlayerController\n                    v-show=\"showPlayerController\"\n                    :playing=\"!player.pause\"\n                    :loading=\"player.loading\"\n                    @event=\"playerControllerEvent\"\n                />\n\n                <ClipTimeline\n                    ref=\"timeline\"\n                    v-show=\"showTimeline\"\n                    :show_overlay=\"showOverlay\"\n                    :overlay_type=\"overlayType\"\n                    :show_amix=\"showAMix\"\n                    :playing=\"!player.pause\"\n                    :poster=\"editlist.poster\"\n                    :preview_render=\"preview_render\"\n                    :player=\"$refs.preview\"\n                    @timelinesChange=\"timelinesChange\"\n                    @timeChange=\"timeChange\"\n                    @overlayChange=\"overlayChange\"\n                    @overlayActive=\"overlayActive\"\n                    @amixChange=\"amixChange\"\n                    @amixActive=\"amixActive\"\n                    @on_poster_click=\"makePoster=1\"\n                    @on_ending_click=\"makeEnding=1\"\n                />\n                <ToolTab\n                    ref=\"toolTab\"\n                    v-show=\"showTooltab\"\n                    :activeItem=\"activeItem\"\n                    @select=\"tabSelect\"\n                />\n                <ToolDialog\n                    @close=\"showTooltab=showPlayerController=showTimeline=true;mainBoxResized()\"\n                    @beforechange=\"toolBeforeChange\"\n                    @change=\"toolValueChange\"\n                    ref=\"toolDlg\"\n                />\n            </div>\n\n            <div v-if=\"importProgress >= 0\" class=\"spin\">\n                <div>\n                    <mu-circular-progress mode=\"determinate\" :value=\"importProgress*100\"></mu-circular-progress>\n                    <br />\n                    <span style=\"font-size:14px\">导入中 {{ (importProgress*100).toFixed(2) }}%</span>\n                </div>\n            </div>\n        </div>\n        <PosterMaker v-if=\"makePoster\" @close=\"makePoster = false; reloadPlayer(true); \" />\n        <EndingMaker v-if=\"makeEnding\" @close=\"makeEnding = false; reloadPlayer();\" />\n        <Exporter\n            ref=\"exporter\"\n            v-if=\"doExport\"\n            @close=\"doExport = false; isBackbuttonExit = true; reloadPlayer();\"\n        />\n        <Importer\n            ref=\"importer\"\n            @select=\"importFileSelect\"\n            @progress=\"importProgress=$event\"\n            @cancel=\"importCancel\"\n        />\n\n        <vue-snotify></vue-snotify>\n    </div>\n</template>\n\n<style lang=\"less\" scoped>\n.spin {\n    background: rgba(0, 0, 0, 0.8);\n    color: white;\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    & > * {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        text-align: center;\n        flex-direction: column;\n    }\n}\n\n.main {\n    background-color: #333;\n    background: transparent;\n    position: relative;\n\n    width: 100%;\n    height: 100%;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n.main-maker {\n    justify-content: center;\n    flex-direction: row;\n    flex-wrap: wrap;\n    overflow: hidden;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-flow: column;\n}\n.main-box {\n    background-color: #333;\n    background: transparent;\n    width: 100%;\n    position: relative;\n    overflow: hidden;\n    flex: auto;\n    display: flex;\n    height: 100%;\n}\n.overlay-box {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n}\n.choose-poster-box {\n    background: black;\n    position: absolute;\n    display: flex;\n    justify-content: center;\n    flex-direction: row;\n    flex-wrap: wrap;\n    flex-flow: column;\n    width: 100%;\n    height: 100%;\n}\n\n.main-video {\n    background-color: #000;\n    background: transparent;\n    width: 100%;\n    /* display: flex; */\n    /* height: 100%; */\n}\n\n.left-mask {\n    justify-content: flex-end;\n    flex-direction: row;\n    position: absolute;\n    top: 0;\n    left: 0;\n    margin: 15px;\n    height: 120px;\n}\n\n.tBtn i {\n    line-height: 1 !important;\n    font-size: 30px;\n}\n\n.toolBox {\n    width: 100%;\n    background: rgba(50, 50, 50, 1);\n    position: relative;\n    transition: all 0.5s;\n    border-top: 1px solid rgba(0, 0, 0, 0.3);\n    & > * {\n        width: 100%;\n    }\n}\n</style>\n<style lang=\"less\">\n.snotifyToast {\n    .snotifyToast__progressBar {\n        height: 2px;\n        overflow: hidden;\n    }\n    .snotifyToast__inner {\n        min-height: 18px;\n        .snotify-icon {\n            max-height: 18px;\n            max-width: 18px;\n        }\n    }\n}\n</style>\n<script>\nimport Const from \"@/const\";\nimport extend from \"extend\";\nimport { roundFloat, rotateVector } from \"@/utils\";\nimport OpHistory from \"@/model/History\";\nimport ClipTop from \"@/views/Top/ClipTop\";\nimport ClipTimeline from \"@/views/Bottom/Timeline/ClipTimeline\";\nimport PlayerController from \"@/views/Bottom/PlayerController\";\nimport ToolTab from \"@/views/Bottom/ToolTab\";\nimport ToolDialog from \"@/views/Bottom/ToolDialog\";\nimport OverlayEditor from \"@/views/Editor/OverlayEditor\";\nimport PosterMaker from \"@/views/PosterMaker\";\nimport EndingMaker from \"@/views/EndingMaker\";\nimport Exporter from \"@/views/Exporter\";\nimport Importer from \"@/views/Importer\";\nimport ugcsdk, { Editlist, UGCResourceManager, Log } from \"jsugc-websdk\";\nimport CordovaModel from \"jsugc-websdk/src/model/CordovaModel\";\n\nexport default {\n    components: {\n        ClipTop,\n        ClipTimeline,\n        PlayerController,\n        ToolTab,\n        ToolDialog,\n        OverlayEditor,\n        PosterMaker,\n        EndingMaker,\n        Exporter,\n        Importer,\n    },\n    data() {\n        return {\n            player: {\n                pause: true,\n                loading: false,\n                going2play: false,\n            },\n            preview_render: false, // 播放器已经有数据显示，目前用作通知缩略图可以生成（避免抢占 mediacodec 资源）\n            editlist: Editlist.editlist,\n            showOverlay: false, // 显示 贴图/贴字 时间轴\n            overlayType: false, // 贴图/贴字 时间轴 类型\n            showAMix: false, // 显示 音效 时间轴\n            showTooltab: true, // 显示底部导航工具栏\n            showPlayerController: true,\n            showTimeline: true,\n            activeItem: null, // 当前时间轴编辑内容（贴图/贴字/音效）\n            makePoster: false, // 封面图制作页面\n            makeEnding: false, // 片尾制作页面\n            doExport: false, // 导出页面\n            importProgress: -1,\n        };\n    },\n    watch: {\n        [\"player.pause\"](v) {\n            if (!v) {\n                this.$refs.overlayEditor.play();\n            } else {\n                this.$refs.overlayEditor.pause();\n            }\n        },\n    },\n    methods: {\n        async reloadPlayer(dont_keep_screen) {\n            this.player.pause = true;\n            this.preview_render = false;\n            await this.$refs.preview.reload(!dont_keep_screen);\n        },\n        seekPlayer(sec) {\n            this.$refs.preview.seek(sec);\n            this.$refs.overlayEditor.seek(sec);\n        },\n        playerFinished() {\n            this.player.pause = true;\n        },\n        timeChange(e) {\n            this.player.pause = true;\n            this.seekPlayer(e.time_sec);\n        },\n        timelinesChange(timelines) {\n            this.editlist.timelines = timelines;\n            OpHistory.createOperateHistory(Const.Operate.VideoTimeModify.Type);\n        },\n        amixChange(o) {\n            this.editlist.update_amix(o);\n            OpHistory.createOperateHistory(\n                Const.Operate.AudioEffectTimeModify.Type\n            );\n        },\n        amixActive(o) {\n            this.activeItem = o;\n        },\n        overlayChange(o) {\n            this.$refs.overlayEditor.active(o);\n\n            this.editlist.update_overlay(o);\n\n            if (o.type == Const.Overlay.Type.Image) {\n                OpHistory.createOperateHistory(\n                    Const.Operate.ImageTimeModify.Type\n                );\n            } else if (o.type == Const.Overlay.Type.Text) {\n                OpHistory.createOperateHistory(\n                    Const.Operate.TextTimeModify.Type\n                );\n            } else if (o.type == Const.Overlay.Type.Mosic) {\n                OpHistory.createOperateHistory(\n                    Const.Operate.MosicTimeModify.Type\n                );\n            }\n        },\n        overlayActive(o) {\n            if (o) {\n                this.$refs.overlayEditor.active(o);\n            } else {\n                this.$refs.overlayEditor.blur();\n                if (this.activeItem && this.activeItem.active) {\n                    this.activeItem.active = false;\n                }\n            }\n            this.activeItem = o;\n        },\n        overlayDeactive() {\n            this.activeItem = null;\n        },\n        blankClicked() {\n            this.$refs.overlayEditor.blur();\n        },\n        previewLoaddone() {\n            this.player.loading = false;\n            this.player.pause = !this.player.going2play;\n            this.player.going2play = false;\n        },\n        async playerControllerEvent(e) {\n            let cur_timeline;\n            let time_sec;\n\n            let eventname = \"\";\n            try {\n                eventname = Object.keys(PlayerController.EventID)[\n                    Object.values(PlayerController.EventID).indexOf(e.eventID)\n                ];\n            } catch (e) {\n                //\n            }\n            Log.uilog(\"/\", `player control: ${eventname}`);\n\n            switch (e.eventID) {\n                case PlayerController.EventID.Play:\n                    if (\n                        !this.$refs.preview.$refs.video.seeking &&\n                        this.$refs.preview.$refs.video.loaded\n                    )\n                        this.player.pause = false;\n                    else {\n                        this.player.going2play = true;\n                    }\n                    break;\n                case PlayerController.EventID.Pause:\n                    this.player.pause = true;\n                    break;\n                case PlayerController.EventID.SeekBegin:\n                    this.player.pause = true;\n                    cur_timeline = this.editlist.cur_timeline();\n                    time_sec = roundFloat(this.editlist.time_sec);\n                    if (cur_timeline) {\n                        if (\n                            Math.abs(time_sec - cur_timeline.offset_sec) < 0.05\n                        ) {\n                            // 跳到上一段\n                            let prevIdx = Math.max(\n                                0,\n                                this.editlist.timelines.findIndex(\n                                    (e) => e.id == cur_timeline.id\n                                ) - 1\n                            );\n                            cur_timeline = this.editlist.timelines[prevIdx];\n                        }\n\n                        // 播放暂停后，会更新 time_sec，先让它昨晚整理再调整位置，否则会冲突\n                        await new Promise((o) => setTimeout(o, 100));\n\n                        time_sec = cur_timeline.offset_sec + 0.01;\n                        this.seekPlayer(time_sec);\n                        this.$refs.timeline.update_time_sec(time_sec);\n                    }\n                    break;\n                case PlayerController.EventID.SeekEnd:\n                    this.player.pause = true;\n                    cur_timeline = this.editlist.cur_timeline();\n                    time_sec = roundFloat(this.editlist.time_sec);\n                    if (cur_timeline) {\n                        if (\n                            time_sec ==\n                            roundFloat(\n                                cur_timeline.offset_sec +\n                                    cur_timeline.end_sec -\n                                    cur_timeline.start_sec\n                            )\n                        ) {\n                            // 跳到下一段\n                            let nextIdx =\n                                this.editlist.timelines.indexOf(cur_timeline) +\n                                1;\n                            if (nextIdx < this.editlist.timelines.length) {\n                                cur_timeline = this.editlist.timelines[nextIdx];\n                            }\n                            // 增加0.001让时间进入下一断\n                            // this.player.time_sec = cur_timeline.offset_sec + cur_timeline.start_sec + 0.001;\n                        }\n\n                        // 播放暂停后，会更新 time_sec，先让它昨晚整理再调整位置，否则会冲突\n                        await new Promise((o) => setTimeout(o, 100));\n\n                        // 跳到结尾\n                        time_sec =\n                            cur_timeline.offset_sec +\n                            cur_timeline.end_sec -\n                            cur_timeline.start_sec +\n                            0.01;\n                        this.seekPlayer(time_sec);\n                        this.$refs.timeline.update_time_sec(time_sec);\n                    }\n                    break;\n                case PlayerController.EventID.Undo:\n                    this.undo();\n                    break;\n                case PlayerController.EventID.AspectRatio:\n                    this.$refs.toolDlg.show(ToolTab.TabID.AspectRatio, {\n                        height: this.$refs.toolTab.$el.clientHeight + \"px\",\n                    });\n                    break;\n            }\n        },\n        toolBeforeChange() {\n            // 添加图片或文字前先暂停\n            this.player.pause = true;\n        },\n        toolValueChange(data, tabid) {\n            // 修改分辨率比例时暂停播放\n            if (tabid == ToolTab.TabID.AspectRatio) {\n                this.player.pause = true;\n            }\n\n            if (data) {\n                if (data.overlay) {\n                    this.overlayActive(data.overlay);\n\n                    if (data.overlay.type == Const.Overlay.Type.Text) {\n                        this.reloadPlayer();\n                    }\n                    // this.$refs.overlayEditor.active(data.overlay);\n                    // this.$refs.overlayToolTab.active(data.overlay);\n                    return;\n                }\n            }\n            this.reloadPlayer();\n        },\n        overlayEditorChange() {\n            this.reloadPlayer();\n        },\n        tabSelect(tabID) {\n            let tabname = \"\";\n            try {\n                tabname = Object.keys(ToolTab.TabID)[\n                    Object.values(ToolTab.TabID).indexOf(tabID)\n                ];\n            } catch (e) {\n                //\n            }\n            Log.uilog(\"/\", `tab change: ${tabname}`);\n            switch (tabID) {\n                case ToolTab.TabID.ImageTab:\n                    this.showOverlay = true;\n                    this.overlayType =\n                        Const.Overlay.Type.Image | Const.Overlay.Type.Mosic;\n                    this.showAMix = false;\n                    break;\n                case ToolTab.TabID.TextTab:\n                    this.showOverlay = true;\n                    this.overlayType = Const.Overlay.Type.Text;\n                    this.showAMix = false;\n                    break;\n                case ToolTab.TabID.AudioTab:\n                    this.showAMix = true;\n                    this.showOverlay = false;\n                    break;\n                case ToolTab.TabID.OtherTab:\n                    // // 显示 马赛克\n                    // this.showOverlay = true;\n                    // // this.overlayType = Const.Overlay.Type.Mosic;\n                    // this.showAMix = false;\n\n                    // 马赛克改到贴纸里显示\n                    this.showOverlay = false;\n                    this.showAMix = false;\n                    break;\n\n                case ToolTab.TabID.ToolEdit:\n                case ToolTab.TabID.ToolTemplate:\n                case ToolTab.TabID.ToolSettings:\n                    if (this.activeItem.type == Const.Overlay.Type.Text) {\n                        this.showTimeline = false;\n                        this.showPlayerController = false;\n\n                        this.$refs.toolDlg.show(ToolTab.TabID.AddText, {\n                            height: \"auto\",\n                            overlay: this.activeItem,\n                            operateToolTabId: tabID,\n                        });\n                    }\n                    break;\n                case ToolTab.TabID.ToolDone:\n                    this.activeItem.active = false;\n                    this.activeItem = null;\n                    this.$refs.overlayEditor.blur();\n                    break;\n                case ToolTab.TabID.ToolRemove:\n                    this.editlist.remove_overlay(this.activeItem.id);\n                    this.activeItem.active = false;\n\n                    switch(this.activeItem.type){\n                        case Const.Overlay.Type.Image:\n                            OpHistory.createOperateHistory(\n                                Const.Operate.ImageRemove.Type\n                            );\n                            break;\n                        case Const.Overlay.Type.Text:\n                            OpHistory.createOperateHistory(\n                                Const.Operate.TextRemove.Type\n                            );\n                            break;\n                        case Const.Overlay.Type.Mosic:\n                            OpHistory.createOperateHistory(\n                                Const.Operate.MosicRemove.Type\n                            );\n                            break;\n                        default:\n                            OpHistory.createOperateHistory(\n                                Const.Operate.AudioEffectRemove.Type\n                            );\n                            break;\n                    }\n\n                    this.$refs.overlayEditor.blur();\n                    this.activeItem = null;\n                    this.reloadPlayer();\n\n                    break;\n\n                case ToolTab.TabID.VideoAdd:\n                    this.pickVideo();\n                    break;\n                case ToolTab.TabID.VideoRemove:\n                    {\n                        let timelines = this.editlist.timelines;\n\n                        // 先找激活的移除\n                        let idx = timelines.findIndex((o) => o.active);\n                        if (idx == -1) {\n                            // 都没激活则直接移除时间轴压住的视频\n                            let curr_timeline = this.editlist.cur_timeline();\n                            if (!curr_timeline && timelines.length) {\n                                // 没找到是因为时间等于总时长\n                                idx = 0;\n                            } else {\n                                idx = timelines.findIndex(\n                                    (e) => e.id == curr_timeline.id\n                                );\n                            }\n                        }\n                        if (idx >= 0) {\n                            let timeline = timelines[idx];\n                            timelines.splice(idx, 1);\n                            [0, ...timelines].reduce((pre, nxt) => {\n                                nxt.offset_sec = pre;\n                                return (\n                                    nxt.offset_sec + nxt.end_sec - nxt.start_sec\n                                );\n                            });\n\n                            // 删除叠加效果\n                            [\n                                ...this.editlist.amix,\n                                ...this.editlist.overlay,\n                            ].forEach((e) => {\n                                let found =\n                                    roundFloat(timeline.offset_sec) <=\n                                        roundFloat(e.offset_sec) &&\n                                    roundFloat(e.offset_sec) <\n                                        roundFloat(\n                                            timeline.offset_sec +\n                                                timeline.end_sec -\n                                                timeline.start_sec\n                                        );\n                                if (found) {\n                                    this.editlist.remove_overlay(e.id);\n                                }\n                            });\n\n                            this.player.pause = true;\n\n                            let time_sec = 0;\n                            // 移动时间线到被删除的视频的前一视频的结束位置\n                            if (idx == 0 || !timelines.length) {\n                                time_sec = 0;\n                            } else {\n                                time_sec =\n                                    timelines[idx - 1].offset_sec +\n                                    timelines[idx - 1].end_sec -\n                                    timelines[idx - 1].start_sec +\n                                    0.01;\n                            }\n\n                            this.seekPlayer(time_sec);\n                            this.$refs.timeline.update_time_sec(time_sec);\n                            this.reloadPlayer();\n\n                            OpHistory.createOperateHistory(\n                                Const.Operate.VideoRemove.Type,\n                                timeline.id\n                            );\n                        }\n\n                        if (timelines.length == 0) {\n                            this.editlist.poster.url = \"\";\n                            this.editlist.poster.overlay.splice(0, -1);\n                            this.pickVideo();\n                        }\n                    }\n                    break;\n                case ToolTab.TabID.VideoSplit:\n                    {\n                        this.player.pause = true;\n\n                        let timelines = this.editlist.timelines;\n                        let time_sec =\n                            (+this.editlist.time_sec).toFixed(3) - 0.01;\n                        let found = this.editlist.cur_timeline();\n                        let idx = timelines.findIndex((o) => o.id == found.id);\n\n                        let second = extend(true, {}, found, {\n                            id: this.editlist.get_next_timelineId(),\n                        });\n\n                        found.active = false;\n\n                        if (\n                            time_sec - found.offset_sec <\n                                this.editlist.video_min_sec ||\n                            found.offset_sec +\n                                found.end_sec -\n                                found.start_sec -\n                                time_sec <\n                                this.editlist.video_min_sec\n                        ) {\n                            this.$snotify.error(\n                                `时长小于${this.editlist.video_min_sec}秒，无法分割`\n                            );\n                            return;\n                        }\n\n                        found.end_sec = second.start_sec =\n                            time_sec - found.offset_sec + found.start_sec;\n\n                        timelines.splice(idx + 1, 0, second);\n                        timelines.reduce((pre, nxt, idx) => {\n                            if (idx == 1) pre = pre.end_sec - pre.start_sec;\n                            nxt.offset_sec = pre;\n                            return nxt.offset_sec + nxt.end_sec - nxt.start_sec;\n                        });\n\n                        this.editlist.cur_timeline(true);\n                        this.$refs.timeline.refreshUI();\n                        this.reloadPlayer();\n\n                        OpHistory.createOperateHistory(\n                            Const.Operate.VideoSplit.Type\n                        );\n                    }\n                    break;\n                case ToolTab.TabID.VideoRotate:\n                    {\n                        let timelines = this.editlist.timelines;\n\n                        let found = this.editlist.cur_timeline();\n                        let idx = timelines.findIndex((o) => o.id == found.id);\n\n                        if (idx >= 0) {\n                            let found = timelines[idx];\n\n                            if (idx == 0) {\n                                // 如果是第一段视频，封面、封面贴纸跟着转\n                                this.editlist.poster.rotate += 270;\n                                this.editlist.poster.rotate %= 360;\n                                this.rotatePosterOverlay(found, 270);\n                            }\n\n                            found.rotate += 270;\n                            found.rotate %= 360;\n\n                            this.reloadPlayer();\n\n                            OpHistory.createOperateHistory(\n                                Const.Operate.VideoRotate.Type\n                            );\n                        }\n                    }\n                    break;\n                case ToolTab.TabID.VideoVFlip:\n                    {\n                        let timelines = this.editlist.timelines;\n                        let idx = -1;\n                        timelines.forEach((o, i) => {\n                            if (\n                                o.offset_sec < this.editlist.time_sec &&\n                                o.end_sec - o.start_sec + o.offset_sec >\n                                    this.editlist.time_sec\n                            )\n                                idx = i;\n                        });\n                        if (idx >= 0) {\n                            let found = timelines[idx];\n                            found.vflip = !found.vflip;\n                            this.reloadPlayer();\n\n                            OpHistory.createOperateHistory(\n                                Const.Operate.VideoVFlip.Type\n                            );\n                        }\n                    }\n                    break;\n                case ToolTab.TabID.VideoHFlip:\n                    {\n                        let timelines = this.editlist.timelines;\n                        let idx = -1;\n                        timelines.forEach((o, i) => {\n                            if (\n                                o.offset_sec < this.editlist.time_sec &&\n                                o.end_sec - o.start_sec + o.offset_sec >\n                                    this.editlist.time_sec\n                            )\n                                idx = i;\n                        });\n                        if (idx >= 0) {\n                            let found = timelines[idx];\n                            found.hflip = !found.hflip;\n                            this.reloadPlayer();\n\n                            OpHistory.createOperateHistory(\n                                Const.Operate.VideoHFlip.Type\n                            );\n                        }\n                    }\n                    break;\n                case ToolTab.TabID.AddLocalImage:\n                    this.pickImg();\n                    break;\n                case ToolTab.TabID.Mosic:\n                    this.addMosic();\n                    break;\n                default: {\n                    let height;\n\n                    switch (tabID) {\n                        case ToolTab.TabID.Face:\n                        case ToolTab.TabID.AudioBase:\n                            this.player.pause = true;\n                            height = this.$refs.toolTab.$el.clientHeight + \"px\";\n                            break;\n                        case ToolTab.TabID.AddText:\n                            this.showTimeline = false;\n                            this.showPlayerController = false;\n                            height = \"auto\";\n                            break;\n                        case ToolTab.TabID.BGM:\n                            height = this.$el.clientHeight / 2 + \"px\";\n                            break;\n                        default:\n                            height = this.$refs.toolBox.clientHeight + \"px\";\n                    }\n\n                    this.$refs.toolDlg.show(tabID, {\n                        height,\n                    });\n                }\n            }\n\n            if (\n                tabID == ToolTab.TabID.ImageTab ||\n                tabID == ToolTab.TabID.TextTab ||\n                tabID == ToolTab.TabID.AudioTab ||\n                tabID == ToolTab.TabID.OtherTab\n            ) {\n                this.overlayActive(null);\n            }\n        },\n        async pickImg() {\n            Log.uilog(\"/\", \"pick image\");\n            // native cordova.camera plugin 需要修正，否则会返回 content:// 路径无法读取\n            // CameraLauncher.java::processResultFromGallery::707 需要修正为返回 fileLocation\n            let file = await new Promise((o, x) =>\n                navigator.camera.getPicture(o, x, {\n                    sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n                    allowEdit: false,\n                    correctOrientation: true,\n                    mediaType: Camera.MediaType.PICTURE,\n                })\n            );\n\n            // window.console.log(file);\n            if (!file) return;\n\n            let overlay = this.editlist.add_overlay({\n                url: file,\n                type: Const.Overlay.Type.Image,\n            });\n            this.$refs.overlayEditor.active(overlay);\n            this.overlayActive(overlay);\n\n            Log.uilog(\"/\", `pick image done, url: ${overlay.url}`);\n\n            OpHistory.createOperateHistory(Const.Operate.ImageAdd.Type);\n        },\n        async importFileSelect(files, auto) {\n            // try {\n            let needSeek = this.editlist.timelines.length;\n            let time_sec = this.editlist.total_sec;\n            let timelines = await Promise.all(\n                files.map((val) => {\n                    let src = val.uri.replace(\"file://\", \"\");\n                    return {\n                        url: src,\n                    };\n                })\n            );\n\n            Log.uilog(\"/\", `file imported: ${JSON.stringify(timelines)}`);\n\n            try {\n                await this.editlist.add_timelines(timelines);\n            } catch (e) {\n                Log.error(\"add timeline failed\", e);\n                this.$snotify.error(e);\n                return;\n            }\n\n            if (!auto) {\n                // 不能放reload后\n                timelines.forEach((t) => {\n                    OpHistory.createOperateHistory(\n                        Const.Operate.VideoAdd.Type,\n                        t.id\n                    );\n                });\n            }\n\n            await this.$refs.preview.reload();\n\n            time_sec += 0.01;\n            if(needSeek){\n                this.seekPlayer(time_sec);\n                this.$refs.timeline.update_time_sec(time_sec);\n            }\n\n            Log.uilog(\"/\", `player loaded`);\n\n            this.importProgress = -1;\n\n            // 没导入视频， 继续导入\n            if (!this.editlist.timelines.length) {\n                this.pickVideo();\n            }\n        },\n        importCancel(){\n            if(this.editlist.timelines.length <= 0){\n                this.$refs.top.exit(true);\n            }\n        },\n        async pickVideo() {\n            this.$refs.importer.open();\n        },\n        mainBoxResized() {\n            this.$nextTick(() => {\n                this.$refs.overlayEditor.updateUI();\n            });\n        },\n        async addMosic() {\n            Log.uilog(\"/\", \"add mosic\");\n            if (!this.editlist.mosic_source) {\n                this.editlist.mosic_source = await UGCResourceManager.getMosicSource();\n            }\n            let mosic = this.editlist.add_mosic();\n\n            this.activeItem = mosic;\n            this.$refs.overlayEditor.active(mosic);\n            this.$refs.overlayEditor.toCenter(1);\n\n            await this.reloadPlayer();\n\n            Log.uilog(\"/\", \"add mosic done\");\n\n            OpHistory.createOperateHistory(\n                Const.Operate.MosicAdd.Type,\n                mosic.id\n            );\n        },\n        async undo() {\n            this.player.pause = true;\n\n            let message = await OpHistory.undo(this.$refs.preview);\n\n            Log.uilog(\"/\", `history undo: ${message}`);\n\n            this.$refs.overlayEditor.blur();\n            if (this.activeItem) {\n                this.activeItem.active = false;\n            }\n\n            this.$snotify.success(message);\n\n            // 视频撤完了，让用户导入\n            if (!Editlist.editlist.timelines.length) {\n                this.pickVideo();\n            }\n        },\n        // overlay跟着封面旋转\n        rotatePosterOverlay(timeline, rotate) {\n            // overlay需要①绕右上角进行旋转，之后②再绕矩形自己的中心逆旋转，③然后减掉视频宽度\n            let width = this.editlist.getRotatedWidth(timeline);\n            let ox = width;\n            let oy = 0;\n\n            this.editlist.poster.overlay.forEach((overlay) => {\n                // ①\n                let box = Math.hypot(overlay.w, overlay.h);\n                let x = overlay.x - (overlay.w - box) / 2;\n                let y = overlay.y - (overlay.h - box) / 2;\n\n                let rotatedLT = rotateVector(ox, oy, x, y, rotate);\n                let rotatedRB = rotateVector(\n                    ox,\n                    oy,\n                    x + overlay.w,\n                    y + overlay.h,\n                    rotate\n                );\n                // ②\n                ox = (rotatedLT.x + rotatedRB.x) / 2;\n                oy = (rotatedLT.y + rotatedRB.y) / 2;\n                rotatedLT = rotateVector(\n                    ox,\n                    oy,\n                    rotatedLT.x,\n                    rotatedLT.y,\n                    -rotate\n                );\n                // ③\n                rotatedLT.x -= width;\n\n                overlay.x = rotatedLT.x + (overlay.w - box) / 2;\n                overlay.y = rotatedLT.y + (overlay.h - box) / 2;\n                overlay.rotate += rotate;\n                overlay.rotate %= 360;\n            });\n        },\n    },\n    async mounted() {\n        Log.info(`JSUGCSDK verison: ${ugcsdk.version}`);\n\n        Log.uilog(\"/\", \"begin\");\n\n        if (!this.isCordova) {\n            // this.$Message.error(\"此功能需要UGC客户端支持\");\n            // this.$router.back();\n            Log.warn(\"需要UGC客户端支持\");\n            return;\n        }\n\n        let config = await CordovaModel.getConfig();\n\n        if (config.input) {\n            Log.uilog(\"/\", `config.input video: ${config.input}`);\n            // 导入客户调用SDK时传入的视频\n            await this.importFileSelect(\n                [\n                    {\n                        uri: config.input,\n                    },\n                ],\n                true\n            );\n        } else {\n            this.pickVideo();\n        }\n\n        OpHistory.createOperateHistory(Const.Operate.Init.Type);\n    },\n    async beforeDestroy() {\n        // document.removeEventListener(\"backbutton\", this.onBack, false);\n    },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Main.vue?vue&type=template&id=40416608&scoped=true&\"\nimport script from \"./Main.vue?vue&type=script&lang=js&\"\nexport * from \"./Main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Main.vue?vue&type=style&index=0&id=40416608&lang=less&scoped=true&\"\nimport style1 from \"./Main.vue?vue&type=style&index=1&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"40416608\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div id=\"app\">\n        <Main />\n    </div>\n</template>\n\n<script>\nimport Main from \"./views/Main.vue\";\n\nexport default {\n    name: \"app\",\n    components: {\n        Main\n    }\n};\n</script>\n\n<style>\nhtml {\n    width: 100%;\n    height: 100%;\n    background: transparent !important;\n}\n\nbody {\n    width: 100%;\n    height: 100%;\n    background: transparent !important;\n\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    -webkit-touch-callout: none;\n}\n\n#app {\n    width: 100%;\n    height: 100%;\n    background: transparent;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=03d8a14c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport { CordovaModel, PreviewPlayer, Export } from \"jsugc-websdk\";\nimport MuseUI from \"muse-ui\";\nimport \"muse-ui/dist/muse-ui.css\";\nimport \"@/assets/icon/material-icons.css\";\nimport \"muse-ui-message/dist/muse-ui-message.css\";\nimport Message from \"muse-ui-message\";\n\nimport Snotify from \"vue-snotify\";\nimport \"vue-snotify/styles/material.css\";\n\nVue.use(MuseUI);\nVue.use(Message);\nVue.use(Snotify, {\n    toast: {\n        position: \"centerTop\",\n    },\n});\n\nVue.component(\"PreviewPlayer\", PreviewPlayer);\nVue.component(\"Export\", Export);\n\nVue.config.productionTip = false;\nVue.config.performance = true;\n\nVue.prototype.isCordova = CordovaModel.isCordova;\nVue.prototype.isIOS = CordovaModel.isIOS;\nVue.prototype.isAndroid = CordovaModel.isAndroid;\nVue.prototype.isMobile = () => {\n    return CordovaModel.isIOS() || CordovaModel.isAndroid();\n};\nVue.prototype.isPortrait = CordovaModel.isPortrait;\n\n(async () => {\n    await CordovaModel.init();\n\n    new Vue({\n        render: (h) => h(App),\n    }).$mount(\"#app\");\n})();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crop.vue?vue&type=style&index=0&id=00699070&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crop.vue?vue&type=style&index=0&id=00699070&lang=less&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AspectRatio.vue?vue&type=style&index=0&id=4eec2d4a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AspectRatio.vue?vue&type=style&index=0&id=4eec2d4a&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoBase.vue?vue&type=style&index=0&id=608f2bee&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoBase.vue?vue&type=style&index=0&id=608f2bee&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sort.vue?vue&type=style&index=1&id=facd8976&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sort.vue?vue&type=style&index=1&id=facd8976&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Face.vue?vue&type=style&index=0&id=107c639e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Face.vue?vue&type=style&index=0&id=107c639e&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMaker.vue?vue&type=style&index=0&id=8650f720&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMaker.vue?vue&type=style&index=0&id=8650f720&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTop.vue?vue&type=style&index=0&id=f9e36f42&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTop.vue?vue&type=style&index=0&id=f9e36f42&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverlayEditor.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverlayEditor.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HScrollBar.vue?vue&type=style&index=0&id=54853b12&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HScrollBar.vue?vue&type=style&index=0&id=54853b12&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextRender.vue?vue&type=style&index=0&id=0c62ceba&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextRender.vue?vue&type=style&index=0&id=0c62ceba&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioEffect.vue?vue&type=style&index=0&id=7807f21b&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioEffect.vue?vue&type=style&index=0&id=7807f21b&lang=less&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Filter.vue?vue&type=style&index=0&id=1c097dd7&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Filter.vue?vue&type=style&index=0&id=1c097dd7&scoped=true&lang=css&\"","import mod from \"-!../../../webui/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../webui/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../webui/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../webui/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../webui/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../webui/node_modules/vue-loader/lib/index.js??vue-loader-options!./NativeVideo.vue?vue&type=style&index=0&id=1a42391a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../webui/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../webui/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../webui/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../webui/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../webui/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../webui/node_modules/vue-loader/lib/index.js??vue-loader-options!./NativeVideo.vue?vue&type=style&index=0&id=1a42391a&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioEffect.vue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioEffect.vue?vue&type=style&index=1&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exporter.vue?vue&type=style&index=0&id=fdb28bf6&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exporter.vue?vue&type=style&index=0&id=fdb28bf6&lang=less&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BGM.vue?vue&type=style&index=0&id=020c8ca4&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BGM.vue?vue&type=style&index=0&id=020c8ca4&lang=less&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&id=40416608&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Main.vue?vue&type=style&index=0&id=40416608&lang=less&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioBase.vue?vue&type=style&index=0&id=e285fa2e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioBase.vue?vue&type=style&index=0&id=e285fa2e&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineOverlayItem.vue?vue&type=style&index=0&id=332828ec&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineOverlayItem.vue?vue&type=style&index=0&id=332828ec&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterToolTab.vue?vue&type=style&index=0&id=0f6f2a1b&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterToolTab.vue?vue&type=style&index=0&id=0f6f2a1b&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingMaker.vue?vue&type=style&index=0&id=ee7ae812&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingMaker.vue?vue&type=style&index=0&id=ee7ae812&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolTab.vue?vue&type=style&index=0&id=28e2578a&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolTab.vue?vue&type=style&index=0&id=28e2578a&lang=less&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTimeline.vue?vue&type=style&index=0&id=5f3d8022&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTimeline.vue?vue&type=style&index=0&id=5f3d8022&lang=less&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextOverlay.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextOverlay.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItem.vue?vue&type=style&index=0&id=0a27f5e2&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItem.vue?vue&type=style&index=0&id=0a27f5e2&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerController.vue?vue&type=style&index=0&id=270f6bbc&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerController.vue?vue&type=style&index=0&id=270f6bbc&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverlayEditor.vue?vue&type=style&index=1&id=e5dbe36a&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverlayEditor.vue?vue&type=style&index=1&id=e5dbe36a&lang=less&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exporter.vue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exporter.vue?vue&type=style&index=1&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverlayToolTab.vue?vue&type=style&index=0&id=44fcf3a9&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverlayToolTab.vue?vue&type=style&index=0&id=44fcf3a9&lang=less&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sort.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sort.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Importer.vue?vue&type=style&index=0&id=37304692&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Importer.vue?vue&type=style&index=0&id=37304692&scoped=true&lang=css&\""],"sourceRoot":""}