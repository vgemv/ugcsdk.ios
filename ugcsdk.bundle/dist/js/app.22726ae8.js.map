{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/views/Bottom/Tools/TextOverlay.vue?1d20","webpack:///./src/App.vue?7e02","webpack:///./src/views/Bottom/PlayerController.vue?7a40","webpack:///./src/components/ScrollTab.vue?2d3b","webpack:///./src/components/TimelineItem.vue?b564","webpack:///./src/views/Bottom/ToolDialog.vue?60ce","webpack:///./src/components/HScrollBar.vue?7204","webpack:///./src/views/Bottom/OverlayToolTab.vue?115e","webpack:///./src/model/CanvasTextWrapper.js","webpack:///./src/views/Bottom/Tools/ImageOverlay.vue?cba5","webpack:///./src/views/Clip.vue?c64c","webpack:///./src/views/Bottom/ToolTab.vue?13cd","webpack:///./src/components/TimelineItemThumb.vue?6419","webpack:///./src/views/Bottom/Tools/BGM.vue?71c8","webpack:///./src/const.js","webpack:///./src/App.vue?2b17","webpack:///./src/views/Clip.vue?1328","webpack:///./src/views/Top/ClipTop.vue?1974","webpack:///./src/model/CordovaModel.js","webpack:///./src/utils.js","webpack:///./src/model/UGCResourceManager.js","webpack:///./src/model/Editlist.js","webpack:///src/views/Top/ClipTop.vue","webpack:///./src/views/Top/ClipTop.vue?5031","webpack:///./src/views/Top/ClipTop.vue","webpack:///./src/views/Bottom/ClipTimeline.vue?bbdf","webpack:///./src/components/TimelineItem.vue?e5ce","webpack:///src/components/TimelineItem.vue","webpack:///./src/components/TimelineItem.vue?f8b4","webpack:///./src/components/TimelineItem.vue?1ccc","webpack:///./src/components/TimelineOverlayItem.vue?5cad","webpack:///./src/model/Magnet.js","webpack:///src/components/TimelineOverlayItem.vue","webpack:///./src/components/TimelineOverlayItem.vue?fbb8","webpack:///./src/components/TimelineOverlayItem.vue","webpack:///./src/components/TimelineItemThumb.vue?639a","webpack:///./src/model/ClipModel.js","webpack:///src/components/TimelineItemThumb.vue","webpack:///./src/components/TimelineItemThumb.vue?ffd8","webpack:///./src/components/TimelineItemThumb.vue?8c6b","webpack:///src/views/Bottom/ClipTimeline.vue","webpack:///./src/views/Bottom/ClipTimeline.vue?509d","webpack:///./src/views/Bottom/ClipTimeline.vue","webpack:///./src/views/Bottom/PlayerController.vue?7f60","webpack:///src/views/Bottom/PlayerController.vue","webpack:///./src/views/Bottom/PlayerController.vue?1ea8","webpack:///./src/views/Bottom/PlayerController.vue","webpack:///./src/views/Bottom/ToolTab.vue?146f","webpack:///./src/components/ClipBtn.vue?a9f8","webpack:///src/components/ClipBtn.vue","webpack:///./src/components/ClipBtn.vue?402b","webpack:///./src/components/ClipBtn.vue?49f3","webpack:///./src/components/HScrollBar.vue?5b0f","webpack:///src/components/HScrollBar.vue","webpack:///./src/components/HScrollBar.vue?811d","webpack:///./src/components/HScrollBar.vue?3e5c","webpack:///./src/views/Bottom/OverlayToolTab.vue?e868","webpack:///src/views/Bottom/OverlayToolTab.vue","webpack:///./src/views/Bottom/OverlayToolTab.vue?ba5f","webpack:///./src/views/Bottom/OverlayToolTab.vue","webpack:///src/views/Bottom/ToolTab.vue","webpack:///./src/views/Bottom/ToolTab.vue?a564","webpack:///./src/views/Bottom/ToolTab.vue","webpack:///./src/views/Bottom/ToolDialog.vue?38fb","webpack:///./src/views/Bottom/Tools/AudioBase.vue?104d","webpack:///src/views/Bottom/Tools/AudioBase.vue","webpack:///./src/views/Bottom/Tools/AudioBase.vue?1ae2","webpack:///./src/views/Bottom/Tools/AudioBase.vue?1e49","webpack:///./src/views/Bottom/Tools/BGM.vue?5dbe","webpack:///src/views/Bottom/Tools/BGM.vue","webpack:///./src/views/Bottom/Tools/BGM.vue?8e80","webpack:///./src/views/Bottom/Tools/BGM.vue","webpack:///./src/views/Bottom/Tools/AudioEffect.vue?5ef9","webpack:///src/views/Bottom/Tools/AudioEffect.vue","webpack:///./src/views/Bottom/Tools/AudioEffect.vue?0339","webpack:///./src/views/Bottom/Tools/AudioEffect.vue?1d6a","webpack:///./src/views/Bottom/Tools/Filter.vue?f19d","webpack:///src/views/Bottom/Tools/Filter.vue","webpack:///./src/views/Bottom/Tools/Filter.vue?6f79","webpack:///./src/views/Bottom/Tools/Filter.vue?827a","webpack:///./src/views/Bottom/Tools/ImageOverlay.vue?bdef","webpack:///./src/components/ScrollTab.vue?6cb8","webpack:///src/components/ScrollTab.vue","webpack:///./src/components/ScrollTab.vue?519c","webpack:///./src/components/ScrollTab.vue?1034","webpack:///src/views/Bottom/Tools/ImageOverlay.vue","webpack:///./src/views/Bottom/Tools/ImageOverlay.vue?6379","webpack:///./src/views/Bottom/Tools/ImageOverlay.vue","webpack:///./src/views/Bottom/Tools/TextOverlay.vue?df6e","webpack:///./src/views/Editor/TextRender.vue?d6ec","webpack:///src/views/Editor/TextRender.vue","webpack:///./src/views/Editor/TextRender.vue?9d3d","webpack:///./src/views/Editor/TextRender.vue?d8f8","webpack:///src/views/Bottom/Tools/TextOverlay.vue","webpack:///./src/views/Bottom/Tools/TextOverlay.vue?8224","webpack:///./src/views/Bottom/Tools/TextOverlay.vue?5419","webpack:///./src/views/Bottom/Tools/VideoBase.vue?5b6c","webpack:///src/views/Bottom/Tools/VideoBase.vue","webpack:///./src/views/Bottom/Tools/VideoBase.vue?c255","webpack:///./src/views/Bottom/Tools/VideoBase.vue?35ce","webpack:///./src/views/Bottom/Tools/Sort.vue?5088","webpack:///src/views/Bottom/Tools/Sort.vue","webpack:///./src/views/Bottom/Tools/Sort.vue?978f","webpack:///./src/views/Bottom/Tools/Sort.vue?4b24","webpack:///./src/views/Bottom/Tools/Face.vue?cd22","webpack:///src/views/Bottom/Tools/Face.vue","webpack:///./src/views/Bottom/Tools/Face.vue?7f34","webpack:///./src/views/Bottom/Tools/Face.vue?b4b4","webpack:///./src/views/Bottom/Tools/AspectRatio.vue?a197","webpack:///src/views/Bottom/Tools/AspectRatio.vue","webpack:///./src/views/Bottom/Tools/AspectRatio.vue?3c5d","webpack:///./src/views/Bottom/Tools/AspectRatio.vue?925d","webpack:///src/views/Bottom/ToolDialog.vue","webpack:///./src/views/Bottom/ToolDialog.vue?82ed","webpack:///./src/views/Bottom/ToolDialog.vue","webpack:///./src/views/Editor/ClipImg.vue?a3d7","webpack:///src/views/Editor/ClipImg.vue","webpack:///./src/views/Editor/ClipImg.vue?ca9a","webpack:///./src/views/Editor/ClipImg.vue?372e","webpack:///./src/views/PreviewPlayer.vue?acd8","webpack:///./src/components/NativeVideo.vue?2fc8","webpack:///src/components/NativeVideo.vue","webpack:///./src/components/NativeVideo.vue?ed31","webpack:///./src/components/NativeVideo.vue?1654","webpack:///src/views/PreviewPlayer.vue","webpack:///./src/views/PreviewPlayer.vue?c4b1","webpack:///./src/views/PreviewPlayer.vue","webpack:///./src/views/PosterMaker.vue?d9b8","webpack:///./src/views/Top/PosterMakerTop.vue?08b1","webpack:///src/views/Top/PosterMakerTop.vue","webpack:///./src/views/Top/PosterMakerTop.vue?774a","webpack:///./src/views/Top/PosterMakerTop.vue","webpack:///./src/views/Bottom/PosterToolTab.vue?82ef","webpack:///src/views/Bottom/PosterToolTab.vue","webpack:///./src/views/Bottom/PosterToolTab.vue?7f75","webpack:///./src/views/Bottom/PosterToolTab.vue?49ff","webpack:///src/views/PosterMaker.vue","webpack:///./src/views/PosterMaker.vue?573e","webpack:///./src/views/PosterMaker.vue","webpack:///./src/views/EndingMaker.vue?ee2c","webpack:///./src/components/Crop.vue?0f32","webpack:///src/components/Crop.vue","webpack:///./src/components/Crop.vue?c43f","webpack:///./src/components/Crop.vue","webpack:///./src/views/Editor/EndingRender.vue?3be5","webpack:///src/views/Editor/EndingRender.vue","webpack:///./src/views/Editor/EndingRender.vue?0b1b","webpack:///./src/views/Editor/EndingRender.vue?7164","webpack:///src/views/EndingMaker.vue","webpack:///./src/views/EndingMaker.vue?a20b","webpack:///./src/views/EndingMaker.vue","webpack:///./src/views/Exporter.vue?6b7c","webpack:///src/views/Exporter.vue","webpack:///./src/views/Exporter.vue?d96a","webpack:///./src/views/Exporter.vue","webpack:///./src/views/Helper/Importer.vue?5b6d","webpack:///src/views/Helper/Importer.vue","webpack:///./src/views/Helper/Importer.vue?5c5f","webpack:///./src/views/Helper/Importer.vue?9089","webpack:///src/views/Clip.vue","webpack:///./src/views/Clip.vue?c3a3","webpack:///./src/views/Clip.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/main.js","webpack:///./src/views/Editor/EndingRender.vue?6fda","webpack:///./src/views/Editor/ClipImg.vue?022d","webpack:///./src/views/Bottom/Tools/Filter.vue?6dfe","webpack:///./src/views/Bottom/ClipTimeline.vue?1fa4","webpack:///./src/views/Bottom/Tools/AudioBase.vue?f928","webpack:///./src/views/Bottom/Tools/AudioEffect.vue?113c","webpack:///./src/components/Crop.vue?13cd","webpack:///./src/views/Bottom/Tools/AudioEffect.vue?4a0e","webpack:///./src/views/Exporter.vue?6ea3","webpack:///./src/views/EndingMaker.vue?179d","webpack:///./src/views/Top/PosterMakerTop.vue?d8a1","webpack:///./src/views/Bottom/Tools/Sort.vue?da60","webpack:///./src/views/Bottom/Tools/Face.vue?d4e1","webpack:///./src/views/Editor/ClipImg.vue?794c","webpack:///./src/components/ClipBtn.vue?0b35","webpack:///./src/views/Bottom/Tools/TextOverlay.vue?49a8","webpack:///./src/views/Top/ClipTop.vue?2d1f","webpack:///./src/views/PosterMaker.vue?320c","webpack:///./src/views/Bottom/Tools/AspectRatio.vue?553d","webpack:///./src/views/Helper/Importer.vue?a9e8","webpack:///./src/components/TimelineOverlayItem.vue?c2b1","webpack:///./src/views/Bottom/Tools/Sort.vue?6767","webpack:///./src/components/NativeVideo.vue?b0c6","webpack:///./src/views/Bottom/Tools/VideoBase.vue?7abb","webpack:///./src/views/Editor/TextRender.vue?227b","webpack:///./src/views/Bottom/PosterToolTab.vue?c149"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","CanvasTextWrapper","canvas","text","options","trim","defaults","font","sizeToFill","maxFontSizeToFill","lineHeight","allowNewLine","lineBreak","textAlign","verticalAlign","justifyLines","paddingX","paddingY","fitParent","strokeText","renderHDPI","textDecoration","lineWidth","shadowBlur","opts","context","getContext","scale","devicePixelRatio","global","tempCtx","canvasWidth","width","canvasHeight","height","style","e","fontParts","EL_WIDTH","parentNode","clientWidth","EL_HEIGHT","clientHeight","MAX_TXT_WIDTH","MAX_TXT_HEIGHT","WORD_DELIMITER","toLocaleLowerCase","fontSize","match","textBlockHeight","lines","newLineIndexes","textPos","x","y","multiNewLineDelimiter","handleMultipleNewline","setFont","setLineHeight","validate","render","replace","indexOf","split","isNaN","toString","parseInt","wordsCount","newFontSize","fontSizeHasLimit","adjustFontSize","join","wrap","justify","setVertAlign","setHorizAlign","drawText","size","newLines","idx","words","checkLength","breakText","testString","tokenLen","sliced","leftover","forEach","word","index","measureText","k","maxLen","longestLineIndex","numWords","spaceLength","numOfSpaces","num","filler","delimiter","underline","beginPath","moveTo","lineTo","stroke","skipLineOnMatch","fillText","TypeError","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","staticClass","directives","rawName","makePoster","makeEnding","doExport","expression","on","$event","ref","player","pause","editlist","playerFinished","overlay","mosic","time_sec","clipImgChange","overlayActive","overlayDeactive","playerControllerEvent","timelines","showOverlay","overlayType","showAMix","poster","url","timelinesChange","timeChange","overlayChange","amixChange","amixActive","activeItem","tabSelect","showTooltab","showPlayerController","showTimeline","mainBoxResized","toolBeforeChange","toolValueChange","importProgress","staticStyle","_v","_s","toFixed","_e","seekPlayer","reloadPlayer","importFileSelect","exit","showDlg","setting","$emit","blur","class","active","encodeparam","preset","high_resolution","low_resolution","focus","model","callback","$$v","$set","portraitListener","portraitQuery","matchMedia","isCordova","navigator","userAgent","isIOS","toLowerCase","isAndroid","isPortrait","onchange","removeListener","addListener","matches","init","Cordova","console","log","sysFile","File","Promise","document","createElement","src","onload","addEventListener","onerror","head","append","Const","Overlay","Type","Image","Text","Mosic","Align","Left","Center","Right","Top","CaptureVideo","Duration","Operate","Init","VideoAdd","VideoSplit","VideoTimeModify","VideoRemove","VideoParamsModify","VideoSort","VideoRotate","VideoVFlip","VideoHFlip","VideoAspect","PosterModify","EndingModify","ImageAdd","ImageRemove","ImageModify","ImageTimeModify","MosicAdd","MosicRemove","MosicModify","MosicTimeModify","TextAdd","TextRemove","TextModify","TextTimeModify","FilterEnable","FilterDisable","FilterModify","BGMSet","BGMUnset","BGMParamsModify","AudioParamsModify","AudioEffectAdd","AudioEffectRemove","AudioEffectModify","AudioEffectTimeModify","AutoModify","Name","Reload","roundFloat","val","rotateVector","ox","oy","sx","sy","degrees","radians","Math","PI","cos","sin","NOREMOTE","clearAllCache","requestFileSystem","TEMPORARY","fs","root","getDirectory","f","removeRecursively","ResourceManager","remoteResRoot","location","protocol","localResRoot","cordovaModel","cordova","file","applicationDirectory","ResType","image","music","audio","filter","fontbg","assetResRoot","tempFs","folders","filesystem","remoteRel2Abs","rel1","rel2","localRel2Abs","assetRel2Abs","assetReadText","resolveLocalFileSystemURL","fEntry","reader","FileReader","readAsText","target","assetReadAsDataUrl","readAsDataURL","md5source","source","md5","reverse","getFolder","resType","folder","splited","currentFolder","getTempFolder","clearTempFiles","wait","temp","thumbs","all","fetchAssetResList","JSON","assetResRootJson","resIdx","parse","resList","map","list","source_asset_url","source_list","source_list_asset_url","fetchLocalResList","createReader","readEntries","entries","isDirectory","files","fetchRemoteResList","axios","remoteResRootJson","source_remote_url","download","source_list_remote_url","copyedResTypes","fetchResList","local","asset","remote","needCopyAsset","processItem","directoryName","filename","local_file","thumb_remote_url","thumb","local_file_list","assetList","assetFound","copyAssetRes","flatMap","then","createResFile","sourceUrl","absUrl","getFile","downloadRes","resItem","progress","sourceRemoteUrl","percent","allProgress","totalItem","reduce","a","b","remove","xhr","XMLHttpRequest","open","responseType","onprogress","loaded","total","status","response","send","createWriter","writer","onwriteend","write","copingAssetRes","assetResItem","loader","copyAssetResIntenal","setTimeout","dEntry","copyTo","getParent","getBeautySource","allFilter","beautyFilter","find","toNativeURL","getMosicSource","found","pre","nxt","concat","getTransformSource","_ending","getLastEnding","localStorage","getItem","error","saveLastEnding","setItem","stringify","operateHistory","undoOperateHistory","ops","getOperateHistory","undo","pop","saveOperateHistory","restore","extend","history","createOperateHistory","operateType","targetId","op","amix","face","video","bgm","enabled","pushOperateHistory","updateOperateHistory","lastOp","oldMosic","id","oldOverlay","type","oldTimeline","VFPreset","brown","colorful","flash","oldfilm","line","red_border","pink_border","black_border","colormix","VFPresetName","double","DARPreset","Number","toEven","ret","timelineIdSeq","overlayIdSeq","THIS","video_min_sec","first","end_sec","start_sec","add_timelines","tl","left_drag_offset","offset_sec","total_sec","rotate","vflip","hflip","eq","brightness","contrast","saturation","gamma","ending","getRotatedWidth","timeline","getRotatedHeight","update_timelines","UGCApp","ffplay","command","update_timeline_videobase","config","noReady","input","output","output_thumb","getConfig","setConfig","add_amix","new","update_amix","add_overlay","w","h","max","update_overlay","preview_resolution","resolution_dar","allPromise","ffplayCommand","remove_overlay","_transform_source","v","mosic_source","add_mosic","update_mosic","beauty_level","beauty_source","cut","dar","auto","volume","cur","isAuto","keys","previewparam","resolution_box","maxWidth","min","resolution_box_src","maxHeight","dar_d","hardware_encoder","bitrate","resolution","high_encodeparam","low_encodeparam","operate","UGCResourceManager","cmd","args","getUGCParam","opt","main_w","main_h","oformat","endingTimeline","gltransform","movie","RotateToTranspose","0","90","180","270","item","transpose","src_rotate","transform_source","max_num","RegExp","lutpng","template","box","hypot","offset_Sec","getPosterPlayerParam","getPlayerParam","ugcparam","getExportParam","des","preset_encodeparam","vcodec","CordovaModel","component","show_overlay","show_amix","currentStart","currentMove","changed","postermode","poster_url","posterLoadError","_l","pps","timelineChange","timelineActive","nativeOn","endingClick","dragging","hasEnding","overlay_type","currentTimeStr","totalTimeStr","span","toggleActive","stopPropagation","leftStart","leftMove","leftEnd","leftDragging","outbound","leftOutBound","overlay_mode","_t","rightStart","rightMove","rightEnd","rightDragging","rightOutBound","is_amix","boxStyle","typeIcon","dragStart","dragMove","dragEnd","typeText","fmtSeconds","DefaultOptions","features","layouts","dynamicLayouts","Features","leftToLeft","layout","left","diff","from","to","leftToRight","right","rightToLeft","rightToRight","leftToCenter","targetHF","rightToCenter","centerToCenter","layoutHF","centerToLeft","centerToRight","topToTop","top","topToBottom","bottom","bottomToTop","bottomToBottom","topToMiddle","bottomToMiddle","middleToMiddle","middleToTop","middleToBottom","inside","outside","center","middle","Magnet","assign","feature","featureFn","xTarget","yTarget","getTargetPosition","newLayout","targets","findTargets","abs","createLayout","ss","duration","firstThumb","thumbLoadError","Util","getCdvUrl","entry","toInternalURL","getLocalUrl","normalizeFileUrl","toURL","search","decodeURI","getThumbList","ffmpeg","format","thumbPath","_","cacheDirectory","out","start","cdvurl","Url","query","random","getThumb","localSrc","resolveLocalFileSystemURI","catch","thumbCount","Transcode","singleEx","single","forceSoftwareEncoder","pOverlay","pIn","_cacheWidth","videoScale","uiBox","offsetX","offsetY","imgs","rotatedSize","sqrt","isGif","lastIndexOf","pOut","fps","aspectLimit4k","vfilter","afilter","desSrc","Date","getTime","pow","newDuration","pts","report","sendToDCIM","dcimDesSrc","scanFile","mergeEx","videos","merge","renderParams","param","hasAudio","cancel","thumbsFolders","fileName","loading","debug","fun","speed","eventID","EventID","AspectRatio","SeekBegin","playing","Play","Pause","SeekEnd","hasHistory","Undo","hide","toolTab","overlayTabSelect","select","TabID","isCurTimelineRemovable","curTimelineIsEnding","VideoBase","AddImage","AddLocalImage","AddText","Face","Filter","AudioBase","BGM","AudioEffect","disabled","clicked","icon","Edit","Template","Settings","Remove","Done","tabid","title","change","dialogAccept","beforechange","dialogAcceptable","close","accept","touchend","pickAudio","allBGM","selectedBGMName","toggleBGM","Editlist","mainActive","chooseSubItem","subActive","visibility","noactive","toggleEffect","isNeedDownload","chooseSticker","scroller","_b","fixTab","$attrs","domProps","composing","templateActive","clearTemplate","templateName","chooseBubble","clearFont","family","chooseFont","align","chooseAlign","colorTabActive","color","background","borderColor","shadowColor","backgroundColor","can","bgImg","naturalWidth","naturalHeight","ctx","clearRect","blob","dataUrl","resumeNormal","onDrop","level","curAspectRatio","choose","AspectRatioIcon","boxClick","touchstart","touchmove","hideMagnet","imgLoaded","imgLoadError","edit_filter","resize_start","resize_move","resize_end","magnetX","magnetY","angleAndScale","pointA","pointB","pointC","getElementPageXY","element","meta","seekdone","show","showscreen","pos","saving","save","onPreviewLoaded","overlayEdit","rendering","onAvatarClick","avatarUrl","avatarLoadError","avatarFile","nickName","nickNamePlaceholder","desc","renderError","cropping","cropSave","isMenuOpen","pickImage","deleteAvatar","fixedNumber","sourceType","Camera","PictureSourceType","PHOTOLIBRARY","allowEdit","mediaType","MediaType","PICTURE","destinationType","DestinationType","NATIVE_URI","done","_m","thumbUrl","exportProgress","progress_sec","isopen","importFile","captureFile","clipModel","correctOrientation","isRetry","restoreArray","restoreOp","uri","Vue","use","VTS","MuseUI","productionTip","isMobile","App","$mount"],"mappings":"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","file":"js/app.22726ae8.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextOverlay.vue?vue&type=style&index=1&id=b4f62e66&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextOverlay.vue?vue&type=style&index=1&id=b4f62e66&lang=less&scoped=true&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerController.vue?vue&type=style&index=0&id=7ba491a2&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerController.vue?vue&type=style&index=0&id=7ba491a2&lang=less&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScrollTab.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScrollTab.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItem.vue?vue&type=style&index=0&id=475fe86e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItem.vue?vue&type=style&index=0&id=475fe86e&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolDialog.vue?vue&type=style&index=0&id=1f0d95ac&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolDialog.vue?vue&type=style&index=0&id=1f0d95ac&lang=less&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HScrollBar.vue?vue&type=style&index=0&id=68f1f59b&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HScrollBar.vue?vue&type=style&index=0&id=68f1f59b&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverlayToolTab.vue?vue&type=style&index=0&id=6729f64e&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverlayToolTab.vue?vue&type=style&index=0&id=6729f64e&lang=less&scoped=true&\"","\nfunction CanvasTextWrapper(canvas, text, options) {\n    'use strict';\n\n    if(!text.trim())return;\n    \n    let defaults = {\n        font: '18px Arial, sans-serif',\n        sizeToFill: false,\n        maxFontSizeToFill: false,\n        lineHeight: 1,\n        allowNewLine: true,\n        lineBreak: 'none',\n        textAlign: 'left',\n        verticalAlign: 'top',\n        justifyLines: false,\n        paddingX: 0,\n        paddingY: 0,\n        fitParent: false,\n        strokeText: false,\n        renderHDPI: true,\n        textDecoration: 'none',\n        lineWidth: 0.02,\n        shadowBlur: 0.5\n    };\n\n    let opts = {};\n\n    for (let key in defaults) {\n        opts[key] = options.hasOwnProperty(key) ? options[key] : defaults[key];\n    }\n\n    let context = canvas.getContext('2d');\n    context.font = opts.font;\n    // context.textBaseline = 'midd';\n\n    let scale = 1.1\n    let devicePixelRatio = (typeof global !== 'undefined') ? global.devicePixelRatio : window.devicePixelRatio;\n\n    if (opts.renderHDPI && devicePixelRatio > 1) {\n        let tempCtx = {};\n\n        // store context settings in a temp object before scaling otherwise they will be lost\n        for (let key in context) {\n            tempCtx[key] = context[key];\n        }\n\n        let canvasWidth = canvas.width;\n        let canvasHeight = canvas.height;\n        scale = devicePixelRatio;\n\n        canvas.width = canvasWidth * scale;\n        canvas.height = canvasHeight * scale;\n        canvas.style.width = canvasWidth * scale * 0.5 + 'px';\n        canvas.style.height = canvasHeight * scale * 0.5 + 'px';\n\n        // restore context settings\n        for (let key in tempCtx) {\n            try {\n                context[key] = tempCtx[key];\n            } catch (e) {\n                //\n            }\n        }\n\n        context.scale(scale, scale);\n    }\n\n    let EL_WIDTH = (!opts.fitParent ? canvas.width : canvas.parentNode.clientWidth) / scale;\n    let EL_HEIGHT = (!opts.fitParent ? canvas.height : canvas.parentNode.clientHeight) / scale;\n    let MAX_TXT_WIDTH = EL_WIDTH - (opts.paddingX * 2);\n    let MAX_TXT_HEIGHT = EL_HEIGHT - (opts.paddingY * 2);\n    let WORD_DELIMITER = opts.lineBreak.toLocaleLowerCase() === \"none\" ? '' : /\\s+/ ;\n\n    let fontSize = opts.font.match(/\\d+(px|em|%)/g) ? +opts.font.match(/\\d+(px|em|%)/g)[0].match(/\\d+/g) : 18;\n    let textBlockHeight = 0;\n    let lines = [];\n    let newLineIndexes = [];\n    let textPos = { x: 0, y: 0 };\n    let lineHeight = 0;\n    let fontParts;\n    let multiNewLineDelimiter = '\\u200B';\n\n    text = handleMultipleNewline(text);\n    setFont(fontSize);\n    setLineHeight();\n    validate();\n    render();   \n\n    function handleMultipleNewline(text) {\n        do {\n            text = text.replace(/\\n\\n/g, '\\n' + multiNewLineDelimiter + '\\n');\n        } while (text.indexOf('\\n\\n') > -1);\n        return text;\n    }\n\n    function setFont(fontSize) {\n        if (!fontParts) fontParts = (!opts.sizeToFill) ? opts.font.split(/\\b\\d+px\\b/i) : context.font.split(/\\b\\d+px\\b/i);\n        context.font = fontParts[0] + fontSize + 'px' + fontParts[1];\n        context.lineWidth = fontSize * opts.lineWidth;\n        context.shadowBlur = fontSize * opts.shadowBlur;\n    }\n\n    function setLineHeight() {\n        if (!isNaN(opts.lineHeight)) {\n            lineHeight = fontSize * opts.lineHeight;\n        } else if (opts.lineHeight.toString().indexOf('px') !== -1) {\n            lineHeight = parseInt(opts.lineHeight);\n        } else if (opts.lineHeight.toString().indexOf('%') !== -1) {\n            lineHeight = (parseInt(opts.lineHeight) / 100) * fontSize;\n        }\n    }\n\n    function render() {\n        if (opts.sizeToFill) {\n            let wordsCount = text.trim().split(WORD_DELIMITER).length;\n            let newFontSize = 0;\n            let fontSizeHasLimit = opts.maxFontSizeToFill !== false;\n\n            do {\n                if (fontSizeHasLimit) {\n                    if (++newFontSize <= opts.maxFontSizeToFill) {\n                        adjustFontSize(newFontSize);\n                    } else {\n                        break;\n                    }\n                } else {\n                    adjustFontSize(++newFontSize);\n                }\n            } while (textBlockHeight < MAX_TXT_HEIGHT && (lines.join(WORD_DELIMITER ? ' ' : '').split(WORD_DELIMITER).length == wordsCount));\n\n            adjustFontSize(--newFontSize);\n        } else {\n            wrap();\n        }\n\n        if (opts.justifyLines && opts.lineBreak !== 'word') {\n            justify();\n        }\n\n        setVertAlign();\n        setHorizAlign();\n        drawText();\n    }\n\n    function adjustFontSize(size) {\n        setFont(size);\n        lineHeight = size;\n        wrap();\n    }\n\n    function wrap() {\n        if (opts.allowNewLine) {\n            let newLines = text.trim().split('\\n');\n            for (let i = 0, idx = 0; i < newLines.length - 1; i++) {\n                idx += newLines[i].trim().split(WORD_DELIMITER).length;\n                newLineIndexes.push(idx)\n            }\n        }\n\n        let words = text.trim().split(WORD_DELIMITER);\n        checkLength(words);\n        breakText(words);\n\n        textBlockHeight = lines.length * lineHeight;\n    }\n\n    function checkLength(words) {\n        let testString, tokenLen, sliced, leftover;\n\n        words.forEach(function (word, index) {\n            testString = '';\n            tokenLen = context.measureText(word).width;\n\n            if (tokenLen > MAX_TXT_WIDTH) {\n                let k = 0;\n                for (; (context.measureText(testString + word[k]).width <= MAX_TXT_WIDTH) && (k < word.length); k++) {\n                    testString += word[k];\n                }\n\n                sliced = word.slice(0, k);\n                leftover = word.slice(k);\n                words.splice(index, 1, sliced, leftover);\n            }\n        });\n    }\n\n    function breakText(words) {\n        lines = [];\n        for (let i = 0, j = 0; i < words.length; j++) {\n            lines[j] = '';\n\n            if (opts.lineBreak !== 'word') {\n                if (context.measureText(lines[j] + words[i]).width > MAX_TXT_WIDTH) {\n                    break;\n                } else {\n                    while ((context.measureText(lines[j] + words[i]).width <= MAX_TXT_WIDTH) && (i < words.length)) {\n\n                        lines[j] += words[i] + (WORD_DELIMITER ? ' ' : '');\n                        i++;\n\n                        if (opts.allowNewLine) {\n                            for (let k = 0; k < newLineIndexes.length; k++) {\n                                if (newLineIndexes[k] === i) {\n                                    j++;\n                                    lines[j] = '';\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n                lines[j] = (WORD_DELIMITER ? lines[j].trim() : lines[j]);\n            } else {\n                lines[j] = words[i];\n                i++;\n            }\n        }\n    }\n\n    function justify() {\n        let maxLen, longestLineIndex, tokenLen;\n        for (let i = 0; i < lines.length; i++) {\n            tokenLen = context.measureText(lines[i]).width;\n\n            if (!maxLen || tokenLen > maxLen) {\n                maxLen = tokenLen;\n                longestLineIndex = i;\n            }\n        }\n\n        // fill lines with extra spaces\n        let numWords, spaceLength, numOfSpaces, num, filler;\n        let delimiter = '\\u200A';\n        for (i = 0; i < lines.length; i++) {\n            if (i === longestLineIndex) continue;\n\n            numWords = lines[i].trim().split(WORD_DELIMITER).length;\n            if (numWords <= 1) continue;\n\n            lines[i] = lines[i].trim().split(WORD_DELIMITER).join(delimiter);\n\n            spaceLength = context.measureText(delimiter).width;\n            numOfSpaces = (maxLen - context.measureText(lines[i]).width) / spaceLength;\n            num = numOfSpaces / (numWords - 1);\n\n            filler = '';\n            for (let j = 0; j < num; j++) {\n                filler += delimiter;\n            }\n\n            lines[i] = lines[i].trim().split(delimiter).join(filler);\n        }\n    }\n\n    function underline(text, x, y) {\n        let width = context.measureText(text).width;\n\n        switch (context.textAlign) {\n            case 'center':\n                x -= (width / 2);\n                break;\n            case 'right':\n                x -= width;\n                break;\n        }\n\n        context.beginPath();\n        context.moveTo(x, y);\n        context.lineTo(x + width, y);\n        context.stroke();\n    }\n\n    function drawText() {\n        let skipLineOnMatch = multiNewLineDelimiter + (WORD_DELIMITER ? ' ' : '');\n        for (let i = 0; i < lines.length; i++) {\n            textPos.y = parseInt(textPos.y) + lineHeight;\n            if (lines[i] !== skipLineOnMatch) {\n                context.fillText(lines[i], textPos.x, textPos.y);\n\n                if (opts.strokeText) {\n                    context.strokeText(lines[i], textPos.x, textPos.y);\n                }\n\n                if (opts.textDecoration.toLocaleLowerCase() === 'underline') {\n                    underline(lines[i], textPos.x, textPos.y);\n                }\n            }\n        }\n    }\n\n    function setHorizAlign() {\n        context.textAlign = opts.textAlign;\n\n        if (opts.textAlign == 'center') {\n            textPos.x = EL_WIDTH / 2;\n        } else if (opts.textAlign == 'right') {\n            textPos.x = EL_WIDTH - opts.paddingX;\n        } else {\n            textPos.x = opts.paddingX;\n        }\n    }\n\n    function setVertAlign() {\n        if (opts.verticalAlign == 'middle') {\n            textPos.y = (EL_HEIGHT - textBlockHeight) / 2;\n        } else if (opts.verticalAlign == 'bottom') {\n            textPos.y = EL_HEIGHT - textBlockHeight - opts.paddingY;\n        } else {\n            textPos.y = opts.paddingY;\n        }\n    }\n\n    function validate() {\n        if (typeof text !== 'string')\n            throw new TypeError('The second parameter must be a String.');\n\n        if (isNaN(fontSize))\n            throw new TypeError('Cannot parse \"font\".');\n\n        if (isNaN(lineHeight))\n            throw new TypeError('Cannot parse \"lineHeight\".');\n\n        if (opts.textAlign.toLocaleLowerCase() !== 'left' && opts.textAlign.toLocaleLowerCase() !== 'center' && opts.textAlign.toLocaleLowerCase() !== 'right' && opts.textAlign.toLocaleLowerCase() !== 'top')\n            throw new TypeError('Property \"textAlign\" must be set to either \"left\", \"center\", \"right, or \"top\".');\n\n        if (opts.verticalAlign.toLocaleLowerCase() !== 'top' && opts.verticalAlign.toLocaleLowerCase() !== 'middle' && opts.verticalAlign.toLocaleLowerCase() !== 'bottom')\n            throw new TypeError('Property \"verticalAlign\" must be set to either \"top\", \"middle\", or \"bottom\".');\n\n        if (typeof opts.justifyLines !== 'boolean')\n            throw new TypeError('Property \"justifyLines\" must be a Boolean.');\n\n        if (isNaN(opts.paddingX))\n            throw new TypeError('Property \"paddingX\" must be a Number.');\n\n        if (isNaN(opts.paddingY))\n            throw new TypeError('Property \"paddingY\" must be a Number.');\n\n        if (typeof opts.fitParent !== 'boolean')\n            throw new TypeError('Property \"fitParent\" must be a Boolean.');\n\n        if (opts.lineBreak.toLocaleLowerCase() !== 'auto'\n            && opts.lineBreak.toLocaleLowerCase() !== 'word'\n            && opts.lineBreak.toLocaleLowerCase() !== 'none')\n            throw new TypeError('Property \"lineBreak\" must be set to either \"auto\", \"none\" or \"word\".');\n\n        if (typeof opts.sizeToFill !== 'boolean')\n            throw new TypeError('Property \"sizeToFill\" must be a Boolean.');\n\n        if (typeof opts.strokeText !== 'boolean')\n            throw new TypeError('Property \"strokeText\" must be a Boolean.');\n\n        if (typeof opts.renderHDPI !== 'boolean')\n            throw new TypeError('Property \"renderHDPI\" must be a Boolean.');\n\n        if (opts.textDecoration.toLocaleLowerCase() !== 'none' && opts.textDecoration.toLocaleLowerCase() !== 'underline')\n            throw new TypeError('Property \"textDecoration\" must be set to either \"none\" or \"underline\".');\n    }\n\n    return (lines);\n}\n\nexport default CanvasTextWrapper","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageOverlay.vue?vue&type=style&index=0&id=7a96ab86&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageOverlay.vue?vue&type=style&index=0&id=7a96ab86&lang=less&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Clip.vue?vue&type=style&index=0&id=3e2e709d&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Clip.vue?vue&type=style&index=0&id=3e2e709d&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolTab.vue?vue&type=style&index=0&id=7329176e&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolTab.vue?vue&type=style&index=0&id=7329176e&lang=less&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItemThumb.vue?vue&type=style&index=0&id=21cbc8a0&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItemThumb.vue?vue&type=style&index=0&id=21cbc8a0&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BGM.vue?vue&type=style&index=0&id=4d53dd9b&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BGM.vue?vue&type=style&index=0&id=4d53dd9b&lang=less&scoped=true&\"","let i;\r\nconst Const = {\r\n    Overlay: {\r\n        Type: {\r\n            // 使用bit位作为覆盖物类型，方便在同一个时间轴组合显示不同的覆盖物\r\n            Image: 1 << (i = 1),\r\n            Text: 1 << ++i,\r\n            Mosic: 1 << ++i\r\n        },\r\n        Align: {\r\n            Left: i = 0,\r\n            Center: ++i,\r\n            Right: ++i,\r\n            Top: ++i\r\n        }\r\n    },\r\n    CaptureVideo: {\r\n        Duration: 10 * 60 //seconds\r\n    },\r\n    Operate: {\r\n        Init: Operate(\"初始\", i = 0),\r\n        VideoAdd: Operate(\"添加视频\", ++i),\r\n        VideoSplit: Operate(\"分割视频\", ++i),\r\n        VideoTimeModify: Operate(\"视频时间修改\", ++i),\r\n        VideoRemove: Operate(\"删除视频\", ++i),\r\n        VideoParamsModify: Operate(\"视频参数修改\", ++i),\r\n        VideoSort: Operate(\"视频排序\", ++i),\r\n        VideoRotate: Operate(\"视频旋转\", ++i),\r\n        VideoVFlip: Operate(\"上下翻转视频\", ++i),\r\n        VideoHFlip: Operate(\"左右翻转视频\", ++i),\r\n        VideoAspect: Operate(\"画幅比例修改\", ++i),\r\n        PosterModify: Operate(\"封面修改\", ++i),\r\n        EndingModify: Operate(\"封低修改\", ++i),\r\n        ImageAdd: Operate(\"添加贴纸\", ++i),\r\n        ImageRemove: Operate(\"删除贴纸\", ++i),\r\n        ImageModify: Operate(\"贴纸修改\", ++i),\r\n        ImageTimeModify: Operate(\"贴纸时间修改\", ++i),\r\n        MosicAdd: Operate(\"添加马赛克\", ++i),\r\n        MosicRemove: Operate(\"删除马赛克\", ++i),\r\n        MosicModify: Operate(\"马赛克修改\", ++i),\r\n        MosicTimeModify: Operate(\"马赛克时间修改\", ++i),\r\n        TextAdd: Operate(\"添加文字\", ++i),\r\n        TextRemove: Operate(\"删除文字\", ++i),\r\n        TextModify: Operate(\"文字修改\", ++i),\r\n        TextTimeModify: Operate(\"文字时间修改\", ++i),\r\n        FilterEnable: Operate(\"启用滤镜\", ++i),\r\n        FilterDisable: Operate(\"关闭滤镜\", ++i),\r\n        FilterModify: Operate(\"滤镜参数修改\", ++i),\r\n        BGMSet: Operate(\"设置背景音\", ++i),\r\n        BGMUnset: Operate(\"删除背景音\", ++i),\r\n        BGMParamsModify: Operate(\"背景音参数修改\", ++i),\r\n        AudioParamsModify: Operate(\"音频参数修改\", ++i),\r\n        AudioEffectAdd: Operate(\"添加音效\", ++i),\r\n        AudioEffectRemove: Operate(\"删除音效\", ++i),\r\n        AudioEffectModify: Operate(\"音效修改\", ++i),\r\n        AudioEffectTimeModify: Operate(\"音效时间修改\", ++i),\r\n        AutoModify: Operate(\"自动调整\", ++i)\r\n    }\r\n};\r\n\r\nfunction Operate(Name, Type, Reload) {\r\n    return {\r\n        Name,\r\n        Type,\r\n        Reload\r\n    };\r\n}\r\n\r\nexport default Const;","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Clip')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.makePoster&&!_vm.makeEnding&&!_vm.doExport),expression:\"!makePoster&&!makeEnding&&!doExport\"}],staticClass:\"main-maker\"},[_c('ClipTop',{on:{\"export\":function($event){_vm.doExport = true}}}),_c('div',{ref:\"mainBox\",staticClass:\"main-box\"},[_c('PreviewPlayer',{ref:\"preview\",staticClass:\"main-video\",attrs:{\"pause\":_vm.player.pause || _vm.doExport,\"editlist\":_vm.editlist},on:{\"finished\":_vm.playerFinished,\"resize\":function($event){!_vm.makePoster&&!_vm.makeEnding&&!_vm.doExport}}}),_c('ClipImg',{ref:\"overlayEditor\",staticClass:\"overlay-box\",attrs:{\"overlays_in\":_vm.editlist.overlay,\"mosics_in\":_vm.editlist.mosic,\"time_sec\":_vm.editlist.time_sec},on:{\"change\":_vm.clipImgChange,\"overlayActive\":_vm.overlayActive,\"overlayDeactive\":_vm.overlayDeactive}})],1),_c('div',{ref:\"toolBox\",staticClass:\"toolBox\"},[_c('PlayerController',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showPlayerController),expression:\"showPlayerController\"}],attrs:{\"playing\":!_vm.player.pause},on:{\"event\":_vm.playerControllerEvent}}),_c('ClipTimeline',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showTimeline),expression:\"showTimeline\"}],ref:\"timeline\",attrs:{\"timelines_in\":_vm.editlist.timelines,\"show_overlay\":_vm.showOverlay,\"overlay_type\":_vm.overlayType,\"show_amix\":_vm.showAMix,\"playing\":!_vm.player.pause,\"poster\":_vm.editlist.poster.url},on:{\"timelinesChange\":_vm.timelinesChange,\"timeChange\":_vm.timeChange,\"overlayChange\":_vm.overlayChange,\"overlayActive\":_vm.overlayActive,\"amixChange\":_vm.amixChange,\"amixActive\":_vm.amixActive,\"on_poster_click\":function($event){_vm.makePoster=1},\"on_ending_click\":function($event){_vm.makeEnding=1}}}),_c('ToolTab',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showTooltab),expression:\"showTooltab\"}],ref:\"toolTab\",attrs:{\"editlist\":_vm.editlist,\"activeItem\":_vm.activeItem},on:{\"select\":_vm.tabSelect}}),_c('ToolDialog',{ref:\"toolDlg\",attrs:{\"editlist\":_vm.editlist},on:{\"close\":function($event){_vm.showTooltab=_vm.showPlayerController=_vm.showTimeline=true;_vm.mainBoxResized()},\"beforechange\":_vm.toolBeforeChange,\"change\":_vm.toolValueChange}})],1),(_vm.importProgress >= 0)?_c('div',{staticClass:\"spin\"},[_c('div',[_c('mu-circular-progress',{attrs:{\"mode\":\"determinate\",\"value\":_vm.importProgress*100}}),_c('br'),_c('span',{staticStyle:{\"font-size\":\"14px\"}},[_vm._v(\"导入中 \"+_vm._s((_vm.importProgress*100).toFixed(2))+\"%\")])],1)]):_vm._e()],1),(_vm.makePoster)?_c('PosterMaker',{attrs:{\"editlist\":this.editlist},on:{\"close\":function($event){_vm.makePoster = false; _vm.seekPlayer(0); _vm.reloadPlayer();}}}):_vm._e(),(_vm.makeEnding)?_c('EndingMaker',{on:{\"close\":function($event){_vm.makeEnding = false; _vm.reloadPlayer();}}}):_vm._e(),(_vm.doExport)?_c('Exporter',{ref:\"exporter\",on:{\"close\":function($event){_vm.doExport = false}}}):_vm._e(),_c('Importer',{ref:\"importer\",attrs:{\"editlist\":_vm.editlist},on:{\"select\":_vm.importFileSelect,\"progress\":function($event){_vm.importProgress=$event}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-title\"},[_c('mu-button',{attrs:{\"large\":\"\",\"icon\":\"\"},on:{\"click\":_vm.exit}},[_c('mu-icon',{attrs:{\"color\":\"white\",\"size\":\"36\",\"value\":\"chevron_left\"}})],1),_c('div',{staticStyle:{\"width\":\"100%\",\"text-align\":\"center\"}}),_c('mu-button',{ref:\"showDlgBtn\",attrs:{\"icon\":\"\",\"large\":\"\"},on:{\"click\":_vm.showDlg}},[_c('mu-icon',{attrs:{\"color\":_vm.setting?'red':'white',\"size\":\"24\",\"value\":\"settings\"}})],1),_c('mu-button',{attrs:{\"color\":\"red\",\"small\":\"\",\"round\":\"\"},on:{\"click\":function($event){return _vm.$emit('export')}}},[_vm._v(\" 导出 \")]),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.setting),expression:\"setting\"}],ref:\"dlg\",staticClass:\"settings-dlg\",attrs:{\"tabindex\":\"-1\"},on:{\"blur\":_vm.blur}},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"setting-title\"},[_vm._v(\"导出设置\")]),_c('div',{staticClass:\"content-top\"},[_c('div',{staticClass:\"content-item\",class:{active:_vm.encodeparam.preset=='high'},on:{\"click\":function($event){_vm.encodeparam.preset='high'}}},[_vm._v(\" 视频质量优先 \"),_c('div',{staticClass:\"content-desc\"},[_vm._v(\"质量更加，生成速度较慢\")]),_c('div',{staticClass:\"content-resolution\"},[_vm._v(\"分辨率 \"+_vm._s(_vm.high_resolution))])]),_c('div',{staticClass:\"content-item\",class:{active:_vm.encodeparam.preset=='low'},on:{\"click\":function($event){_vm.encodeparam.preset='low'}}},[_vm._v(\" 视频大小优先 \"),_c('div',{staticClass:\"content-desc\"},[_vm._v(\"大小更少，生成速度较快\")]),_c('div',{staticClass:\"content-resolution\"},[_vm._v(\"分辨率 \"+_vm._s(_vm.low_resolution))])])]),_c('div',{staticClass:\"content-other\"},[_vm._v(\" 硬编码 \"),_c('mu-switch',{on:{\"change\":_vm.focus},model:{value:(_vm.encodeparam.hardware_encoder),callback:function ($$v) {_vm.$set(_vm.encodeparam, \"hardware_encoder\", $$v)},expression:\"encodeparam.hardware_encoder\"}})],1)])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// isCordova = isCordova || true\n\nlet portraitListener = null;\nlet portraitQuery = window.matchMedia('(orientation: portrait)');\nlet isCordova = navigator.userAgent.indexOf(\"(cordova)\")>=0;\nexport default {\n    isCordova() {\n        return isCordova;\n    },\n    isIOS() {\n        return navigator.userAgent.toLowerCase().indexOf(\"iphone\") >= 0\n    },\n    isAndroid() {\n        return navigator.userAgent.toLowerCase().indexOf(\"android\") >= 0\n    },\n    isPortrait(onchange){\n        if(onchange){\n            portraitListener && portraitQuery.removeListener(portraitListener);\n            portraitQuery.addListener(portraitListener = onchange)\n        }\n        return portraitQuery.matches;\n    },\n    async init() {\n        if (!this.isCordova() || window.Cordova) return;\n        window.console.log(\"test\")\n        let sysFile = window.File;\n        await new Promise((o, x) => {\n            let s = document.createElement(\"script\");\n            if (this.isAndroid())\n                s.src = \"cdvfile://localhost/assets/www/cordova.js\";\n            else if (this.isIOS())\n                s.src = \"cordova/cordova.js\";\n                // s.src = \"cdvfile://localhost/bundle/www/cordova.js\";\n            s.onload = () => {\n                document.addEventListener(\"deviceready\", o);\n            };\n            s.onerror = x;\n            document.head.append(s);\n        });\n        //cordova-plugin-file 会覆盖 window.File 导致上传组件(stream-v1.js)错误\n        window.File = sysFile;\n\n    }\n}\n","/**\r\n * 保留10位小数：\r\n * 比较时使用，消除浮点算数错误导致的比较错误\r\n * @param {*} val\r\n */\r\nexport function roundFloat(val) {\r\n    return +val.toFixed(10);\r\n}\r\n\r\n/**\r\n * ox, oy: 原点\r\n * sx, sy: 源\r\n * degrees: 旋转角度\r\n */\r\nexport function rotateVector(ox, oy, sx, sy, degrees) {\r\n    sx -= ox;\r\n    sy -= oy;\r\n\r\n    let radians = (degrees * Math.PI) / 180;\r\n    let x = sx * Math.cos(radians) - sy * Math.sin(radians);\r\n    let y = sx * Math.sin(radians) + sy * Math.cos(radians);\r\n\r\n    return {\r\n        x: x + ox,\r\n        y: y + oy,\r\n    };\r\n}\r\n","\nimport axios from 'axios'\nimport md5 from 'md5'\nimport extend from \"extend\";\nimport cordovaModel from \"@/model/CordovaModel\";\nimport Const from \"@/const\";\n\nlet NOREMOTE = false;\n\nwindow.clearAllCache = async function(){\n    let fs=await new Promise(window.requestFileSystem.bind(window,window.TEMPORARY,0))\n\n    let f = await new Promise(fs.root.getDirectory.bind(fs.root,\"ugc_res\",{}))\n\n    return await new Promise(f.removeRecursively.bind(f))\n}\n\nlet ResourceManager = {\n    remoteResRoot: location.protocol == \"file:\" ? \"http://zb.vgemv.com/app_download/ugc/sdk/resource\" : \"ugc\",\n    localResRoot: \"ugc_res\",\n    get assetResRoot(){\n        if(cordovaModel.isIOS()) {\n            return cordova.file.applicationDirectory+\"ugcsdk.bundle/dist/ugc\" \n        } else {\n            return cordova.file.applicationDirectory+\"www/dist/ugc\" \n        }\n    },\n    ResType: {\n        image: \"image\",\n        music: \"music\",\n        audio: \"audio\",\n        filter: \"filter\",\n        font: \"font\",\n        fontbg: \"fontbg\",\n        mosic: \"mosic\"\n    },\n    get remoteResRootJson() {\n        return this.remoteResRoot + \"/res.json\";\n    },\n    get assetResRootJson() {\n        return this.assetResRoot + \"/res.json\";\n    },\n    tempFs: null,\n    folders: {},\n    async filesystem(){\n        if(!this.tempFs) {\n            this.tempFs =  await new Promise(\n                window.requestFileSystem.bind(window, window.TEMPORARY, 5 * 1024 * 1024));\n        }\n        return this.tempFs;\n    },\n    remoteRel2Abs(rel1, rel2) {\n        return this.remoteResRoot +\n            (rel1 ? (\"/\" + rel1) : \"\") +\n                (rel2 ? (\"/\" + rel2) : \"\");\n    },\n    localRel2Abs(rel1, rel2) {\n        return this.localResRoot +\n            (rel1 ? (\"/\" + rel1) : \"\") +\n                (rel2 ? (\"/\" + rel2) : \"\");\n    },\n    assetRel2Abs(rel1, rel2) {\n        return this.assetResRoot +\n            (rel1 ? (\"/\" + rel1) : \"\") +\n                (rel2 ? (\"/\" + rel2) : \"\");\n    },\n    async assetReadText(url){\n        let fEntry = await new Promise(\n            window.resolveLocalFileSystemURL.bind(window, url));\n        let file = await new Promise(\n            fEntry.file.bind(fEntry));\n        let reader = new FileReader();\n        let result = (await new Promise((o,x)=>{\n            reader.onload = o;\n            reader.onerror = x;\n            reader.readAsText(file);\n        })).target.result;\n\n        // window.console.log(\"Asset text:\",url, result);\n        return result\n    },\n    async assetReadAsDataUrl(url){\n        let fEntry = await new Promise(\n            window.resolveLocalFileSystemURL.bind(window, url));\n        let file = await new Promise(\n            fEntry.file.bind(fEntry));\n        let reader = new FileReader();\n        let result = (await new Promise((o,x)=>{\n            reader.onload = o;\n            reader.onerror = x;\n            reader.readAsDataURL(file);\n        })).target.result;\n\n        // window.console.log(\"Asset text:\",url, result);\n        return result\n    },\n    md5source(source){\n        return md5(source.split(\".\").slice(0,-1).join(\".\")) + \".\" + \n            source.split(\".\").reverse()[0];\n    },\n    async getFolder(resType, folder){\n\n        let fs = await this.filesystem();\n        let result;\n\n        folder = this.localRel2Abs(resType, folder);\n\n        if(this.folders[folder]) {\n            return this.folders[folder];\n        }\n\n        //确保目录存在\n        let splited = folder.split(\"/\");\n        for(let i = 0; i <= splited.length; i++){\n            let currentFolder = splited.slice(0, i).join(\"/\");\n            result = await new Promise(\n                fs.root.getDirectory.bind(fs.root, currentFolder, {create:true}));\n            this.folders[currentFolder] = result;\n        }\n        return result;\n    },\n    async getTempFolder() {\n        let fs = await this.filesystem();\n        return await new Promise(\n            fs.root.getDirectory.bind(fs.root, \"ugc_temp\", {create:true}));\n    },\n    async clearTempFiles(wait) {\n        let fs = await this.filesystem();\n        let temp = await this.getTempFolder();\n        let thumbs = await new Promise(\n            fs.root.getDirectory.bind(fs.root,\n                \"thumbs/\",{create: true}));\n        let all = [\n            new Promise(temp.removeRecursively.bind(temp)),\n            new Promise(thumbs.removeRecursively.bind(thumbs))\n        ]\n        if(wait) {\n            await Promise.all(all);\n        }\n    },\n    async fetchAssetResList(resType){\n        let resIdx = JSON.parse(await this.assetReadText(this.assetResRootJson));\n        let resList = JSON.parse(await this.assetReadText(this.assetRel2Abs(resIdx[resType])));\n\n        //修正相对路径\n        resList = resList.map(i => {\n            if (i.list) {\n                i.list = i.list.map(j => {\n                    if (j.source) {\n                        j.source_asset_url = this.assetRel2Abs(resType, j.source);\n                    }\n                    if (j.source_list) {\n                        j.source_list_asset_url = j.source_list.map( i => this.assetRel2Abs(resType, i));\n                    }\n                    return j;\n                })\n            } else if (i.source) {\n                i.source_asset_url = this.assetRel2Abs(resType, i.source);\n            }\n\n            return i;\n        })\n        return resList;\n                    \n    },\n    //获取本地的资源列表\n    async fetchLocalResList(resType) {\n        if (!window.requestFileSystem) {\n            return [];\n        }\n\n        let folder = await this.getFolder(resType);\n\n        let reader = folder.createReader();\n\n        let entries = await new Promise(\n            reader.readEntries.bind(reader));\n\n        //读一层目录\n        let files = await Promise.all(entries.map(async d => {\n            if (d.isDirectory) {\n                let reader = d.createReader();\n                let entries = await new Promise(\n                    reader.readEntries.bind(reader));\n                return {\n                    ...d,\n                    list: entries\n                }\n            }\n            else\n                return d;\n        }));\n\n        return files;\n    },\n    //获取服务端的资源列表\n    async fetchRemoteResList(resType) {\n        let resIdx = (await axios.get(this.remoteResRootJson)).data;\n        let resList = (await axios.get(this.remoteRel2Abs(resIdx[resType]))).data;\n\n        //修正相对路径\n        resList = resList.map(i => {\n            if (i.list) {\n                i.list = i.list.map(j => {\n                    if (j.source) {\n                        j.source_remote_url = this.remoteRel2Abs(resType, j.source);\n                        j.download = null;\n                    }\n                    if (j.source_list) {\n                        j.source_list_remote_url = j.source_list.map(i => this.remoteRel2Abs(resType, i));\n                        j.download = null;\n                    }\n                    return j;\n                })\n            } else if (i.source) {\n                i.source_remote_url = this.remoteRel2Abs(resType, i.source);\n                i.download = null;\n            }\n\n            return i;\n        })\n        return resList;\n    },\n    copyedResTypes: {},\n    //获取资源列表，包含本地记录\n    async fetchResList(resType) {\n        let local = await this.fetchLocalResList(resType);\n        let asset;\n        try{\n            asset = await this.fetchAssetResList(resType);\n        }catch(e){ /* */ }\n\n        let remote;\n        try{\n            remote = NOREMOTE? asset : await this.fetchRemoteResList(resType);\n        }catch(e){ \n            remote = asset;\n        }\n\n        window.console.log(\"remote\",remote);\n        window.console.log(\"local\",local);\n        window.console.log(\"asset\",asset);\n\n        if(!remote){\n            return;\n        }\n        \n        let needCopyAsset = [];\n        let processItem = (directoryName, i)=>{ // 处理一个资源的函数\n            let filename = this.md5source(i.source);\n            let name = i.name;\n            i.local_file = local.filter(j => j.name == filename)[0];\n            i.thumb_remote_url = this.remoteRel2Abs(resType, i.thumb);\n\n            if(i.source_list){\n                i.local_file_list = i.source_list.map( i => {\n                    let filename = this.md5source(i);\n                    return local.filter(j => j.name == filename)[0];\n                })\n            }\n\n            //未下载，检查asset有没有，有则从asset复制\n            if(!i.local_file && asset && !this.copyedResTypes[resType]){\n                let assetList = asset.filter(i=>i.name==directoryName&&i.list)[0];\n                let assetFound = assetList && assetList.list.filter(i=>i.name==name)[0] || \n                    asset.filter(i=>i.name==name)[0];\n\n                if(assetFound){\n                    needCopyAsset.push(this.copyAssetRes(resType, i, assetFound));\n                }\n\n                //TODO:\n                // 不访问网络的情况下，去掉 asset 里面没有找到本地资源的条目\n\n            }\n\n            \n            return i;\n        }\n\n        //比对\n        //只识别一层目录\n        let result = remote.map(i => {\n            //是目录\n            if (i.list) {\n                let directoryName = i.name;\n                i.list = i.list.flatMap( processItem.bind(this, directoryName) )\n            }\n            else {\n                processItem(null,i);\n            }\n            return i;\n        })\n\n        //等待 copy asset 完成\n        //Promise.allSettled 有兼容问题。这里令 needCopyAsset 里面的内容不抛错误来解决 Promise.all 会被错误终止的问题。\n        // await Promise.all(needCopyAsset);// 添加了download属性，让用户在复制时不会同时下载文件\n        Promise.all(needCopyAsset).then(() => {\n            this.copyedResTypes[resType] = true;\n        });\n\n        return result;\n    },\n    async createResFile(resType, sourceUrl) {\n        let fs = await this.filesystem();\n        \n        //确保目录存在\n        await this.getFolder(resType);\n        let filename = this.md5source(sourceUrl)\n\n        // window.console.log(\"createResFile: folder:\",folder)\n        let absUrl = this.localRel2Abs(resType, filename);\n        window.console.log(\"createResFile:\",absUrl)\n        return await new Promise(\n            fs.root.getFile.bind(fs.root, absUrl, {create:true}));\n        \n    },\n    async downloadRes(resType, resItem, progress) {\n        let sourceRemoteUrl = resItem.source_remote_url;\n        \n        resItem.download = {\n            percent: 0\n        };\n\n        let allProgress = [0];\n        let totalItem = 1 + (resItem.source_list && resItem.source_list.length || 0);\n\n        let fEntry = await this.createResFile(resType, resItem.source);\n        \n        try {\n            await this.download(sourceRemoteUrl, fEntry, (p) => {\n                resItem.download.percent = p;\n                allProgress[0] = p;\n                progress && \n                progress( allProgress.reduce((a,b)=>a+b)/totalItem ) \n            })\n\n            if(resItem.source_list){\n                let local_file_list = [];\n                await Promise.all(resItem.source_list_remote_url.map(async (i,idx) => {\n                    let fEntry = await this.createResFile(resType, resItem.source_list[idx]);\n                    try {\n                        await this.download(i, fEntry, (p) => \n                            allProgress[idx+1] = p && \n                            progress && \n                            progress( allProgress.reduce((a,b)=>a+b)/totalItem ) \n                        );\n                        local_file_list.push(fEntry);\n                    } catch(e) {\n                        fEntry.remove();\n                    }\n                }));\n\n                resItem.local_file_list = local_file_list;\n            }\n\n            delete resItem.download;\n\n            // res.source 的素材会下载并记录在 res.local_file 里面\n            resItem.local_file = fEntry;\n   \n            return fEntry;\n\n        } catch(e) {\n            fEntry.remove();\n            resItem.download = null; // delete不会触发vue更新\n            throw e;\n        }\n    },\n    \n    async download(url, fEntry, progress) {\n        let data = await new Promise((o, x) => {\n            var xhr = new XMLHttpRequest();\n            xhr.open('GET', url, true);\n            xhr.responseType = 'blob';\n            xhr.onprogress = async (e) => {\n                // window.console.log(\"download\",url,e.loaded)\n                progress && progress(\n                    e.loaded / e.total\n                )\n            }\n            xhr.onerror = x;\n            xhr.onload = function () {\n                if (this.status == 200) {\n                    o(this.response);\n                    // var blob = new Blob([this.response], { type: 'image/png' });\n                    // saveFile(dirEntry, blob, \"downloadedImage.png\");\n                } else {\n                    x(this.status);\n                }\n            };\n            xhr.send();\n        });\n\n        let writer = await new Promise(\n            fEntry.createWriter.bind(fEntry));\n\n        await new Promise((o, x) => {\n            writer.onwriteend = o;\n            writer.onerror = x;\n            writer.write(data)\n        })\n    },\n    copingAssetRes: {},\n    async copyAssetRes(resType, resItem, assetResItem) {\n        let key = resType + \"_\" + resItem.source + assetResItem.source;\n        let loader = this.copingAssetRes[key];\n        if(loader) {\n            return loader;\n        }\n\n        try {\n            loader = this.copingAssetRes[key] = this.copyAssetResIntenal(resType, resItem, assetResItem);\n            await loader;\n            delete this.copingAssetRes[key];\n            return loader;\n        } catch(e) {\n            delete this.copingAssetRes[key];\n            throw e;\n        }\n    },\n    async copyAssetResIntenal(resType, resItem, assetResItem) {\n\n        // 防止和下载冲突\n        resItem.download = {\n            percent: 0\n        };\n\n        // 先让界面渲染\n        await new Promise(o => setTimeout(o, 100));\n\n        let fEntry = await this.createResFile(resType, resItem.source);\n        // let dEntry = await new Promise(fEntry.getParent.bind(fEntry));\n        // 改为getFolder, 有缓存\n        let dEntry = await this.getFolder(resType);\n        \n\n        try{\n            await new Promise(fEntry.remove.bind(fEntry));\n        } catch (e){\n            // \n        }\n        \n        let file;\n        try{\n            file = await new Promise(\n                resolveLocalFileSystemURL.bind(null,assetResItem.source_asset_url));\n        } catch (e){\n            resItem.download = null;\n            window.console.log(assetResItem,\"not found\");\n            return ;\n        }\n        \n        try{\n            //此处，如果glsl文件重复的话（如 lut3d）会导致拷贝失败（前一个已经拷贝过来了）。忽略，因为文件已经有了。\n            fEntry = await new Promise(\n                file.copyTo.bind(file, dEntry, fEntry.name));\n        }catch(e){\n            ///\n        }\n        \n        resItem.local_file = fEntry;\n        resItem.download = null;\n\n        if(assetResItem.source_list_asset_url){\n            resItem.local_file_list = await Promise.all(assetResItem.source_list_asset_url.map(async (i,idx) => {\n                \n                let fEntry = await this.createResFile(resType, resItem.source_list[idx]);\n                let dEntry = await new Promise(fEntry.getParent.bind(fEntry));\n        \n                try{\n                    await new Promise(fEntry.remove.bind(fEntry));\n                } catch (e){\n                    // \n                }\n\n                let file;\n                try{\n                    file = await new Promise(\n                        resolveLocalFileSystemURL.bind(null,i));\n                } catch (e){\n                    window.console.log(assetResItem,\"not found\");\n                    return ;\n                }\n\n                try{\n                    //可能已存在\n                    return await new Promise(\n                        file.copyTo.bind(file, dEntry, fEntry.name));\n                }catch(e){\n                    return fEntry;\n                }\n                \n            }));\n        }\n\n    },\n\n    \n    async getBeautySource(){\n        let allFilter = await this.fetchResList(this.ResType.filter);\n        let beautyFilter = allFilter.find(i=>i.name==\"美颜\");\n        return beautyFilter.local_file.toNativeURL();\n    },\n    async getMosicSource(){\n        let allFilter = await this.fetchResList(this.ResType.filter);\n        let found = allFilter.reduce((pre,nxt) => pre.concat(nxt.list||[]), [...allFilter])\n            .find(i=>i.name==\"马赛克\");\n        return found.local_file.toNativeURL();\n    },\n    async getTransformSource(){\n        let allFilter = await this.fetchResList(this.ResType.filter);\n        let found = allFilter.find(i=>i.name==\"transform\");\n        return found.local_file.toNativeURL();\n    },\n    // 片尾\n    _ending: null,\n    getLastEnding() {\n        try {\n            return this._ending || JSON.parse(localStorage.getItem(\"last-ending\"));\n        } catch (error) {\n            return this._ending;\n        }\n    },\n    saveLastEnding(data) {\n        this._ending = data;\n        try {\n            localStorage.setItem(\"last-ending\", JSON.stringify(data));\n        } catch (error){\n            // \n        }\n    },\n    // 操作历史\n    operateHistory: null,\n    undoOperateHistory() {\n        let ops = this.getOperateHistory();\n        if(ops && ops.length > 1) {\n            let undo = ops.pop();\n\n            this.saveOperateHistory(ops);\n\n            return {\n                restore: extend(true, {}, ops[ops.length-1]),\n                undo: extend(true, {}, undo),\n                history: ops\n            };\n        }\n    },\n    getOperateHistory() {\n        if(!this.operateHistory) {\n            try {\n                // return this.operateHistory = JSON.parse(sessionStorage.getItem(\"operate-history\"));\n            } catch (error) {\n                // \n            }\n        }\n        return this.operateHistory || [];\n    },\n    createOperateHistory(editlist, operateType, targetId) {\n        let op = extend(true, {}, {\n            operateType: operateType,\n            targetId: targetId,\n            timelines: editlist.timelines,\n            amix: editlist.amix,\n            overlay: editlist.overlay,\n            mosic: editlist.mosic,\n            filter: editlist.filter,\n            face: editlist.face,\n            video: editlist.video,\n            audio: editlist.audio,\n            bgm: editlist.bgm,\n            poster: editlist.poster\n        });\n        // op.timelines.forEach(e => e.thumbs = []);\n        op.amix.forEach(e => e.active = false);\n        op.overlay.forEach(e => {\n            e.active = false;\n            e.enabled = true;\n        });\n        op.mosic.forEach(e => {\n            e.active = false;\n            e.enabled = true;\n        });\n\n        window.console.log(\"create operate history: \", op);\n        return this.pushOperateHistory(op);\n    },\n    // 1.ClipImg自动设置贴纸的位置和尺寸后调用此方法更新之前创建的“贴纸新增”、“马赛克新增”历史\n    // 因为“新增”历史中没有位置和尺寸信息会导致撤销后缩在左上角\n    // 2.TimelineItemThumb生成预览图时调用此方法更新之前创建的“视频新增”历史\n    // 因为“新增”历史中没有预览图会导致撤销后排序里图片显示为空\n    // target: 贴纸或马赛克、timeline\n    updateOperateHistory(operateType, target) {\n        let ops = this.getOperateHistory();\n        let lastOp = ops[ops.length-1];\n        if(!lastOp) {\n            return ops;\n        }\n\n        if(lastOp.operateType == operateType) {\n            if(operateType == Const.Operate.MosicAdd.Type) {\n                let oldMosic = lastOp.mosic.find(e => e.id == target.id);\n                if(oldMosic) {\n                    extend(oldMosic, target);\n                    oldMosic.active = false;\n                    oldMosic.enabled = true;\n                }\n            } else if(operateType == Const.Operate.ImageAdd.Type) {\n                let oldOverlay = lastOp.overlay.find(e => e.type == Const.Overlay.Type.Image && e.id == target.id); \n                if(oldOverlay) {\n                    extend(oldOverlay, target);\n                    oldOverlay.active = false;\n                    oldOverlay.enabled = true;\n                }\n            } else if(operateType == Const.Operate.TextAdd.Type) {\n                let oldOverlay = lastOp.overlay.find(e => e.type == Const.Overlay.Type.Text && e.id == target.id); \n                if(oldOverlay) {\n                    extend(oldOverlay, target);\n                    oldOverlay.active = false;\n                    oldOverlay.enabled = true;\n                }\n            }\n        }\n        // 需要特殊处理Const.Operate.Init.Type\n        if(operateType == Const.Operate.VideoAdd.Type) {\n            if(lastOp.operateType == operateType ||\n                lastOp.operateType == Const.Operate.Init.Type) {\n                    let oldTimeline = lastOp.timelines.find(e => e.id == target.id);\n                    if(oldTimeline) {\n                        oldTimeline.thumbs = [];\n                        extend(oldTimeline, target);\n                    }\n            }\n        }\n\n        window.console.log(\"update operate history: \", lastOp);\n        return this.saveOperateHistory(ops);\n    },\n    pushOperateHistory(data) {\n        let ops = this.getOperateHistory();\n        ops.push(data);\n        if(ops.length > 200) {\n            ops.splice(0, 1);\n        }\n        return this.saveOperateHistory(ops);\n    },\n    saveOperateHistory(ops){\n        try {\n            this.operateHistory = ops;\n            // sessionStorage.setItem(\"operate-history\", JSON.stringify(ops));\n            // 历史存到内存就行了\n        } catch (error) {\n            // \n        }\n        return ops;\n    }\n}\n\nexport default ResourceManager","import CordovaModel from \"@/model/CordovaModel\";\nimport Const from \"@/const\";\nimport {roundFloat} from \"@/utils\";\nimport UGCResourceManager from \"@/model/UGCResourceManager\"\n\nlet VFPreset = {\n    blur: \"avgblur\",\n    brown: \"colorchannelmixer=.393:.769:.189:0:.349:.686:.168:0:.272:.534:.131\",\n    colorful: \"geq=r='X/W*r(X,Y)':g='(1-X/W)*g(X,Y)':b='(H-Y)/H*b(X,Y)'\",\n    flash: \"hue=H=2*PI*t:s=sin(2*PI*t)+1\",\n    oldfilm: \"vignette='PI/4+random(1)*PI/50':eval=frame\",\n    line: \"split[a][b],[a]curves=darker[a],[a][b]blend=all_expr='if(eq(0,mod(Y,2)),A,B)':shortest=1\",\n    red_border: \"drawbox=color=red:t='min(iw,ih)/20'\",\n    pink_border: \"drawbox=color=pink:t='min(iw,ih)/20'\",\n    black_border: \"drawbox=color=black:t='min(iw,ih)/20'\",\n    colormix: \"edgedetect=mode=colormix\"\n}\n\nlet VFPresetName = {\n    blur: \"模糊\",\n    brown: \"旧照片\",\n    colorful: \"流光溢彩\",\n    flash: \"闪光\",\n    oldfilm: \"旧影片\",\n    line: \"黑条纹\",\n    double: \"双画面\",\n    red_border: \"红框\",\n    pink_border: \"粉框\",\n    black_border: \"黑框\",\n    colormix: \"彩绘\"\n}\n\nlet DARPreset = {\n    \"auto\":[0, 0],\n    // \"9:16\":[9, 16],\n    // \"16:9\":[16, 9],\n    // \"1:1\":[1, 1],\n    // \"3:4\":[3, 4],\n    // \"4:3\":[4, 3]\n}\n\nNumber.prototype.toEven = function(){\n    let ret = +this.toFixed(0)\n    if(ret % 2 != 0)\n        return ret - 1;\n    else \n        return ret;\n}\n\nlet timelineIdSeq = 0;\nlet overlayIdSeq = 1; // 贴图/贴字/音效，共用一个id序列, 0给封面用\n// let amixIdSeq = 0;\n\nlet THIS = {\n    VFPreset, VFPresetName, DARPreset,\n    editlist:{\n        time_sec:0,\n        video_min_sec:1, //视频裁剪最小时长限制\n        timelines:[],\n        get total_sec(){\n            if(this.timelines.length == 0)\n                return 0;\n\n            let first = this.timelines[0].end_sec - this.timelines[0].start_sec;\n\n            if(this.timelines.length == 1)\n                return first;\n            else\n                return [first,...this.timelines.slice(1)].reduce((pre,nxt)=>{\n                    return pre + nxt.end_sec - nxt.start_sec;\n                })\n        },\n        get timelineId(){\n            return timelineIdSeq ++;\n        },\n        add_timelines(tl){\n\n\n            let timelines = tl.map(o => {\n                return {\n                    id: timelineIdSeq++,\n                    url:\"\",\n                    thumbs:[],\n                    active:false,left_drag_offset:0,\n                    focus:false,\n                    width: 0,\n                    height: 0,\n                    start_sec: 0,\n                    offset_sec:0,\n                    end_sec: 0,\n                    total_sec: 0,\n                    rotate: 0,\n                    vflip: 0,\n                    hflip: 0,\n                    eq:{\n                        brightness:0,\n                        contrast:1,\n                        saturation:1,\n                        gamma:1,\n                    },\n                    // 内置getter会导致撤销出错，改为函数getRotatedWidth\n                    // get rotated_width(){\n                    //     if(this.rotate % 180 == 0)return this.width;\n                    //     else return this.height;\n                    // },\n                    // get rotated_height(){\n                    //     if(this.rotate % 180 == 0)return this.height;\n                    //     else return this.width;\n                    // },\n                    ...o\n                };\n            });\n\n            if(this.timelines.length && this.timelines[this.timelines.length - 1].ending) {\n                timelines = [...this.timelines.slice(0, this.timelines.length - 1), ...timelines, this.timelines[this.timelines.length - 1]];\n            } else {\n                timelines = [...this.timelines, ...timelines];\n            }\n\n            timelines.reduce((pre,nxt,idx)=>{\n                if(idx == 1){\n                    pre.offset_sec = 0;\n                    pre = pre.end_sec - pre.start_sec;\n                }\n                nxt.offset_sec = pre;\n                return nxt.offset_sec + nxt.end_sec - nxt.start_sec;\n            });\n\n            this.timelines = timelines;\n        },\n        getRotatedWidth(timeline){\n            if(timeline.rotate % 180 == 0)return timeline.width;\n            else return timeline.height;\n        },\n        getRotatedHeight(timeline){\n            if(timeline.rotate % 180 == 0)return timeline.height;\n            else return timeline.width;\n        },\n        update_timelines(timelines){\n            if(!timelines)\n                timelines = this.timelines\n            timelines.reduce((pre,nxt,idx)=>{\n                if(idx == 1){\n                    pre.offset_sec = 0;\n                    pre = pre.end_sec - pre.start_sec;\n                }\n                nxt.offset_sec = pre;\n                return nxt.offset_sec + nxt.end_sec - nxt.start_sec;\n            });\n\n            timelines.forEach((i,idx)=>{\n                UGCApp.ffplay.command(\"sp|ugc_movie@master\"+idx,i.start_sec);\n                UGCApp.ffplay.command(\"ep|ugc_movie@master\"+idx,i.end_sec);\n                // UGCApp.ffplay.command(\"offset|ugc_movie@master\"+idx,i.offset_sec);\n            })\n\n            \n        },\n        update_timeline_videobase(timeline){\n            let idx = [-1, ...this.timelines].reduce((pre,nxt,idx)=>{\n                return nxt.id == timeline.id ? idx-1 : pre;\n            });\n\n            UGCApp.ffplay.command(\"brightness|eq@master\"+idx,timeline.eq.brightness);\n            UGCApp.ffplay.command(\"saturation|eq@master\"+idx,timeline.eq.saturation);\n            UGCApp.ffplay.command(\"gamma|eq@master\"+idx,timeline.eq.gamma);\n            UGCApp.ffplay.command(\"contrast|eq@master\"+idx,timeline.eq.contrast);\n        },\n        config: {\n            noReady: true,\n            input: \"\",\n            output: \"\",\n            output_thumb: \"\"\n        },\n        async getConfig() {\n            if(this.config.noReady) {\n                this.config = await new Promise(UGCApp.getConfig); \n                window.console.log('config: ', this.config);\n            }\n            return this.config;\n        },\n        setConfig(config) {\n            this.config = config;\n        },\n        amix:[],\n        add_amix(o){\n            let ret;\n            this.amix.push(ret = {\n                id:overlayIdSeq++,\n                new:true,\n                active:false,\n                offset_sec:this.time_sec,end_sec:5,\n                url:o.local_file.toNativeURL().replace(\"file://\",\"\"),\n                ...o\n            });\n            return ret;\n        },\n        update_amix(o){\n            if (!window.UGCApp) {\n                window.console.log(\"no ugcapp\");\n                return;\n            }\n\n            let found = this.amix.filter(i=>i.id==o.id);\n            if(!found.length)return;\n            else found = found[0];\n\n            UGCApp.ffplay.command(\n                \"ep|ugc_movie@slave\"+o.id, (o.end_sec).toFixed(0)\n            );\n            UGCApp.ffplay.command(\n                \"offset|ugc_movie@slave\"+o.id, (o.offset_sec).toFixed(0)\n            );\n            UGCApp.ffplay.command(\n                \"visible|overlay@slave\"+o.id, o.active?\"0\":\"1\"\n            );\n        },\n        overlay:[],//坐标基于 dar * 1000\n        add_overlay(o,poster){\n            let ret;\n            let overlay = poster ? this.poster.overlay : this.overlay;\n            overlay.push(ret = {\n                id:overlayIdSeq++,\n                new:true,\n                x:0,y:0,w:0,h:0,rotate:0,\n                active:false,\n                offset_sec:Math.max(0,this.time_sec-0.05),\n                end_sec:3,\n                url:\"\",\n                ...o\n            });\n            return ret;\n        },\n        async update_overlay(o,poster){\n            if (!window.UGCApp) {\n                window.console.log(\"no ugcapp\");\n                return;\n            }\n\n            let found = (poster?this.poster.overlay:this.overlay).filter(i=>i.id==o.id);\n            if(!found.length)return;\n            else found = found[0];\n\n            let scale = this.preview_resolution[0] / this.resolution_dar[0];\n            let allPromise = [];\n            allPromise.push(THIS.ffplayCommand(\n                \"w|scale@slave\"+o.id, (o.w*scale).toEven()\n            ));\n            allPromise.push(THIS.ffplayCommand(\n                \"h|scale@slave\"+o.id, (o.h*scale).toEven()\n            ));\n            allPromise.push(THIS.ffplayCommand(\n                \"a|rotate@slave\"+o.id, o.rotate+\"*PI/180\"\n            ));\n            allPromise.push(THIS.ffplayCommand(\n                \"x|overlay@slave\"+o.id, (o.x*scale).toFixed(0)\n            ));\n            allPromise.push(THIS.ffplayCommand(\n                \"y|overlay@slave\"+o.id, (o.y*scale).toFixed(0)\n            ));\n            // allPromise.push(THIS.ffplayCommand(\n            //     \"sp|ugc_movie@slave\"+o.id, (o.start_sec).toFixed(0)\n            // ));\n            allPromise.push(THIS.ffplayCommand(\n                \"ep|ugc_movie@slave\"+o.id, (o.end_sec).toFixed(3)\n            ));\n            allPromise.push(THIS.ffplayCommand(\n                \"offset|ugc_movie@slave\"+o.id, (o.offset_sec).toFixed(3)\n            ));\n            allPromise.push(THIS.ffplayCommand(\n                \"visible|overlay@slave\"+o.id, o.active?\"0\":\"1\"\n            ));\n\n            await Promise.all(allPromise);\n        },\n        remove_overlay(id){\n            //overlay\n            if(this.overlay.filter(i=>i.id==id).length){\n                let idx = [-1, ...this.overlay].reduce((pre,nxt,idx)=>{\n                    return nxt.id == id ? idx-1 : pre\n                });\n                // 不能对 this.overlay 重新复制。否则部分控件会丢失this.overlay的引用\n                this.overlay.splice(idx,1);\n            }\n            //poseter overlay\n            if(this.poster.overlay.filter(i=>i.id==id).length){\n                let idx = [-1, ...this.poster.overlay].reduce((pre,nxt,idx)=>{\n                    return nxt.id == id ? idx-1 : pre\n                });\n                // 不能对 this.overlay 重新复制。否则部分控件会丢失this.overlay的引用\n                this.poster.overlay.splice(idx,1);\n            }\n            //amix\n            if(this.amix.filter(i=>i.id==id).length){\n                let idx = [-1, ...this.amix].reduce((pre,nxt,idx)=>{\n                    return nxt.id == id ? idx-1 : pre\n                });\n                // 不能对 this.overlay 重新复制。否则部分控件会丢失this.overlay的引用\n                this.amix.splice(idx,1);\n            }\n            //mosic\n            if(this.mosic.filter(i=>i.id==id).length){\n                let idx = [-1, ...this.mosic].reduce((pre,nxt,idx)=>{\n                    return nxt.id == id ? idx-1 : pre\n                });\n                // 不能对 this.overlay 重新复制。否则部分控件会丢失this.overlay的引用\n                this.mosic.splice(idx,1);\n            }\n        },\n        _transform_source: null, // 马赛克滤镜\n        get transform_source(){\n            return this._transform_source || \"\"\n        },\n        set transform_source(v){\n            this._transform_source = v;\n        },\n        mosic:[],//坐标基于 dar * 1000\n        mosic_source: null, // 马赛克滤镜\n        add_mosic(o){\n            let ret;\n            let mosic = this.mosic;\n            mosic.push(ret = {\n                id:overlayIdSeq++,\n                type: Const.Overlay.Type.Mosic,\n                new:false,\n                x:0,y:0,w:0,h:0,rotate:0,\n                active:false,\n                offset_sec:Math.max(0,this.time_sec-0.05),\n                end_sec:3,\n                ...o\n            });\n            return ret;\n        },\n        update_mosic(o){\n            if (!window.UGCApp) {\n                window.console.log(\"no ugcapp\");\n                return;\n            }\n\n            let found = this.mosic.filter(i=>i.id==o.id);\n            if(!found.length)return;\n            else found = found[0];\n\n            let scale = this.preview_resolution[0] / this.resolution_dar[0];\n            \n            UGCApp.ffplay.command(\n                \"rect|glfilter@mosic\"+o.id, [\n                    (o.x*scale).toFixed(0),\n                    (o.y*scale).toFixed(0),\n                    (o.w*scale).toFixed(0),\n                    (o.h*scale).toFixed(0) ].join(\",\")\n            );\n            UGCApp.ffplay.command(\n                \"ep|glfilter@mosic\"+o.id, (o.end_sec).toFixed(3)\n            );\n            UGCApp.ffplay.command(\n                \"offset|glfilter@mosic\"+o.id, (o.offset_sec).toFixed(3)\n            );\n            UGCApp.ffplay.command(\n                \"percent|glfilter@mosic\"+o.id, \"100\"\n            );\n        },\n        filter:[],\n        set filter_source(s){\n            UGCApp.ffplay.command(\n                \"source|glfilter@filter\", s.replace(\"file://\",\"\")\n            );\n        },\n        set filter_reset(s){\n            UGCApp.ffplay.command(\n                \"reset|glfilter@filter\", s\n            );\n        },\n        set filter_percent(p){\n            UGCApp.ffplay.command(\n                \"percent|glfilter@filter\", p\n            );\n        },\n        face:{\n            beauty_level:0,\n            beauty_source:\"\"\n        },\n        set beauty_source(s){\n            s = s.replace(\"file://\",\"\");\n            \n            if(this.face.beauty_source == s)return;\n\n            this.face.beauty_source = s;\n            UGCApp.ffplay.command(\n                \"source|glfilter@beauty\", s\n            );\n        },\n        set beauty_level(l){\n            this.face.beauty_level = l;\n            UGCApp.ffplay.command(\n                \"percent|glfilter@beauty\", l * 10\n            );\n        },\n        video:{\n            cut:[0,0,0,0],\n            dar:DARPreset.auto //target dar\n        },\n        audio:{\n            volume:100,\n        },\n        bgm:{\n            volume: 100,\n            url:\"\"\n        },\n        poster:{\n            url:\"\",\n            rotate: 0, // 视频旋转后，封面也加上旋转角度，重新设置封面的时候清除\n            overlay:[]\n        },\n        get cur_timeline(){\n            let time_sec = roundFloat(this.time_sec);\n            let cur = this.timelines.filter(o=>{\n                return roundFloat(o.offset_sec) <= time_sec && \n                roundFloat(o.offset_sec + o.end_sec - o.start_sec) > time_sec;\n            })[0];\n            if(!cur && this.timelines.length) {\n                cur = this.timelines[this.timelines.length - 1];\n            }\n            return cur;\n        },\n        get dar(){\n            // 加了撤销，不能使用==DARPreset.auto了\n            let isAuto = !Object.keys(DARPreset.auto).find(k => this.video.dar[k] != DARPreset.auto[k]);\n            if(!isAuto)\n                return this.video.dar;\n            else if(this.timelines.length == 0)\n                return [0, 0];\n            else{\n                return [this.getRotatedWidth(this.timelines[0]), this.getRotatedHeight(this.timelines[0])];\n            }\n        },\n        get dar_d(){\n            return this.dar[0]/this.dar[1];\n        },\n        get resolution_dar(){//用来布局的参考尺寸，根据dar生成\n            if(this.dar[0] < 100 || this.dar[1] < 100)\n                return this.dar.map(o => o * 1000);\n            else\n                return this.dar;\n        },\n        get resolution_box_src(){\n            let ret;\n            if(!this.timelines.length)\n                ret = [0, 0];\n            else if(this.timelines.length == 1)\n                ret = [this.getRotatedWidth(this.timelines[0]), this.getRotatedHeight(this.timelines[0])];\n            else\n                ret = this.timelines.reduce((pre,nxt,idx)=>{\n                    if(idx == 1)\n                        pre = [this.getRotatedWidth(pre), this.getRotatedHeight(pre)];\n                    return [\n                        Math.max(pre[0], this.getRotatedWidth(nxt)),\n                        Math.max(pre[1], this.getRotatedHeight(nxt))\n                    ]\n                })\n\n            return [ret[0].toEven(), ret[1].toEven()];\n        },\n        previewparam:{\n            resolution_box:[640, 640]\n        },\n        get preview_resolution(){\n            //不能大于源的最大尺寸\n            let maxWidth = Math.min(\n                this.resolution_box_src[0], \n                this.previewparam.resolution_box[0]);\n            let maxHeight = Math.min(\n                this.resolution_box_src[1], \n                this.previewparam.resolution_box[1]);\n                \n            if(this.dar_d > 1)\n                return [ maxWidth.toEven(), (maxWidth / this.dar_d).toEven() ];\n            else\n                return [ (maxHeight * this.dar_d).toEven(), maxHeight.toEven() ];\n        },\n        encodeparam:{\n            preset:\"low\",\n            hardware_encoder: true,\n            resolution_box:[0,0],\n            bitrate:0,\n        },\n        get low_encodeparam(){\n\n            let ret = {\n                ...this.encodeparam,\n                resolution_box:[960,540],\n            }\n\n            //不能大于源的最大尺寸\n            let maxWidth = Math.min(\n                this.resolution_box_src[0], \n                ret.resolution_box[0]);\n            let maxHeight = Math.min(\n                this.resolution_box_src[1], \n                ret.resolution_box[1]);\n                \n            if(this.dar_d > 1)\n                ret.resolution = [ maxWidth.toEven(), (maxWidth / this.dar_d).toEven() ];\n            else\n                ret.resolution = [ (maxHeight * this.dar_d).toEven(), maxHeight.toEven() ];\n            \n            ret.bitrate = Math.min(ret.resolution[0], ret.resolution[1]) * 2;\n\n            return ret;\n        },\n        get high_encodeparam(){\n            let ret = {\n                ...this.encodeparam,\n                resolution_box:[1920,1920],\n            }\n\n            //不能大于源的最大尺寸\n            let maxWidth = Math.min(\n                this.resolution_box_src[0], \n                ret.resolution_box[0]);\n            let maxHeight = Math.min(\n                this.resolution_box_src[1], \n                ret.resolution_box[1]);\n                \n            if(this.dar_d > 1)\n                ret.resolution = [ maxWidth.toEven(), (maxWidth / this.dar_d).toEven() ];\n            else\n                ret.resolution = [ (maxHeight * this.dar_d).toEven(), maxHeight.toEven() ];\n            \n            ret.bitrate = Math.min(ret.resolution[0], ret.resolution[1]) * 3;\n\n            return ret;\n        },\n        get preset_encodeparam(){\n            if(this.encodeparam.preset == 'high'){\n                return this.high_encodeparam;\n            }\n            else\n                return this.low_encodeparam;\n        },\n        operate: {\n            history: []\n        },\n        createOperateHistory(operateType, targetId) {\n            this.operate.history = UGCResourceManager.createOperateHistory(this, operateType, targetId);\n        },\n        updateOperateHistory(operateType, target) {\n            this.operate.history = UGCResourceManager.updateOperateHistory(operateType, target);\n        },\n        undoOperateHistory() {\n            let ret = UGCResourceManager.undoOperateHistory();\n            if(ret && ret.history) {\n                this.operate.history = ret.history;\n            }\n            return ret;\n        }\n    },\n    async ffplayCommand(cmd, args){\n        return new Promise((o, x) => {\n            UGCApp.ffplay.command(\n                cmd,\n                args,\n                o,\n                x\n            );\n        });\n    },\n    getUGCParam(opt) {\n        let editlist = THIS.editlist;\n        let timelines = THIS.editlist.timelines;\n\n        let main_w = opt.resolution[0];//editlist.preview_resolution[0];//timelines[0].width;\n        let main_h = opt.resolution[1];//editlist.preview_resolution[1];//timelines[0].height;\n        let poster = opt.poster;\n        let oformat = opt.oformat || \"rgba\";\n\n        let endingTimeline = null;\n        // if(timelines.length && timelines[timelines.length - 1].ending) {\n        //     endingTimeline = timelines[timelines.length - 1];\n        //     timelines = timelines.slice(0, timelines.length - 1);\n        // }\n\n        let input = \"\";\n\n        if(timelines.length <= 0)\n            return \"\";\n\n        let gltransform = 1;\n\n        //处理 timelines \n        if(gltransform)\n        {\n            let movie = \"ugc_movie@master{idx}={src}:sp={sp}:ep={ep}:s=v+a[v{idx}][a{idx}]\"\n                // + \",[v{idx}]format=yuv420p,scale={w}:{h},format=rgba[v{idx}]\"\n                + \",[v{idx}]gltransform=w={w}:h={h}:rotate={transpose}:oformat={oformat},format={oformat}[v{idx}]\"\n                // + \",[v{idx}]eq@master{idx}=contrast={contrast}:brightness={brightness}:saturation={saturation}:gamma={gamma}[v{idx}]\"\n            let concat = \"[v{in}][a{in}][v{idx}][a{idx}]ugc_concat@master{idx}=delta_ts={delta}:v=1:a=1[v{idx}][a{idx}]\"\n        \n            let RotateToTranspose = {\n                0:\"0\",\n                90:\"1\",\n                180:\"2\",\n                270:\"3\"\n            };\n\n            let width = main_w;\n            let height = main_h;\n\n            let item = timelines[0];\n            let transpose = (item.src_rotate+item.rotate)%360;\n\n            if(transpose == 90 || transpose == 270){\n                width = main_h;\n                height = main_w;\n            }\n            input = movie\n                .replace(/{idx}/g,0)\n                .replace(\"{src}\",item.url.replace(\"file://\",\"\"))\n                .replace(\"{sp}\",item.start_sec)\n                .replace(\"{ep}\",item.end_sec)\n                .replace(/{w}/g,width)\n                .replace(/{h}/g,height)\n                .replace(\"{source}\",THIS.editlist.transform_source.replace(\"file://\",\"\"))\n                .replace(\"{transpose}\",RotateToTranspose[transpose]||\"0\")\n                .replace(\"{contrast}\",item.eq.contrast)\n                .replace(\"{brightness}\",item.eq.brightness)\n                .replace(\"{saturation}\",item.eq.saturation)\n                .replace(\"{gamma}\",item.eq.gamma)\n                .replace(/{oformat}/g,oformat);\n\n            if(timelines.length > 1){\n                input = [input, ...timelines.slice(1)].reduce((pre,nxt,idx)=>{\n\n                    let transpose = (nxt.src_rotate+nxt.rotate)%360;\n                    width = main_w;\n                    height = main_h;\n\n                    if(transpose == 90 || transpose == 270){\n                        width = main_h;\n                        height = main_w;\n                    }\n                    return (pre + \",\" +\n                        movie\n                            .replace(/{idx}/g,idx)\n                            .replace(\"{src}\",nxt.url.replace(\"file://\",\"\"))\n                            .replace(\"{sp}\",nxt.start_sec)\n                            .replace(\"{ep}\",nxt.end_sec)\n                            .replace(/{w}/g,width)\n                            .replace(/{h}/g,height)\n                            .replace(\"{source}\",THIS.editlist.transform_source.replace(\"file://\",\"\"))\n                            .replace(\"{transpose}\",RotateToTranspose[transpose]||\"0\")\n                            .replace(\"{contrast}\",nxt.eq.contrast)\n                            .replace(\"{brightness}\",nxt.eq.brightness)\n                            .replace(\"{saturation}\",nxt.eq.saturation)\n                            .replace(\"{gamma}\",nxt.eq.gamma) \n                            .replace(/{oformat}/g,oformat)\n                        + \",\" +\n                        concat\n                            .replace(/{in}/g,idx-1)\n                            .replace(/{idx}/g,idx)\n                            .replace(\"{delta}\",nxt.offset_sec)\n                    )\n                })\n            }\n\n            let max_num = timelines.length - 1;\n            \n            input = input.replace(new RegExp(\"\\\\[v\"+max_num+\"\\\\]\",\"g\"),\"[out1]\")\n                .replace(new RegExp(\"\\\\[a\"+max_num+\"\\\\]\",\"g\"),\"[out0]\");\n        }\n        //处理 timelines\n        else {\n            let movie = \"ugc_movie@master{idx}={src}:sp={sp}:ep={ep}:s=v+a[v{idx}][a{idx}]\"\n                + \",[v{idx}]scale={w}:{h}:force_original_aspect_ratio=decrease,pad={w}:{h}:(ow-iw)/2:(oh-ih)/2,{transpose}{vflip}{hflip}setsar=1/1[v{idx}]\"\n                + \",[v{idx}]eq@master{idx}=contrast={contrast}:brightness={brightness}:saturation={saturation}:gamma={gamma}[v{idx}]\"\n            let concat = \"[v{in}][a{in}][v{idx}][a{idx}]ugc_concat@master{idx}=delta_ts={delta}:v=1:a=1[v{idx}][a{idx}]\"\n        \n            let RotateToTranspose = {\n                0:\"\",\n                90:\"transpose=1,\",\n                180:\"hflip,vflip,\",\n                270:\"transpose=2,\"\n            };\n\n            let width = main_w;\n            let height = main_h;\n\n            let item = timelines[0];\n            let transpose = (item.src_rotate+item.rotate)%360;\n\n            if(transpose == 90 || transpose == 270){\n                width = main_h;\n                height = main_w;\n            }\n            input = movie\n                .replace(/{idx}/g,0)\n                .replace(\"{src}\",item.url.replace(\"file://\",\"\"))\n                .replace(\"{sp}\",item.start_sec)\n                .replace(\"{ep}\",item.end_sec)\n                .replace(/{w}/g,width)\n                .replace(/{h}/g,height)\n                .replace(\"{transpose}\",RotateToTranspose[transpose])\n                .replace(\"{vflip}\",item.vflip?\"vflip,\":\"\")\n                .replace(\"{hflip}\",item.hflip?\"hflip,\":\"\")\n                .replace(\"{contrast}\",item.eq.contrast)\n                .replace(\"{brightness}\",item.eq.brightness)\n                .replace(\"{saturation}\",item.eq.saturation)\n                .replace(\"{gamma}\",item.eq.gamma);\n\n            if(timelines.length > 1){\n                input = [input, ...timelines.slice(1)].reduce((pre,nxt,idx)=>{\n\n                    let transpose = (nxt.src_rotate+nxt.rotate)%360;\n                    width = main_w;\n                    height = main_h;\n                    if(transpose == 90 || transpose == 270){\n                        width = main_h;\n                        height = main_w;\n                    }\n\n                    return (pre + \",\" +\n                        movie\n                            .replace(/{idx}/g,idx)\n                            .replace(\"{src}\",nxt.url.replace(\"file://\",\"\"))\n                            .replace(\"{sp}\",nxt.start_sec)\n                            .replace(\"{ep}\",nxt.end_sec)\n                            .replace(/{w}/g,width)\n                            .replace(/{h}/g,height)\n                            .replace(\"{transpose}\",RotateToTranspose[transpose])\n                            .replace(\"{vflip}\",nxt.vflip?\"vflip,\":\"\")\n                            .replace(\"{hflip}\",nxt.hflip?\"hflip,\":\"\")\n                            .replace(\"{contrast}\",nxt.eq.contrast)\n                            .replace(\"{brightness}\",nxt.eq.brightness)\n                            .replace(\"{saturation}\",nxt.eq.saturation)\n                            .replace(\"{gamma}\",nxt.eq.gamma) +\n                        \",\" +\n                        concat\n                            .replace(/{in}/g,idx-1)\n                            .replace(/{idx}/g,idx)\n                            .replace(\"{delta}\",nxt.offset_sec)\n                    )\n                })\n            }\n\n            let max_num = timelines.length - 1;\n\n            // 片尾\n            if(timelines.length > 0 && endingTimeline && !poster) {\n                let movie = \"ugc_movie@master{idx}={src}:ep={ep}:s=v+a[v{idx}][a{idx}]\"\n                    + \",[v{idx}]scale={w}:{h}:force_original_aspect_ratio=decrease,pad={w}:{h}:(ow-iw)/2:(oh-ih)/2,{transpose}{vflip}{hflip}setsar=1/1[v{idx}]\"\n                    + \",[v{idx}]eq@master{idx}=contrast={contrast}:brightness={brightness}:saturation={saturation}:gamma={gamma}[v{idx}]\"\n                    \n                let concat = \"[v{in}][a{in}][v{idx}][a{idx}]ugc_concat@master{idx}=delta_ts={delta}:v=1:a=1[v{idx}][a{idx}]\"\n                let idx = timelines.length;\n                let width = main_w;\n                let height = main_h;\n                input += ',' +\n                    movie\n                        .replace(/{idx}/g,idx)\n                        .replace('{src}', endingTimeline.url.replace(\"file://\",\"\"))\n                        .replace(/{ep}/g, endingTimeline.end_sec)\n                        .replace(/{w}/g,width)\n                        .replace(/{h}/g,height)\n                        .replace(\"{transpose}\",RotateToTranspose[0])\n                        .replace(\"{vflip}\",endingTimeline.vflip?\"vflip,\":\"\")\n                        .replace(\"{hflip}\",endingTimeline.hflip?\"hflip,\":\"\")\n                        .replace(\"{contrast}\",endingTimeline.eq.contrast)\n                        .replace(\"{brightness}\",endingTimeline.eq.brightness)\n                        .replace(\"{saturation}\",endingTimeline.eq.saturation)\n                        .replace(\"{gamma}\",endingTimeline.eq.gamma) +\n                    \",\" +\n                    concat\n                        .replace(/{in}/g,idx-1)\n                        .replace(/{idx}/g,idx)\n                        .replace(\"{delta}\",endingTimeline.offset_sec)\n\n                max_num++;\n            }\n            \n            input = input.replace(new RegExp(\"\\\\[v\"+max_num+\"\\\\]\",\"g\"),\"[out1]\")\n                .replace(new RegExp(\"\\\\[a\"+max_num+\"\\\\]\",\"g\"),\"[out0]\");\n        }\n\n\n        //处理 filters\n        if( editlist.filter.length){\n            input += \",[out1]\" + editlist.filter.map(i=>{\n                let lutpng = \"\";\n                if(i.local_file_list && i.local_file_list.length){\n                    lutpng = \":lutpng=\"+i.local_file_list.map( i => i.toNativeURL().replace(\"file://\",\"\")).join(\"|\")\n                }\n\n                return \"glfilter@filter=source={source}{lutpng}:percent={percent}\"\n                    .replace(\"{source}\", i.local_file.toNativeURL().replace(\"file://\",\"\"))\n                    .replace(\"{lutpng}\", lutpng)\n                    .replace(\"{percent}\", i.percent || 0);\n            }).reduce((pre,nxt)=>{\n                return pre+\",\"+nxt\n            }) + \"[out1]\";\n        }\n        else{\n            // input += \",[out1]glfilter@filter[out1]\";\n        }\n\n        //处理 mosic\n        if( editlist.mosic.length){\n            let scale = main_w / editlist.resolution_dar[0];\n            input += \",[out1]\" + editlist.mosic.map(i=>{\n                // :x={x}:y={y}:w={w}:h={h}:offset={ss}:ep={t}\n                return \"glfilter@mosic{id}=source={source}:percent={percent}:x={x}:y={y}:w={w}:h={h}:offset={ss}:ep={t}\"\n                    .replace(\"{source}\", editlist.mosic_source.replace(\"file://\",\"\"))\n                    .replace(\"{percent}\", 100)\n                    .replace(/{ss}/g,+i.offset_sec.toFixed(2)||0)\n                    .replace(/{t}/g, i.end_sec)\n                    .replace(\"{w}\", +(i.w * scale).toEven())\n                    .replace(\"{h}\", +(i.h * scale).toEven())\n                    .replace(\"{x}\", +(i.x * scale).toFixed(0))\n                    .replace(\"{y}\", +(i.y * scale).toFixed(0))\n                    .replace(/{id}/g, i.id)\n            }).reduce((pre,nxt)=>{\n                return pre+\",\"+nxt\n            }) + \"[out1]\";\n        }\n        else{\n            // input += \",[out1]glfilter@filter[out1]\";\n        }\n\n        //beauty\n        // input += \",[out1]glfilter@beauty=source={source}:percent={percent}[out1]\"\n        //     .replace(\"{source}\", editlist.face.beauty_source)\n        //     .replace(\"{percent}\", (editlist.face.beauty_level * 10).toFixed(0));\n\n        //处理 overlay\n        let overlay = [ ...editlist.overlay, \n            ...( poster ? editlist.poster.overlay : [] ) ];\n        if(overlay.length){\n            let template = \"ugc_movie@slave{id}='{url}':offset={ss}:ep={t}:loop=0,\" +\n                \"scale@slave{id}={w}:{h},rotate@slave{id}='a={rotate}*PI/180:ow=hypot(iw,ih):oh=ow:c=0x00000000',\"+\n                \"[out1]overlay@slave{id}='{x}:{y}:shortest=0:offset={ss}:ep={t}:format=auto'[out1]\"\n            let scale = main_w / editlist.resolution_dar[0];\n            let enabled = overlay.filter(o=>o.enabled);\n            input = [input, ...enabled].reduce((pre,nxt)=>{\n                let end_sec = nxt.end_sec;\n                let offset_sec = +nxt.offset_sec.toFixed(2)||0;\n                if(end_sec <= 0){\n                    end_sec = editlist.total_sec - offset_sec;\n                }\n                if(poster) {\n                    offset_sec = 0;\n                    end_sec = editlist.total_sec;\n                }\n                return pre + \",\" +template\n                    .replace(\"{url}\", nxt.url.replace(\"file://\",\"\").replace(/[?].*$/, \"\"))\n                    .replace(/{ss}/g, offset_sec)\n                    .replace(/{t}/g, end_sec)\n                    .replace(\"{w}\", +(nxt.w * scale).toEven())\n                    .replace(\"{h}\", +(nxt.h * scale).toEven())\n                    .replace(\"{x}\", +(nxt.x * scale).toFixed(0))\n                    .replace(\"{y}\", +(nxt.y * scale).toFixed(0))\n                    .replace(\"{rotate}\", nxt.rotate)\n                    .replace(/{id}/g, nxt.id)\n            });\n        }\n\n        //处理 poster\n        \n        if(!poster && editlist.poster.url) {\n            // 加上offset,ep在调整第一段视频的开始时间时才会一直显示在前面\n            // let template = \"ugc_movie@slave{id}='{url}':offset=0:ep=0.1,\" +\n            // \"scale@slave{id}={w}:{h},\"+\n            // \"[out1]overlay@slave{id}={x}:{y}:shortest=0:offset=0:ep=0.1:format=auto[out1]\";\n\n            // input = input + \",\" +template\n            //         .replace(\"{url}\", editlist.poster.url.replace(\"file://\",\"\").replace(/[?].*$/, \"\"))\n            //         .replace(\"{w}\", main_w)\n            //         .replace(\"{h}\", main_h)\n            //         .replace(\"{x}\", '0')\n            //         .replace(\"{y}\", '0')\n            //         .replace(/{id}/g, '0')\n            \n            let template = \"ugc_movie@slave{id}='{url}':offset=0:ep=0.1,\" +\n            \"scale@slave{id}={w}:{h},rotate@slave{id}='a={rotate}*PI/180:ow=hypot(iw,ih):oh=ow:c=0x00000000',\"+\n            \"[out1]overlay@slave{id}={x}:{y}:shortest=0:offset=0:ep=0.1:format=auto[out1]\";\n\t\t\t// 修正视频旋转封面没旋转的问题（修改封面时会将rotate置0）\n            let width = main_w;\n            let height = main_h;\n            let rotate = editlist.poster.rotate;\n\n            if(rotate % 180 != 0) {\n                width = main_h;\n                height = main_w;\n            }\n\n            let box = Math.hypot(width, height);\n            let x =  (main_w - box)/ 2;\n            let y =  (main_h - box)/ 2;\n\n            input = input + \",\" +template\n                    .replace(\"{url}\", editlist.poster.url.replace(\"file://\",\"\").replace(/[?].*$/, \"\"))\n                    .replace(\"{w}\", width)\n                    .replace(\"{h}\", height)\n                    .replace(\"{x}\", x)\n                    .replace(\"{y}\", y)\n                    .replace(\"{rotate}\", rotate)\n                    .replace(/{id}/g, '0')\n        }\n\n        //处理 audio\n        // {\n        //     input += \",[out0]volume={volume}[out0]\"\n        //         .replace(\"{volume}\", editlist.audio.volume/100);\n        // }\n\n        //处理 amix\n        {\n            let template = \"ugc_movie@slave{id}='{url}':offset={ss}:ep={t}:sp=0:loop=0:s=a,\" +\n                \"[out0]amix@slave{id}=offset={ss}:ep={t}[out0]\"\n            input = [input, ...editlist.amix].reduce((pre,nxt)=>{\n                let end_sec = nxt.end_sec;\n                if(end_sec <= 0){\n                    end_sec = editlist.total_sec - nxt.offset_Sec;\n                }\n                return pre + \",\" +template\n                    .replace(\"{url}\", nxt.url.replace(\"file://\",\"\"))\n                    .replace(/{ss}/g,+nxt.offset_sec.toFixed(2)||0)\n                    .replace(/{t}/g, end_sec)\n                    .replace(/{id}/g, nxt.id)\n            });\n        }\n\n        //处理 BGM\n        if(editlist.bgm && editlist.bgm.url){\n            // input += \",ugc_movie@slave999='{url}':sp=0:ep={t}:offset=0:loop=0:s=a,[out0]amix@slave999=offset=0:ep={t}:duration=shortest[out0]\"\n            input += \",ugc_movie@slave999='{url}':sp=0:ep={t}:offset=0:loop=0:s=a[ba0],[ba0]volume={volume}[ba0],[out0][ba0]amix=offset=0:ep={t}:duration=shortest[out0]\"\n                .replace(\"{url}\", editlist.bgm.url.replace(\"file://\",\"\"))\n                .replace(/{t}/g, editlist.total_sec)\n                .replace(\"{volume}\", editlist.bgm.volume/100);\n        }\n\n        return input;\n    },\n    getPosterPlayerParam(){\n        let cmd = \"ffplay -loglevel verbose -ss {ss} -f ugc -i \\\"{src}\\\" -an\";\n        cmd = cmd\n            .replace(\"{ss}\", this.editlist.time_sec)\n            .replace(\"{src}\", this.getUGCParam({\n                resolution: this.editlist.preview_resolution,\n                poster: true\n            }));\n            \n\n        window.console.log(cmd);\n\n        return cmd;\n    },\n    getPlayerParam(){\n       \n        let cmd = \"ffplay -loglevel verbose -ss {ss} -f ugc -i \\\"{src}\\\"\";\n        let ugcparam;\n        cmd = cmd\n            .replace(\"{ss}\", this.editlist.time_sec)\n            .replace(\"{src}\", ugcparam = this.getUGCParam({\n                resolution: this.editlist.preview_resolution,\n            }));\n\n        window.console.log(cmd,ugcparam);\n\n        // return `ffplay -f ugc -i testsrc2,gltransform=source=${this.editlist.transform_source.replace(\"file://\",\"\")}:w=320:h=240:oformat=rgba`;\n        // return `ffplay -loglevel verbose -ss ${this.editlist.time_sec} -f ugc -i \"ugc_movie@master0=${this.editlist.poster.url.replace(\"file://\",\"\")}:ep=0.1\"`\n        return ugcparam && cmd;\n    },\n    getExportParam(des){\n        let cmd = \"ffmpeg -loglevel verbose -f ugc -i \\\"{src}\\\" -acodec aac -b:v {b:v} -preset fast -vcodec {vcodec} -use_editlist 0 -f mp4 -y {des}\";\n        \n        let encodeparam = this.editlist.preset_encodeparam;\n\n        // let des = cordova.file.cacheDirectory + \"output.mp4\";\n\n        let vcodec = \"h264\";\n        if (CordovaModel.isAndroid() && encodeparam.hardware_encoder){\n            vcodec = \"libhw_avc\";\n            // 使用 h264_mediacodec 解码时间戳错乱，不可用\n            // vdcodec = \"-vcodec h264_mediacodec\";\n        }\n        if (CordovaModel.isIOS() && encodeparam.hardware_encoder) {\n            vcodec = \"h264_videotoolbox\";\n            // 使用 videotoolbox 解码更慢，原因不明\n            // vdcodec = \"h264 -hwaccel videotoolbox\";\n        }\n        \n        cmd = cmd\n            .replace(\"{vcodec}\", vcodec)\n            .replace(\"{b:v}\", encodeparam.bitrate+\"k\")\n            .replace(\"{src}\", this.getUGCParam({\n                resolution: encodeparam.resolution,\n                oformat: \"yuv420p\"\n            }))\n            .replace(\"{des}\", des)\n\n        window.console.log(cmd);\n\n        return cmd;\n    },\n}\n\nexport default THIS;","<template>\n    <div class=\"main-title\">\n        <mu-button large icon @click=\"exit\" >\n            <mu-icon color=\"white\" size=\"36\" value=\"chevron_left\" />\n        </mu-button>\n        <div style=\"width:100%;text-align:center\"></div>\n        <!-- <div class=\"title-text\" style=\"width:100%;\">视频剪辑</div> -->\n\n        <mu-button ref=\"showDlgBtn\" @click=\"showDlg\" icon large >\n            <mu-icon :color=\"setting?'red':'white'\" size=\"24\" value=\"settings\" />\n        </mu-button>\n        <mu-button @click=\"$emit('export')\" color=\"red\" small round>\n            导出\n        </mu-button>\n        <transition name=\"fade\">\n        <div ref=\"dlg\" v-show=\"setting\" tabindex=\"-1\" @blur=\"blur\" class=\"settings-dlg\">\n            <div class=\"content\">\n                <div class=\"setting-title\">导出设置</div>\n                <div class=\"content-top\">\n                    <div @click=\"encodeparam.preset='high'\" :class=\"{active:encodeparam.preset=='high'}\" class=\"content-item\">\n                        视频质量优先\n                        <div class=\"content-desc\">质量更加，生成速度较慢</div>\n                        <div class=\"content-resolution\">分辨率 {{high_resolution}}</div>\n                    </div>\n                    <div @click=\"encodeparam.preset='low'\" :class=\"{active:encodeparam.preset=='low'}\" class=\"content-item\">\n                        视频大小优先\n                        <div class=\"content-desc\">大小更少，生成速度较快</div>\n                        <div class=\"content-resolution\">分辨率 {{low_resolution}}</div>\n                    </div>\n                    \n                </div>\n                <div class=\"content-other\">\n                    硬编码 <mu-switch @change=\"focus\" v-model=\"encodeparam.hardware_encoder\"></mu-switch>\n                </div>\n            </div>\n        </div>\n        </transition>\n    </div>\n</template>\n<style lang=\"less\" scoped>\n.fade-enter-active, .fade-leave-active {\n  transition: opacity .5s;\n}\n.fade-enter, .fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n}\n.main-title{\n    display: flex;\n    color:white;\n    align-items: center;\n    padding-right:20px\n}\n.title-text{\n    position:absolute;\n    width:100%;height:100%;\n    text-align: center;\n    \n}\n\n.settings-dlg{\n    width:100%;\n    top:45px;\n    position: absolute;\n    padding:10px 0;\n    outline: 0;\n    z-index:100;\n    overflow:hidden;\n    .content{\n        background:#272727;\n        border-top: 1px solid;\n        border-image: linear-gradient(90deg, transparent,rgba(255,0,0,0.4), transparent) 1 10;\n        box-shadow: 0px 0px 5px #000;\n        border-radius:3px;\n        .setting-title{\n            padding:10px;\n            text-align: center;\n            border-bottom:1px solid #444;\n        }\n        .content-top{\n            display:flex;\n            justify-content: center;\n            .content-item{\n                text-align: center;\n                padding: 10px;\n                background: #444;\n                margin: 10px;\n                border-radius: 3px;\n                border:1px solid transparent;\n            }\n            .content-item.active{\n                border:1px solid red;\n            }\n            .content-desc{\n                font-size: 10px;\n                color: #999;\n            }\n            .content-resolution{\n                display: inline-block;\n                padding: 0px 10px;\n                border-radius: 10px;\n                font-size: 10px;\n                background: #333;\n            }\n        }\n        .content-other{\n            border-top:1px solid #111;\n            padding:10px 20px;\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n        }\n    }\n}\n</style>\n<script>\nimport Editlist from \"@/model/Editlist\";\n\nexport default {\n    data(){\n        return {\n            setting: false,\n            encodeparam: Editlist.editlist.encodeparam,\n            low_resolution: \"\",\n            high_resolution: \"\"\n        }\n    },\n    methods:{\n        exit(){\n            // if(UGCApp && UGCApp.exit)\n            //     UGCApp.exit(); //ios\n            // else\n            //     navigator.app.exitApp(); //android\n            UGCApp.done({\n                statusCode: UGCApp.StatusCode.Cancel,\n                message: \"用户取消返回\",\n                output: \"\",\n                output_thumb: \"\"\n            })\n        },\n        updateData(){\n            this.encodeparam = Editlist.editlist.encodeparam;\n            this.low_resolution = Editlist.editlist.low_encodeparam.resolution.join(\"x\");\n            this.high_resolution = Editlist.editlist.high_encodeparam.resolution.join(\"x\");\n        },\n        showDlg(){\n            if(!this.setting){\n                this.updateData();\n                this.setting = true;\n                this.$nextTick(()=>{\n                    this.$refs.dlg.focus()\n                })\n            }\n            else\n                this.setting = false;\n        },\n        focus(){\n            this.$refs.dlg.focus()\n        },\n        blur(e){\n            if( e.relatedTarget != this.$refs.showDlgBtn.$el &&\n                !this.$refs.dlg.contains(e.relatedTarget)){\n                this.setting = false;\n            }\n        }\n    }\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ClipTop.vue?vue&type=template&id=548f090f&scoped=true&\"\nimport script from \"./ClipTop.vue?vue&type=script&lang=js&\"\nexport * from \"./ClipTop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ClipTop.vue?vue&type=style&index=0&id=548f090f&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"548f090f\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"main\",staticClass:\"tool-box\",class:{overlay:_vm.show_overlay||_vm.show_amix},on:{\"touchstart\":_vm.currentStart,\"touchmove\":_vm.currentMove,\"touchend\":function($event){return _vm.changed()}}},[_c('div',{ref:\"mainLine\",staticClass:\"main-line going\",style:(_vm.mainLineStyle)},[(!_vm.postermode)?_c('div',{staticClass:\"video-post-btn\",on:{\"click\":function($event){return _vm.$emit('on_poster_click')}}},[(!_vm.poster_url)?_c('span',{staticClass:\"material-icons\"},[_vm._v(\"insert_photo\")]):_c('img',{attrs:{\"src\":_vm.poster_url},on:{\"error\":_vm.posterLoadError}}),_c('span',{staticClass:\"text\"},[_vm._v(\"封面\")])]):_vm._e(),_c('div',{staticClass:\"main-timeline\"},[_vm._l((_vm.timelines),function(i){return [(i.ending)?_c('TimelineItem',{key:i.id,attrs:{\"pps\":_vm.pps,\"dragging\":true,\"active\":false,\"focus\":_vm.postermode?false:i.focus,\"start_sec\":i.start_sec,\"end_sec\":i.end_sec,\"total_sec\":i.total_sec,\"offset_sec\":i.offset_sec,\"left_drag_offset\":i.left_drag_offset,\"min_sec\":_vm.video_min_sec},on:{\"change\":function($event){return _vm.timelineChange(i.id,$event)},\"active\":function($event){return _vm.timelineActive(i.id,$event)}},nativeOn:{\"click\":function($event){return _vm.endingClick($event)}}},[_c('div',{staticClass:\"video-ending\"},[_c('span',[_vm._v(\"片尾设置\")])])]):_c('TimelineItem',{key:i.id,attrs:{\"pps\":_vm.pps,\"dragging\":_vm.dragging,\"focus\":_vm.postermode?false:i.focus,\"active\":_vm.postermode?false:i.active,\"start_sec\":i.start_sec,\"end_sec\":i.end_sec,\"total_sec\":i.total_sec,\"offset_sec\":i.offset_sec,\"left_drag_offset\":i.left_drag_offset,\"min_sec\":_vm.video_min_sec},on:{\"change\":function($event){return _vm.timelineChange(i.id,$event)},\"active\":function($event){return _vm.timelineActive(i.id,$event)}}},[_c('TimelineItemThumb',{attrs:{\"time_sec\":_vm.time_sec - i.offset_sec,\"pps\":_vm.pps,\"timeline\":i}})],1)]})],2),(!_vm.postermode && !_vm.hasEnding)?_c('div',{staticClass:\"video-ending-btn\",on:{\"click\":_vm.endingClick}},[_c('span',[_vm._v(\"+片尾设置\")])]):_vm._e(),(!_vm.postermode && _vm.show_overlay)?_c('div',{staticClass:\"sub-timeline\",staticStyle:{\"margin-top\":\"35px\"}},[_vm._l((_vm.overlay),function(i){return [(i.type & _vm.overlay_type)?_c('TimelineOverlayItem',{key:i.id,attrs:{\"id\":i.id,\"type\":i.type,\"active\":i.active,\"pps\":_vm.pps,\"end_sec\":i.end_sec,\"offset_sec\":i.offset_sec},on:{\"change\":function($event){return _vm.overlayChange(i.id,$event)},\"active\":function($event){return _vm.overlayActive(i.id,$event)}}}):_vm._e()]})],2):_vm._e(),(!_vm.postermode && _vm.show_amix)?_c('div',{staticClass:\"sub-timeline\",staticStyle:{\"margin-top\":\"35px\"}},_vm._l((_vm.amix),function(i){return _c('TimelineOverlayItem',{key:i.id,attrs:{\"id\":i.id,\"is_amix\":true,\"active\":i.active,\"pps\":_vm.pps,\"end_sec\":i.end_sec,\"offset_sec\":i.offset_sec},on:{\"change\":function($event){return _vm.amixChange(i.id,$event)},\"active\":function($event){return _vm.amixActive(i.id,$event)}}})}),1):_vm._e()]),_c('div',{ref:\"current\",staticClass:\"time-tick\"},[_c('div',{staticClass:\"current-time\",class:{dragging:_vm.dragging}},[_vm._v(\" \"+_vm._s(_vm.currentTimeStr)+\" \")])]),_c('div',{staticClass:\"total-time-tick\"},[_vm._v(\" \"+_vm._s(_vm.totalTimeStr)+\" \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\",class:{active:_vm.active, focus:_vm.focus, span:_vm.offset_sec},style:(_vm.boxStyle),on:{\"touchend\":_vm.toggleActive}},[_c('mu-button',{ref:\"left\",staticClass:\"left-tick\",attrs:{\"flat\":\"\"},nativeOn:{\"touchstart\":function($event){$event.stopPropagation();return _vm.leftStart($event)},\"touchmove\":function($event){$event.stopPropagation();return _vm.leftMove($event)},\"touchend\":function($event){$event.stopPropagation();return _vm.leftEnd($event)}}},[_c('mu-icon',{class:{ dragging: _vm.leftDragging, outbound: _vm.leftOutBound },attrs:{\"value\":\"keyboard_arrow_left\"}})],1),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"thumb\",class:{overlay:_vm.overlay_mode},style:(_vm.thumbStyle)},[_vm._t(\"default\")],2),_c('div',{staticClass:\"border\"})]),_c('mu-button',{ref:\"right\",staticClass:\"right-tick\",nativeOn:{\"touchstart\":function($event){$event.stopPropagation();return _vm.rightStart($event)},\"touchmove\":function($event){$event.stopPropagation();return _vm.rightMove($event)},\"touchend\":function($event){$event.stopPropagation();return _vm.rightEnd($event)}}},[_c('mu-icon',{class:{ dragging: _vm.rightDragging, outbound: _vm.rightOutBound },attrs:{\"value\":\"keyboard_arrow_right\"}})],1),(!_vm.active)?_c('div',{staticClass:\"left-connect\"},[_c('mu-icon',{attrs:{\"size\":12,\"value\":\"insert_link\"}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"box\" :class=\"{active:active, focus:focus, span:offset_sec}\" :style=\"boxStyle\" \n        @touchend=\"toggleActive\">\n\n        <mu-button flat class=\"left-tick\" ref=\"left\" \n            @touchstart.stop.native=\"leftStart\" \n            @touchmove.stop.native=\"leftMove\"\n            @touchend.stop.native=\"leftEnd\">\n            <mu-icon :class=\"{ dragging: leftDragging, outbound: leftOutBound }\" value=\"keyboard_arrow_left\" />\n        </mu-button>\n        <div class=\"content\">\n            <div class=\"thumb\" :class=\"{overlay:overlay_mode}\" :style=\"thumbStyle\">\n                <slot></slot>\n            </div>\n            <div class=\"border\"></div>\n        </div>\n        <mu-button class=\"right-tick\" ref=\"right\" \n            @touchstart.stop.native=\"rightStart\" \n            @touchmove.stop.native=\"rightMove\" \n            @touchend.stop.native=\"rightEnd\">\n            <mu-icon :class=\"{ dragging: rightDragging, outbound: rightOutBound }\" value=\"keyboard_arrow_right\" />\n        </mu-button>\n\n        <div class=\"left-connect\" v-if=\"!active\">\n            <mu-icon :size=\"12\" value=\"insert_link\" />\n        </div>\n    </div>\n</template>\n<style scoped>\n.box{\n    height:100%;\n    position:absolute;\n}\n.box.active{\n    z-index:100;\n}\n.box.active .border,\n.box.focus .border{\n    border: 2px #fff solid;\n    position: absolute;\n    left:0;right:0;\n    top: 0;bottom: 0;\n}\n.box.span{\n    border-left:5px solid transparent;\n}\n\n.box.span .thumb{\n    margin-left:-5px;\n} \n.box.span .left-connect{\n    display: flex;\n} \n\n.left-connect{\n    display: none;\n    align-items: center;\n    justify-content: center;\n    /* border: 1px solid black; */\n    color: gray;\n    position: absolute;\n    left: -10px;\n    top: 50%;\n    margin-top: -7.5px;\n    width: 15px;\n    height: 15px;\n    border-radius: 3px;\n    background: white;\n}\n.content{\n    width:100%;\n    height:100%;\n    overflow:hidden;\n}\n.thumb{\n    height:100%;\n    position:relative;\n    /* background:linear-gradient(90deg, green 0%,red 100%); */\n    background: black;\n}\n.thumb.overlay{\n    background:red;\n}\n.left-tick {\n    background-color: white;\n    width: 20px;\n    position: absolute;\n    height: 100%;\n    top: 0;\n    left: -20px;\n    border-top-left-radius: 5px;\n    border-bottom-left-radius: 5px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: rgba(0, 0, 0, 0.3) 0px 0px 5px;\n    z-index: 1;\n    min-width: auto;\n}\n\n.left-tick>* {\n    font-size: 30px\n}\n\n\n.right-tick {\n    background-color: white;\n    width: 20px;\n    position: absolute;\n    height: 100%;\n    top: 0;\n    right: -20px;\n    border-top-right-radius: 5px;\n    border-bottom-right-radius: 5px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: rgba(0, 0, 0, 0.3) 0px 0px 5px;\n    z-index: 2;\n    min-width: auto;\n}\n\n.right-tick>* {\n    font-size: 40px\n}\n\n/* 增大点击面积 */\n.left-tick::before,\n.right-tick::before {\n    display: block;\n    content: \"\";\n    left: -10px;\n    height: 100%;\n    position: absolute;\n    right: -10px;\n}\n\n.box .left-tick{\n    display: none\n}\n.box .right-tick{\n    display: none\n}\n.box.active .left-tick{\n    display: flex\n}\n.box.active .right-tick{\n    display: flex\n}\n.box.active .content {\n    border-color: white;\n}\n.box .dragging {\n    color: orange;\n}\n.box .outbound {\n    color: orangered;\n}\n</style>\n<script>\nexport default {\n    props:[\n        \"pps\",\n        \"dragging\",\n        \"active\",\n        \"focus\",\n        \"overlay_mode\",\n        \"start_sec\",\n        \"end_sec\",\n        \"total_sec\",\n        \"offset_sec\",\n        \"min_sec\",\n        \"left_drag_offset\"//左侧拖动修正，令左侧拖动时，靠右停靠\n    ],\n    data(){\n        return {\n            // total_sec:0,\n            // start_sec:0,\n            // end_sec:0,\n            // offset_sec:0,\n            // active:false,\n            // left_drag_offset:0, \n            leftOutBound: false,\n            rightOutBound: false,\n            leftDragging: false,\n            rightDragging: false,\n            boxStyle:{\n                width:0,\n                left:0\n            },\n            thumbStyle:{\n                width:0,\n                left:0\n            }\n        }\n    },\n    watch:{\n        start_sec:\"update\",\n        total_sec:\"update\",\n        end_sec:\"update\",\n        offset_sec:\"update\",\n        left_drag_offset:\"update\"\n    },\n    methods:{\n        update(){\n            if(this.end_sec <= this.start_sec)\n                this.end_sec = this.start_sec\n            this.boxStyle.width = (this.end_sec - this.start_sec) * this.pps + \"px\";\n            this.boxStyle.left = (this.left_drag_offset + this.offset_sec) * this.pps + \"px\";\n            this.thumbStyle.width = this.total_sec * this.pps + \"px\";\n            this.thumbStyle.left = this.start_sec * this.pps * -1 + \"px\";\n        },\n        toggleActive(){\n            //使用 touchend 配合 dragging 判断父元素是否在拖动中，拖动中则不响应点击\n            //如果使用 click 事件的话，父元素的 touchend 会首先触发，dragging 恒为 false\n            if(this.dragging)return;\n            this.$emit(\"active\",!this.active)\n        },\n        leftStart(e) {\n            this._pageX = e.changedTouches[0].pageX; \n            this._value = this.start_sec; \n            this.leftDragging = true;\n            this.leftMove(e)\n        },\n        leftMove(e) {\n\n            let offset_sec = \n                (e.changedTouches[0].pageX - this._pageX) / this.pps;\n\n            let start_sec = Math.min(this.end_sec - this.min_sec, \n                Math.max(0, this._value + offset_sec)\n            );\n\n            if(start_sec == this.end_sec - this.min_sec\n                || start_sec == 0) {\n                this.leftOutBound = true;\n            } else {\n                this.leftOutBound = false;\n            }\n\n            this.changed({\n                seek_sec: 0,\n                start_sec,\n                left_drag_offset: start_sec - this._value\n            });\n            return true;\n        },\n        leftEnd() {\n            this.leftDragging = false;\n            this.leftOutBound = false;\n            this.changed();\n        },\n        rightStart(e) {\n            this._pageX = e.changedTouches[0].pageX; \n            this._value = this.end_sec; \n            this.rightDragging = true;\n            this.rightMove(e)\n        },\n        rightMove(e) {\n            let offset_sec = (e.changedTouches[0].pageX - this._pageX) / this.pps;\n            \n            let end_sec = Math.min(this.total_sec, \n                    Math.max(this.start_sec+this.min_sec, this._value + offset_sec)\n                );\n\n            if(end_sec == this.start_sec+this.min_sec\n                || end_sec == this.total_sec) {\n                this.rightOutBound = true;\n            } else {\n                this.rightOutBound = false;\n            }\n\n            this.changed({\n                seek_sec: end_sec - this.start_sec,\n                end_sec\n            });\n            return true;\n        },\n        rightEnd() {\n            this.rightDragging = false;\n            this.rightOutBound = false;\n            this.changed();\n        },\n        changed(opt){\n            let end = !opt;\n            if(!opt)\n                opt = {\n                    left_drag_offset:0\n                }\n\n            this.$emit(\"change\",{\n                end,\n                start_sec: this.start_sec,\n                end_sec: this.end_sec,\n                left_drag_offset: this.left_drag_offset,\n                ...opt\n            })\n        }\n    },\n    mounted(){\n        this.update();\n        if(!this.pps){\n            this.pps = screen.width / 10;\n        }\n    }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TimelineItem.vue?vue&type=template&id=475fe86e&scoped=true&\"\nimport script from \"./TimelineItem.vue?vue&type=script&lang=js&\"\nexport * from \"./TimelineItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TimelineItem.vue?vue&type=style&index=0&id=475fe86e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"475fe86e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\",class:{active:_vm.active,amix:_vm.is_amix},style:([_vm.boxStyle, {height: _vm.active ? '100%' : '0'}]),attrs:{\"tabindex\":\"-1\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleActive($event)}}},[_c('div',{staticClass:\"left-icon\"},[_c('mu-button',{attrs:{\"fab\":\"\",\"small\":\"\",\"color\":_vm.is_amix?'orange':'red'}},[_c('mu-icon',{attrs:{\"color\":\"white\",\"size\":\"20\",\"value\":_vm.typeIcon}})],1)],1),_c('div',{staticClass:\"left-drag\",on:{\"touchstart\":function($event){$event.stopPropagation();return _vm.dragStart($event)},\"touchmove\":function($event){$event.stopPropagation();return _vm.dragMove($event)},\"touchend\":function($event){$event.stopPropagation();return _vm.dragEnd()}}},[_c('mu-button',{attrs:{\"fab\":\"\",\"small\":\"\",\"color\":\"white\",\"textColor\":\"red\"}},[_c('mu-icon',{attrs:{\"size\":\"20\",\"value\":\"code\"}})],1)],1),_c('mu-button',{ref:\"left\",staticClass:\"left-tick\",attrs:{\"flat\":\"\"},nativeOn:{\"touchstart\":function($event){$event.stopPropagation();return _vm.leftStart($event)},\"touchmove\":function($event){$event.stopPropagation();return _vm.leftMove($event)},\"touchend\":function($event){$event.stopPropagation();return _vm.changed()}}},[_c('mu-icon',{class:{ dragging: _vm.leftDragging },attrs:{\"value\":\"keyboard_arrow_left\"}})],1),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"thumb overlay\"},[_c('mu-icon',{attrs:{\"value\":_vm.typeIcon}}),_c('span',[_vm._v(_vm._s(_vm.typeText))]),_c('span',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.fmtSeconds(_vm.end_sec)))])],1)]),_c('mu-button',{ref:\"right\",staticClass:\"right-tick\",nativeOn:{\"touchstart\":function($event){$event.stopPropagation();return _vm.rightStart($event)},\"touchmove\":function($event){$event.stopPropagation();return _vm.rightMove($event)},\"touchend\":function($event){$event.stopPropagation();return _vm.changed()}}},[_c('mu-icon',{class:{ dragging: _vm.rightDragging },attrs:{\"value\":\"keyboard_arrow_right\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\r\n// 磁力吸附\r\n// \r\n// 示例：\r\n// let m = new Magnet(...);\r\n// newLayout = m.check(oldLayout,newLayout, null, ondock);\r\n// xxdom.style.left = newLayout.left;\r\n// xxdom.style.top = newLayout.top;\r\n// \r\n// layout属性:\r\n//  {left, top, right, bottom, width, height}\r\n// \r\n\r\n/**\r\n * 默认选项\r\n */\r\nconst DefaultOptions = {\r\n    span: 5, // 吸附距离\r\n    features: ['inside', 'outside', 'center', 'middle'], // 启用的能力\r\n    layouts: [], // 吸附对象\r\n    dynamicLayouts: function () { // 动态获取吸附对象\r\n        return this.layouts;\r\n    },\r\n    render: function(x, y) { // 渲染停靠虚线\r\n        if(x != null) {\r\n            x;// do someting\r\n        } else if(y != null) {\r\n            y;// do someting\r\n        }\r\n    }\r\n};\r\n\r\n/**\r\n * 可选吸附能力\r\n */\r\nconst Features = {\r\n    leftToLeft(span, layout, target) {\r\n        if (layout.left - span <= target.left &&\r\n            layout.left + span >= target.left) {\r\n            return {\r\n                diff: layout.left - target.left,\r\n                from: 'left',\r\n                to: 'left'\r\n            };\r\n        }\r\n    },\r\n    leftToRight(span, layout, target) {\r\n        if (layout.left - span <= target.right &&\r\n            layout.left + span >= target.right) {\r\n            return {\r\n                diff: layout.left - target.right,\r\n                from: 'left',\r\n                to: 'right'\r\n            };\r\n        }\r\n    },\r\n    rightToLeft(span, layout, target) {\r\n        if (layout.right - span <= target.left &&\r\n            layout.right + span >= target.left) {\r\n            return {\r\n                diff: layout.right - target.left,\r\n                from: 'right',\r\n                to: 'left'\r\n            };\r\n        }\r\n    },\r\n    rightToRight(span, layout, target) {\r\n        if (layout.right - span <= target.right &&\r\n            layout.right + span >= target.right) {\r\n            return {\r\n                diff: layout.right - target.right,\r\n                from: 'right',\r\n                to: 'right'\r\n            };\r\n        }\r\n    },\r\n    leftToCenter(span, layout, target) {\r\n        let targetHF = target.left + target.width / 2;\r\n        if (layout.left - span <= targetHF &&\r\n            layout.left + span >= targetHF) {\r\n            return {\r\n                diff: layout.left - targetHF,\r\n                from: 'left',\r\n                to: 'center'\r\n            };\r\n        }\r\n    },\r\n    rightToCenter(span, layout, target) {\r\n        let targetHF = target.left + target.width / 2;\r\n        if (layout.right - span <= targetHF &&\r\n            layout.right + span >= targetHF) {\r\n            return {\r\n                diff: layout.right - targetHF,\r\n                from: 'right',\r\n                to: 'center'\r\n            };\r\n        }\r\n    },\r\n    centerToCenter(span, layout, target) {\r\n        let layoutHF = layout.left + layout.width / 2;\r\n        let targetHF = target.left + target.width / 2;\r\n        if (layoutHF - span <= targetHF &&\r\n            layoutHF + span >= targetHF) {\r\n            return {\r\n                diff: layoutHF - targetHF,\r\n                from: 'center',\r\n                to: 'center'\r\n            };\r\n        }\r\n    },\r\n    centerToLeft(span, layout, target) {\r\n        let layoutHF = layout.left + layout.width / 2;\r\n        if (layoutHF - span <= target.left &&\r\n            layoutHF + span >= target.left) {\r\n            return {\r\n                diff: layoutHF - target.left,\r\n                from: 'center',\r\n                to: 'center'\r\n            };\r\n        }\r\n    },\r\n    centerToRight(span, layout, target) {\r\n        let layoutHF = layout.left + layout.width / 2;\r\n        if (layoutHF - span <= target.right &&\r\n            layoutHF + span >= target.right) {\r\n            return {\r\n                diff: layoutHF - target.right,\r\n                from: 'center',\r\n                to: 'center'\r\n            };\r\n        }\r\n    },\r\n    topToTop(span, layout, target){\r\n        if (layout.top - span <= target.top &&\r\n            layout.top + span >= target.top) {\r\n            return {\r\n                diff: layout.top - target.top,\r\n                from: 'top',\r\n                to: 'top'\r\n            };\r\n        }\r\n    },\r\n    topToBottom(span, layout, target){\r\n        if (layout.top - span <= target.bottom &&\r\n            layout.top + span >= target.bottom) {\r\n            return {\r\n                diff: layout.top - target.bottom,\r\n                from: 'top',\r\n                to: 'bottom'\r\n            };\r\n        }\r\n    },\r\n    bottomToTop(span, layout, target){\r\n        if (layout.bottom - span <= target.top &&\r\n            layout.bottom + span >= target.top) {\r\n            return {\r\n                diff: layout.bottom - target.top,\r\n                from: 'bottom',\r\n                to: 'top'\r\n            };\r\n        }\r\n    },\r\n    bottomToBottom(span, layout, target){\r\n        if (layout.bottom - span <= target.bottom &&\r\n            layout.bottom + span >= target.bottom) {\r\n            return {\r\n                diff: layout.bottom - target.bottom,\r\n                from: 'bottom',\r\n                to: 'bottom'\r\n            };\r\n        }\r\n    },\r\n    topToMiddle(span, layout, target){\r\n        let targetHF = target.top + target.height / 2;\r\n        if (layout.top - span <= targetHF &&\r\n            layout.top + span >= targetHF) {\r\n            return {\r\n                diff: layout.top - targetHF,\r\n                from: 'top',\r\n                to: 'middle'\r\n            };\r\n        }\r\n    },\r\n    bottomToMiddle(span, layout, target){\r\n        let targetHF = target.top + target.height / 2;\r\n        if (layout.bottom - span <= targetHF &&\r\n            layout.bottom + span >= targetHF) {\r\n            return {\r\n                diff: layout.bottom - targetHF,\r\n                from: 'bottom',\r\n                to: 'middle'\r\n            };\r\n        }\r\n    },\r\n    middleToMiddle(span, layout, target) {\r\n        let layoutHF = layout.top + layout.height / 2;\r\n        let targetHF = target.top + target.height / 2;\r\n        if (layoutHF - span <= targetHF &&\r\n            layoutHF + span >= targetHF) {\r\n            return {\r\n                diff: layoutHF - targetHF,\r\n                from: 'middle',\r\n                to: 'middle'\r\n            };\r\n        }\r\n    },\r\n    middleToTop(span, layout, target){\r\n        let layoutHF = layout.top + layout.height / 2;\r\n        if (layoutHF - span <= target.top &&\r\n            layoutHF + span >= target.top) {\r\n            return {\r\n                diff: layoutHF - target.top,\r\n                from: 'middle',\r\n                to: 'top'\r\n            };\r\n        }\r\n    },\r\n    middleToBottom(span, layout, target){\r\n        let layoutHF = layout.top + layout.height / 2;\r\n        if (layoutHF - span <= target.bottom &&\r\n            layoutHF + span >= target.bottom) {\r\n            return {\r\n                diff: layoutHF - target.bottom,\r\n                from: 'middle',\r\n                to: 'bottom'\r\n            };\r\n        }\r\n    },\r\n    inside(span, layout, target) {\r\n        return [\r\n            Features.leftToLeft.call(this, span, layout, target),\r\n            Features.rightToRight.call(this, span, layout, target),\r\n            Features.topToTop.call(this, span, layout, target),\r\n            Features.bottomToBottom.call(this, span, layout, target)\r\n        ].filter(r => r);\r\n    },\r\n    outside(span, layout, target) {\r\n        return [\r\n            Features.leftToRight.call(this, span, layout, target),\r\n            Features.rightToLeft.call(this, span, layout, target),\r\n            Features.topToBottom.call(this, span, layout, target),\r\n            Features.bottomToTop.call(this, span, layout, target)\r\n        ].filter(r => r);\r\n    },\r\n    center(span, layout, target) {\r\n        return [\r\n            Features.leftToCenter.call(this, span, layout, target),\r\n            Features.rightToCenter.call(this, span, layout, target),\r\n            Features.centerToCenter.call(this, span, layout, target),\r\n            Features.centerToLeft.call(this, span, layout, target),\r\n            Features.centerToRight.call(this, span, layout, target)\r\n        ].filter(r => r);\r\n    },\r\n    middle(span, layout, target) {\r\n        return [\r\n            Features.topToMiddle.call(this, span, layout, target),\r\n            Features.bottomToMiddle.call(this, span, layout, target),\r\n            Features.middleToMiddle.call(this, span, layout, target),\r\n            Features.middleToTop.call(this, span, layout, target),\r\n            Features.middleToBottom.call(this, span, layout, target)\r\n        ].filter(r => r);\r\n    }\r\n}\r\n\r\nexport default class Magnet {\r\n    constructor(options = DefaultOptions) {\r\n        this.options = Object.assign({}, DefaultOptions, options);\r\n        this.features = Object.create(Features);\r\n    }\r\n    /**\r\n     * 获取所有吸附距离内的layout\r\n     */\r\n    findTargets(layout, features) {\r\n        features = features || this.options.features;\r\n\r\n        let span = this.options.span;\r\n        return this.options.dynamicLayouts().flatMap(l =>\r\n            features.map(feature => this.features[feature])\r\n            .flatMap(featureFn => featureFn.call(this, span, layout, l))\r\n            .filter(target => target)\r\n            .map(target => {\r\n                target.layout = l;\r\n                return target;\r\n            }))\r\n    }\r\n    getTargetPosition(target){\r\n        if (target.to == 'center') {\r\n            return target.layout.left + target.layout.width / 2;\r\n        } else if(target.to == 'middle') {\r\n            return target.layout.top + target.layout.height / 2;\r\n        } else {\r\n            return target.layout[target.to];\r\n        }\r\n    }\r\n    /**\r\n     * 返回吸附后的layout\r\n     */\r\n    createLayout(layout, xTarget , yTarget) {\r\n        layout = Object.assign({}, layout);\r\n        if (xTarget) {\r\n            // to\r\n            let x = this.getTargetPosition(xTarget);\r\n            // from\r\n            if (xTarget.from == 'center') {\r\n                layout.left = x - layout.width / 2;\r\n                layout.right = layout.left + layout.width;\r\n            } else {\r\n                layout[xTarget.from] = x;\r\n                if(xTarget.from == 'left') {\r\n                    layout.right = layout.left + layout.width;\r\n                } else if (xTarget.from == 'right') {\r\n                    layout.left = layout.right - layout.width;\r\n                }\r\n            }\r\n        }\r\n        if(yTarget) {\r\n            // to\r\n            let y = this.getTargetPosition(yTarget);\r\n            // from\r\n            if (yTarget.from == 'middle') {\r\n                layout.top = y - layout.height / 2;\r\n                layout.bottom = layout.top + layout.height;\r\n            } else {\r\n                layout[yTarget.from] = y;\r\n                if(yTarget.from == 'top') {\r\n                    layout.bottom = layout.top + layout.height;\r\n                } else if (yTarget.from == 'bottom') {\r\n                    layout.top = layout.bottom - layout.height;\r\n                }\r\n            }\r\n        }\r\n        return layout;\r\n    }\r\n    /**\r\n     * 传入旧、新layout\r\n     * 返回吸附后的layout\r\n     * @param layout 旧layout\r\n     * @param newLayout 新layout\r\n     * @param features 能力\r\n     */\r\n    check(layout, newLayout, features) {\r\n        let targets = this.findTargets(newLayout, features);\r\n\r\n        // 获取距离最近的吸附对象作为目标\r\n        let xTarget = null;\r\n        let yTarget = null;\r\n        let x = null;\r\n        let y = null;\r\n\r\n        targets.forEach(t => {\r\n            if(t.to == 'left' || t.to == 'center' || t.to == 'right') {\r\n                if(!xTarget) {\r\n                    xTarget = t;\r\n                } else if (t.to == Math.abs(t.diff) < Math.abs(xTarget.diff)) {\r\n                    xTarget = t;\r\n                }\r\n            } else {\r\n                if(!yTarget) {\r\n                    yTarget = t;\r\n                } else if (Math.abs(t.diff) < Math.abs(yTarget.diff)) {\r\n                    yTarget = t;\r\n                }\r\n            }\r\n        });\r\n\r\n        if (xTarget || yTarget) {\r\n            if(xTarget) {\r\n                x = this.getTargetPosition(xTarget);\r\n            }\r\n            if(yTarget) {\r\n                y = this.getTargetPosition(yTarget);\r\n            }\r\n\r\n            newLayout = this.createLayout(newLayout, xTarget, yTarget);\r\n        }\r\n        this.options.render(x, y);\r\n        return newLayout;\r\n    }\r\n}","<template>\n    <div tabindex=\"-1\" class=\"box\" :class=\"{active:active,amix:is_amix}\"\n        :style=\"[boxStyle, {height: active ? '100%' : '0'}]\"\n        @click.stop=\"toggleActive\">\n        <div class=\"left-icon\">\n            <mu-button fab small :color=\"is_amix?'orange':'red'\" > \n                <mu-icon color=\"white\" size=\"20\" :value=\"typeIcon\" /> \n            </mu-button>\n        </div>\n        <div class=\"left-drag\"\n            @touchstart.stop=\"dragStart\"\n            @touchmove.stop=\"dragMove\"\n            @touchend.stop=\"dragEnd()\">\n            <mu-button fab small color=\"white\" textColor=\"red\"> <mu-icon size=\"20\" value=\"code\" /> </mu-button>\n        </div>\n        <mu-button class=\"left-tick\" ref=\"left\"\n            flat\n            @touchstart.stop.native=\"leftStart\"\n            @touchmove.stop.native=\"leftMove\"\n            @touchend.stop.native=\"changed()\">\n            <mu-icon :class=\"{ dragging: leftDragging }\" value=\"keyboard_arrow_left\" />\n        </mu-button>\n        <div class=\"content\">\n            <div class=\"thumb overlay\">\n                <mu-icon :value=\"typeIcon\" />\n                <span>{{typeText}}</span>\n                <span class=\"time\">{{fmtSeconds(end_sec)}}</span>\n            </div>\n        </div>\n        <mu-button class=\"right-tick\" ref=\"right\" \n            @touchstart.stop.native=\"rightStart\"\n            @touchmove.stop.native=\"rightMove\"\n            @touchend.stop.native=\"changed()\">\n            <mu-icon :class=\"{ dragging: rightDragging }\" value=\"keyboard_arrow_right\" />\n        </mu-button>\n    </div>\n</template>\n<style lang=\"less\" scoped>\n.box {\n    height: 0;\n    position: absolute;\n    outline: 0;\n}\n.box.active {\n    z-index: 100;\n\n    .content {\n        border: 0;\n        height: 100%;\n    }\n    .left-drag {\n        display: block;\n    }\n\n    .left-icon {\n        display: none;\n    }\n    .left-tick {\n        height: 100%;\n        min-width: auto;\n    }\n    .right-tick {\n        height: 100%;\n        min-width: auto;\n    }\n}\n.box.span {\n    border-left: 5px solid transparent;\n}\n\n.box.span .thumb {\n    margin-left: -5px;\n}\n\n.box .time {\n    margin-left: 0.5em;\n    padding-left: 0.25em;\n    border-left: 1px solid rgba(255, 255, 255, 0.5);\n}\n\n.left-icon {\n    position: absolute;\n    left: -15px;\n    margin-top: 14px;\n    button {\n        width:30px;height:30px;\n        // border-radius:0;\n        border-top-right-radius: 1px;\n        transform:rotate(-45deg)\n    }\n}\n\n.left-drag {\n    display: none;\n    position: absolute;\n    left: -60px;\n    top: 50%;\n    margin-top: -15px;\n    color: white;\n    button {\n        width:30px;height:30px;\n    }\n}\n.content {\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n    border-top: 3px solid red;\n    transition: all 0.3s;\n    height: 0px;\n}\n.amix .content {\n    border-color: orange;\n}\n.thumb {\n    height: 100%;\n    position: relative;\n    background: linear-gradient(90deg, green 0%, red 100%);\n}\n.thumb.overlay {\n    width: 100%;\n    background: red;\n    color: #eee;\n    display: flex;\n    align-items: center;\n    padding: 0 10px;\n    font-size: 12px;\n}\n\n.amix .thumb.overlay {\n    background: orange;\n}\n.left-tick {\n    background-color: white;\n    width: 20px;\n    position: absolute;\n    height: 100%;\n    top: 0;\n    left: -20px;\n    border-top-left-radius: 5px;\n    border-bottom-left-radius: 5px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: rgba(0, 0, 0, 0.3) 0px 0px 5px;\n    overflow: hidden;\n    transition: all 0.3s;\n    height: 0;\n}\n\n.left-tick > * {\n    font-size: 30px;\n}\n\n.right-tick {\n    background-color: white;\n    width: 20px;\n    position: absolute;\n    height: 100%;\n    top: 0;\n    right: -20px;\n    border-top-right-radius: 5px;\n    border-bottom-right-radius: 5px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: rgba(0, 0, 0, 0.3) 0px 0px 5px;\n    overflow: hidden;\n    transition: all 0.3s;\n    height: 0;\n}\n\n.right-tick > * {\n    font-size: 30px;\n}\n\n.box.active .left-tick {\n    display: flex;\n}\n.box.active .right-tick {\n    display: flex;\n}\n.box.active .content {\n    border-color: white;\n}\n.box .dragging {\n    color: orange;\n}\n</style>\n<script>\nimport Const from \"@/const\";\nimport Editlist from \"@/model/Editlist\";\nimport Magnet from \"@/model/Magnet\";\n\nconst MIN_SPAN = 0.1;\n\nexport default {\n    props:[\n        \"pps\",\n        \"active\",\n        \"end_sec\",\n        \"offset_sec\",\n        \"is_amix\",\n        \"type\",\n        \"id\"\n    ],\n    data() {\n        return {\n            overallDragging: false,\n            leftDragging: false,\n            rightDragging: false,\n            boxStyle: {\n                width: 0,\n                left: 0\n            }\n        };\n    },\n    watch: {\n        end_sec: \"update\",\n        offset_sec: \"update\"\n    },\n    computed: {\n        typeIcon() {\n            return this.is_amix ? \"music_note\" : \n                Const.Overlay.Type.Text == this.type ? \"font_download\" : \n                Const.Overlay.Type.Image == this.type ? \"image\" :\n                \"blur_on\";\n        },\n        typeText() {\n            return this.is_amix ? \"音效\" : \n                Const.Overlay.Type.Text == this.type ? \"文字\" : \n                Const.Overlay.Type.Image == this.type ? \"贴纸\" :\n                \"马赛克\";\n        }\n    },\n    methods: {\n        fmtSeconds(v) {\n            let s = (v % 60).toFixed(0);\n            let m = ((v / 60) % 60).toFixed(0);\n            let h = ((v / 60 / 60) % 60).toFixed(0);\n            return h + \":\" + m + \":\" + s;\n        },\n\n        update() {\n            window.console.log(\"update:\"+this.end_sec)\n            if(this.end_sec <= 0)\n                this.end_sec = MIN_SPAN;\n            this.boxStyle.width = (this.end_sec) * this.pps + \"px\";\n            this.boxStyle.left = (this.offset_sec) * this.pps + \"px\";\n        },\n        toggleActive() {\n            // this.active = !this.active;\n            if (!this.active) {\n                window.console.log(\"active\", this.active);\n                this.$nextTick(() => {\n                    // 阻止focus时滚动，滚动会导致整个界面偏移\n                    this.$el.focus({ preventScroll: true });\n                });\n                this.$emit(\"active\", !this.active);\n            }\n        },\n        dragStart(e) {\n            this._pageX = e.changedTouches[0].pageX;\n            this._value = this.offset_sec;\n            this.overallDragging = true;\n            this.dragMove(e);\n        },\n        dragMove(e) {\n            let oldOffset = this._value;\n            let offset_sec =\n                (e.changedTouches[0].pageX - this._pageX) / this.pps;\n            // to absolute\n            offset_sec = oldOffset + offset_sec;\n\n            // dock begin\n            let oldLayout = this.createMagnetLayout({\n                left: oldOffset,\n                width: this.end_sec\n            });\n            let newLayout = this.createMagnetLayout({\n                left: offset_sec,\n                width: this.end_sec\n            });\n            newLayout = this.magnet.check(oldLayout, newLayout);\n            (offset_sec = newLayout.left),\n                // dock end\n\n                (offset_sec = Math.max(0, offset_sec));\n            offset_sec = Math.min(Editlist.editlist.total_sec, offset_sec);\n\n            this.changed({\n                offset_sec,\n                overallDragging: this.overallDragging\n            });\n            return true;\n        },\n        dragEnd() {\n            this.overallDragging = false;\n            this.leftDragging = false;\n            this.rightDragging = false;\n            this.changed();\n        },\n        leftStart(e) {\n            this._pageX = e.changedTouches[0].pageX;\n            this._value = this.offset_sec;\n            this._value2 = this.end_sec;\n            this.leftDragging = true;\n            this.leftMove(e);\n        },\n        leftMove(e) {\n            let oldOffset = this._value;\n            let oldEnd = this._value2;\n            let offset_sec =\n                (e.changedTouches[0].pageX - this._pageX) / this.pps;\n            // to absolute\n            offset_sec = oldOffset + offset_sec;\n\n            // dock begin: 因为只移动一端，所以只给left做检测，width=0，让right与left相等\n            let oldLayout = this.createMagnetLayout({\n                left: oldOffset,\n                width: 0\n            });\n            let newLayout = this.createMagnetLayout({\n                left: offset_sec,\n                width: 0\n            });\n            newLayout = this.magnet.check(oldLayout, newLayout);\n            offset_sec = newLayout.left;\n            // dock end\n\n            offset_sec = Math.max(0, offset_sec);\n            offset_sec = Math.min(oldOffset + oldEnd - MIN_SPAN, offset_sec);\n\n            let end_sec = Math.max(0, oldEnd + oldOffset - offset_sec);\n\n            this.changed({\n                offset_sec,\n                end_sec\n            });\n            return true;\n        },\n        rightStart(e) {\n            this._pageX = e.changedTouches[0].pageX;\n            this._value = this.end_sec;\n            this.rightDragging = true;\n            this.rightMove(e);\n        },\n        rightMove(e) {\n            let oldEnd = this._value;\n            let offset_sec =\n                (e.changedTouches[0].pageX - this._pageX) / this.pps;\n            let end_sec = oldEnd + offset_sec;\n\n            // dock begin\n            let oldLayout = this.createMagnetLayout({\n                left: this.offset_sec + oldEnd,\n                width: 0\n            });\n            let newLayout = this.createMagnetLayout({\n                left: this.offset_sec + end_sec,\n                width: 0\n            });\n            newLayout = this.magnet.check(oldLayout, newLayout);\n            end_sec = newLayout.left - this.offset_sec;\n            // dock end\n\n            end_sec = Math.min(\n                Editlist.editlist.total_sec - this.offset_sec,\n                end_sec\n            );\n            end_sec = Math.max(MIN_SPAN, end_sec);\n\n            this.changed({\n                end_sec\n            });\n            return true;\n        },\n        changed(opt) {\n            let end = !opt;\n\n            this.$emit(\"change\", {\n                end,\n                offset_sec: this.offset_sec,\n                end_sec: this.end_sec,\n                ...opt\n            });\n        },\n        createMagnetLayout(layout) {\n            return {\n                left: layout.left,\n                width: layout.width,\n                right: layout.left + layout.width,\n                top: 0,\n                height: 0,\n                bottom: 0\n            };\n        },\n        // 停靠时震动\n        vibrate() {\n            navigator.vibrate([100]);\n        }\n    },\n    mounted() {\n        this.update();\n        if (!this.pps) {\n            this.pps = screen.width / 10;\n        }\n        this.magnet = new Magnet({\n            span: 6 / this.pps, // seconds\n            features: [\"inside\", \"outside\"],\n            render: x => {\n                if (x != null) {\n                    this.vibrate();\n                }\n            },\n            dynamicLayouts: () => {\n                let overlay = [];\n                if (this.is_amix) {\n                    overlay = Editlist.editlist.amix;\n                } else if (\n                    this.type === Const.Overlay.Type.Mosic ||\n                    this.type === Const.Overlay.Type.Image\n                ) {\n                    overlay = [\n                        ...Editlist.editlist.mosic,\n                        ...Editlist.editlist.overlay.filter(\n                            e => e.type == Const.Overlay.Type.Image\n                        )\n                    ];\n                } else {\n                    overlay = Editlist.editlist.overlay.filter(\n                        e => e.type == this.type\n                    );\n                }\n                let layouts = overlay\n                    .filter(o => o.id != this.id)\n                    .map(o =>\n                        this.createMagnetLayout({\n                            left: o.offset_sec,\n                            width: o.end_sec\n                        })\n                    );\n                // 加入时间轴指针\n                if (!this.overallDragging) {\n                    layouts.push({\n                        left: Editlist.editlist.time_sec,\n                        width: 0\n                    });\n                }\n                return layouts;\n            }\n        });\n    }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineOverlayItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineOverlayItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TimelineOverlayItem.vue?vue&type=template&id=ec466ad2&scoped=true&\"\nimport script from \"./TimelineOverlayItem.vue?vue&type=script&lang=js&\"\nexport * from \"./TimelineOverlayItem.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TimelineOverlayItem.vue?vue&type=style&index=0&id=ec466ad2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ec466ad2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\"},_vm._l((_vm.thumbs),function(i,idx){return _c('img',{key:idx,style:({left:i.ss*_vm.pps+'px', width:i.duration*_vm.pps+'px'}),attrs:{\"src\":i.url || _vm.firstThumb},on:{\"error\":function($event){return _vm.thumbLoadError(idx)}}})}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import cordovaModel from \"@/model/CordovaModel\"\n\nlet THIS = {\n    Util:{\n        async getCdvUrl(i) {\n            if(i.indexOf(\"http://localhost\") == 0){\n                i = i.replace(/http:\\/\\/localhost:.*?\\//,\"cdvfile://localhost/\")\n            }\n            if(i.indexOf(\"/\") == 0){\n                i = \"file://\"+i;\n            }\n            return await new Promise((o, x) =>\n                resolveLocalFileSystemURL(\n                    i,\n                    function(entry) {\n                        o(entry.toInternalURL());\n                    },\n                    () => {\n                        x();\n                    }\n                )\n            );\n        },\n        async getLocalUrl(i) {\n            if(i.indexOf(\"http://localhost\") == 0){\n                i = i.replace(/http:\\/\\/localhost:.*?\\//,\"cdvfile://localhost/\")\n            }\n            if(i.indexOf(\"/\") == 0){\n                i = \"file://\"+i;\n            }\n            return await new Promise((o, x) =>\n                resolveLocalFileSystemURL(\n                    i,\n                    function(entry) {\n                        //去掉 urlencode \n                        o(THIS.Util.normalizeFileUrl(entry.toURL()));\n                    },\n                    () => {\n                        x();\n                    }\n                )\n            );\n        },\n        normalizeFileUrl(url) {\n\n            if(url.toLowerCase().search(/.{0,5}file:\\/\\//) == 0){\n                //本地地址不能urlencode，否则ffmpeg认不到。\n                url = decodeURI( url );\n            }\n\n            return url;\n        }\n    }, \n    async getThumbList(src,output){\n        let localSrc = await Promise.all(src.map(async (i)=>{\n            return await THIS.Util.getLocalUrl(i);\n        }));\n        localSrc;\n        // console.log(\"get format from:\"+localSrc)\n        let format = await Promise.all(src.map(async (i)=>{\n            return await new Promise((o, x) =>\n                UGCApp.ffmpeg.format(\n                    i,o,x\n                )\n            );\n        }));\n        format;\n\n        // console.log(format)\n        let thumbPath = src.map((_,idx)=>{\n            return cordova.file.cacheDirectory + \"editor_thumb_\"+idx+\".jpg\";\n        });\n\n        let input = \"\"\n        let out = \"\"\n        let filter = \" -filter_complex '\"\n        for(let i=0; i<src.length; i++){\n            input += \" -analyzeduration 0 -probesize 32 -skip_frame nokey -t 0.001 -i '\"+src[i]+\"' \";\n            filter += \"[\"+i+\":v]scale=100:100:force_original_aspect_ratio=increase,crop=100:100[out\"+i+\"];\";\n            out += \" -map [out\"+i+\"] -frames:v 1 -f image2 -y '\"+thumbPath[i]+\"'\";\n        }\n\n        filter = (filter).replace(/;$/,\"'\");\n\n        UGCApp.ffmpeg.start(\n            \"ffmpeg \"+input+filter+out\n        );\n\n        // let progress = 0;\n        let status = 0;\n\n        output.progress = -1;\n        do {\n            output.status = status = await new Promise((o, x) =>\n                UGCApp.ffmpeg.status( o,x )\n            );\n            await new Promise((o, ) => {\n                setTimeout(o, 1000);\n            });\n        } while (status == 1);\n\n        return await Promise.all(thumbPath.map(async (i)=>{\n            let cdvurl = await THIS.Util.getCdvUrl(i);\n            let url = Url(cdvurl,true);\n            url.query[\"_\"] = Math.random();\n            return url.toString();\n        }));\n    },\n    async getThumb(src,output){\n        let localSrc = await THIS.Util.getLocalUrl(src);\n\n        // console.log(\"get format from:\"+localSrc)\n        let format = await new Promise((o, x) =>\n            UGCApp.ffmpeg.format(\n                localSrc,o,x\n            )\n        );\n\n        // console.log(format)\n        let thumbPath = cordova.file.cacheDirectory + \"editor_thumb.jpg\";\n        await new Promise((o, ) =>\n            resolveLocalFileSystemURI(thumbPath, e => (e.remove(), o()), o)\n        ).catch(()=>{});\n\n        let thumbCount = 10;\n        let input = \"\"\n        let concat = \"\";\n        for(let i=0; i<thumbCount; i++){\n            let ss = format.duration/1000 / thumbCount * i;\n            input += \" -analyzeduration 0 -probesize 32 -ss \"+ss+\" -t 0.001 -i '\"+localSrc+\"' \";\n            concat += \"[\"+i+\"]\";\n        }\n        concat += \"concat=\"+thumbCount;\n        let cmd = \"ffmpeg {input} -filter_complex {concat},scale=100:100:force_original_aspect_ratio=increase,crop=100:100,tile={n}x1 -f image2 -y {des}\"\n            .replace(\"{input}\", input)\n            .replace(\"{des}\", thumbPath)\n            .replace(\"{concat}\", concat)\n            .replace(/\\{n\\}/g, thumbCount);\n\n        // console.log(cmd);return;\n        UGCApp.ffmpeg.start(\n            cmd\n        );\n\n        // let progress = 0;\n        let status = 0;\n\n        output.progress = -1;\n        do {\n            output.status = status = await new Promise((o, x) =>\n                UGCApp.ffmpeg.status( o,x )\n            );\n            await new Promise((o, ) => {\n                setTimeout(o, 1000);\n            });\n        } while (status == 1);\n\n        return await THIS.Util.getCdvUrl(thumbPath);\n    },\n    Transcode: {\n        // opt:{\n        //     imgs:[{\n        //         url:\"\",\n        //         x:0,\n        //         y:0,\n        //         w:0,\n        //         h:0,\n        //         rotate:0\n        //     }],\n        //     timeline:{\n        //         left: 0,\n        //         right: 0\n        //     }\n        // }\n        //     output:{\n        //         progress:0,\n        //         status:0,\n        //         desSrc:\"\"\n        //     }\n        // \n        async singleEx(src, opt, output) {\n            let ret = false;\n            ret = await THIS.Transcode.single(src,opt,output);\n            if(!ret){\n                ret = await THIS.Transcode.single(src,opt,output,true);\n            }\n            return ret;\n        },\n        async single(src, opt, output, forceSoftwareEncoder) {\n            let localSrc = src.indexOf(\"file://\")==0?src:\n                (await THIS.Util.getLocalUrl(src));\n\n            let format = await new Promise((o, x) =>\n                UGCApp.ffmpeg.format( localSrc,o,x )\n            );\n\n            let pOverlay = \"\";\n            let pIn = \"0:v\";\n            let pOut;\n\n            // 旋转了90度，要交换高宽\n            if ((90 + format.video.rotate) % 180 == 0) {\n                let _cacheWidth = format.video.width;\n                format.video.width = format.video.height;\n                format.video.height = _cacheWidth;\n            }\n\n            // 获取与ui尺寸的缩放比例\n            let videoScale = Math.max(\n                format.video.width / opt.uiBox.width,\n                format.video.height / opt.uiBox.height\n            );\n\n            // 计算与ui位置的差值\n            let offsetX =\n                (opt.uiBox.width * videoScale) / 2 -\n                format.video.width / 2;\n            let offsetY =\n                (opt.uiBox.height * videoScale) / 2 -\n                format.video.height / 2;\n\n            for (let idx in opt.imgs) {\n                let i = opt.imgs[idx];\n                let item =\n                    \"movie='{url}'{gif},scale={w}:{h},rotate='a={rotate}*PI/180:ow=hypot(iw,ih):oh=ow:c=none'[p{id}],[{in}][p{id}]overlay={x}:{y}{shortest}[{out}]\";\n                //rotate滤镜会扩大尺寸到对角线\n                let rotatedSize = Math.sqrt(i.w * i.w + i.h * i.h);\n                let isGif = i.url.toLowerCase().lastIndexOf(\".gif\")==i.url.length-4;\n                item = item\n                    .replace(\"{gif}\",\n                        isGif?\":loop=0:discontinuity=1,setpts=N/(FR*TB)\":\"\")\n                    .replace(\"{shortest}\",isGif?\":shortest=1\":\"\")\n                    .replace(\n                        \"{url}\",\n                        i.url.indexOf(\"data:\") == 0 ? i.url.replace(\":\",\"\\\\\\\\:\") :\n                        (await THIS.Util.getLocalUrl(i.url)).replace(\"file://\", \"\").replace(/:/g, \"\\\\:\")\n                    )\n                    .replace(\"{w}\", (i.w * videoScale).toFixed(2))\n                    .replace(\"{h}\", (i.h * videoScale).toFixed(2))\n                    //修正rotate扩大的尺寸\n                    .replace(\n                        \"{x}\",\n                        (\n                            (i.x - (rotatedSize / 2 - i.w / 2)) * videoScale -\n                            offsetX\n                        ).toFixed(2)\n                    )\n                    .replace(\n                        \"{y}\",\n                        (\n                            (i.y - (rotatedSize / 2 - i.h / 2)) * videoScale -\n                            offsetY\n                        ).toFixed(2)\n                    )\n                    .replace(\"{rotate}\", i.rotate)\n                    .replace(/\\{id\\}/g, i.id)\n                    .replace(\"{in}\", pIn)\n                    .replace(\"{out}\", \"outP\" + i.id);\n                pIn = pOut = \"outP\" + i.id;\n                pOverlay && (pOverlay += \",\");\n                pOverlay += item;\n            }\n\n            //某些拍摄的视频 tbr 120，会识别为 120fps，这里使用一个很常用的固定真绿\n            let fps = \"fps=30\";\n            //某些拍摄的视频分辨率会超过 3840x2160，导致h5播放器无法播放，这里缩减尺寸。\n            // 特别手机拍摄分辨率可能为 2304x1080(rotate 90)，转码后就变成了 1080x2304，超出2160的高度。\n            let aspectLimit4k = \"scale='min(1080,iw)':min'(1080,ih)':force_original_aspect_ratio=decrease,scale=trunc(iw/2)*2:trunc(ih/2)*2\";\n\n            let vfilter = '-vf \"';\n            if(pOverlay)\n                vfilter += pOverlay.replace(\"[\" + pOut + \"]\", \"\") + \",\";\n            vfilter += fps + \",\";\n            vfilter += aspectLimit4k;\n            if(opt.vfilter)\n                vfilter += \",\"+opt.vfilter;\n            vfilter += '\"';\n\n            let afilter = \"\"\n            if(opt.afilter){\n                afilter = '-af \"';\n                afilter += opt.afilter + \"\\\"\";\n            }\n\n            let desSrc = localSrc + \"-\" + new Date().getTime() + \".mp4\";\n            let bitrate = Math.pow(Math.max(format.video.width, format.video.height) / 1280, 2) * 3000;\n            let vcodec = \"h264\";\n            // let vdcodec = \"h264\";\n            if (cordovaModel.isAndroid() && !forceSoftwareEncoder){\n                vcodec = \"libhw_avc\";\n                // 使用 h264_mediacodec 解码时间戳错乱，不可用\n                // vdcodec = \"h264_mediacodec\";\n            }\n            if (cordovaModel.isIOS()) {\n                vcodec = \"h264_videotoolbox\";\n                // 使用 videotoolbox 解码更慢，原因不明\n                // vdcodec = \"h264 -hwaccel videotoolbox\";\n                desSrc = cordova.file.cacheDirectory + \"output.mp4\";\n            }\n            UGCApp.ffmpeg.start(\n                \"ffmpeg -accurate_seek {start} -t {len} -i {src} {vfilter} {afilter} -acodec aac -b:v {b:v} -vcodec {vcodec} -use_editlist 0 -f mp4 -y {des}\"\n                    .replace(\"{start}\", opt.timeline.left>1?\n                        (\"-ss \"+opt.timeline.left)\n                        :\"\")\n                    .replace(\n                        \"{len}\",\n                        opt.timeline.right - opt.timeline.left\n                    )\n                    // .replace(\"{vdcodec}\", vdcodec)\n                    .replace(\"{vcodec}\", vcodec)\n                    .replace(\"{src}\", localSrc)\n                    .replace(\"{vfilter}\", vfilter)\n                    .replace(\"{afilter}\", afilter)\n                    .replace(\"{b:v}\", bitrate + \"k\")\n                    .replace(\"{des}\", desSrc)\n            );\n            let newDuration =\n                1000 * (opt.timeline.right - opt.timeline.left);\n            let progress = 0;\n            let status = 0;\n\n            await new Promise((o, ) => {\n                setTimeout(o, 1000);\n            });\n            do {\n                output.status = status = await new Promise(\n                    UGCApp.ffmpeg.status\n                );\n                progress = await new Promise(UGCApp.ffmpeg.progress);\n                output.progress = Math.max(0,progress.pts / newDuration);\n\n                await new Promise((o, ) => {\n                    setTimeout(o, 200);\n                });\n                window.console.log(\n                    \"ffmpeg progress:\" + progress.pts + \", status:\" + status\n                );\n            } while (status == 1);\n\n            let result = await new Promise(UGCApp.ffmpeg.report);\n\n            if (result == 0) {\n                if (cordovaModel.isIOS()) {\n                    let dcimDesSrc = await new Promise((o, x) => UGCApp.sendToDCIM(desSrc, o, x));\n                    output.desSrc = await THIS.Util.getLocalUrl(dcimDesSrc);\n                }\n                else {\n                    UGCApp.scanFile(desSrc);\n                    output.desSrc = await THIS.Util.getCdvUrl(desSrc);\n                }\n                // THIS.$nextTick(() => {\n                //     THIS.$refs.video.load();\n                // })\n            } else {\n                // THIS.$Message.error({\n                //     content: \"转码出错: \" + result,\n                //     duration: 3\n                // });\n            }\n\n            return result == 0;\n        },\n        async mergeEx(videos, opt, output){\n\n            let ret = false;\n            ret = await THIS.Transcode.merge(videos,opt,output);\n            if(!ret){\n                ret = await THIS.Transcode.merge(videos,opt,output,true);\n            }\n            return ret;\n\n        },\n        async merge(videos, opt, output, forceSoftwareEncoder){\n            let localSrc = await Promise.all(videos.map(async (src)=>{\n                return await THIS.Util.getLocalUrl(src);\n            }));\n\n            let input = \"\";\n            let scale = \"\";\n            let concat = \"\";\n\n            opt.renderParams.map((param,idx)=>{\n                input += \" -i '\"+localSrc[idx]+\"' \"\n                scale += \"[{idx}]scale={w}:{h},pad={boxW}:{boxH}:{x}:{y},setsar=sar=1/1,setdar=dar={boxW}/{boxH}[{idx}_out];\"\n                    .replace(/{idx}/g,idx)\n                    .replace('{w}',param.w)\n                    .replace('{h}',param.h)\n                    .replace('{x}',param.x)\n                    .replace('{y}',param.y)\n                    .replace(/{boxW}/g,opt.width)\n                    .replace(/{boxH}/g,opt.height)\n\n                concat += \"[{idx}_out][{idx}:a]\"\n                    .replace(/{idx}/g,idx)\n\n                if(!param.hasAudio) {\n                    scale += \"anullsrc,atrim=duration={duration}[{idx}:a];\"\n                        .replace(\"{duration}\",param.duration)\n                        .replace(/{idx}/g,idx)\n                }\n            })\n\n            let desSrc = localSrc[0] + \"-\" + new Date().getTime() + \".mp4\";\n            let bitrate = Math.pow(Math.max(opt.width, opt.height) / 1280, 2) * 3000;\n            let vcodec = \"h264\";\n            if (cordovaModel.isAndroid() && !forceSoftwareEncoder) vcodec = \"libhw_avc\";\n            if (cordovaModel.isIOS()) {\n                vcodec = \"h264_videotoolbox\";\n                desSrc = cordova.file.cacheDirectory + \"output.mp4\";\n            }\n\n            //如single转码的作用，限制最大尺寸\n            let fps = \"fps=30\"\n            let aspectLimit4k = \"scale='min(3840,iw)':min'(2160,ih)':force_original_aspect_ratio=decrease,scale=trunc(iw/2)*2:trunc(ih/2)*2\";\n\n            let cmd = \n                \"ffmpeg {input} -filter_complex \\\"{scale}{concat}concat=n={concat_n}:v=1:a=1[outv][outa];[outv]{fps},{limit}[outv2]\\\" -map [outa] -map [outv2] -acodec aac -b:v {b:v} -vcodec {vcodec} -use_editlist 0 -f mp4 {des}\"\n                    .replace(\"{input}\", input)\n                    .replace( \"{scale}\", scale)\n                    .replace( \"{fps}\", fps)\n                    .replace( \"{limit}\", aspectLimit4k)\n                    .replace( \"{concat}\", concat)\n                    .replace( \"{concat_n}\", videos.length)\n                    .replace(\"{vcodec}\", vcodec)\n                    .replace(\"{b:v}\", bitrate + \"k\")\n                    .replace(\"{des}\", desSrc)\n                    \n            // console.log(cmd);\n            // return;\n            UGCApp.ffmpeg.start(cmd);\n\n\n            let newDuration = opt.renderParams.reduce((p,c)=>{\n                return {duration:p.duration+c.duration}\n            }).duration * 1000;\n            \n            let progress = 0;\n            let status = 0;\n\n            do {\n                output.status = status = await new Promise(\n                    UGCApp.ffmpeg.status\n                );\n                progress = await new Promise(UGCApp.ffmpeg.progress);\n                output.progress = progress.pts / newDuration;\n\n                await new Promise((o, ) => {\n                    setTimeout(o, 200);\n                });\n                // console.log(\n                //     \"ffmpeg progress:\" + progress.pts + \", status:\" + status\n                // );\n            } while (status == 1);\n\n            let result = await new Promise(UGCApp.ffmpeg.report);\n            if (result == 0) {\n                if (cordovaModel.isIOS()) {\n                    let dcimDesSrc = await new Promise((o, x) => UGCApp.sendToDCIM(desSrc, o, x));\n                    output.desSrc = await THIS.Util.getLocalUrl(dcimDesSrc);\n                }\n                else {\n                    UGCApp.scanFile(desSrc);\n                    output.desSrc = await THIS.Util.getCdvUrl(desSrc);\n                }\n            }\n\n            return result == 0;\n\n        },\n        cancel(){\n            UGCApp.ffmpeg.cancel();\n        }\n    }\n}\n\nexport default THIS;","<template>\n    <div class=\"box\">\n        <img v-for=\"(i,idx) in thumbs\" :key=\"idx\" \n            :src=\"i.url || firstThumb\"\n            :style=\"{left:i.ss*pps+'px', width:i.duration*pps+'px'}\" @error=\"thumbLoadError(idx)\"/>\n    </div>\n</template>\n<style scoped>\n.box{\n    position:relative;\n}\n.box img{\n    position:absolute;\n}\n</style>\n<script>\nconst DURATION = 10\nconst SPAN = 1;\n\nimport clipModel from \"@/model/ClipModel.js\";\nimport Editlist from \"@/model/Editlist\";\nimport UGCRes from \"@/model/UGCResourceManager\";\nimport Const from \"@/const\";\nimport {roundFloat} from \"@/utils\";\n\nlet thumbsFolders = {} // 缓存加速\n\nexport default {\n    props:[\"idx\", \"pps\", \"time_sec\", \"timeline\"],\n    data(){\n        return {\n            thumbs:[]\n        }\n    },\n    watch:{\n        time_sec: \"update\",\n        \"timeline.start_sec\": \"update\",\n        \"timeline.end_sec\": \"update\"\n    },\n    computed:{\n        firstThumb() {\n            let thumb = this.thumbs.find(e => e.url);\n            return thumb && thumb.url;\n        }\n    },\n    methods:{\n        update() {\n            let pts = this.time_sec;\n            // window.console.log(\"thumb time_sec:\"+pts);\n            if(pts < 0 || pts > this.timeline.offset_sec + this.timeline.end_sec - this.timeline.start_sec)\n                return;\n\n            this.fetchThumb(pts);\n            this.fetchThumb(pts - DURATION); \n            this.fetchThumb(pts + DURATION); \n        },\n        thumbLoadError(index) {\n            if(this.thumbs[index].url) {\n                this.thumbs.splice(index, 1);\n                this.update();\n            }\n        },\n        async prepareCacheFolder(){\n            let fileName = \"\"+this.timeline.id;\n            if(!thumbsFolders[fileName]) {\n\n                let fs = await UGCRes.filesystem();\n\n                //测试发现，getDirectory 不支持 exclusive\n\n                let thumbs = await new Promise(\n                    fs.root.getDirectory.bind(fs.root,\n                        \"thumbs/\",{create: true}));\n\n                thumbsFolders[fileName] = await new Promise(\n                    thumbs.getDirectory.bind(thumbs,\n                        fileName,{create: true}));\n            }\n        },\n        async makeThumb2(){},\n        async makeThumb(src, des, ss, duration, span) {\n\n            window.console.log(\"makeThumb:\" + des)\n\n            await this.prepareCacheFolder();\n\n            let timebase = 1000000;\n            return await new Promise(\n                UGCApp.ffmpeg.thumb.bind(null, \n                    src, des, \n                    ss * timebase, \n                    duration * timebase, \n                    span * timebase)\n            );\n        },\n        async fetchThumb(time) {\n            let pts = roundFloat(Math.max(0, time + this.timeline.start_sec));\n\n            if(pts > roundFloat(this.timeline.end_sec)) {\n                return;\n            }\n\n            let thumb = this.thumbs.find(i =>\n                roundFloat(i.ss) <= roundFloat(pts) && roundFloat(i.ss + i.duration) >= roundFloat(pts));\n\n            // window.console.log(\"fetch thumb:\" + pts)\n\n            if (!thumb || thumb.preload) {\n\n                let ss = pts - (pts % DURATION);\n                let duration = DURATION;\n                let span = SPAN;\n                let timeline = this.timeline;\n                \n                let src = timeline.url;\n                let des = \"{path}/thumbs/{id}/thumb_{ss}_{rn}.jpg\"\n                    .replace(\"{path}\",(cordova.file.tempDirectory || cordova.file.cacheDirectory))\n                    .replace(\"{id}\",timeline.id)\n                    .replace(\"{ss}\",ss)\n                    // 撤销的需求，不能覆盖原来的文件\n                    .replace(\"{rn}\",Math.random().toString(16).replace(\"0.\", \"\"))\n\n                //先插入记录，让后续的请求可以知道，无需重复请求\n\n                let loaded = thumb;\n                if(loaded) {\n                    loaded.loading = true;\n                    delete loaded.preload;\n                } else {\n                    loaded = {\n                        loading: true,\n                        url: \"\",\n                        ss,\n                        duration\n                    };\n                    this.thumbs.push(loaded);\n                }\n                this.timeline.thumbs = this.thumbs;\n\n                let ret = await this.makeThumb(src, des, ss, duration, span);\n                if (ret) \n                    window.console.error(\"make thumb error:\" + ret);\n\n\n                delete loaded.loading;\n                loaded.url = await clipModel.Util.getCdvUrl(des);\n                window.console.debug(\"make thumb:\" + loaded.url);\n\n                if(time == 0) {\n                    Editlist.editlist.updateOperateHistory(Const.Operate.VideoAdd.Type, timeline);\n                }\n            } \n        },\n        makeAllThumb() {\n            // 预加载所有缩略图（都显示第一张）\n            // this.thumbs\n            let pts = this.timeline.start_sec;\n            let end = this.timeline.end_sec;\n            while(pts <= end) {\n                let ss = pts - (pts % DURATION);\n\n                let preload = {\n                    preload: true,\n                    url: '',\n                    ss,\n                    duration: DURATION\n                };\n\n                this.thumbs.push(preload);\n                this.timeline.thumbs = this.thumbs;\n\n                pts += DURATION;\n            }\n        }\n    },\n    async mounted(){\n        // this.thumbs = thie.timeline.thumbs;\n        this.makeAllThumb();\n        await this.fetchThumb(0);\n    }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItemThumb.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineItemThumb.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TimelineItemThumb.vue?vue&type=template&id=21cbc8a0&scoped=true&\"\nimport script from \"./TimelineItemThumb.vue?vue&type=script&lang=js&\"\nexport * from \"./TimelineItemThumb.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TimelineItemThumb.vue?vue&type=style&index=0&id=21cbc8a0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"21cbc8a0\",\n  null\n  \n)\n\nexport default component.exports","<template>\n<div class=\"tool-box\" ref=\"main\" :class=\"{overlay:show_overlay||show_amix}\" \n    @touchstart=\"currentStart\" \n    @touchmove=\"currentMove\" \n    @touchend=\"changed()\">\n\n    <div class=\"main-line going\" ref=\"mainLine\" \n        :style=\"mainLineStyle\">\n\n        <div v-if=\"!postermode\" @click=\"$emit('on_poster_click')\" class=\"video-post-btn\">\n            <span v-if=\"!poster_url\" class=\"material-icons\">insert_photo</span>\n            <img v-else :src=\"poster_url\" @error=\"posterLoadError\" />\n            <span class=\"text\">封面</span>\n        </div>\n        <div class=\"main-timeline\" style=\"\">\n            <template v-for=\"(i) in timelines\">\n                <!-- 片尾，不允许激活, 修改时间 -->\n                <TimelineItem v-if=\"i.ending\" :key=\"i.id\" \n                    @change=\"timelineChange(i.id,$event)\"\n                    @active=\"timelineActive(i.id,$event)\"\n                    @click.native=\"endingClick\"\n                    :pps=\"pps\"\n                    :dragging=\"true\"\n                    :active=\"false\"\n                    :focus=\"postermode?false:i.focus\"\n                    :start_sec=\"i.start_sec\"\n                    :end_sec=\"i.end_sec\"\n                    :total_sec=\"i.total_sec\" \n                    :offset_sec=\"i.offset_sec\"\n                    :left_drag_offset=\"i.left_drag_offset\"\n                    :min_sec=\"video_min_sec\" >\n                    <div class=\"video-ending\">\n                        <span>片尾设置</span>\n                    </div>\n                </TimelineItem>\n                <!-- 普通片段 -->\n                <TimelineItem v-else :key=\"i.id\" \n                    @change=\"timelineChange(i.id,$event)\"\n                    @active=\"timelineActive(i.id,$event)\"\n                    :pps=\"pps\" \n                    :dragging=\"dragging\"\n                    :focus=\"postermode?false:i.focus\"\n                    :active=\"postermode?false:i.active\"\n                    :start_sec=\"i.start_sec\"\n                    :end_sec=\"i.end_sec\"\n                    :total_sec=\"i.total_sec\" \n                    :offset_sec=\"i.offset_sec\"\n                    :left_drag_offset=\"i.left_drag_offset\"\n                    :min_sec=\"video_min_sec\" >\n                    <TimelineItemThumb :time_sec=\"time_sec - i.offset_sec\" :pps=\"pps\" :timeline=\"i\" />\n                </TimelineItem>\n            </template>\n        </div>\n\n        <div v-if=\"!postermode && !hasEnding\" @click=\"endingClick\" class=\"video-ending-btn\">\n            <span>+片尾设置</span>\n        </div>\n\n        <div v-if=\"!postermode && show_overlay\" class=\"sub-timeline\" style=\"margin-top:35px;\">\n            <template v-for=\"(i) in overlay\">\n                <TimelineOverlayItem v-if=\"i.type & overlay_type\" :key=\"i.id\" \n                    @change=\"overlayChange(i.id,$event)\"\n                    @active=\"overlayActive(i.id,$event)\"\n                    :id=\"i.id\"\n                    :type=\"i.type\"\n                    :active=\"i.active\"\n                    :pps=\"pps\" \n                    :end_sec=\"i.end_sec\"\n                    :offset_sec=\"i.offset_sec\" >\n                </TimelineOverlayItem>\n            </template>\n        </div>\n        <div v-if=\"!postermode && show_amix\" class=\"sub-timeline\" style=\"margin-top:35px;\">\n            <TimelineOverlayItem v-for=\"(i) in amix\" :key=\"i.id\" \n                @change=\"amixChange(i.id,$event)\"\n                @active=\"amixActive(i.id,$event)\"\n                :id=\"i.id\"\n                :is_amix=\"true\"\n                :active=\"i.active\"\n                :pps=\"pps\" \n                :end_sec=\"i.end_sec\"\n                :offset_sec=\"i.offset_sec\" >\n            </TimelineOverlayItem>\n        </div>\n\n    </div>\n\n    <div class=\"time-tick\" ref=\"current\">\n        <div class=\"current-time\" :class=\"{dragging:dragging}\">\n            <!-- <mu-icon v-if=\"modal.playing\" type=\"play_arrow\" />\n            <mu-icon v-else type=\"pause\" /> -->\n            {{currentTimeStr}}\n        </div>\n    </div>\n    <div class=\"total-time-tick\">\n        {{totalTimeStr}}\n    </div>\n</div>\n</template>\n\n<style lang=\"less\" scoped>\n.tool-box {\n    bottom: 0;\n    position: relative;\n    display: flex;\n    width: 100%;\n    height: 80px;\n}\n.tool-box.overlay{\n    height:130px;\n}\n\n.main-line.going {\n    transition:transform 0s linear\n}\n.main-timeline {\n    //wkwebview 莫名奇妙的会在 post_btn 和 maintimeline 之间出现黑块，加入这个可以去掉\n    margin-top:0.1px;\n}\n.main-line {\n    width: 100%;\n    height: 34px;\n    position: absolute;\n    top: 50%;\n    left:50%;\n    margin-top: -17px;\n    background: transparent;\n    will-change: transform;\n\n    .video-post-btn {\n        position: absolute;\n        top: 0;\n        left: -100px;\n        background: gray;\n        border-radius: 5px;\n        height: 34px;\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        align-items: center;\n        padding: 5px;\n        color: white;\n        font-size: 12px;\n\n        img {\n            display: block;\n            width: 24px;\n            height: 24px;\n            position: relative;\n            border-radius: 5px;\n            object-fit: cover;\n        }\n        .material-icons {\n            font-size: 32px;\n        }\n        .text {\n            display: block;\n            position: relative;\n            margin-left: 5px\n        }\n    }\n\n    .main-timeline {\n        z-index: 1;\n    }\n\n    .video-ending-btn {\n        position: absolute;\n        right: -121px;\n        background: gray;\n        border-radius: 5px;\n        height: 34px;\n        padding:5px 0;\n        width: 7em;\n        color: white;\n        font-size: 12px;\n        display: flex;\n        flex-direction: row;\n        justify-content: center;\n        align-items: center;\n    }\n\n    .video-ending {\n        color: #fff;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        height: 100%;\n        font-size: smaller;\n    }\n\n}\n\n.time-tick {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    height: 45px;\n    width: 2px;\n    background-color: white;\n    margin-left: -1px;\n    margin-top: -25px;\n    border-radius: 10px;\n    padding-top:5px;\n    box-sizing: content-box;\n    display: flex;\n    justify-content: center;\n}\n\n.tick-mask {\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 100%;\n    width: 100%;\n}\n\n.current-time.dragging {\n    font-size:12px;\n    opacity: 1;\n}\n.current-time {\n    position: absolute;\n    background: white;\n    color: black;\n    border-radius: 2px;\n    padding: 0 3px;\n    font-size: 8px;\n    top: -15px;\n    opacity: 0.5;\n    display: flex;\n    align-items: center;\n    white-space: nowrap;\n    transition: font-size 0.1s\n}\n\n.total-time-tick {\n    position: absolute;\n    right: 0%;\n    top: 0%;\n    height: 45px;\n    color:white;\n    font-size:10px;\n    padding:0 5px;    \n    top: 50%;\n    margin-top: -40px;\n}\n</style>\n\n<script>\n/***\n * 输入：position, timelines\n * \n * 修改：position, timelines\n * \n * 输出：position, timelines\n * \n * 事件：timeChange, timelinesChange\n */\nimport TimelineItem from \"@/components/TimelineItem\";\nimport TimelineOverlayItem from \"@/components/TimelineOverlayItem\";\nimport TimelineItemThumb from \"@/components/TimelineItemThumb\";\nimport ClipModel from \"@/model/ClipModel\";\nimport Editlist from \"@/model/Editlist\";\nimport Const from \"@/const\"\n\nlet Helper = {\n    toTimeStr(sec=0) {\n        let min = sec / 60;\n        let hour = min / 60;\n        let millisec = Math.floor((sec % 1) * 10);\n        return (\n            Math.floor(hour) +\n            \":\" +\n            Math.floor(min) +\n            \":\" +\n            Math.floor(sec % 60) +\n            \".\" +\n            millisec\n        );\n    }\n}\nexport default {\n    components:{\n        TimelineItem,\n        TimelineOverlayItem,\n        TimelineItemThumb\n    },\n    props: [\"time_sec_in\", \"timelines_in\", \"playing\", \"show_overlay\", \"show_amix\", \"postermode\", \"poster\", \"overlay_type\"],\n    data() {\n        return {\n            Const,\n            pps:screen.width / 10,\n            timelines:this.timelines_in,\n            overlay_in:Editlist.editlist.overlay,\n            mosic_in:Editlist.editlist.mosic,\n            amix:Editlist.editlist.amix,\n            video_min_sec: Editlist.editlist.video_min_sec,\n\n            time_sec: Editlist.editlist.time_sec,\n            mainLineStyle:{\n                width:0,\n                transform:\"\",\n                \"transition-duration\":\"0s\"\n            },\n            poster_url:\"\",\n            dragging:false,\n            timelineChanging:false,\n            timer: null\n        };\n    },\n    watch: {\n        overlay(){\n            window.console.log(\"over watch\");\n        },\n        async playing(v){\n            if(v){\n                //同步粒度 s\n                let UpdateRate = 0.5;\n\n                this.mainLineStyle[\"transition-duration\"] = UpdateRate+\"s\";\n\n                        window.console.log(`begin playing`)\n                // let fun = async ()=>{\n                //     if(this._moveSpeed)return; //not dragging\n\n                //     try{\n                //         let cur = await new Promise(\n                //             UGCApp.ffplay.position) ;\n\n                //         window.console.log(\"position:\"+cur);\n\n                //         if(isNaN(cur)) {\n                //             // 视频在裁剪后点击播放有段时间会取到NaN\n                //             // 忽略 NaN\n                //             return;\n                //         }\n\n                //         if(cur < 0 && cur > -2) cur = 0;\n                //         if(cur > this.total_sec) cur = this.total_sec;\n                //         if(cur < this.time_sec) cur = this.time_sec;\n                        \n                //         //暂停未完成的动画，如果不暂停就设置新动画，css值会回到初始状态，导致闪动\n                //         // let style = window.getComputedStyle(this.$refs.mainLine);\n                //         // let x = Number.parseFloat(style.transform.split(/[(,)]/)[5]);\n                //         // if(x < -this.total_sec * this.pps)\n                //         //     x = -this.total_sec * this.pps;\n                //         // this.mainLineStyle.transform = \"translateX(\"+(x)+\"px)\";\n                        \n                //         // this.mainLineStyle.transform = \"translateX(-\"+(\n                //         //     Math.min(this.total_sec, cur + UpdateRate) * this.pps\n                //         // )+\"px)\";\n                //         this.mainLineStyle.transform = \"translateX(-\"+(\n                //             Math.min(this.total_sec, cur) * this.pps\n                //         )+\"px)\";\n\n                //         this.time_sec = cur;\n                //         Editlist.editlist.time_sec = cur;\n\n                //     }catch(e){\n                //         window.console.log(e);\n                //     }\n                // }\n\n                let fun = async ()=>{\n                    if(this._moveSpeed)return; //not dragging\n                    try{\n                        let cur = await new Promise(\n                            UGCApp.ffplay.position) ;\n\n                        window.console.log(`position:${cur} total:${this.total_sec}`)\n\n                        // if(cur < this.time_sec ||\n                        //     cur > this.time_sec+UpdateRate)\n                        //     cur = this.time_sec+UpdateRate;\n                        if(!(cur >= 0))return;\n\n                        if(cur > this.total_sec) cur = this.total_sec;\n\n                        // let nxtCur = cur + UpdateRate;\n\n                        //暂停未完成的动画，如果不暂停就设置新动画，css值会回到初始状态，导致闪动\n                        let style = window.getComputedStyle(this.$refs.mainLine);\n                        let x = Number.parseFloat(style.transform.split(/[(,)]/)[5]);\n\n                        let curPos = cur;\n                        let timeRemain = this.total_sec - curPos;\n                        let timeRemain2 = ((this.total_sec) * this.pps + x)/this.pps;\n\n                        this.mainLineStyle[\"transition-duration\"] = Math.max(0,timeRemain)+\"s\";\n\n                        this.mainLineStyle.transform = `translateX(${x}px)`;\n                        this.mainLineStyle.transform = \"translateX(-\"+(\n                            (this.total_sec+Math.random()/1000) * this.pps\n                        )+\"px)\";\n\n                        window.console.log(`left:${(this.total_sec) * this.pps + x} remain:${timeRemain}/${timeRemain2} speed:${((this.total_sec) * this.pps + x) / timeRemain}`)\n\n                        // if(nxtCur >= this.total_sec - 5){\n                        //     nxtCur = this.total_sec;\n                        //     this.mainLineStyle[\"transition-duration\"] = (x/this.pps+this.total_sec)+\"s\";\n                        //     window.console.log(`going:${nxtCur}/${this.total_sec} speed:${cur-this.total_sec}`)\n                        // }\n                        // else\n                        //     window.console.log(`going:${nxtCur}/${this.total_sec} speed:${UpdateRate}`)\n                        // this.mainLineStyle.transform = \"translateX(\"+(x)+\"px)\";\n                        \n                        // this.mainLineStyle.transform = \"translateX(-\"+(\n                        //     (nxtCur) * this.pps\n                        // )+\"px)\";\n\n                        window.console.log(`move: ${this.mainLineStyle.transform}`)\n\n                        this.time_sec = cur;\n                        if(!this.playing){\n                            clearInterval(this._goingTmr);\n                            //暂停动画\n                            window.console.log(`stop ${this.mainLineStyle.transform}`)\n                            let style = window.getComputedStyle(this.$refs.mainLine);\n                            let x = Number.parseFloat(style.transform.split(/[(,)]/)[5]);\n                            this.mainLineStyle[\"transition-duration\"] = \"0s\";\n                            this.mainLineStyle.transform = \"translateX(\"+(x)+\"px)\";\n                        }\n\n                    }catch(e){\n                        window.console.log(e);\n                    }\n                }\n\n                fun();\n                \n                // this._goingTmr2 = setInterval(async ()=>{\n                //     let cur = await new Promise(\n                //         UGCApp.ffplay.position) ;\n                //     this.time_sec = cur;\n                // }, 0.5*1000);\n                // this._goingTmr = setInterval(fun, 20);//UpdateRate*1000);\n                this._goingTmr = setInterval(fun, UpdateRate*1000);\n\n            }\n            else{\n\n                {\n                    clearInterval(this._goingTmr);\n\n                    //暂停动画\n                    window.console.log(`stop ${this.mainLineStyle.transform}`)\n                    let style = window.getComputedStyle(this.$refs.mainLine);\n                    let x = Number.parseFloat(style.transform.split(/[(,)]/)[5]);\n                    this.mainLineStyle[\"transition-duration\"] = \"0s\";\n                    this.mainLineStyle.transform = \"translateX(\"+(x)+\"px)\";\n                }\n\n                //修正时间\n                try{\n                    let cur = await new Promise(\n                        UGCApp.ffplay.position);\n                    if((cur >= 0)) {\n                        this.time_sec = cur;\n                        Editlist.editlist.time_sec = cur;\n                    }\n                    // this.update(true);\n                }catch(e){\n                    window.console.log(e);\n                }\n\n                //结束的时候设置动画\n                if(Math.abs(this.time_sec - this.total_sec) < 1){\n\n                    this.mainLineStyle[\"transition-duration\"] = \"0.1s\";\n\n                    this.mainLineStyle.transform = \"translateX(-\"+(\n                        (this.time_sec+Math.random()/1000) * this.pps\n                    )+\"px)\";\n                    setTimeout(()=>{\n                        this.mainLineStyle[\"transition-duration\"] = \"0s\";\n                    },150);\n                }\n                else{ // 非结束的时候不需要动画，因为播放过程中，拖动的话，会导致有动画lag\n                    // this.mainLineStyle[\"transition-duration\"] = \"0s\";\n                    // this.mainLineStyle.transform = \"translateX(\"+(x)+\"px)\";\n                }\n\n                \n                // clearInterval(this._goingTmr2);\n            }\n        },\n        time_sec_in(v){\n            this.time_sec = v;\n            this.update(true);\n        },\n        time_sec(v) {\n            this.update();\n            \n            Editlist.editlist.time_sec = v;\n            this.refreshUI();\n        },\n        timelines_in(v){\n\n            let srcIDs = this.timelines.map(o=>o.id).join(\",\");\n            let inIDs = v.map(o=>o.id).join(\",\");\n            if(srcIDs != inIDs)\n                this.timelines = v;\n                \n            if(this.timelines.length != v.length)\n                this.timelines = v;\n            \n            this.update(true);\n            \n        },\n        async poster(url){\n            // window.console.log(\"poster url:\"+url);\n            this.poster_url = await ClipModel.Util.getCdvUrl(url)+\"?\"+Math.random();\n        }\n    },\n    computed: {\n        overlay() {\n            return [...this.overlay_in, ...this.mosic_in];\n        },\n        total_sec(){\n            if(!this.timelines.length)return 0;\n            if(this.timelines.length == 1)\n                return this.timelines[0].end_sec - this.timelines[0].start_sec;\n                \n            return this.timelines.reduce((pre,nxt,idx)=>{\n                if(idx == 1)\n                    pre = pre.end_sec - pre.start_sec;\n                \n                nxt.offset_sec = pre;\n\n                return pre + nxt.end_sec - nxt.start_sec;\n            });\n        },\n        currentTimeStr() {\n            // console.log(\"update time:\"+this.modal.current)\n            return Helper.toTimeStr(\n                this.time_sec\n            ).replace(\"0:0\",\"0\");\n        },\n        totalTimeStr() {\n            return Helper.toTimeStr(\n                this.total_sec\n            ).split(\".\")[0].replace(\"0:0\",\"0\");\n        },\n        hasEnding() {\n            return this.timelines.find(e => e.ending);\n        }\n    },\n    methods: {\n        async updateFrame(){\n            // let SynSpan = 1; //每秒同步一次\n            // if(this.playing && !this._moveSpeed){\n            //     let cur = await new Promise(\n            //         UGCApp.ffplay.position);\n            //     this.time_sec = cur;\n            // }\n\n            // requestAnimationFrame(this.updateFrame);\n        },\n        seek(sec){\n            if(this.dragging)return;\n\n            this.time_sec = sec;\n            this.update(true);\n        },\n        //序号是 idx 的片段的当前时间。用于生成缩略图\n        time_sec_idx(idx){\n            let found = this.timelines.filter((o,i) => {\n                return i == idx && o.offset_sec <= this.timeSec \n                    && o.offset_sec + (o.end_sec - o.start_sec) > this.timeSec;\n            })\n            if(found.length)\n                return this.time_sec - found[0].offset_sec;\n            else return -1;\n        },\n        update(computeTransform){\n            if(this.timelineChanging) {\n                return;\n            }\n\n            //计算总长度\n            this.mainLineStyle.width = this.timelines.reduce((pre,nxt)=>{\n                return pre + nxt.end_sec - nxt.start_sec\n            }, 0) * this.pps + \"px\";\n\n            //计算位移\n            if(this._moveSpeed || computeTransform) {\n                this.mainLineStyle.transform = \"translateX(-\"+(\n                    this.time_sec * this.pps\n                )+\"px)\";\n            }\n\n            //修正每个块的位置\n            this.timelines.reduce((pre,nxt)=>{\n                nxt.offset_sec = pre;\n                return pre + nxt.end_sec - nxt.start_sec;\n            }, 0);\n\n        },\n        overlayActive(id, active){\n            if(active){\n                this.overlay.forEach((v)=>{\n                    v.active = v.id == id;\n                })\n                this.$emit(\"overlayActive\", this.overlay.filter(o=>o.id==id)[0]);\n            }\n            else {\n                this.overlay.filter(o=>o.id==id)[0].active = false;\n                this.$emit(\"overlayActive\");\n            }\n        },\n        overlayChange(id, event){\n            let found = this.overlay.filter( o=>o.id==id )[0];\n            found.offset_sec = event.offset_sec;\n            found.end_sec = event.end_sec;\n                \n            if(event.overallDragging) {\n                this.time_sec = found.offset_sec;\n                this.changed({\n                    time_sec: this.time_sec\n                });\n                this.update(true);\n            }\n            \n            // window.console.log(\"overlayCHange:\"+event.end)\n            if(event.end)\n                this.$emit(\"overlayChange\", this.overlay.filter(o=>o.id==id)[0]);\n        },\n        amixChange(id, event){\n            let found = this.amix.filter( o=>o.id==id )[0];\n            found.offset_sec = event.offset_sec;\n            found.end_sec = event.end_sec;\n            if(event.end)\n                this.$emit(\"amixChange\", this.amix.filter(o=>o.id==id)[0]);\n\n        },\n        amixActive(id, active){\n            if(active){\n                this.amix.forEach((v)=>{\n                    v.active = v.id == id;\n                })\n                this.$emit(\"amixActive\", this.amix.filter(o=>o.id==id)[0]);\n            }\n            else {\n                this.amix.filter(o=>o.id==id)[0].active = false;\n                this.$emit(\"amixActive\");\n            }\n        },\n        timelineActive(id, active){\n            if(active)\n                this.timelines.forEach((v)=>{\n                    if(v.id == id) {\n                        v.active = true;\n\n                        if(this.time_sec < v.offset_sec) {\n                            this.time_sec = v.offset_sec;\n                        } else if(this.time_sec >= v.offset_sec + v.end_sec - v.start_sec) {\n                            // 加0.0001让time_sec处于v的timeline中\n                            this.time_sec = v.offset_sec + v.end_sec - v.start_sec - 0.0001;\n                        }\n\n                    } else {\n                        v.active = false;\n                    }\n                })\n            else \n                this.timelines.find(o=>o.id==id).active = false;\n        },\n        timelineChange(id, event){\n            let found = this.timelines.filter( o=>o.id==id )[0];\n            found.start_sec = event.start_sec;\n            found.end_sec = event.end_sec;\n            this.timelineChanging = !event.end;\n\n            let offset_sec = found.offset_sec;\n            if(event.left_drag_offset){\n                //修正后面所有 timeline item 的左侧偏移\n                this.timelines.forEach((v)=>{\n                    if(v.offset_sec < offset_sec)return;\n                    v.left_drag_offset = event.left_drag_offset;\n                })\n            }\n            else{\n                this.timelines.forEach((v)=>{\n                    v.left_drag_offset = 0;\n                })\n            }\n\n            // 因为暂时无法解决seek超过最后时间点，导致无法显示最后画面的问题，所以这里无法使用实时显示拖动位置画面\n            // if(event.end){\n                //拖动中，让画面seek到拖动点\n                if(event.seek_sec !== undefined){\n                    let foundIdx = this.timelines.indexOf(found);\n\n                    // event.seek_sec 是当前片段的seek点，需要加入前方的片段长度才是整个视频的seek点\n                    let seek_sec = event.seek_sec + \n                        [0, ...this.timelines.slice(0,foundIdx)].reduce((pre,nxt)=>{\n                            return pre + nxt.end_sec - nxt.start_sec;\n                        });\n\n                    this.time_sec = Math.max(0,seek_sec);\n                    this.changed({\n                        time_sec: this.time_sec\n                    });\n                }\n                Editlist.editlist.update_timelines(this.timelines);\n            // }\n\n\n            window.console.log(\"change end:\"+event.end)\n            if(event.end){\n                this.$emit(\"timelinesChange\",this.timelines);\n                this.update(true);\n            }\n\n            this.update();\n            \n        },\n        currentStart(e) {\n            this._pageX = e.changedTouches[0].pageX;\n            this._value = this.time_sec;\n        },\n        currentMove(e) {\n            let offset = e.changedTouches[0].pageX - this._pageX;\n                \n            this.dragging = true;\n            //记录最后一次移动的幅度，用于惯性动画\n            if (this._preOffset)\n                this._moveSpeed = - offset + this._preOffset;\n            this._preOffset = offset;\n\n            this.time_sec = Math.max(0, Math.min( this.total_sec, \n                this._value - offset / this.pps\n            ));\n\n            this.changed({\n                time_sec: this.time_sec\n            })\n\n            return true;\n        },\n        async changed(opt) {\n            let isEnd = !opt;\n\n            if (isEnd && Math.abs(this._moveSpeed) > 1) {\n\n                let speed = this._moveSpeed * 5;\n                speed = Math.max(-60, Math.min(60, speed))\n                while (Math.abs(speed) > 1) {\n                    let newVal = this.time_sec + speed / this.pps;\n\n                    //减速\n                    speed *= 0.8;\n\n                    this.time_sec = Math.max(0, Math.min(this.total_sec,\n                        newVal\n                    ));\n\n                    await new Promise((o, ) => {\n                        clearTimeout(this.timer);\n                        this.timer = setTimeout(o, 20);\n                    })\n                }\n            }\n\n            if(isEnd){\n                this._preOffset = 0;\n                this._moveSpeed = 0;\n                this.dragging = false;\n                // window.console.log(\"dragging stop\");\n            }\n\n            this.$emit(\"timeChange\",{\n                time_sec: this.time_sec,\n                ...opt\n            });\n        },\n        posterLoadError() {\n            this.poster_url = null;\n        },\n        endingClick() {\n            this.$emit('on_ending_click');\n        },\n        refreshUI() {\n            if(this.timelineChanging) {\n                return;\n            }\n            let cur = Editlist.editlist.cur_timeline;\n            if(cur) {\n                cur.focus = true;\n    \n                this.timelines.forEach(e => e.id != cur.id && (e.focus = false));\n    \n                if(!cur.active) {\n                    this.timelines.forEach(e => e.active = false);\n                }\n            }\n        }\n    },\n    mounted() {\n        this.update();\n        this.updateFrame();\n    },\n    beforeDestroy() {\n        clearInterval(this._goingTmr);\n    }\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTimeline.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTimeline.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ClipTimeline.vue?vue&type=template&id=532e26c0&scoped=true&\"\nimport script from \"./ClipTimeline.vue?vue&type=script&lang=js&\"\nexport * from \"./ClipTimeline.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ClipTimeline.vue?vue&type=style&index=0&id=532e26c0&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"532e26c0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"controlBox\"},[_c('mu-icon',{staticStyle:{\"position\":\"absolute\",\"left\":\"0\"},attrs:{\"value\":\"aspect_ratio\"},on:{\"click\":function($event){return _vm.$emit('event',{eventID:_vm.EventID.AspectRatio})}}}),_c('mu-icon',{attrs:{\"value\":\"skip_previous\"},on:{\"click\":function($event){return _vm.$emit('event',{eventID:_vm.EventID.SeekBegin})}}}),_c('mu-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.playing),expression:\"!playing\"}],attrs:{\"value\":\"play_arrow\"},on:{\"click\":function($event){return _vm.$emit('event',{eventID:_vm.EventID.Play})}}}),_c('mu-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.playing),expression:\"playing\"}],attrs:{\"value\":\"pause\"},on:{\"click\":function($event){return _vm.$emit('event',{eventID:_vm.EventID.Pause})}}}),_c('mu-icon',{attrs:{\"value\":\"skip_next\"},on:{\"click\":function($event){return _vm.$emit('event',{eventID:_vm.EventID.SeekEnd})}}}),_c('mu-icon',{class:[_vm.hasHistory ? '' : 'disabled'],staticStyle:{\"position\":\"absolute\",\"right\":\"0\"},attrs:{\"value\":\"undo\"},on:{\"click\":function($event){_vm.hasHistory && _vm.$emit('event',{eventID:_vm.EventID.Undo})}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"controlBox\">\n        <mu-icon value=\"aspect_ratio\" @click=\"$emit('event',{eventID:EventID.AspectRatio})\" style=\"position:absolute;left:0\" />\n        <mu-icon value=\"skip_previous\" @click=\"$emit('event',{eventID:EventID.SeekBegin})\" />\n        <mu-icon v-show=\"!playing\" value=\"play_arrow\" @click=\"$emit('event',{eventID:EventID.Play})\" />\n        <mu-icon v-show=\"playing\" value=\"pause\" @click=\"$emit('event',{eventID:EventID.Pause})\" />\n        <mu-icon value=\"skip_next\" @click=\"$emit('event',{eventID:EventID.SeekEnd})\" />\n        <mu-icon value=\"undo\" :class=\"[hasHistory ? '' : 'disabled']\" @click=\"hasHistory && $emit('event',{eventID:EventID.Undo})\" style=\"position:absolute;right:0\" />\n    </div>\n</template>\n<style lang=\"less\" scoped>\n.controlBox {\n    text-align: center;\n    color: white;\n    font-size: 25px;\n\n    &>* {\n        padding: 10px 20px;\n    }\n}\n.disabled {\n    opacity: 0.5;\n}\n</style>\n<script>\nimport Editlist from \"@/model/Editlist\"; \n\nlet EventID = {\n    Play:0,\n    Pause:1,\n    SeekBegin:2,\n    SeekEnd:3,\n    AspectRatio:4,\n    Undo:5\n}\nexport default {\n    EventID,\n    props:[\"playing\"],\n    data(){\n        return {\n            EventID,\n            editlist: Editlist.editlist\n        }\n    },\n    computed: {\n        hasHistory() {\n            return this.editlist.operate.history.length > 1;\n        }\n    },\n    created() {\n        // 让直接对Editlist.editlist.operate.history做的操作可以被监控\n        Editlist.editlist.operate = this.editlist.operate;\n    }\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerController.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerController.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlayerController.vue?vue&type=template&id=7ba491a2&scoped=true&\"\nimport script from \"./PlayerController.vue?vue&type=script&lang=js&\"\nexport * from \"./PlayerController.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PlayerController.vue?vue&type=style&index=0&id=7ba491a2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7ba491a2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"toolTabBox\"},[_c('div',{staticClass:\"middleBox\"},[_c('transition',{attrs:{\"name\":\"fade\"}},[_c('OverlayToolTab',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeItem&&_vm.activeItem.active),expression:\"activeItem&&activeItem.active\"}],ref:\"overlayToolTab\",class:{hide:_vm.toolTab!='overlaytool'},attrs:{\"activeItem\":_vm.activeItem},on:{\"select\":_vm.overlayTabSelect}})],1),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('HScrollBar',{staticClass:\"m-cut tabBox\",class:{hide:_vm.toolTab!='cut'}},[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"note_add\",\"text\":\"添加\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.VideoAdd)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"disabled\":!_vm.isCurTimelineRemovable,\"icon\":\"delete_forever\",\"text\":\"删除\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.VideoRemove)}}}),_c('div',{staticStyle:{\"margin\":\"10px\",\"border-right\":\"1px solid gray\"}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"disabled\":_vm.curTimelineIsEnding,\"icon\":\"view_agenda\",\"text\":\"分割\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.VideoSplit)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"exposure\",\"text\":\"视频参数\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.VideoBase)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"view_column\",\"text\":\"排序\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.VideoSort)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"disabled\":_vm.curTimelineIsEnding,\"icon\":\"sync\",\"text\":\"旋转\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.VideoRotate)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"disabled\":_vm.curTimelineIsEnding,\"icon\":\"swap_vert\",\"text\":\"上下翻转\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.VideoVFlip)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"disabled\":_vm.curTimelineIsEnding,\"icon\":\"swap_horiz\",\"text\":\"左右翻转\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.VideoHFlip)}}})],1)],1),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"m-image tabBox\",class:{hide:_vm.toolTab!='image'}},[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"image\",\"text\":\"贴纸\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.AddImage)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"photo_library\",\"text\":\"本地贴纸\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.AddLocalImage)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"blur_on\",\"text\":\"马赛克\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.Mosic)}}})],1)]),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"m-text tabBox\",class:{hide:_vm.toolTab!='text'}},[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"textsms\",\"text\":\"添加文字\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.AddText)}}})],1)]),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"m-filter tabBox\",class:{hide:_vm.toolTab!='filter'}},[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"disabled\":_vm.curTimelineIsEnding,\"icon\":\"face\",\"text\":\"美颜\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.Face)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"photo_filter\",\"disabled\":_vm.curTimelineIsEnding,\"text\":\"滤镜\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.Filter)}}})],1)]),_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"m-music tabBox\",class:{hide:_vm.toolTab!='music'}},[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"volume_up\",\"text\":\"调整音量\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.AudioBase)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"surround_sound\",\"text\":\"添加背景音\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.BGM)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"audiotrack\",\"text\":\"音效\"},on:{\"click\":function($event){return _vm.select(_vm.TabID.AudioEffect)}}})],1)])],1),_c('div',{staticClass:\"bottomBox\"},[_c('mu-icon',{class:{active:_vm.toolTab=='cut'},attrs:{\"value\":\"duo\",\"size\":\"28\",\"color\":\"white\"},on:{\"click\":function($event){_vm.toolTab='cut';}}}),_c('mu-icon',{class:{active:_vm.toolTab=='image'},attrs:{\"value\":\"add_photo_alternate\",\"size\":\"28\",\"color\":\"white\"},on:{\"click\":function($event){_vm.toolTab='image';}}}),_c('mu-icon',{class:{active:_vm.toolTab=='text'},attrs:{\"value\":\"post_add\",\"size\":\"28\",\"color\":\"white\"},on:{\"click\":function($event){_vm.toolTab='text';}}}),_c('mu-icon',{class:{active:_vm.toolTab=='music'},attrs:{\"value\":\"music_note\",\"size\":\"28\",\"color\":\"white\"},on:{\"click\":function($event){_vm.toolTab='music';}}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"icon\",class:{active:_vm.active,disabled:_vm.disabled},on:{\"click\":_vm.clicked}},[(!_vm.src)?_c('mu-icon',{attrs:{\"value\":_vm.icon}}):(_vm.src)?_c('div',{staticClass:\"img\"},[_c('img',{attrs:{\"src\":_vm.src}}),_c('div')]):_vm._e(),_c('span',[_vm._v(_vm._s(_vm.text))]),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <span class=\"icon\" :class=\"{active:active,disabled:disabled}\" @click=\"clicked\">\n        <mu-icon v-if=\"!src\" :value=\"icon\" />\n        <div v-else-if=\"src\" class=\"img\">\n            <img :src=\"src\"/>\n            <div />\n        </div>\n        <span >{{text}}</span>\n        <slot />\n    </span>\n</template>\n<style scoped>\n.disabled {\n    opacity: 0.5;\n}\n.icon{\n    display:flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size:24px;\n    color:white;\n    padding:5px;\n    position: relative;\n}\n.icon > span{\n    zoom:0.5;\n    white-space: nowrap;\n}\n.icon > .img{\n    border-radius:3px;\n    width:30px;height:30px;\n    overflow:hidden;\n    position: relative;\n}\n.icon > .img > img{\n    width:100%;height:100%;object-fit: cover\n}\n.icon > .img > div {\n    display:none;\n}\n.icon.active > .img > div{\n    position:absolute;top:0;left:0;height:100%;width:100%;\n    background:rgba(255,0,0,0.6);\n    display:block\n}\n\n.icon.active{\n    color:red;\n}\n</style>\n<script>\nexport default {\n    props: [\"text\", \"icon\", \"src\", \"ricon\", \"active\", \"disabled\"],\n    methods: {\n        clicked(e) {\n            if(!this.disabled) {\n                this.$emit('click', e);\n            }\n        }\n    }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipBtn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipBtn.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ClipBtn.vue?vue&type=template&id=4fb247b2&scoped=true&\"\nimport script from \"./ClipBtn.vue?vue&type=script&lang=js&\"\nexport * from \"./ClipBtn.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ClipBtn.vue?vue&type=style&index=0&id=4fb247b2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4fb247b2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"bar\",attrs:{\"HScrollBar\":\"\"}},[(_vm.visibleLeftArrow)?_c('span',{staticClass:\"material-icons left-icon\"},[_vm._v(\" keyboard_arrow_left \")]):_vm._e(),(_vm.visibleRightArrow)?_c('span',{staticClass:\"material-icons right-icon\"},[_vm._v(\" keyboard_arrow_right \")]):_vm._e(),_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div HScrollBar ref=\"bar\">\r\n        <span\r\n            v-if=\"visibleLeftArrow\"\r\n            class=\"material-icons left-icon\"\r\n        >\r\n            keyboard_arrow_left\r\n        </span>\r\n        <span\r\n            v-if=\"visibleRightArrow\"\r\n            class=\"material-icons right-icon\"\r\n        >\r\n            keyboard_arrow_right\r\n        </span>\r\n        <slot></slot>\r\n    </div>\r\n</template>\r\n<style scoped>\r\n.left-icon {\r\n    position: fixed;\r\n    z-index: 1;\r\n    margin-top: 5px;\r\n    left: 0;\r\n    color: white;\r\n    opacity: 0.7;\r\n    animation: fade 3s infinite;\r\n    text-shadow: 0 0 3px black;\r\n}\r\n.right-icon {\r\n    position: fixed;\r\n    z-index: 1;\r\n    margin-top: 5px;\r\n    right: 0;\r\n    color: white;\r\n    opacity: 0.7;\r\n    animation: fade 3s infinite;\r\n    text-shadow: 0 0 3px black;\r\n}\r\n@keyframes fade {\r\n    40% {\r\n        opacity: 0.7;\r\n    }\r\n    50% {\r\n        opacity: 0;\r\n    }\r\n    60% {\r\n        opacity: 0.7;\r\n    }\r\n}\r\n</style>\r\n<script>\r\nlet MASK_SPAN = 20; //px\r\n\r\nexport default {\r\n    props: ['scroller'],\r\n    data() {\r\n        return {\r\n            visibleLeftArrow: false,\r\n            visibleRightArrow: false\r\n        };\r\n    },\r\n    watch: {\r\n        scroller: \"refresh\"\r\n    },\r\n    methods: {\r\n        refresh() {\r\n            let $scroller = this.scroller || this.$el;\r\n            let sLeft = $scroller.scrollLeft;\r\n            let sWidth = $scroller.scrollWidth;\r\n            let width = $scroller.offsetWidth;\r\n\r\n            this.visibleLeftArrow = sLeft > MASK_SPAN;\r\n            this.visibleRightArrow = sLeft + width + MASK_SPAN < sWidth;\r\n        }\r\n    },\r\n    beforeDestroy() {\r\n        this.$refs.bar.removeEventListener('scroll', this.onscroll, true);\r\n    },\r\n    mounted() {\r\n        this.$nextTick(this.refresh.bind(this));\r\n        this.onscroll = this.refresh.bind(this);\r\n        this.$refs.bar.addEventListener('scroll', this.onscroll, true);\r\n    }\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HScrollBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HScrollBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HScrollBar.vue?vue&type=template&id=68f1f59b&scoped=true&\"\nimport script from \"./HScrollBar.vue?vue&type=script&lang=js&\"\nexport * from \"./HScrollBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HScrollBar.vue?vue&type=style&index=0&id=68f1f59b&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"68f1f59b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"overlayToolTabBox\"},[_c('div',{staticClass:\"overlayToolTab\"},[(_vm.activeItem && _vm.activeItem.text)?[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"edit\",\"text\":\"编辑\"},nativeOn:{\"click\":function($event){return _vm.select(_vm.TabID.Edit)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"format_paint\",\"text\":\"样式\"},nativeOn:{\"click\":function($event){return _vm.select(_vm.TabID.Template)}}}),_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"tune\",\"text\":\"调整\"},nativeOn:{\"click\":function($event){return _vm.select(_vm.TabID.Settings)}}})]:_vm._e(),[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"icon\":\"delete_forever\",\"text\":\"删除\"},nativeOn:{\"click\":function($event){return _vm.select(_vm.TabID.Remove)}}}),_c('ClipBtn',{staticClass:\"done-btn\",attrs:{\"icon\":\"done\"},nativeOn:{\"click\":function($event){return _vm.select(_vm.TabID.Done)}}})]],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div class=\"overlayToolTabBox\">\r\n    <div class=\"overlayToolTab\">\r\n        <template v-if=\"activeItem && activeItem.text\">\r\n            <ClipBtn @click.native=\"select(TabID.Edit)\" class=\"item-btn\" icon=\"edit\" text=\"编辑\" />\r\n            <ClipBtn @click.native=\"select(TabID.Template)\" class=\"item-btn\" icon=\"format_paint\" text=\"样式\" />\r\n            <ClipBtn @click.native=\"select(TabID.Settings)\" class=\"item-btn\" icon=\"tune\" text=\"调整\" />\r\n        </template>\r\n        <template>\r\n            <ClipBtn @click.native=\"select(TabID.Remove)\" class=\"item-btn\" icon=\"delete_forever\" text=\"删除\" />\r\n            <ClipBtn @click.native=\"select(TabID.Done)\" class=\"done-btn\" icon=\"done\"/>\r\n        </template>\r\n    </div>\r\n</div>\r\n</template>\r\n<style lang=\"less\" scoped>\r\n.fade-enter-active {\r\n  transition: all .5s;\r\n}\r\n.fade-leave-active {\r\n  transition: all .2s;\r\n}\r\n.fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\r\n  opacity: 0;\r\n}\r\n.fade-enter /* .fade-leave-active below version 2.1.8 */ {\r\n  opacity: 0;\r\n}\r\n\r\n.overlayToolTabBox {\r\n    height: 50px;\r\n    position: absolute;\r\n    display: flex;\r\n    justify-content: center;\r\n    width: 100%;\r\n    background: #323232;\r\n    z-index: 100;\r\n}\r\n.overlayToolTab {\r\n    margin-top: 5px;\r\n    border-radius: 5px;\r\n    overflow: hidden;\r\n    background-color: #444;\r\n    display: flex;\r\n    flex-direction: row;\r\n    white-space: nowrap;\r\n    justify-content: center;\r\n    width: auto!important;\r\n\r\n    &.hide {\r\n        display: none\r\n    }\r\n\r\n    .item-btn {\r\n        padding: 5px 15px;\r\n    }\r\n\r\n    .done-btn {\r\n        padding: 0 8px;\r\n        background: #555;\r\n    }\r\n}\r\n\r\n</style>\r\n<script>\r\nimport ClipBtn from \"@/components/ClipBtn\";\r\n\r\nlet __tabid = 0;\r\nconst TabID = {\r\n    Edit:__tabid++,\r\n    Template:__tabid++,\r\n    Settings:__tabid++,\r\n    Remove:__tabid++,\r\n    Done:__tabid++\r\n};\r\n\r\nexport default {\r\n    TabID,\r\n    components: {\r\n        ClipBtn\r\n    },\r\n    props:[\"activeItem\"],\r\n    data() {\r\n        return {\r\n            TabID,\r\n        };\r\n    },\r\n    methods: {\r\n        select(id) {\r\n            this.$emit('select', id, this.activeItem);\r\n        }\r\n    }\r\n};\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverlayToolTab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OverlayToolTab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./OverlayToolTab.vue?vue&type=template&id=6729f64e&scoped=true&\"\nimport script from \"./OverlayToolTab.vue?vue&type=script&lang=js&\"\nexport * from \"./OverlayToolTab.vue?vue&type=script&lang=js&\"\nimport style0 from \"./OverlayToolTab.vue?vue&type=style&index=0&id=6729f64e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6729f64e\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"toolTabBox\">\n        <div class=\"middleBox\">\n\n            <transition name=\"fade\">\n                <OverlayToolTab \n                    ref=\"overlayToolTab\" \n                    v-show=\"activeItem&&activeItem.active\"\n                    :class=\"{hide:toolTab!='overlaytool'}\" \n                    :activeItem=\"activeItem\"\n                    @select=\"overlayTabSelect\"/>\n            </transition>\n\n            <transition name=\"fade\">\n                <HScrollBar class=\"m-cut tabBox\" :class=\"{hide:toolTab!='cut'}\"  >\n                    <ClipBtn @click=\"select(TabID.VideoAdd)\" class=\"item-btn\" icon=\"note_add\" text=\"添加\" />\n                    <ClipBtn @click=\"select(TabID.VideoRemove)\" :disabled=\"!isCurTimelineRemovable\" class=\"item-btn\" icon=\"delete_forever\" text=\"删除\" />\n                    <div style=\"margin:10px;border-right:1px solid gray\" ></div>\n                    <ClipBtn @click=\"select(TabID.VideoSplit)\" :disabled=\"curTimelineIsEnding\" class=\"item-btn\" icon=\"view_agenda\" text=\"分割\" />\n                    <ClipBtn @click=\"select(TabID.VideoBase)\" class=\"item-btn\" icon=\"exposure\" text=\"视频参数\" />\n                    <ClipBtn @click=\"select(TabID.VideoSort)\" class=\"item-btn\" icon=\"view_column\" text=\"排序\" />\n                    <ClipBtn @click=\"select(TabID.VideoRotate)\" :disabled=\"curTimelineIsEnding\" class=\"item-btn\" icon=\"sync\" text=\"旋转\" />\n                    <ClipBtn @click=\"select(TabID.VideoVFlip)\" :disabled=\"curTimelineIsEnding\" class=\"item-btn\" icon=\"swap_vert\" text=\"上下翻转\" />\n                    <ClipBtn @click=\"select(TabID.VideoHFlip)\" :disabled=\"curTimelineIsEnding\" class=\"item-btn\" icon=\"swap_horiz\" text=\"左右翻转\" />\n                </HScrollBar>\n            </transition>\n            <transition name=\"fade\">\n                <div class=\"m-image tabBox\" :class=\"{hide:toolTab!='image'}\"  >\n                    <ClipBtn @click=\"select(TabID.AddImage)\" class=\"item-btn\" icon=\"image\" text=\"贴纸\" />\n                    <ClipBtn class=\"item-btn\" icon=\"photo_library\" @click=\"select(TabID.AddLocalImage)\" text=\"本地贴纸\" />\n                    <ClipBtn class=\"item-btn\" icon=\"blur_on\" @click=\"select(TabID.Mosic)\" text=\"马赛克\" />\n                </div>\n            </transition>\n            <transition name=\"fade\">\n                <div class=\"m-text tabBox\" :class=\"{hide:toolTab!='text'}\"  >\n                    <ClipBtn @click=\"select(TabID.AddText)\" class=\"item-btn\" icon=\"textsms\" text=\"添加文字\" />\n                </div>\n            </transition>\n              <transition name=\"fade\">\n                <div class=\"m-filter tabBox\" :class=\"{hide:toolTab!='filter'}\" >\n                    <ClipBtn @click=\"select(TabID.Face)\" :disabled=\"curTimelineIsEnding\" class=\"item-btn\" icon=\"face\" text=\"美颜\" />\n                    <ClipBtn class=\"item-btn\" icon=\"photo_filter\" :disabled=\"curTimelineIsEnding\" @click=\"select(TabID.Filter)\" text=\"滤镜\" />\n                </div>\n            </transition>\n            <transition name=\"fade\">\n                <div class=\"m-music tabBox\" :class=\"{hide:toolTab!='music'}\"  >\n                    <ClipBtn @click=\"select(TabID.AudioBase)\" class=\"item-btn\" icon=\"volume_up\" text=\"调整音量\" />\n                    <!-- <ClipBtn class=\"item-btn\" icon=\"md-microphone\" text=\"调整音调\"/> -->\n                    <ClipBtn @click=\"select(TabID.BGM)\" class=\"item-btn\" icon=\"surround_sound\" text=\"添加背景音\" />\n                    <ClipBtn @click=\"select(TabID.AudioEffect)\" class=\"item-btn\" icon=\"audiotrack\" text=\"音效\" />\n                </div>\n            </transition>\n        </div>\n        <div class=\"bottomBox\">\n            <mu-icon value=\"duo\" :class=\"{active:toolTab=='cut'}\" size=\"28\" color=\"white\" @click=\"toolTab='cut';\" />\n            <mu-icon value=\"add_photo_alternate\" :class=\"{active:toolTab=='image'}\" size=\"28\" color=\"white\" @click=\"toolTab='image';\" />\n            <mu-icon value=\"post_add\" :class=\"{active:toolTab=='text'}\" size=\"28\" color=\"white\" @click=\"toolTab='text';\" />\n            <!-- <mu-icon value=\"movie_filter\" :class=\"{active:toolTab=='filter'}\" size=\"28\" color=\"white\" @click=\"toolTab='filter'\" /> -->\n            <mu-icon value=\"music_note\" :class=\"{active:toolTab=='music'}\" size=\"28\" color=\"white\" @click=\"toolTab='music';\" />\n        </div>\n    </div>\n</template>\n<style lang=\"less\" scoped>\n\n.toolTabBox {\n    width: 100%;\n    background: rgba(50, 50, 50, 1);\n    position: relative;\n\n    &>* {\n        width: 100%;\n    }\n\n    .middleBox {\n        padding: 5px;\n        margin-top: 5px;\n        // background: #111;\n\n        .tabBox.hide {\n            display: none\n        }\n\n        .tabBox {\n            display: flex;\n            flex-direction: row;\n            white-space: nowrap;\n            justify-content: center;\n        }\n\n        .item-btn {\n            padding: 5px 20px;\n        }\n\n        .m-cut {\n            overflow-x: auto;\n            justify-content: flex-start\n        }\n\n\n        .m-filter .item-btn.active {\n            background: white;\n            color: black;\n            border-radius: 5px;\n        }\n    }\n\n    .bottomBox {\n        display: flex;\n        flex-flow: row;\n        padding: 10px 0px;\n        width: 100%;\n        justify-content: space-around;\n        align-items: center;\n        background: black;\n        border-top: 0.5px solid #666;\n\n        &>*.active {\n            color: transparent !important;\n            background: linear-gradient(45deg, white 50%, red 50%);\n            -webkit-background-clip: text;\n            background-clip: text;\n        }\n    }\n\n}\n</style>\n\n<script>\nimport ClipBtn from \"@/components/ClipBtn\";\nimport HScrollBar from \"@/components/HScrollBar\";\nimport OverlayToolTab from \"@/views/Bottom/OverlayToolTab\";\nimport Const from \"@/const\";\n\nlet __tabid = 0;\nlet TabID = {\n    VideoAdd:__tabid++,\n    VideoRemove:__tabid++,\n    VideoRotate:__tabid++,\n    VideoSort:__tabid++,\n    VideoSplit:__tabid++,\n    VideoVFlip:__tabid++,\n    VideoHFlip:__tabid++,\n    VideoBase:__tabid++,\n\n    AddImage:__tabid++,\n    AddLocalImage:__tabid++,\n    AddText:__tabid++,\n    AudioBase:__tabid++,\n    BGM:__tabid++,\n    Face:__tabid++,\n    Filter:__tabid++,\n    Mosic:__tabid++,\n    AudioEffect:__tabid++,\n    AspectRatio:__tabid++,\n\n    ImageTab:__tabid++,\n    TextTab:__tabid++,\n    AudioTab:__tabid++,\n    OtherTab:__tabid++,\n    \n    ToolEdit:__tabid++,\n    ToolTemplate:__tabid++,\n    ToolSettings:__tabid++,\n    ToolRemove:__tabid++,\n    ToolDone:__tabid++\n}\n\nexport default {\n    TabID,\n    components:{\n        ClipBtn,OverlayToolTab,HScrollBar\n    },\n    props:[\"activeItem\",\"editlist\"],\n    data(){\n        return {\n            TabID,\n            toolTab:'cut'\n        }\n    },\n    watch:{\n        activeItem(o) {\n            if(o) {\n                if(o.type == Const.Overlay.Type.Text) {\n                    this.toolTab = 'text';\n                } else if(o.type == Const.Overlay.Type.Image ||\n                        o.type == Const.Overlay.Type.Mosic) {\n                    this.toolTab = 'image';\n                }\n            }\n        },\n        \n        toolTab(v){\n            if(v == 'image')\n                this.$emit(\"select\",TabID.ImageTab);\n            else if(v == 'text')\n                this.$emit(\"select\",TabID.TextTab);\n            else if(v == 'music')\n                this.$emit(\"select\",TabID.AudioTab);\n            else\n                this.$emit(\"select\",TabID.OtherTab);\n        }\n    },\n    computed:{\n        isCurTimelineRemovable() {\n            let timelines = this.editlist.timelines;\n            if(timelines.length <= 1) {\n                return false;\n            }\n            let hasEnding = timelines[timelines.length - 1].ending;\n            if(hasEnding) {\n                let cur = this.editlist.cur_timeline;\n                if(cur.ending) {\n                    return true;\n                }\n                if(timelines.length <= 2) {\n                    return false;\n                }\n            }\n            return true;\n        },\n        curTimelineIsEnding() {\n            let cur = this.editlist.cur_timeline;\n            return cur && cur.ending;\n        }\n    },\n    methods:{\n        select(tabID){\n            this.$emit(\"select\",tabID);\n        },\n        overlayTabSelect(toolTabID, item){\n            let tabID;\n            switch(toolTabID){\n                case OverlayToolTab.TabID.Edit: tabID = TabID.ToolEdit;break;\n                case OverlayToolTab.TabID.Template: tabID = TabID.ToolTemplate;break;\n                case OverlayToolTab.TabID.Settings: tabID = TabID.ToolSettings;break;\n                case OverlayToolTab.TabID.Remove: tabID = TabID.ToolRemove;break;\n                case OverlayToolTab.TabID.Done: tabID = TabID.ToolDone;break;\n                default: return;\n            }\n            this.$emit(\"select\", tabID, item);\n        },\n    }\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolTab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolTab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ToolTab.vue?vue&type=template&id=7329176e&scoped=true&\"\nimport script from \"./ToolTab.vue?vue&type=script&lang=js&\"\nexport * from \"./ToolTab.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ToolTab.vue?vue&type=style&index=0&id=7329176e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7329176e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\"},on:{\"after-leave\":function($event){return _vm.$emit('close')}}},[(_vm.tabid >= 0)?_c('div',{staticClass:\"dialog-main\",style:(_vm.style)},[_c('div',{staticClass:\"dialog-content\"},[(_vm.tabid == _vm.TabID.AudioBase)?_c('AudioBase',{ref:\"audiobBase\",attrs:{\"title\":_vm.title,\"editlist\":_vm.editlist},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e(),(_vm.tabid == _vm.TabID.VideoSort)?_c('Sort',{ref:\"sort\",attrs:{\"title\":_vm.title,\"accept\":_vm.dialogAccept,\"editlist\":_vm.editlist},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e(),(_vm.tabid == _vm.TabID.BGM)?_c('BGM',{ref:\"bgm\",attrs:{\"title\":_vm.title,\"accept\":_vm.dialogAccept,\"editlist\":_vm.editlist},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e(),(_vm.tabid == _vm.TabID.AudioEffect)?_c('AudioEffect',{ref:\"audioEffect\",attrs:{\"title\":_vm.title,\"editlist\":_vm.editlist,\"accept\":_vm.dialogAccept},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e(),(_vm.tabid == _vm.TabID.Filter)?_c('VFilter',{ref:\"vfilter\",attrs:{\"title\":_vm.title,\"editlist\":_vm.editlist},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e(),(_vm.tabid == _vm.TabID.Face)?_c('Face',{ref:\"face\",attrs:{\"title\":_vm.title,\"editlist\":_vm.editlist},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e(),(_vm.tabid == _vm.TabID.AddImage)?_c('ImageOverlay',{ref:\"imageOverlay\",attrs:{\"title\":_vm.title,\"options\":_vm.options,\"postermode\":_vm.postermode,\"editlist\":_vm.editlist},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change,\"beforechange\":_vm.beforechange}}):_vm._e(),(_vm.tabid == _vm.TabID.AddText)?_c('TextOverlay',{ref:\"textOverlay\",attrs:{\"title\":_vm.title,\"postermode\":_vm.postermode,\"accept\":_vm.dialogAccept,\"editlist\":_vm.editlist,\"options\":_vm.options},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change,\"beforechange\":_vm.beforechange}}):_vm._e(),(_vm.tabid == _vm.TabID.VideoBase)?_c('VideoBase',{ref:\"videoBase\",attrs:{\"title\":_vm.title,\"editlist\":_vm.editlist},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e(),(_vm.tabid == _vm.TabID.AspectRatio)?_c('AspectRatio',{ref:\"aspectRatio\",attrs:{\"title\":_vm.title,\"editlist\":_vm.editlist},on:{\"update:title\":function($event){_vm.title=$event},\"change\":_vm.change}}):_vm._e()],1),_c('div',{staticClass:\"bottom-title\"},[(!_vm.dialogAcceptable)?_c('mu-button',{staticClass:\"accept-btn\",attrs:{\"flat\":\"\",\"color\":\"white\"},on:{\"click\":_vm.close}},[_c('mu-icon',{attrs:{\"value\":\"\"}})],1):_vm._e(),(_vm.dialogAcceptable)?_c('mu-button',{staticClass:\"close-btn\",attrs:{\"flat\":\"\",\"color\":\"white\"},on:{\"click\":_vm.close}},[_c('mu-icon',{attrs:{\"value\":\"close\"}})],1):_vm._e(),_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.title))]),(_vm.dialogAcceptable)?_c('mu-button',{staticClass:\"accept-btn\",attrs:{\"flat\":\"\",\"color\":\"white\"},on:{\"click\":_vm.accept}},[_c('mu-icon',{attrs:{\"value\":\"check\"}})],1):_vm._e(),(!_vm.dialogAcceptable)?_c('mu-button',{staticClass:\"accept-btn\",attrs:{\"flat\":\"\",\"color\":\"white\"},on:{\"click\":_vm.close}},[_c('mu-icon',{attrs:{\"value\":\"keyboard_arrow_down\"}})],1):_vm._e()],1)]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"audio-base-main\",on:{\"touchend\":_vm.touchend}},[_c('span',{staticStyle:{\"color\":\"white\",\"width\":\"100px\"}},[_vm._v(\"音量(\"+_vm._s(_vm.audio.volume)+\")\")]),_c('mu-slider',{staticStyle:{\"margin\":\"0\"},attrs:{\"min\":0,\"max\":300,\"step\":1},model:{value:(_vm.audio.volume),callback:function ($$v) {_vm.$set(_vm.audio, \"volume\", $$v)},expression:\"audio.volume\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"audio-base-main\" @touchend=\"touchend\">\n        <span style=\"color:white;width:100px\">音量({{audio.volume}})</span>\n        <mu-slider style=\"margin:0\" :min=\"0\" :max=\"300\" :step=\"1\" v-model=\"audio.volume\" />\n    </div>\n</template>\n<style scoped>\n.audio-base-main{\n    display:flex;\n}\n</style>\n<script>\nimport Editlist from \"@/model/Editlist\";\nimport Const from \"@/const\";\n\nexport default {\n    props:[\"title\"],\n    data(){\n        return {\n            audio:{volume:100}\n        }\n    },\n    methods:{\n        touchend(){\n            this.$emit('change')\n        },\n        onDialogClose(){\n            if(this.initState) {\n                if(this.initState.volume != this.audio.volume) {\n                    Editlist.editlist.createOperateHistory(Const.Operate.AudioParamsModify.Type);\n                }\n            }\n        }\n    },\n    mounted(){\n        this.audio = Editlist.editlist.audio;\n        this.$emit(\"update:title\", \"音量\");\n        this.initState = {\n            volume: this.audio.volume\n        };\n    }\n}\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioBase.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioBase.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioBase.vue?vue&type=template&id=7da5b59a&scoped=true&\"\nimport script from \"./AudioBase.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioBase.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AudioBase.vue?vue&type=style&index=0&id=7da5b59a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7da5b59a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"100%\",\"padding\":\"5px 10px\",\"height\":\"100%\",\"display\":\"flex\",\"flex-direction\":\"column\"}},[_c('div',{staticStyle:{\"color\":\"white\",\"padding\":\"5px 0\"}},[_vm._v(\" 当前背景乐: \"),_c('span',{staticStyle:{\"background\":\"white\",\"color\":\"gray\",\"border-radius\":\"3px\",\"padding\":\"3px 5px\"},on:{\"click\":_vm.remove}},[_vm._v(_vm._s(_vm.bgm&&_vm.bgm.name||\"无\")+\" \"+_vm._s(_vm.bgm&&_vm.bgm.name&&\"删除\"))])]),_c('div',{staticClass:\"audio-base-main\",staticStyle:{\"padding\":\"5px 0\"},on:{\"touchend\":_vm.touchend}},[_c('span',{staticStyle:{\"color\":\"white\",\"width\":\"100px\",\"white-space\":\"nowrap\",\"padding-right\":\"10px\"}},[_vm._v(\" 背景音量(\"+_vm._s(_vm.volume)+\") \")]),_c('mu-slider',{staticStyle:{\"margin\":\"0\"},attrs:{\"min\":0,\"max\":300,\"step\":1},model:{value:(_vm.volume),callback:function ($$v) {_vm.volume=$$v},expression:\"volume\"}})],1),_c('div',{staticStyle:{\"border-top\":\"1px solid gray\",\"width\":\"100%\",\"display\":\"flex\"}},[_c('HScrollBar',{staticClass:\"tabs\"},[_c('div',{staticClass:\"tab\",on:{\"click\":_vm.pickAudio}},[_vm._v(\"本地音乐\")]),_vm._l((_vm.allBGM.filter(function (i){ return i.list; })),function(item,idx){return _c('div',{key:idx,staticClass:\"tab\",class:{active:_vm.active==idx},on:{\"click\":function($event){_vm.active=idx}}},[_vm._v(_vm._s(item.name))])})],2)],1),_vm._l((_vm.allBGM.filter(function (i){ return i.list; })),function(list,idx){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.active == idx),expression:\"active == idx\"}],key:list.name,staticStyle:{\"height\":\"100%\",\"overflow\":\"auto\"}},_vm._l((list.list),function(item){return _c('div',{key:list.name+item.name,staticClass:\"bgmItem\",class:{active:_vm.selectedBGMName == item.name},on:{\"click\":function($event){return _vm.toggleBGM(item)}}},[_c('mu-icon',{staticClass:\"musicmu-icon\",attrs:{\"size\":\"14\",\"value\":\"music_note\"}}),_c('span',{staticClass:\"musicName\"},[_vm._v(_vm._s(item.name)+\" \")]),_c('span',{staticClass:\"musicDuration\"},[_vm._v(_vm._s(item.duration))]),(!item.local_file&&!item.download)?_c('mu-icon',{staticClass:\"musicPlaymu-icon\",attrs:{\"value\":\"arrow_downward\"}}):_vm._e(),(item.download)?_c('mu-circular-progress',{staticStyle:{\"zoom\":\"0.2\",\"margin-left\":\"10px\"},attrs:{\"value\":item.download.percent,\"size\":60,\"color\":\"gray\",\"stroke-width\":10}}):_vm._e()],1)}),0)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div style=\"width:100%;padding:5px 10px;height:100%;display:flex;flex-direction:column\">\n        <div style=\"color:white;padding:5px 0\">\n            当前背景乐: <span @click=\"remove\" style=\"background:white;color:gray;border-radius:3px;padding:3px 5px\">{{bgm&&bgm.name||\"无\"}} {{bgm&&bgm.name&&\"删除\"}}</span>\n        </div>\n        <div style=\"padding:5px 0\" class=\"audio-base-main\" @touchend=\"touchend\">\n            <span style=\"color:white;width:100px;white-space:nowrap;padding-right:10px\"> 背景音量({{volume}}) </span>\n            <mu-slider style=\"margin:0\" :min=\"0\" :max=\"300\" :step=\"1\" v-model=\"volume\" />\n        </div>\n    \n        <div style=\"border-top:1px solid gray;width:100%;display:flex\">\n            <HScrollBar class=\"tabs\" >\n                <div class=\"tab\" @click=\"pickAudio\">本地音乐</div>\n                <div class=\"tab\" @click=\"active=idx\" :class=\"{active:active==idx}\" v-for=\"(item,idx) in allBGM.filter(i=>i.list)\" :key=\"idx\">{{item.name}}</div>\n            </HScrollBar>\n        </div>\n\n        <div style=\"height:100%;overflow:auto\" :key=\"list.name\" v-show=\"active == idx\" v-for=\"(list,idx) in allBGM.filter(i=>i.list)\">\n            <div v-for=\"item in list.list\" :key=\"list.name+item.name\" @click=\"toggleBGM(item)\" \n                :class=\"{active:selectedBGMName == item.name}\" class=\"bgmItem\">\n                <mu-icon class=\"musicmu-icon\" size=\"14\" value=\"music_note\" />\n                <span class=\"musicName\">{{ item.name }} </span>\n                <span class=\"musicDuration\">{{item.duration}}</span>\n                <mu-icon v-if=\"!item.local_file&&!item.download\" class=\"musicPlaymu-icon\" value=\"arrow_downward\" />\n                <mu-circular-progress v-if=\"item.download\" :value=\"item.download.percent\" :size=\"60\" style=\"zoom:0.2;margin-left:10px\" color=\"gray\" :stroke-width=\"10\" />\n            </div>\n        </div>\n    </div>\n</template>\n<style lang=\"less\" scoped>\n\n.tabs{\n    width:100%;white-space: nowrap;\n    padding:5px;\n    overflow:auto;\n}\n.tab{\n    display:inline-block;\n    color:white;\n    padding:10px 10px;\n}\n.tab.active{\n    border-bottom:2px solid red\n}\n.audio-base-main{\n    display:flex;\n}\n\n.bgmItem.active {\n    background: white;\n    border-radius: 5px;\n    color: black;\n}\n\n.bgmItem {\n    color: white;\n    display: flex;\n    align-items: center;\n    font-size: 14px;\n    margin:10px 0;\n\n    .musicmu-icon {\n        margin: 0 10px;\n    }\n\n    .musicPlaymu-icon {\n        margin: 0 10px;\n\n        border-radius:10px;\n        background:red;\n        font-size:10px;\n    }\n\n    .musicName {\n        max-width: 50%;\n        display: inline-block;\n    }\n\n    .musicDuration {\n        font-size: 12px;\n        color:gray;\n        margin-left:5px;\n        zoom:0.7\n    }\n}\n\n</style>\n<script>\nimport HScrollBar from \"@/components/HScrollBar\";\nimport RManager from \"@/model/UGCResourceManager\";\nimport Editlist from \"@/model/Editlist\";\nimport Const from \"@/const\";\n\nexport default {\n    components:{ HScrollBar },\n    data(){\n        return {\n            active: 0,\n            volume: 100,\n            allBGM: [],\n            bgm:null\n        }\n    },\n    props:[\"accept\"],\n    computed:{\n        selectedBGMName(){\n            return this.bgm?this.bgm.name : \"无背景音\"\n        }\n    },\n    watch:{\n        async accept(v) {\n\n            if(!this.bgm) {\n                this.$parent.close();\n                return;\n            }\n\n            await this.stop();\n            await new Promise(o => { // 等待下载完成\n                let download = () => {\n                    if(!this.bgm.local_file) {\n                        setTimeout(download, 200);\n                    } else {\n                        o();\n                    }\n                };\n                download();\n            });\n\n            if (v) {\n                let oldBgmUrl = Editlist.editlist.bgm.url;\n\n                if(this.bgm){\n                    Editlist.editlist.bgm.url = this.bgm.local_file.toNativeURL();\n                    Editlist.editlist.bgm.volume = this.volume;\n                } else {\n                    Editlist.editlist.bgm.url = \"\";\n                }\n\n                if(oldBgmUrl != Editlist.editlist.bgm.url || this.volume != this.initState.volume) {\n                    this.$emit(\"change\");\n\n                    if(!Editlist.editlist.bgm.url) {\n                        Editlist.editlist.createOperateHistory(Const.Operate.BGMUnset.Type);\n                    } else if(!oldBgmUrl){\n                        Editlist.editlist.createOperateHistory(Const.Operate.BGMSet.Type);\n                    } else if(this.initState.volume != this.volume){\n                        Editlist.editlist.createOperateHistory(Const.Operate.BGMParamsModify.Type);\n                    }\n                }\n\n                this.$parent.close();\n            }\n        },\n        volume(v) {\n            if(this._audio) {\n                this._audio.volume = Math.min(1, v / 100);\n            }\n        }\n    },\n    methods:{\n        async toggleBGM(bgm) {\n            \n            await this.play(bgm);\n\n        },\n        remove(){\n            this.bgm = null;\n            this.stop();\n        },\n        touchend(){\n            // this.$emit('change')\n        },\n        async stop(){\n            //暂停当前音乐播放\n            if(this._audio){\n                this._audio.pause();\n                this._audio.removeAttribute(\"src\");\n                this._audio.load();\n                this._audio.onended && this._audio.onended();\n                await new Promise(o=>setTimeout(o,100));\n            }\n        },\n        async play(music) {\n\n            this.bgm = music;\n\n            if (!music.local_file && !music.download) {\n                await RManager.downloadRes(RManager.ResType.music, music);\n            }\n\n            if(music.local_file){\n\n                await this.stop();\n\n                // 无\n                if(music.nobgm){\n                    this.bgm = null;\n                    return;\n                }\n                \n                music.playing = true;\n                // this.subList = this.subList.slice(0);//触发响应\n                await new Promise((o,x)=>{\n                    this._audio = new Audio();\n                    this._audio.src = music.local_file.toInternalURL();\n                    this._audio.onended = o;\n                    this._audio.onerror = x;\n                    this._audio.volume = Math.min(1, this.volume / 100);\n                    this._audio.play();\n                });\n                music.playing = false;\n                // this.subList = this.subList.slice(0);\n            }\n        },\n        async pickAudio() {\n            let result = await new Promise(UGCApp.pickAudio.bind(UGCApp));\n            if(!result.path) {\n                this.$mResToast.error(\"选择失败\");\n                return;\n            }\n            let music = await this.getLocalAudio( \"file://\" + result.path);\n            this.play(music);\n        },\n        async getLocalAudio(url) {\n            let fileEntry = await new Promise(resolveLocalFileSystemURL.bind(window, url));\n            let music = {\n\t\t\t\t\"name\": fileEntry.name,\n\t\t\t\t\"local_file\": fileEntry\n            }\n            return music;\n        }\n    },\n    async mounted(){\n        this.$emit(\"update:title\", \"背景音乐\")\n\n        this.$parent.acceptable();\n        // this.allBGM = [{\n        //     name:\"无背景音\",\n        //     nobgm:1,\n        //     local_file:\"local_file\",\n        // },...(await RManager.fetchResList(RManager.ResType.music))[0].list];\n        \n        this.allBGM = await RManager.fetchResList(RManager.ResType.music);\n        \n        this.bgm = this.allBGM.flatMap(i=>i.list).filter(i=>{\n            return i.local_file && (\n                i.local_file.toNativeURL() == Editlist.editlist.bgm.url);\n        })[0];\n\n        if(!this.bgm && Editlist.editlist.bgm.url) {\n            this.bgm = await this.getLocalAudio(Editlist.editlist.bgm.url);\n        }\n\n        this.volume = Editlist.editlist.bgm.volume;\n\n        this.initState = {\n            volume: this.volume\n        };\n    },\n    beforeDestroy(){\n        this.stop();\n    }\n}\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BGM.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BGM.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BGM.vue?vue&type=template&id=4d53dd9b&scoped=true&\"\nimport script from \"./BGM.vue?vue&type=script&lang=js&\"\nexport * from \"./BGM.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BGM.vue?vue&type=style&index=0&id=4d53dd9b&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4d53dd9b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"audioEffect\"},[_c('mu-list',{staticClass:\"main\",attrs:{\"value\":_vm.mainActive},on:{\"change\":function($event){_vm.mainActive=$event}}},_vm._l((_vm.allAudio),function(item){return _c('mu-list-item',{key:item.name,class:{active: _vm.mainActive==item.name},attrs:{\"value\":item.name,\"button\":true}},[_c('mu-list-item-title',[_vm._v(_vm._s(item.name))])],1)}),1),_c('mu-list',{staticClass:\"sub\"},_vm._l((_vm.subList),function(item){return _c('mu-list-item',{key:item.name,attrs:{\"button\":true},on:{\"click\":function($event){return _vm.chooseSubItem(item)}}},[_c('mu-list-item-title',{staticClass:\"subItem\",class:{active: _vm.subActive && _vm.subActive.name==item.name}},[(item.playing)?_c('div',{staticClass:\"playing\"},[_c('mu-icon',{staticClass:\"icon\",attrs:{\"value\":\"format_align_left\",\"size\":\"16\"}})],1):_c('mu-icon',{attrs:{\"value\":\"music_note\",\"size\":\"16\"}}),_c('div',{staticClass:\"text\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticStyle:{\"text-align\":\"right\"}},[(item.loading)?_c('mu-icon',{staticClass:\"loading\",attrs:{\"value\":\"rotate_left\",\"size\":\"16\"}}):_c('span',[_vm._v(_vm._s(item.duration)+\"″\")])],1)],1)],1)}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"audioEffect\">\n        <mu-list class=\"main\" @change=\"mainActive=$event\" :value=\"mainActive\">\n            <mu-list-item\n                v-for=\"item in allAudio\"\n                :key=\"item.name\"\n                :value=\"item.name\"\n                :class=\"{active: mainActive==item.name}\"\n                :button=\"true\"\n            >\n                <mu-list-item-title>{{item.name}}</mu-list-item-title>\n            </mu-list-item>\n        </mu-list>\n        <mu-list class=\"sub\">\n            <mu-list-item @click=\"chooseSubItem(item)\" v-for=\"item in subList\" :key=\"item.name\" :button=\"true\">\n                <mu-list-item-title\n                    class=\"subItem\"\n                    :class=\"{active: subActive && subActive.name==item.name}\"\n                >\n                    <div v-if=\"item.playing\" class=\"playing\">\n                        <mu-icon value=\"format_align_left\" class=\"icon\" size=\"16\"></mu-icon>\n                    </div>\n                    <mu-icon v-else value=\"music_note\" size=\"16\"></mu-icon>\n                    <div class=\"text\">{{item.name}}</div>\n                    <div style=\"text-align:right\">\n                        <mu-icon v-if=\"item.loading\" value=\"rotate_left\" class=\"loading\" size=\"16\"></mu-icon>\n                        <span v-else>{{item.duration}}″</span>\n                    </div>\n                </mu-list-item-title>\n            </mu-list-item>\n        </mu-list>\n    </div>\n</template>\n<style lang=\"less\" scoped>\n.audioEffect {\n    width:100%;\n    display: flex;\n    flex-direction: row;\n    background-color: #333;\n    font-size: 12px;\n\n    .main {\n        width: 100px;\n        text-align: center;\n\n        .active {\n            border-right:2px solid red;\n            background:rgba(255,255,255,0.1)\n        }\n    }\n\n    .sub {\n\n        .subItem {\n            font-size: 12px;\n            color: white;\n            display: flex;\n            flex-direction: row;\n            align-items: center;\n\n            &.active {\n                color: red;\n            }\n\n            .text {\n                flex: 1;\n                margin: 0 10px;\n                text-overflow: ellipsis;\n                white-space: nowrap;\n            }\n\n            .playing {\n                overflow: hidden;\n                height: 10px;\n\n                .icon {\n                    transform: rotate(-90deg);\n                    animation: playing 0.7s infinite linear;\n                }\n            }\n\n            .loading {\n                animation: loading 0.5s infinite linear;\n            }\n        }\n    }\n}\n@keyframes loading {\n    from {\n        transform: rotate(0deg);\n    }\n    to {\n        transform: rotate(-360deg);\n    }\n}\n@keyframes playing {\n    from {\n        transform: rotate(-90deg) skewX(0deg) scaleX(1);\n    }\n    30% {\n        transform: rotate(-90deg) skewX(-40deg) scaleX(1.8);\n    }\n    70% {\n        transform: rotate(-90deg) skewX(40deg) scaleX(1);\n    }\n    to {\n        transform: rotate(-90deg) skewX(0deg) scaleX(0.5);\n    }\n}\n</style>\n<style>\n.audioEffect .mu-item-sub-title,\n.audioEffect .mu-item-title {\n    color: #fff;\n    font-size: 12px;\n}\n.audioEffect .mu-list {\n    padding: 0;\n}\n.audioEffect .mu-item-action {\n    width: 30px;\n    min-width: 30px;\n}\n</style>\n<script>\nimport RManager from \"@/model/UGCResourceManager\";\nimport Editlist from \"@/model/Editlist\";\nimport Const from \"@/const\";\n\nexport default {\n    props: [\"accept\"],\n    data() {\n        return {\n            mainActive: 1,\n            subActive: null,\n            allAudio:[],\n            subList: null\n        };\n    },\n    watch: {\n        mainActive(v) {\n            let found = this.allAudio.filter(i=>i.name==v)[0];\n            if(found)\n                this.subList = found.list;\n        },\n        async accept(v) {\n\n            await this.stop();\n            \n            if (v && this.subActive) {\n                Editlist.editlist.add_amix(this.subActive);\n                this.$emit(\"change\");\n                Editlist.editlist.createOperateHistory(Const.Operate.AudioEffectAdd.Type);\n            }\n\n            this.$parent.close();\n        }\n    },\n    methods: {\n        async chooseSubItem(music) {\n            this.subActive = music;\n            this.subActive;\n            // window.console.log(music);\n            await this.play(music);\n        },\n        async stop(){\n            //暂停当前音乐播放\n            if(this._audio){\n                this._audio.pause();\n                this._audio.removeAttribute(\"src\");\n                this._audio.load();\n                this._audio.onended && this._audio.onended();\n                await new Promise(o=>setTimeout(o,100));\n            }\n        },\n        async play(music) {\n            if (!music.local_file && !music.download) {\n                await RManager.downloadRes(RManager.ResType.audio, music);\n            }\n\n            if(music.local_file){\n\n                await this.stop();\n                \n                music.playing = true;\n                this.subList = this.subList.slice(0);//触发响应\n                await new Promise((o,x)=>{\n                    this._audio = new Audio();\n                    this._audio.src = music.local_file.toInternalURL();\n                    this._audio.onended = o;\n                    this._audio.onerror = x;\n                    this._audio.play();\n                });\n                music.playing = false;\n                this.subList = this.subList.slice(0);\n            }\n        }\n    },\n    async mounted() {\n        this.$emit(\"update:title\", \"音效\")\n        this.$parent.acceptable();\n\n        this.allAudio = await RManager.fetchResList(RManager.ResType.audio);\n        this.mainActive = this.allAudio[0].name;\n    },\n    beforeDestroy(){\n        this.stop();\n    }\n};\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioEffect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioEffect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AudioEffect.vue?vue&type=template&id=28f2cb3a&scoped=true&\"\nimport script from \"./AudioEffect.vue?vue&type=script&lang=js&\"\nexport * from \"./AudioEffect.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AudioEffect.vue?vue&type=style&index=0&id=28f2cb3a&lang=less&scoped=true&\"\nimport style1 from \"./AudioEffect.vue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28f2cb3a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"filter-box\"},[_c('div',{staticClass:\"filter-slider\",style:({visibility:(_vm.filter && _vm.filter.percent >= 0?'':'hidden')})},[_c('span',[_vm._v(_vm._s(_vm.filter&&_vm.filter.name))]),_c('mu-slider',{staticClass:\"slider\",attrs:{\"min\":0,\"max\":100,\"step\":5,\"color\":\"red\"},model:{value:(_vm.percent),callback:function ($$v) {_vm.percent=$$v},expression:\"percent\"}}),_c('span',{staticStyle:{\"width\":\"50px\",\"text-align\":\"center\"}},[_vm._v(_vm._s(_vm.percent))])],1),_c('mu-tabs',{attrs:{\"value\":_vm.active,\"color\":\"transparent\",\"indicator-color\":\"red\",\"text-color\":\"white\",\"left\":\"\"},on:{\"update:value\":function($event){_vm.active=$event}}},_vm._l((_vm.allFilter.filter(function (i){ return i.list; })),function(item,idx){return _c('mu-tab',{key:idx},[_vm._v(_vm._s(item.name))])}),1),_c('div',{staticClass:\"filter-main\"},[_c('ClipBtn',{staticClass:\"item-btn\",class:{active:_vm.noactive},attrs:{\"icon\":\"check\",\"text\":\"无滤镜\"},nativeOn:{\"click\":function($event){return _vm.toggleEffect()}}}),_c('div',{staticStyle:{\"margin\":\"10px\",\"height\":\"60%\",\"border-right\":\"1px solid gray\"}}),_vm._l((_vm.allFilter.filter(function (i){ return i.list; })),function(item,idx){return [(_vm.active == idx)?_c('div',{key:idx,staticStyle:{\"display\":\"flex\"}},_vm._l((item.list),function(e){return _c('ClipBtn',{key:e.name,staticClass:\"item-btn\",attrs:{\"active\":_vm.filter && (e.name == _vm.filter.name),\"src\":e.thumb_remote_url,\"text\":e.name},nativeOn:{\"click\":function($event){return _vm.toggleEffect(e)}}},[(_vm.isNeedDownload(e))?_c('mu-icon',{staticClass:\"downloadmu-icon\",attrs:{\"value\":\"arrow_downward\"}}):_vm._e(),(e.download)?_c('mu-circular-progress',{staticClass:\"loadingmu-icon\",staticStyle:{\"zoom\":\"0.2\",\"margin-left\":\"10px\"},attrs:{\"value\":e.download.percent,\"size\":60,\"color\":\"white\",\"stroke-width\":10}}):_vm._e()],1)}),1):_vm._e()]})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"filter-box\">\n    <div :style=\"{visibility:(filter && filter.percent >= 0?'':'hidden')}\" class=\"filter-slider\">\n        <span >{{filter&&filter.name}}</span>\n        <mu-slider class=\"slider\" :min=\"0\" :max=\"100\" :step=\"5\" color=\"red\" v-model=\"percent\" />\n        <span style=\"width:50px;text-align:center\">{{percent}}</span>\n    </div>\n    <mu-tabs :value.sync=\"active\" color=\"transparent\" indicator-color=\"red\" text-color=\"white\"  left>\n        <mu-tab v-for=\"(item,idx) in allFilter.filter(i=>i.list)\" :key=\"idx\">{{item.name}}</mu-tab>\n    </mu-tabs>\n    <div class=\"filter-main\"  >\n        <ClipBtn @click.native=\"toggleEffect()\" \n            :class=\"{active:noactive}\" \n            class=\"item-btn\" \n            icon=\"check\" text=\"无滤镜\" />\n        <div style=\"margin:10px;height:60%;border-right:1px solid gray\"></div>\n        <template v-for=\"(item,idx) in allFilter.filter(i=>i.list)\">\n            <div style=\"display:flex\" v-if=\"active == idx\" :key=\"idx\">\n                <ClipBtn v-for=\"e in item.list\" :key=\"e.name\" @click.native=\"toggleEffect(e)\" \n                    :active=\"filter && (e.name == filter.name)\"\n                    class=\"item-btn\" \n                    :src=\"e.thumb_remote_url\" :text=\"e.name\" >\n                    <mu-icon v-if=\"isNeedDownload(e)\" class=\"downloadmu-icon\" value=\"arrow_downward\" />\n                    <mu-circular-progress class=\"loadingmu-icon\" v-if=\"e.download\" :value=\"e.download.percent\" :size=\"60\" style=\"zoom:0.2;margin-left:10px\" color=\"white\" :stroke-width=\"10\" />\n                </ClipBtn>\n            </div>\n        </template>\n    </div>\n</div>\n</template>\n<style scoped>\n\n.filter-box{\n    display: flex;\n    flex-flow: column;\n    width:100%;\n}\n.filter-slider > .slider{\n    margin:0 10px;\n}\n.filter-slider{\n    display: flex;\n    color: white;\n    padding-bottom:10px;\n    border-bottom: 1px solid #222;\n    white-space: nowrap;\n    font-size:12px;\n    line-height:25px;\n}\n.filter-main{\n    display: flex;\n    height: 70px;\n    overflow:auto;\n    width:100%;\n}\n.item-btn {\n    padding: 5px 10px;\n    width: 60px;\n}\n\n.downloadmu-icon {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    border-radius:10px;\n    background:red;\n    font-size:10px;\n}\n\n.loadingmu-icon {\n    position: absolute;\n    right: 0;\n    bottom: 0\n}\n</style>\n<script>\nimport extend from \"extend\";\n// import Editlist from \"@/model/Editlist\";\nimport ClipBtn from \"@/components/ClipBtn\";\nimport RManager from \"@/model/UGCResourceManager\";\nimport Const from \"@/const\";\n\nexport default {\n    components:{ClipBtn},\n    props:[\"editlist\"],\n    data(){\n        return {\n            allFilter: [],\n            active: 0,\n            percent:100,\n            filter:null,\n        }\n    },\n    watch:{\n        \"percent\":function(p){\n            this.editlist.filter_percent = p;\n            if(this.filter)\n                this.filter.percent = p;\n        }\n    },\n    computed:{\n        \n        noactive(){\n            return !this.filter\n        }\n    },\n    methods:{\n        isNeedDownload(res){\n            return (\n                !res.local_file || (\n                    res.source_list && res.source_list.filter((i,idx) => \n                        !res.local_file_list[idx]\n                    ).length || false\n                )\n            ) && !res.download;\n        },\n        async toggleEffect(e) {\n            if(!e){\n                this.editlist.filter.length = 0;\n                this.editlist.filter_reset = \"\";\n                this.filter = null;\n                // this.$emit(\"change\", e);\n                return;\n            }\n\n            if (!this.filter || e.name != this.filter.name){\n\n                if (this.isNeedDownload(e)) {\n                    await RManager.downloadRes(\n                        RManager.ResType.filter, e, (percent) => {\n                            e.download.percent = Math.ceil(percent * 100);\n                        });\n                } \n                if (e.local_file) {\n                    this.editlist.filter.length = 0;\n                    this.editlist.filter.push(e);\n                    this.editlist.filter_reset = [\n                        e.local_file.toNativeURL(), \n                        ...(\n                            e.local_file_list && \n                            e.local_file_list.map(i=>i.toNativeURL()) || []\n                        )\n                    ].map(i=>i.replace(\"file://\",\"\")).join(\"|\");\n\n                    this.filter = e;\n                    e.percent = 100;\n                }\n                // this.$emit(\"change\", e);\n            }\n        },\n        onDialogClose(){\n            if(this.initeState) {\n                let modifyState = [this.initeState.filter, ...this.editlist.filter].map(e => {\n                    return {\n                        oldEnable: this.initeState.filter.find(f => f.name == e.name),\n                        currEnable: this.editlist.filter.find(f => f.name == e.name)\n                    }\n                });\n\n                if(this.editlist.filter.length > 2 &&\n                        modifyState.find(e => e.oldEnable != e.currEnable)) {\n                    this.editlist.createOperateHistory(Const.Operate.FilterModify.Type);\n                    \n                } else if(this.editlist.filter.length <= 1 &&\n                        modifyState[0].currEnable != modifyState[0].oldEnable) {\n                    if(modifyState[0].currEnable) {\n                        this.editlist.createOperateHistory(Const.Operate.FilterEnable.Type);\n                    } else {\n                        this.editlist.createOperateHistory(Const.Operate.FilterDisable.Type);\n                    }\n\n                } else if(this.percent != this.initeState.percent) {\n                    this.editlist.createOperateHistory(Const.Operate.FilterModify.Type);\n                }\n            }\n        }\n    },\n    async mounted(){\n        this.$emit(\"update:title\", \"滤镜\")\n        this.allFilter = await RManager.fetchResList(RManager.ResType.filter);\n        if(this.editlist.filter.length){\n            this.allFilter.forEach(i=>{\n                let found = i.list && i.list.filter(i=>{\n                    return i.name == this.editlist.filter[0].name\n                })[0];\n                if(found){\n                    this.filter = found;\n                }\n            })\n            \n        }\n        this.initState = {\n            percent: this.editlist.filter_percent,\n            filter: extend(true, [], this.editlist.filter)\n        };\n    }\n}\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Filter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Filter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Filter.vue?vue&type=template&id=6272fdad&scoped=true&\"\nimport script from \"./Filter.vue?vue&type=script&lang=js&\"\nexport * from \"./Filter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Filter.vue?vue&type=style&index=0&id=6272fdad&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6272fdad\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"image-main\"},[_c('ScrollTab',{attrs:{\"value\":_vm.active,\"color\":\"transparent\",\"indicator-color\":\"red\",\"text-color\":\"white\",\"left\":\"\"},on:{\"update:value\":function($event){_vm.active=$event}}},_vm._l((_vm.allSticker),function(item,idx){return _c('mu-tab',{key:idx},[_vm._v(_vm._s(item.name))])}),1),_vm._l((_vm.allSticker),function(folder,idx){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.active == idx),expression:\"active == idx\"}],key:idx,staticClass:\"tab-box\"},_vm._l((folder.list),function(item){return _c('div',{key:item.name,staticClass:\"stickerItem\",on:{\"click\":function($event){return _vm.chooseSticker(item)}}},[_c('img',{attrs:{\"loop\":\"0\",\"src\":item.thumb_remote_url+'/'+item.source+'.thumb.apng'}}),(!item.local_file&&!item.download)?_c('mu-icon',{staticClass:\"downloadmu-icon\",attrs:{\"value\":\"arrow_downward\"}}):_vm._e(),(item.download)?_c('mu-circular-progress',{staticClass:\"loadingmu-icon\",staticStyle:{\"zoom\":\"0.2\",\"margin-left\":\"10px\"},attrs:{\"value\":item.download.percent,\"size\":60,\"color\":\"white\",\"stroke-width\":10}}):_vm._e()],1)}),0)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('HScrollBar',{staticClass:\"scroll-tab\",attrs:{\"scroller\":_vm.scroller}},[_c('mu-tabs',_vm._b({ref:\"tab\",on:{\"update:value\":function($event){return _vm.$emit('update:value',$event)},\"change\":function($event){_vm.fixTab($event);_vm.$emit('change',$event)}}},'mu-tabs',_vm.$attrs,false),[_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <HScrollBar :scroller=\"scroller\" class=\"scroll-tab\">\r\n        <mu-tabs\r\n            ref=\"tab\"\r\n            v-bind=\"$attrs\"\r\n            @update:value=\"$emit('update:value',$event)\"\r\n            @change=\"fixTab($event);$emit('change',$event)\"\r\n        >\r\n            <slot></slot>\r\n        </mu-tabs>\r\n    </HScrollBar>\r\n</template>\r\n<style>\r\n.scroll-tab {\r\n    width: 100%;\r\n}\r\n.scroll-tab .mu-tabs {\r\n    overflow-x: auto;\r\n    -webkit-overflow-scrolling: touch;\r\n}\r\n</style>\r\n<script>\r\nimport HScrollBar from \"./HScrollBar\";\r\n\r\nexport default {\r\n    components:{ HScrollBar },\r\n    data() {\r\n        return {\r\n            scroller: null\r\n        }\r\n    },\r\n    methods: {\r\n        fixTab(value) {\r\n            // 修正mu-tabs添加滚动条后红线位置错误的问题\r\n            let tabDom = this.$refs.tab.$el;\r\n            let lineDom = tabDom.querySelector(\".mu-tab-link-highlight\");\r\n            let left = tabDom.children[value].offsetLeft;\r\n            tabDom.children[value].scrollIntoView(true);\r\n            this.$nextTick(() => {\r\n                let cssText = lineDom.style.cssText;\r\n                lineDom.style.cssText = cssText.replace(\r\n                    /(translate\\().*,/,\r\n                    \"$1\" + left + \"px,\"\r\n                );\r\n            });\r\n        }\r\n    },\r\n    mounted() {\r\n        this.$nextTick(() => {\r\n            this.scroller = this.$refs.tab.$el;\r\n        });\r\n    }\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScrollTab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScrollTab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ScrollTab.vue?vue&type=template&id=585bafc8&\"\nimport script from \"./ScrollTab.vue?vue&type=script&lang=js&\"\nexport * from \"./ScrollTab.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ScrollTab.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"image-main\">\n        <ScrollTab :value.sync=\"active\" color=\"transparent\" indicator-color=\"red\" text-color=\"white\" left>\n            <mu-tab v-for=\"(item,idx) in allSticker\" :key=\"idx\">{{item.name}}</mu-tab>\n        </ScrollTab>\n        <div class=\"tab-box\" v-show=\"active == idx\" v-for=\"(folder,idx) in allSticker\" :key=\"idx\">\n            <div v-for=\"(item) in folder.list\" :key=\"item.name\" @click=\"chooseSticker(item)\" class=\"stickerItem\">\n                <img loop=\"0\" :src=\"item.thumb_remote_url+'/'+item.source+'.thumb.apng'\">\n                <mu-icon v-if=\"!item.local_file&&!item.download\" class=\"downloadmu-icon\" value=\"arrow_downward\" />\n                <mu-circular-progress class=\"loadingmu-icon\" v-if=\"item.download\" :value=\"item.download.percent\" :size=\"60\" style=\"zoom:0.2;margin-left:10px\" color=\"white\" :stroke-width=\"10\" />\n            </div>\n        </div>\n    </div>\n</template>\n<style lang=\"less\" scoped>\n.image-main{\n    display:flex;\n    flex-flow: column\n}\n.tab-box{\n    width:100%;padding:5px 10px;display:flex;justify-content:left\n}\n.stickerItem {\n    width: 80px;\n    height: 50px;\n    position: relative;\n    color: white;\n\n    .downloadmu-icon {\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        border-radius:10px;\n        background:red;\n        font-size:10px;\n    }\n\n    .loadingmu-icon {\n        position: absolute;\n        right: 0;\n        bottom: 0\n    }\n\n    img {\n        width: 100%;\n        height: 100%;\n        object-fit: contain\n    }\n}\n</style>\n<script>\nimport RManager from \"@/model/UGCResourceManager\"\nimport ScrollTab from \"@/components/ScrollTab\"\nimport Const from \"@/const\";\n\nexport default {\n    props:[\"editlist\" ,\"postermode\"],\n    components: {\n        ScrollTab\n    },\n    data(){\n        return {\n            active:0,\n            allSticker: []\n        }\n    },\n    methods:{\n        async chooseSticker(item) {\n            // window.console.log(item)\n            if (!item.local_file && !item.download) {\n                await RManager.downloadRes(\n                    RManager.ResType.image, item, (percent) => {\n                        item.download.percent = Math.ceil(percent * 100);\n                    });\n            } \n            \n            if(item.local_file){\n\n                this.$emit(\"beforechange\",{\n                    overlay\n                });\n\n                let overlay = this.editlist.add_overlay({\n                    end_sec: +item.duration,\n                    url: item.local_file.toURL(),\n                    type: Const.Overlay.Type.Image\n                }, this.postermode);\n\n                this.$emit(\"change\",{\n                    overlay\n                });\n\n                this.editlist.createOperateHistory(Const.Operate.ImageAdd.Type, overlay.id);\n            }\n        \n\n        }\n    },\n    async mounted(){\n        this.allSticker = await RManager.fetchResList(RManager.ResType.image);\n        window.console.log(\"allsticker:\",this.allSticker);\n        this.$emit(\"update:title\", \"贴纸\")\n    }\n}\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageOverlay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ImageOverlay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ImageOverlay.vue?vue&type=template&id=7a96ab86&scoped=true&\"\nimport script from \"./ImageOverlay.vue?vue&type=script&lang=js&\"\nexport * from \"./ImageOverlay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ImageOverlay.vue?vue&type=style&index=0&id=7a96ab86&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a96ab86\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"textOverlay\"},[_c('TextRender',_vm._b({directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.overlay.text),expression:\"overlay.text\"}],ref:\"textRender\",staticClass:\"text-render\"},'TextRender',_vm.overlay,false)),_c('mu-tabs',{attrs:{\"value\":_vm.active,\"color\":\"transparent\",\"indicator-color\":\"red\",\"text-color\":\"white\",\"left\":\"\"},on:{\"update:value\":function($event){_vm.active=$event}}},[_c('mu-tab',{attrs:{\"value\":_vm.TabID.Edit}},[_c('mu-icon',{attrs:{\"value\":\"keyboard\"}}),_vm._v(\" 文字 \")],1),_c('mu-tab',{attrs:{\"value\":_vm.TabID.Template}},[_c('mu-icon',{attrs:{\"value\":\"extension\"}}),_vm._v(\" 样式 \")],1),_c('mu-tab',{attrs:{\"value\":_vm.TabID.Settings}},[_c('mu-icon',{attrs:{\"value\":\"tune\"}}),_vm._v(\" 调整 \")],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.active == _vm.TabID.Edit),expression:\"active == TabID.Edit\"}]},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.overlay.text),expression:\"overlay.text\"}],ref:\"input\",staticStyle:{\"width\":\"100%\",\"border\":\"1px solid #666\",\"border-radius\":\"5px\",\"font-size\":\"16px\",\"height\":\"32px\",\"line-height\":\"2\",\"padding\":\"0 10px\"},style:(_vm.inputStyles),attrs:{\"type\":\"text\",\"placeholder\":\"请输入文本\"},domProps:{\"value\":(_vm.overlay.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.overlay, \"text\", $event.target.value)}}})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.active == _vm.TabID.Template),expression:\"active == TabID.Template\"}]},[_c('mu-tabs',{attrs:{\"value\":_vm.templateActive,\"color\":\"transparent\",\"indicator-color\":\"rgba(255,255,255,0.3)\",\"text-color\":\"white\",\"left\":\"\"},on:{\"update:value\":function($event){_vm.templateActive=$event}}},_vm._l((_vm.allBg),function(e){return _c('mu-tab',{key:e.name,attrs:{\"value\":e.name}},[_vm._v(\" \"+_vm._s(e.name)+\" \")])}),1),_vm._l((_vm.allBg),function(e){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.templateActive == e.name),expression:\"templateActive == e.name\"}],key:e.name,staticClass:\"y-scroller stickerList\",attrs:{\"value\":e.name}},[_c('div',{staticClass:\"stickerItem none\",on:{\"click\":_vm.clearTemplate}},[_c('mu-icon',{attrs:{\"value\":\"block\",\"size\":\"24\",\"color\":\"#eee\"}})],1),_vm._l((e.list),function(item,idx){return _c('div',{key:idx,staticClass:\"stickerItem\",class:{active:item.name==_vm.overlay.templateName},on:{\"click\":function($event){return _vm.chooseBubble(item)}}},[_c('img',{attrs:{\"src\":item.thumb_remote_url}}),(!item.local_file&&!item.download)?_c('mu-icon',{staticClass:\"downloadmu-icon\",attrs:{\"value\":\"arrow_downward\"}}):_vm._e(),(item.download)?_c('mu-circular-progress',{staticClass:\"loadingmu-icon\",staticStyle:{\"zoom\":\"0.2\",\"margin-left\":\"10px\"},attrs:{\"value\":item.download.percent,\"size\":60,\"color\":\"white\",\"stroke-width\":10}}):_vm._e()],1)})],2)})],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.active == _vm.TabID.Settings),expression:\"active == TabID.Settings\"}]},[_c('div',{staticClass:\"scroller\"},[_c('div',{staticClass:\"stickerList nowrap\"},[_c('div',{staticClass:\"stickerItem fontItem\",class:{active:null==_vm.overlay.font},on:{\"click\":_vm.clearFont}},[_vm._v(\"系统字体\")]),_vm._l((_vm.allFont),function(item,idx){return _c('div',{key:idx,staticClass:\"stickerItem fontItem\",class:{active:item.family==_vm.overlay.font},on:{\"click\":function($event){return _vm.chooseFont(item)}}},[_c('img',{attrs:{\"src\":item.thumb_remote_url}}),(!item.local_file&&!item.download)?_c('mu-icon',{staticClass:\"downloadmu-icon\",attrs:{\"value\":\"arrow_downward\"}}):_vm._e(),(item.download)?_c('mu-circular-progress',{staticClass:\"loadingmu-icon\",staticStyle:{\"zoom\":\"0.2\",\"margin-left\":\"10px\",\"line-height\":\"0\"},attrs:{\"value\":item.download.percent,\"size\":50,\"color\":\"white\",\"stroke-width\":10}}):_vm._e()],1)})],2)]),_c('div',{staticClass:\"stickerList align\"},[_c('mu-icon',{staticClass:\"alignItem\",class:{active:_vm.Const.Overlay.Align.Left==_vm.overlay.align},attrs:{\"value\":\"format_align_left\"},on:{\"click\":function($event){return _vm.chooseAlign(_vm.Const.Overlay.Align.Left)}}}),_c('mu-icon',{staticClass:\"alignItem\",class:{active:_vm.Const.Overlay.Align.Center==_vm.overlay.align},attrs:{\"value\":\"format_align_center\"},on:{\"click\":function($event){return _vm.chooseAlign(_vm.Const.Overlay.Align.Center)}}}),_c('mu-icon',{staticClass:\"alignItem\",class:{active:_vm.Const.Overlay.Align.Right==_vm.overlay.align},attrs:{\"value\":\"format_align_right\"},on:{\"click\":function($event){return _vm.chooseAlign(_vm.Const.Overlay.Align.Right)}}})],1),_c('div',[_c('mu-tabs',{attrs:{\"value\":_vm.colorTabActive,\"color\":\"transparent\",\"indicator-color\":\"rgba(255,255,255,0.3)\",\"text-color\":\"white\",\"left\":\"\"},on:{\"update:value\":function($event){_vm.colorTabActive=$event}}},[_c('mu-tab',{attrs:{\"value\":\"文字颜色\"}},[_vm._v(\"文字颜色\")]),_c('mu-tab',{attrs:{\"value\":\"描边\"}},[_vm._v(\"描边\")]),_c('mu-tab',{attrs:{\"value\":\"阴影\"}},[_vm._v(\"阴影\")]),_c('mu-tab',{attrs:{\"value\":\"背景\"}},[_vm._v(\"背景\")])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.colorTabActive == '文字颜色'),expression:\"colorTabActive == '文字颜色'\"}]},[_c('div',{staticClass:\"stickerList nowrap colorList scroller\"},_vm._l((_vm.ColorPreset),function(item,idx){return _c('div',{key:idx,staticClass:\"colorItem\",class:{active:item==_vm.overlay.color},style:({background:item}),on:{\"click\":function($event){_vm.overlay.color = item}}})}),0),_c('div',{staticClass:\"bottomSlider\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"透明度\")]),_c('mu-slider',{staticClass:\"slider\",attrs:{\"track-color\":\"#666\",\"max\":1,\"min\":0,\"step\":0.01},model:{value:(_vm.overlay.transparent),callback:function ($$v) {_vm.$set(_vm.overlay, \"transparent\", $$v)},expression:\"overlay.transparent\"}})],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.colorTabActive == '描边'),expression:\"colorTabActive == '描边'\"}]},[_c('div',{staticClass:\"stickerList nowrap colorList scroller\"},[_c('div',{staticClass:\"colorItem none\",on:{\"click\":function($event){_vm.overlay.borderColor=null}}},[_vm._v(\" 无 \")]),_vm._l((_vm.ColorPreset),function(item,idx){return _c('div',{key:idx,staticClass:\"colorItem\",class:{active:item==_vm.overlay.borderColor},style:({background:item}),on:{\"click\":function($event){_vm.overlay.borderColor = item}}})})],2),_c('div',{staticClass:\"bottomSlider\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"粗细\")]),_c('mu-slider',{staticClass:\"slider\",attrs:{\"track-color\":\"#666\",\"max\":5,\"min\":1,\"step\":0.01},model:{value:(_vm.overlay.borderSize),callback:function ($$v) {_vm.$set(_vm.overlay, \"borderSize\", $$v)},expression:\"overlay.borderSize\"}})],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.colorTabActive == '阴影'),expression:\"colorTabActive == '阴影'\"}]},[_c('div',{staticClass:\"stickerList nowrap colorList scroller\"},[_c('div',{staticClass:\"colorItem none\",on:{\"click\":function($event){_vm.overlay.shadowColor=null}}},[_vm._v(\" 无 \")]),_vm._l((_vm.ColorPreset),function(item,idx){return _c('div',{key:idx,staticClass:\"colorItem\",class:{active:item==_vm.overlay.shadowColor},style:({background:item}),on:{\"click\":function($event){_vm.overlay.shadowColor = item}}})})],2),_c('div',{staticClass:\"bottomSlider\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"强度\")]),_c('mu-slider',{staticClass:\"slider\",attrs:{\"track-color\":\"#666\",\"max\":10,\"min\":0,\"step\":0.01},model:{value:(_vm.overlay.shadowLevel),callback:function ($$v) {_vm.$set(_vm.overlay, \"shadowLevel\", $$v)},expression:\"overlay.shadowLevel\"}})],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.colorTabActive == '背景'),expression:\"colorTabActive == '背景'\"}]},[_c('div',{staticClass:\"stickerList nowrap colorList scroller\"},[_c('div',{staticClass:\"colorItem none\",on:{\"click\":function($event){_vm.overlay.backgroundColor=null}}},[_vm._v(\" 无 \")]),_vm._l((_vm.ColorPreset),function(item,idx){return _c('div',{key:idx,staticClass:\"colorItem\",class:{active:item==_vm.overlay.backgroundColor},style:({background:item}),on:{\"click\":function($event){_vm.overlay.backgroundColor = item}}})})],2),_c('div',{staticClass:\"bottomSlider\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"透明度\")]),_c('mu-slider',{staticClass:\"slider\",attrs:{\"track-color\":\"#666\",\"max\":1,\"min\":0,\"step\":0.01},model:{value:(_vm.overlay.backgroundTransparent),callback:function ($$v) {_vm.$set(_vm.overlay, \"backgroundTransparent\", $$v)},expression:\"overlay.backgroundTransparent\"}})],1)])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"border\"},[(_vm.loading)?_c('mu-icon',{staticClass:\"loading\",attrs:{\"value\":\"refresh\",\"size\":\"30\"}}):_vm._e(),_c('canvas',{ref:\"canvas\",staticClass:\"main\",style:(_vm.canvasStyles),attrs:{\"width\":\"1024\",\"height\":\"500\"}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"box\">\n        <div class=\"border\">\n            <mu-icon v-if=\"loading\" value=\"refresh\" class=\"loading\" size=\"30\"></mu-icon>\n            <canvas class=\"main\" ref=\"canvas\" width=\"1024\" height=\"500\" :style=\"canvasStyles\"></canvas>\n        </div>\n    </div>\n</template>\n<style scoped>\n.box {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    justify-content: center;\n    align-items: flex-end;\n    display: flex;\n    background: rgba(0, 0, 0, 1);\n}\n.border {\n    display: inline-block;\n    background: rgba(0, 0, 0, 1);\n    /* height:30px; */\n    border: 1px solid #555;\n    border-radius: 5px;\n    padding: 10px 10px;\n    padding-bottom: 10px;\n    box-sizing: content-box;\n    position: relative;\n}\n.main {\n    object-fit: contain;\n    display: inline-block;\n    max-width: 100%;\n}\n\n.loading {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    animation: loading 0.3s infinite linear;\n    color: #fff;\n    text-shadow: 0 0 30px #000;\n    opacity: 0.9;\n    transform-origin: 0 0;\n}\n\n@keyframes loading {\n    from {\n        transform: rotate(0deg) translate(-50%, -50%);\n    }\n    to {\n        transform: rotate(360deg) translate(-50%, -50%);\n    }\n}\n</style>\n<script>\nimport colorAlpha from \"color-alpha\";\nimport Const from \"@/const\";\n// import RManager from \"@/model/UGCResourceManager\";\nimport throttle from \"lodash.throttle\";\nimport CanvasTextWrapper from \"@/model/CanvasTextWrapper\"\n\nlet DefaultSize = 1000;\nlet DefaultFont = \"黑体\";\n\nexport default {\n    props: [\n        \"text\",\n        \"font\",\n        \"fontUrl\",\n        \"align\",\n        \"color\",\n        \"transparent\",\n        \"borderColor\",\n        \"borderSize\",\n        \"shadowColor\",\n        \"shadowLevel\",\n        \"backgroundColor\",\n        \"backgroundTransparent\",\n        \"templateName\",\n        \"templateBgUrl\",\n        \"endX\",\n        \"endY\",\n        \"startX\",\n        \"startY\",\n        \"wordCount\"\n    ],\n    watch: {\n        text: \"delayRefresh\",\n        font: \"delayRefresh\",\n        fontUrl: \"delayRefresh\",\n        align: \"delayRefresh\",\n        color: \"delayRefresh\",\n        transparent: \"delayRefresh\",\n        borderColor: \"delayRefresh\",\n        borderSize: \"delayRefresh\",\n        shadowColor: \"delayRefresh\",\n        shadowLevel: \"delayRefresh\",\n        backgroundColor: \"delayRefresh\",\n        backgroundTransparent: \"delayRefresh\",\n\n        templateBgUrl: \"delayRefresh\",\n        startX: \"delayRefresh\",\n        startY: \"delayRefresh\",\n        endX: \"delayRefresh\",\n        endY: \"delayRefresh\",\n        wordCount: \"delayRefresh\"\n    },\n    data() {\n        return {\n            loading: false,\n            delayRefresh: throttle(\n                () => {\n                    if (this.$refs.canvas) this.refresh();\n                },\n                200,\n                {\n                    leading: false,\n                    trailing: true\n                }\n            ),\n            textSize: DefaultSize,\n            textAreaWidth: 0,\n            textAreaHeight: 0,\n            textLines: []\n        };\n    },\n    computed: {\n        canvasStyles() {\n            return {\n                \"max-height\": this.templateBgUrl? \"80px\" : (this.isHorizontal ? \"50px\" : \"120px\")\n            };\n        },\n    },\n    methods: {\n        async refresh() {\n            // var a = Date.now();\n            let can = this.$refs.canvas;\n            let ctx = this.canvasCtx;\n\n            // 加载资源\n            await this._loadFont();\n\n\n            if(this.templateBgUrl){\n                let bgImg = await new Promise((o, x) => {\n                    const img = new Image();\n                    img.onload = () => o(img);\n                    img.onerror = x;\n                    img.crossOrigin=\"anonymous\";\n                    img.src = this.templateBgUrl;\n                });\n\n                can.width = bgImg.naturalWidth;\n                can.height = bgImg.naturalHeight;\n                ctx.clearRect(0, 0, can.width, can.height);\n\n\n                // 背景颜色\n                if (this.backgroundColor) {\n                    ctx.fillStyle = colorAlpha(\n                        this.backgroundColor,\n                        1 - this.backgroundTransparent\n                    );\n                    ctx.fillRect(0, 0, can.width, can.height);\n                }\n\n\n                // 背景图片\n                if (bgImg && bgImg.width) {\n                    ctx.drawImage(bgImg, 0, 0, can.width, can.height);\n                }\n\n                // 文字\n                if(this.text.length) {\n                    let rect = {\n                        x: bgImg.naturalWidth * this.startX,\n                        y: bgImg.naturalHeight * this.startY,\n                        width: bgImg.naturalWidth * (this.endX - this.startX),\n                        height: bgImg.naturalHeight * (this.endY - this.startY)\n                    }\n                    let textCanvas = this.drawText(this.text, rect, {\n                        textAlign: \n                            this.align == Const.Overlay.Align.Left? \"left\" : \n                            this.align == Const.Overlay.Align.Right? \"right\" : \n                            this.align == Const.Overlay.Align.Top? \"top\" : \n                            \"center\"\n                    });\n                    ctx.drawImage(textCanvas, rect.x, rect.y);\n                }\n            } else {\n\n                // 按文字的宽高比设置画布宽高\n                // 文字size=1时，忽略间距，宽高比=最长行字数/行数\n                let lines = this.text.split('\\n');\n                let maxLen = lines.reduce((p, n) => Math.max(p, n.replace(/[^\\x0-\\xff]/g, \"xx\").length/2), 0);\n\n                let text = this.text;\n                if( this.align == Const.Overlay.Align.Top ){\n\n                    can.width = Math.ceil(DefaultSize / maxLen * lines.length);\n                    can.height = DefaultSize;\n\n                } else {\n                    can.width = DefaultSize;\n                    can.height = Math.ceil(DefaultSize / maxLen * lines.length);\n                }\n\n\n                // 背景颜色\n                if (this.backgroundColor) {\n                    ctx.fillStyle = colorAlpha(\n                        this.backgroundColor,\n                        1 - this.backgroundTransparent\n                    );\n                    ctx.fillRect(0, 0, can.width, can.height);\n                }\n\n                if(this.text.length) {\n                    let rect = {\n                        x: 0,\n                        y: 0,\n                        width: can.width,\n                        height: can.height\n                    }\n\n\n                    let textCanvas = this.drawText(text, rect, {\n                        lineBreak:\"word\",\n                        textAlign: \n                            this.align == Const.Overlay.Align.Left? \"left\" : \n                            this.align == Const.Overlay.Align.Right? \"right\" : \n                            this.align == Const.Overlay.Align.Top? \"top\" : \n                            \"center\"\n                    });\n                    ctx.drawImage(textCanvas, rect.x, rect.y);\n                }\n            }\n            // window.console.log(\"TextRender time: \", Date.now() - a);\n        },\n        // 把 text 绘制到 rect 区域，尽量填满，根据 align 对齐\n        drawText(text, rect, opt){\n            let canvas = document.createElement(\"canvas\");\n            let context = canvas.getContext('2d');\n            canvas.width = rect.width;\n            canvas.height = rect.height;\n            context.shadowColor = this.shadowColor;\n            context.strokeStyle = this.borderColor;\n            context.fillStyle = colorAlpha(this.color, 1 - this.transparent);\n\n            if(text)\n                CanvasTextWrapper(canvas, text, {\n                    textAlign: \"center\",\n                    verticalAlign: \"middle\",\n                    sizeToFill: true,\n                    strokeText: true,\n                    renderHDPI: false,\n                    font: \"10px \" + (this.font || DefaultFont),\n                    lineWidth: 0.05 * this.borderSize / 5,\n                    shadowBlur: 0.5 * this.shadowLevel / 10,\n                    paddingX: Math.min(rect.width, rect.height)/20,\n                    paddingY: Math.min(rect.width, rect.height)/20,\n                    ...opt\n                });\n\n            return canvas;\n        },\n        async _loadFont() {\n            if (this.fontUrl) {\n                if (document.fonts) {\n                    // ios 10 & android 5\n                    let font = new FontFace(this.font, \"url(\" + this.fontUrl + \")\");\n                    await font.load();\n                    document.fonts.add(font);\n                } else {\n                    // all h5\n                    var newStyle = document.createElement(\"style\");\n                    newStyle.appendChild(\n                        document.createTextNode(\n                            \"\\\n                        @font-face {\\\n                        font-family: '\" +\n                                this.font +\n                                \"';\\\n                        src: url('\" +\n                                this.fontUrl +\n                                \"');\\\n                        }\\\n                    \"\n                        )\n                    );\n                    document.head.appendChild(newStyle);\n                }\n            }\n        },\n        getDataPng() {\n            return this.$refs.canvas.toDataURL();\n        },\n        async getBlob() {\n            this.loading = true;\n            let blob = null;\n            let ts = new Date();\n            try {\n                blob = await new Promise(o => {\n                    this.$refs.canvas.toBlob(o);\n                });\n            } finally {\n                this.loading = false;\n                //不明原因，toBlob 偶尔会很慢。打开console的预览的时候，就会很快。\n                window.console.log(\"blob time:\",new Date() - ts);\n            }\n            return blob;\n        }\n    },\n    mounted() {\n        this.canvasCtx = this.$refs.canvas.getContext(\"2d\");\n        this.refresh();\n    }\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextRender.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextRender.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TextRender.vue?vue&type=template&id=765fb19e&scoped=true&\"\nimport script from \"./TextRender.vue?vue&type=script&lang=js&\"\nexport * from \"./TextRender.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TextRender.vue?vue&type=style&index=0&id=765fb19e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"765fb19e\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"textOverlay\">\n        <TextRender v-show=\"overlay.text\" ref=\"textRender\" class=\"text-render\" v-bind=\"overlay\" />\n        <mu-tabs :value.sync=\"active\" color=\"transparent\" indicator-color=\"red\" text-color=\"white\"  left>\n            <mu-tab :value=\"TabID.Edit\">\n                <mu-icon value=\"keyboard\"></mu-icon> 文字\n            </mu-tab>\n            <mu-tab :value=\"TabID.Template\">\n                <mu-icon value=\"extension\"></mu-icon> 样式 \n            </mu-tab>\n            <mu-tab :value=\"TabID.Settings\">\n                <mu-icon value=\"tune\"></mu-icon> 调整 \n            </mu-tab>\n        </mu-tabs>\n        <!-- 编辑 -->\n        <div v-show=\"active == TabID.Edit\">\n            <textarea\n                style=\"\n                    width:100%;\n                    border:1px solid #666;\n                    border-radius:5px;\n                    font-size: 16px;\n                    height: 32px;\n                    line-height: 2;\n                    padding:0 10px;\n                \"\n                type=\"text\"\n                ref=\"input\"\n                placeholder=\"请输入文本\"\n                v-model=\"overlay.text\"\n                :style=\"inputStyles\"\n            />\n        </div>\n        <!-- 样式 -->\n        <div v-show=\"active == TabID.Template\">\n            <mu-tabs :value.sync=\"templateActive\" color=\"transparent\" indicator-color=\"rgba(255,255,255,0.3)\" text-color=\"white\"  left>\n                <mu-tab v-for=\"e in allBg\" :value=\"e.name\" :key=\"e.name\">\n                    {{e.name}}\n                </mu-tab>\n            </mu-tabs>\n            \n            <div v-show=\"templateActive == e.name\" \n                class=\"y-scroller stickerList\"\n                v-for=\"e in allBg\" :value=\"e.name\" :key=\"e.name\">\n                <div class=\"stickerItem none\" @click=\"clearTemplate\">\n                        <mu-icon value=\"block\" size=\"24\" color=\"#eee\"></mu-icon>\n                    </div>\n                    <div\n                        v-for=\"(item,idx) in e.list\"\n                        :key=\"idx\"\n                        @click=\"chooseBubble(item)\"\n                        class=\"stickerItem\"\n                        :class=\"{active:item.name==overlay.templateName}\"\n                    >\n                        <img :src=\"item.thumb_remote_url\" />\n                        <mu-icon\n                            v-if=\"!item.local_file&&!item.download\"\n                            class=\"downloadmu-icon\"\n                            value=\"arrow_downward\"\n                        />\n                        <mu-circular-progress\n                            class=\"loadingmu-icon\"\n                            v-if=\"item.download\"\n                            :value=\"item.download.percent\"\n                            :size=\"60\"\n                            style=\"zoom:0.2;margin-left:10px\"\n                            color=\"white\"\n                            :stroke-width=\"10\"\n                        />\n                    </div>\n            </div>\n        </div>\n        <!-- 调整 -->\n        <div v-show=\"active == TabID.Settings\">\n            <!-- 字体 -->\n            <div class=\"scroller\">\n                <div class=\"stickerList nowrap\">\n                    <div\n                        class=\"stickerItem fontItem\"\n                        :class=\"{active:null==overlay.font}\"\n                        @click=\"clearFont\"\n                    >系统字体</div>\n                    <div\n                        v-for=\"(item,idx) in allFont\"\n                        :key=\"idx\"\n                        @click=\"chooseFont(item)\"\n                        class=\"stickerItem fontItem\"\n                        :class=\"{active:item.family==overlay.font}\"\n                    >\n                        <img :src=\"item.thumb_remote_url\" />\n                        <mu-icon\n                            v-if=\"!item.local_file&&!item.download\"\n                            class=\"downloadmu-icon\"\n                            value=\"arrow_downward\"\n                        />\n                        <mu-circular-progress\n                            class=\"loadingmu-icon\"\n                            v-if=\"item.download\"\n                            :value=\"item.download.percent\"\n                            :size=\"50\"\n                            style=\"zoom:0.2;margin-left:10px;line-height:0\"\n                            color=\"white\"\n                            :stroke-width=\"10\"\n                        />\n                    </div>\n                </div>\n            </div>\n            <!-- 对齐方式 -->\n            <div class=\"stickerList align\">\n                <mu-icon\n                    class=\"alignItem\"\n                    :class=\"{active:Const.Overlay.Align.Left==overlay.align}\"\n                    value=\"format_align_left\"\n                    @click=\"chooseAlign(Const.Overlay.Align.Left)\"\n                />\n                <mu-icon\n                    class=\"alignItem\"\n                    :class=\"{active:Const.Overlay.Align.Center==overlay.align}\"\n                    value=\"format_align_center\"\n                    @click=\"chooseAlign(Const.Overlay.Align.Center)\"\n                />\n                <mu-icon\n                    class=\"alignItem\"\n                    :class=\"{active:Const.Overlay.Align.Right==overlay.align}\"\n                    value=\"format_align_right\"\n                    @click=\"chooseAlign(Const.Overlay.Align.Right)\"\n                />\n<!--                 <mu-icon\n                    class=\"alignItem rotate90\"\n                    :class=\"{active:Const.Overlay.Align.Top==overlay.align}\"\n                    value=\"format_align_right\"\n                    @click=\"chooseAlign(Const.Overlay.Align.Top)\"\n                /> -->\n            </div>\n            <!-- 颜色 -->\n            <div>\n                <mu-tabs :value.sync=\"colorTabActive\" color=\"transparent\" indicator-color=\"rgba(255,255,255,0.3)\" text-color=\"white\"  left>\n                     <mu-tab value=\"文字颜色\">文字颜色</mu-tab>\n                     <mu-tab value=\"描边\">描边</mu-tab>\n                     <mu-tab value=\"阴影\">阴影</mu-tab>\n                     <mu-tab value=\"背景\">背景</mu-tab>\n                </mu-tabs>\n                <!-- 文字颜色 -->\n                <div v-show=\"colorTabActive == '文字颜色'\" >\n                    <div class=\"stickerList nowrap colorList scroller\">\n                        <div\n                            class=\"colorItem\"\n                            v-for=\"(item,idx) in ColorPreset\"\n                            :key=\"idx\"\n                            :style=\"{background:item}\"\n                            :class=\"{active:item==overlay.color}\"\n                            @click=\"overlay.color = item\"\n                        ></div>\n                    </div>\n\n                    <div class=\"bottomSlider\">\n                        <label class=\"label\">透明度</label>\n                        <mu-slider\n                            class=\"slider\"\n                            track-color=\"#666\"\n                            :max=\"1\"\n                            :min=\"0\"\n                            :step=\"0.01\"\n                            v-model=\"overlay.transparent\"\n                        ></mu-slider>\n                    </div>\n                </div>\n                <!-- 描边 -->\n                <div v-show=\"colorTabActive == '描边'\" >\n                    <div class=\"stickerList nowrap colorList scroller\">\n                        <div class=\"colorItem none\" @click=\"overlay.borderColor=null\">\n                            无\n                        </div>\n                        <div\n                            class=\"colorItem\"\n                            v-for=\"(item,idx) in ColorPreset\"\n                            :key=\"idx\"\n                            :style=\"{background:item}\"\n                            :class=\"{active:item==overlay.borderColor}\"\n                            @click=\"overlay.borderColor = item\"\n                        ></div>\n                    </div>\n                    <div class=\"bottomSlider\">\n                        <label class=\"label\">粗细</label>\n                        <mu-slider\n                            class=\"slider\"\n                            track-color=\"#666\"\n                            :max=\"5\"\n                            :min=\"1\"\n                            :step=\"0.01\"\n                            v-model=\"overlay.borderSize\"\n                        ></mu-slider>\n                    </div>\n                </div>\n                <!-- 阴影 -->\n                <div v-show=\"colorTabActive == '阴影'\" >\n                    <div class=\"stickerList nowrap colorList scroller\">\n                        <div class=\"colorItem none\" @click=\"overlay.shadowColor=null\">\n                            无\n                        </div>\n                        <div\n                            class=\"colorItem\"\n                            v-for=\"(item,idx) in ColorPreset\"\n                            :key=\"idx\"\n                            :style=\"{background:item}\"\n                            :class=\"{active:item==overlay.shadowColor}\"\n                            @click=\"overlay.shadowColor = item\"\n                        ></div>\n                    </div>\n                    <div class=\"bottomSlider\">\n                        <label class=\"label\">强度</label>\n                        <mu-slider\n                            class=\"slider\"\n                            track-color=\"#666\"\n                            :max=\"10\"\n                            :min=\"0\"\n                            :step=\"0.01\"\n                            v-model=\"overlay.shadowLevel\"\n                        ></mu-slider>\n                    </div>\n                </div>\n                <!-- 背景 -->\n                <div v-show=\"colorTabActive == '背景'\" >\n                    <div class=\"stickerList nowrap colorList scroller\">\n                        <div class=\"colorItem none\" @click=\"overlay.backgroundColor=null\">\n                            无\n                        </div>\n                        <div\n                            class=\"colorItem\"\n                            v-for=\"(item,idx) in ColorPreset\"\n                            :key=\"idx\"\n                            :style=\"{background:item}\"\n                            :class=\"{active:item==overlay.backgroundColor}\"\n                            @click=\"overlay.backgroundColor = item\"\n                        ></div>\n                    </div>\n                    <div class=\"bottomSlider\">\n                        <label class=\"label\">透明度</label>\n                        <mu-slider\n                            class=\"slider\"\n                            track-color=\"#666\"\n                            :max=\"1\"\n                            :min=\"0\"\n                            :step=\"0.01\"\n                            v-model=\"overlay.backgroundTransparent\"\n                        ></mu-slider>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style>\n.textOverlay .display-value-text {\n    color: red;\n}\n</style>\n<style lang=\"less\" scoped>\n.mu-tab .mu-icon{\n    margin-bottom: 0;\n}\n.text-render {\n    position: absolute;\n    top: -100px;\n    left: 0;\n    height: 120px;\n}\n.spliter {\n    border-top: 1px solid #555;\n}\n\n.apply-to-all {\n    text-align: center;\n    color: #eee;\n    font-size: 13px;\n    line-height: 1;\n    padding: 10px;\n\n    input {\n        font-size: 14px;\n        height: 14px;\n        vertical-align: middle;\n    }\n}\n.y-scroller {\n    width: 100%;\n    height: 177px;\n    overflow-y: auto;\n}\n.scroller {\n    widows: 100%;\n    overflow-x: auto;\n    // background-color: #222;\n}\n.stickerList {\n    width: 100%;\n    padding: 0 10px;\n    display: flex;\n    justify-content: space-between;\n    flex-wrap: wrap;\n\n    &.nowrap {\n        flex-wrap: nowrap;\n    }\n\n    &.align {\n        justify-content: left;\n        color: rgba(255, 255, 255, 0.7);\n        // background-color: #222;\n        border-top: 1px solid #2c2c2c;\n        border-bottom: 1px solid #2c2c2c;\n        padding: 14px;\n    }\n\n    &.colorList {\n        padding: 0 20px;\n    }\n}\n\n.stickerItem {\n    width: 55px;\n    height: 55px;\n    margin: 10px;\n    position: relative;\n    color: white;\n    border: 1px solid transparent;\n    border-radius: 5px;\n\n    &.none {\n        line-height: 50px;\n        text-align: center;\n        padding-top: 8px;\n    }\n\n    &.active {\n        border-color: red;\n    }\n\n    &.fontItem {\n        width: 80px;\n        min-width: 80px;\n        height: 34px;\n        line-height: 34px;\n        text-align: center;\n        background-color: #2c2c2c;\n    }\n\n    .downloadmu-icon {\n        position: absolute;\n        right: 0;\n        bottom: 0;\n        border-radius:10px;\n        background:red;\n        font-size:10px;\n    }\n\n    .loadingmu-icon {\n        position: absolute;\n        right: 0;\n        bottom: 0\n    }\n\n    img {\n        width: 100%;\n        height: 100%;\n        object-fit: contain;\n    }\n}\n\n.alignItem {\n    margin-right: 20px;\n\n    &.rotate90 {\n        transform: rotate(-90deg);\n    }\n\n    &.active {\n        color: red;\n    }\n}\n\n.colorItem {\n    width: 20px;\n    min-width: 20px;\n    height: 35px;\n    margin-top:10px;\n    border-radius: 3px;\n    margin-right: 3px;\n    border: 1px solid transparent;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    &.active {\n        border: 1px solid #ee0000;\n    }\n\n    &.none {\n        margin-right: 15px;\n        border-color: #888;\n        color: #888;\n        padding: 0;\n\n        .clear {\n            margin-left: -3px;\n            line-height: 35px;\n        }\n    }\n}\n\n.bottomSlider {\n    padding: 10px 20px 0;\n    display: flex;\n    color: rgba(255, 255, 255, 0.7);\n\n    .label {\n        width: 80px;\n    }\n\n    .slider {\n        flex: 1;\n        margin-bottom: 0;\n    }\n}\n</style>\n\n<script>\nimport TextRender from \"@/views/Editor/TextRender\";\n// import ToolDialogTabs from \"@/components/ToolDialogTabs\";\n// import ToolDialogTabPane from \"@/components/ToolDialogTabPane\";\n// import CategoryTabs from \"@/components/CategoryTabs\";\n// import CategoryTabPane from \"@/components/CategoryTabPane\";\nimport RManager from \"@/model/UGCResourceManager\";\nimport ToolTab from \"../ToolTab\";\nimport Const from \"@/const\";\nimport Vue from \"vue\";\nimport \"muse-ui-loading/dist/muse-ui-loading.css\"; // load css\nimport Loading from \"muse-ui-loading\";\nimport extend from \"extend\";\nVue.use(Loading);\n\nlet __tabid = 0;\nconst TabID = {\n    Edit: __tabid++,\n    Template: __tabid++,\n    Settings: __tabid++\n};\n\nlet ColorPreset = [\n    \"#ffffff\",\n    \"#ff0000\",\n    \"#0000ff\",\n    \"#00ff00\",\n    \"#ff0000\",\n    \"#FFC0CB\",\n    \"#FFA500\",\n    \"#777777\",\n    \"#770000\",\n    \"#000077\",\n    \"#007700\",\n    \"#777700\",\n    \"#770077\",\n    \"#775533\"\n];\n\nexport default {\n    TabID,\n    props: [\"editlist\", \"accept\", \"postermode\", \"options\"],\n    components: {\n        TextRender,\n        // ToolDialogTabs,\n        // ToolDialogTabPane,\n        // CategoryTabs,\n        // CategoryTabPane\n    },\n    data() {\n        let overlay = this.newOverlay();\n        return {\n            TabID,\n            ColorPreset,\n            Const,\n            active: TabID.Edit,\n            colorTabActive: 0,\n            templateActive: 0,\n            isApplyToAll: false,\n            // 花字模板\n            allTemplateWord: [],\n            // 气泡模板\n            // allBubble: [],\n            // 背景模板\n            allBg: [],\n            // 字体\n            allFont: [],\n            // text model\n            overlay: overlay,\n            overlayProps: Object.keys(overlay).filter(e => e != \"text\")\n        };\n    },\n    watch: {\n        options: \"handleOptions\",\n        active() {\n            this.categoryActive = 0;\n\n            this.$nextTick(() => {\n                if (this.active == TabID.Edit) {\n                    this.$refs.input.focus();\n                } else {\n                    this.$refs.input.blur();\n                }\n            });\n        },\n        async accept(v) {\n            let modified = true;\n            if(v && this.overlayInitialState) {\n                modified = Object.keys(this.overlayInitialState).find(k => this.overlayInitialState[k] != this.overlay[k]);\n            }\n            \n            if (v && modified && this.overlay.text) {\n                let overlay = this.overlay;\n                let isNew = !overlay.id;\n\n                this.$emit(\"beforechange\", {\n                    overlay\n                });\n\n                if (this.overlay.id == null)\n                    overlay = this.editlist.add_overlay(\n                        this.overlay,\n                        this.postermode\n                    );\n\n                let data = null;\n                let doExport = async ()=> {\n                    data = await this.$refs.textRender.getBlob();\n                    if(data == null) {\n                        // render还未准备好\n                        await new Promise(o => {\n                            this.$nextTick(() => doExport().then(o));\n                        });\n                        return;\n                    }\n                }\n                await doExport();\n\n                // 撤销的需求，不能覆盖原来的文件\n                let dir = await RManager.getTempFolder();\n                let fileName = dir.name + \"/textImage_\" + overlay.id+ \"_\" + Math.random().toString(16).replace(\"0.\", \"\") + \".png\";\n                let dataUrl = await this.createCacheFile(\n                    data,\n                    fileName\n                );\n\n                overlay.url = dataUrl + \"?\" + Math.random();\n\n\n                this.overlay = overlay;\n                // await this.applyToAll();\n\n                this.$emit(\"change\", {\n                    overlay\n                });\n\n                if(!this.postermode) {\n                    if(isNew) {\n                        this.editlist.createOperateHistory(Const.Operate.TextAdd.Type, overlay.id);\n                    } else {\n                        this.editlist.createOperateHistory(Const.Operate.TextModify.Type);\n                    }\n                }\n            }\n            this.$parent.close();\n        }\n    },\n    computed: {\n        inputStyles() {\n            // 根据换行自动设置输入框高度，最多不超过3行\n            const lines = Math.min(this.overlay.text.split(/\\n/).length, 3);\n            return {\n                height: (lines <= 1 ? 36 : lines * 20 + 8) + \"px\",\n                \"line-height\": (lines <= 1 ? 36 : 20) + \"px\"\n            };\n        }\n    },\n    methods: {\n        clearTemplate() {\n            this.overlay.templateName = null;\n            this.overlay.templateBgUrl = null;\n            this.overlay.startX = 0;\n            this.overlay.startY = 0;\n            this.overlay.endX = 0;\n            this.overlay.endY = 0;\n            this.overlay.wordCount = 0;\n        },\n        async chooseTemplate(data) {\n            this.templateName = data.name;\n        },\n        async chooseBubble(bubble) {\n            if (window.requestFileSystem) {\n                if (!bubble.local_file && !bubble.download) {\n                    await RManager.downloadRes(\n                        RManager.ResType.fontbg,\n                        bubble\n                    );\n                }\n                if(bubble.local_file) {\n                    this.overlay.templateBgUrl = bubble.local_file.toInternalURL();\n                }\n            } else {\n                this.overlay.templateBgUrl = bubble.source_remote_url;\n            }\n            if(this.overlay.templateBgUrl)\n                this.setBackground(bubble);\n        },\n        clearFont() {\n            this.overlay.font = null;\n            this.overlay.fontUrl = null;\n        },\n        setBackground(template) {\n            this.overlay.templateName = template.name;\n            this.overlay.startX = template.startX;\n            this.overlay.startY = template.startY;\n            this.overlay.endX = template.endX;\n            this.overlay.endY = template.endY;\n            this.overlay.wordCount = template.wordCount;\n        },\n        async chooseFont(font) {\n            if (window.requestFileSystem) {\n                if (!font.local_file) {\n                        await RManager.downloadRes(RManager.ResType.font, font);\n                }\n                if(font.local_file) {\n                    this.overlay.fontUrl = font.local_file.toInternalURL();\n                }\n            } else {\n                this.overlay.fontUrl = font.source_remote_url;\n            }\n            if(this.overlay.fontUrl)\n                this.overlay.font = font.family;\n        },\n        chooseAlign(align) {\n            this.overlay.align = align;\n        },\n        newOverlay() {\n            return {\n                type: Const.Overlay.Type.Text,\n                text: \"\",\n                font: null,\n                fontUrl: null,\n                color: \"grey\",\n                borderColor: null,\n                shadowColor: null,\n                backgroundColor: null,\n                align: Const.Overlay.Align.Left,\n                transparent: 0,\n                borderSize: 1,\n                shadowLevel: 1,\n                backgroundTransparent: 0,\n                // 模板\n                templateName: \"\",\n                templateBgUrl: null,\n                // 模板文字区域 百分比\n                startX: 0,\n                startY: 0,\n                endX: 0,\n                endY: 0,\n                wordCount: 0\n            };\n        },\n        updateOverlay(overlay) {\n            this.overlay = overlay;\n        },\n        async createCacheFile(data, output) {\n            if (!window.requestFileSystem) {\n                // 兼容PC调试\n                return URL.createObjectURL(data);\n            }\n\n            let fs = await RManager.filesystem();\n            let file = await new Promise((o, x) => {\n                fs.root.getFile(\n                    output,\n                    { create: true, exclusive: false },\n                    o,\n                    x\n                );\n            });\n            let writer = await new Promise((o, x) => {\n                file.createWriter(o, x);\n            });\n\n            await new Promise((o, x) => {\n                writer.onwriteend = o;\n                writer.onerror = x;\n                writer.write(data);\n            });\n\n            return file.nativeURL;\n        },\n\n        handleOptions() {\n            let v = this.options;\n            if (v) {\n                switch (v.operateToolTabId) {\n                    case ToolTab.TabID.ToolEdit:\n                        this.active = TabID.Edit;\n                        break;\n                    case ToolTab.TabID.ToolTemplate:\n                        this.active = TabID.Template;\n                        break;\n                    case ToolTab.TabID.ToolSettings:\n                        this.active = TabID.Settings;\n                        break;\n                    default:\n                        break;\n                }\n            }\n            if (!v || !v.overlay) {\n                this.overlay = this.newOverlay();\n                this.overlayInitialState = null;\n            } else {\n                this.updateOverlay(v.overlay);\n                this.overlayInitialState = extend(true, {}, v.overlay);\n            }\n        },\n        async applyToAll() {\n            // 应用到全部文字贴纸\n            if (this.isApplyToAll) {\n                let currOverlay = this.overlay;\n                let allPromise = this.editlist.overlay.map(async overlay => {\n                    if (\n                        overlay.type == Const.Overlay.Type.Text &&\n                        overlay.id != currOverlay.id\n                    ) {\n                        this.overlayProps.forEach(p => {\n                            overlay[p] = currOverlay[p];\n                        });\n                        this.overlay = overlay;\n                        try {\n                            window.console.log(\n                                \"applyToAll start \" + overlay.id\n                            );\n                            this.$refs.textRender.refresh();\n                            let data = await this.$refs.textRender.getBlob();\n                            let dataUrl = await this.createCacheFile(\n                                data,\n                                \"textImage_\" + overlay.id + \".png\"\n                            );\n                            overlay.url = dataUrl;\n                            window.console.log(\"applyToAll end\");\n                        } catch (error) {\n                            window.console.log(\"applyToAll error\", error);\n                        }\n                    }\n                });\n                await Promise.all(allPromise);\n                this.editlist.overlay.forEach(e =>\n                    window.console.log(e.id, e.text)\n                );\n            }\n        }\n    },\n    async mounted() {\n        this.handleOptions();\n        this.$parent.acceptable();\n        this.$refs.input.focus();\n\n        this.allFont = await RManager.fetchResList(RManager.ResType.font);\n\n        this.allBg = await RManager.fetchResList(RManager.ResType.fontbg);\n        this.$emit(\"update:title\", \"贴字\");\n    }\n};\n</script>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextOverlay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextOverlay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TextOverlay.vue?vue&type=template&id=b4f62e66&scoped=true&\"\nimport script from \"./TextOverlay.vue?vue&type=script&lang=js&\"\nexport * from \"./TextOverlay.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TextOverlay.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./TextOverlay.vue?vue&type=style&index=1&id=b4f62e66&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b4f62e66\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"videobase-item\"},[_c('span',[_vm._v(\"亮度(\"+_vm._s(_vm.eq.brightness)+\")\")]),_c('mu-slider',{attrs:{\"min\":-1,\"max\":1,\"step\":0.02},on:{\"change\":_vm.change},model:{value:(_vm.eq.brightness),callback:function ($$v) {_vm.$set(_vm.eq, \"brightness\", $$v)},expression:\"eq.brightness\"}})],1),_c('div',{staticClass:\"videobase-item\"},[_c('span',[_vm._v(\"对比度(\"+_vm._s(_vm.eq.contrast)+\")\")]),_c('mu-slider',{attrs:{\"min\":0,\"max\":5,\"step\":0.05},on:{\"change\":_vm.change},model:{value:(_vm.eq.contrast),callback:function ($$v) {_vm.$set(_vm.eq, \"contrast\", $$v)},expression:\"eq.contrast\"}})],1),_c('div',{staticClass:\"videobase-item\"},[_c('span',[_vm._v(\"饱和度(\"+_vm._s(_vm.eq.saturation)+\")\")]),_c('mu-slider',{attrs:{\"min\":0,\"max\":3,\"step\":0.03},on:{\"change\":_vm.change},model:{value:(_vm.eq.saturation),callback:function ($$v) {_vm.$set(_vm.eq, \"saturation\", $$v)},expression:\"eq.saturation\"}})],1),_c('div',{staticClass:\"videobase-item\"},[_c('span',[_vm._v(\"伽马值(\"+_vm._s(_vm.eq.gamma)+\")\")]),_c('mu-slider',{attrs:{\"min\":0.1,\"max\":10,\"step\":0.1},on:{\"change\":_vm.change},model:{value:(_vm.eq.gamma),callback:function ($$v) {_vm.$set(_vm.eq, \"gamma\", $$v)},expression:\"eq.gamma\"}})],1),_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('mu-button',{attrs:{\"small\":\"\"},on:{\"click\":_vm.resumeNormal}},[_vm._v(\" 恢复默认 \")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div >\n        <div class=\"videobase-item\">\n            <span >亮度({{eq.brightness}})</span>\n            <mu-slider @change=\"change\" :min=\"-1\" :max=\"1\" :step=\"0.02\" v-model=\"eq.brightness\" />\n        </div>\n        <div class=\"videobase-item\">\n            <span >对比度({{eq.contrast}})</span>\n            <mu-slider @change=\"change\" :min=\"0\" :max=\"5\" :step=\"0.05\" v-model=\"eq.contrast\" />\n        </div>\n        <div class=\"videobase-item\">\n            <span >饱和度({{eq.saturation}})</span>\n            <mu-slider @change=\"change\" :min=\"0\" :max=\"3\" :step=\"0.03\" v-model=\"eq.saturation\" />\n        </div>\n        <div class=\"videobase-item\">\n            <span >伽马值({{eq.gamma}})</span>\n            <mu-slider @change=\"change\" :min=\"0.1\" :max=\"10\" :step=\"0.1\" v-model=\"eq.gamma\" />\n        </div>\n        <div style=\"text-align:center\">\n            <mu-button @click=\"resumeNormal\" small>\n                恢复默认\n            </mu-button>\n        </div>\n    </div>\n</template>\n<style scoped>\n.videobase-item{\n    display:flex;\n    margin-bottom:10px;\n}\n.videobase-item .mu-slider{\n    margin:0;\n}\n.videobase-item span{\n    width: 150px;color:white;\n}\n</style>\n<script>\nimport extend from \"extend\";\nimport Editlist from \"@/model/Editlist\";\nimport Const from \"@/const\";\n\n\nexport default {\n    data(){\n        return {\n            eq:{\n                brightness:0,\n                contrast:0,\n                saturation:0,\n                gamma:0,\n            }\n        }\n    },\n    methods:{\n        resumeNormal(){\n            this.eq.brightness = 0;\n            this.eq.contrast =  1;\n            this.eq.saturation = 1;\n            this.eq.gamma = 1;\n            this.change();\n        },\n        change(){    \n            Editlist.editlist.update_timeline_videobase(Editlist.editlist.cur_timeline);\n        },\n        onDialogClose() {\n            if(this.initState) {\n                if(Object.keys(this.eq).find(k => this.eq[k] != this.initState.eq[k])) {\n                    Editlist.editlist.createOperateHistory(Const.Operate.VideoParamsModify.Type);\n                }\n            }\n        }\n    },\n    mounted(){\n        this.eq = Editlist.editlist.cur_timeline.eq;\n        this.$emit(\"update:title\", \"视频参数\")\n        this.initState = {\n            eq: extend(true, {}, this.eq)\n        }\n    }\n\n}\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoBase.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoBase.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoBase.vue?vue&type=template&id=4f58663e&scoped=true&\"\nimport script from \"./VideoBase.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoBase.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VideoBase.vue?vue&type=style&index=0&id=4f58663e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4f58663e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sort_main\"},[_c('Container',{staticClass:\"sort_box\",attrs:{\"auto-scroll-enabled\":false,\"orientation\":\"horizontal\",\"drag-begin-delay\":200},on:{\"drop\":_vm.onDrop}},[_vm._l((_vm.timelines),function(t){return [(!t.ending)?_c('Draggable',{key:t.id,staticClass:\"sort_item\"},[_c('div',{staticClass:\"sort_head\"},[_vm._v(_vm._s((t.end_sec - t.start_sec).toFixed(1)))]),_c('div',{staticClass:\"sort_thumb\"},[(t.thumbs.length && t.thumbs[0].url)?_c('img',{attrs:{\"src\":t.thumbs[0].url}}):_vm._e()])]):_vm._e()]})],2),_c('div',{staticClass:\"sort_tip\"},[_vm._v(\" 长按拖动改变顺序 \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"sort_main\">\n\n        <Container @drop=\"onDrop\" :auto-scroll-enabled=\"false\" orientation=\"horizontal\" :drag-begin-delay=\"200\" class=\"sort_box\">            \n          <template v-for=\"t in timelines\">\n            <Draggable class=\"sort_item\" v-if=\"!t.ending\" :key=\"t.id\">\n                <div class=\"sort_head\">{{(t.end_sec - t.start_sec).toFixed(1)}}</div>\n                <div class=\"sort_thumb\">\n                    <img v-if=\"t.thumbs.length && t.thumbs[0].url\" :src=\"t.thumbs[0].url\"/>\n                </div>\n            </Draggable>\n          </template>\n        </Container>\n        \n        <div class=\"sort_tip\">\n            长按拖动改变顺序\n        </div>\n    </div>\n</template>\n<style>\n.smooth-dnd-disable-touch-action * {\n    touch-action: inherit!important;\n}\n/* 修复华为手机无法滚动的问题 */\n.sort_main .smooth-dnd-container.horizontal {\n    display: flex;\n}\n</style>\n<style scoped>\n.sort_main{\n    width:100%;\n}\n.sort_box{\n    width:100%;\n    overflow:auto;\n    white-space: nowrap;\n    display:flex;\n}\n.sort_box::-webkit-scrollbar-track-piece {\n  background-color: transparent;\n}\n.sort_box::-webkit-scrollbar {\n  width: 5px;\n  height: 5px;\n  -webkit-border-radius: 5px;\n  -moz-border-radius: 5px;\n  border-radius: 5px;\n}\n.sort_box::-webkit-scrollbar-thumb {\n  border: 1px solid #666;\n  background-image:linear-gradient(to left, #666 0%,  #666 50%, #777 50%);\n  box-shadow: 0 0 2px rgba(0, 0, 0, 0.5) inset;\n  background-size: 2px 100%;\n  background-position: center;\n  background-clip: padding-box;\n  -webkit-border-radius: 5px;\n  -moz-border-radius: 5px;\n  border-radius: 5px;\n  min-height: 28px;\n}\n.sort_box::-webkit-scrollbar-thumb:hover {\n  background-color: rgba(0, 0, 0, 0.5);\n  -webkit-border-radius: 5px;\n  -moz-border-radius: 5px;\n  border-radius: 5px;\n}\n.sort_item{\n    display:inline-block!important;\n    padding: 10px;\n}\n\n.sort_head{\n    color:white;\n    text-align: center;\n    width:40px;\n}\n.sort_thumb{\n    height:40px;\n    width:40px;\n    overflow:hidden;\n}\n.sort_thumb img{\n    height:100%;\n    width:100%;\n    object-fit: cover;\n    object-position: left;\n}\n.sort_thumb {\n    background-color: #000;\n}\n.sort_tip{\n    color:white;\n}\n</style>\n<script>\n\n// vue-smooth-dnd\n//  https://github.com/kutlugsahin/vue-smooth-dnd/\n\nimport extend from \"extend\";\nimport { Container, Draggable } from \"vue-smooth-dnd\";\nimport Editlist from \"@/model/Editlist\";\nimport Const from \"@/const\";\n\nexport default {\n    props: [\"accept\"],\n    components:{\n        Container,\n        Draggable\n    },\n    data(){\n        return {\n            timelines:[]\n        }\n    },\n    watch:{\n        accept(a){\n            if(a){\n                Editlist.editlist.update_timelines(this.timelines);\n                Editlist.editlist.timelines = this.timelines;\n                this.$emit(\"change\", \"sort\");\n\n                if(this.initState.timelines.find((e,i) => this.timelines[i].id != e.id)) {\n                    Editlist.editlist.createOperateHistory(Const.Operate.VideoSort.Type);\n                }\n            }\n            this.$parent.close();\n        }\n    },\n    methods:{\n        onDrop (dropResult) {\n            const { removedIndex, addedIndex, payload } = dropResult;\n            if (removedIndex === null && addedIndex === null) return;\n\n            const result = [...this.timelines];\n            let itemToAdd = payload\n\n            if (removedIndex !== null) {\n                itemToAdd = result.splice(removedIndex, 1)[0]\n            }\n\n            if (addedIndex !== null) {\n                result.splice(addedIndex, 0, itemToAdd)\n            }\n\n            this.timelines = result;\n\n        }\n    },\n    mounted(){\n        this.timelines = Editlist.editlist.timelines;\n        this.$emit(\"update:title\", \"排序\")\n        this.$parent.acceptable();\n        this.initState = {\n            timelines: extend(true, [], this.timelines)\n        }\n    },\n}\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sort.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sort.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Sort.vue?vue&type=template&id=c791ff4c&scoped=true&\"\nimport script from \"./Sort.vue?vue&type=script&lang=js&\"\nexport * from \"./Sort.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Sort.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./Sort.vue?vue&type=style&index=1&id=c791ff4c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c791ff4c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"face-main\"},[_c('mu-switch',{attrs:{\"color\":\"red\"},model:{value:(_vm.enabled),callback:function ($$v) {_vm.enabled=$$v},expression:\"enabled\"}}),_c('span',{staticStyle:{\"color\":\"white\",\"width\":\"100px\"}},[_vm._v(\"美颜级别\")]),_c('mu-slider',{staticStyle:{\"margin\":\"0\"},attrs:{\"disabled\":!_vm.enabled,\"min\":0,\"max\":10,\"step\":1},model:{value:(_vm.face.level),callback:function ($$v) {_vm.$set(_vm.face, \"level\", $$v)},expression:\"face.level\"}}),_c('div',{staticStyle:{\"width\":\"50px\",\"text-align\":\"center\"}},[_vm._v(_vm._s(_vm.face.level))])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"face-main\" >\n        <mu-switch v-model=\"enabled\" color=\"red\" />\n        <span style=\"color:white;width:100px\">美颜级别</span>\n        <mu-slider :disabled=\"!enabled\" style=\"margin:0\" :min=\"0\" :max=\"10\" :step=\"1\" v-model=\"face.level\" />\n        <div style=\"width:50px;text-align:center\">{{face.level}}</div>\n    </div>\n</template>\n<style scoped>\n.face-main{\n    display:flex;\n    white-space: nowrap;\n    color:white;\n    line-height: 25px;\n}\n.face-main > *{\n    margin:0 10px;\n}\n</style>\n<script>\nimport Editlist from \"@/model/Editlist\";\nimport ResourceManager from \"@/model/UGCResourceManager\";\nimport Const from \"@/const\";\n\nexport default {\n    data(){\n        return {\n            enabled:false,\n            face:{level:10}\n        }\n    },\n    watch:{\n        \"enabled\":async function(e){\n            if(!e){\n                Editlist.editlist.beauty_level = 0;\n            }\n            else{\n                if(this.face.level == 0) {\n                    this.face.level = 10;\n                }\n                if(!Editlist.editlist.face.beauty_source){\n                    Editlist.editlist.beauty_source = await ResourceManager.getBeautySource();\n                }\n                Editlist.editlist.beauty_level = this.face.level;\n            }\n        },\n        \"face.level\":function(l){\n            Editlist.editlist.beauty_level = l;\n        }\n    },\n    methods: {\n        onDialogClose() {\n            if(this.initeState) {\n                if(this.initeState.enable != this.enabled) {\n                    if(this.enabled) {\n                        Editlist.editlist.createOperateHistory(Const.Operate.FilterEnable.Type);\n                    } else {\n                        Editlist.editlist.createOperateHistory(Const.Operate.FilterDisable.Type);\n                    }\n                } else if(this.initeState.level != Editlist.editlist.beauty_level) {\n                    Editlist.editlist.createOperateHistory(Const.Operate.FilterModify.Type);\n                }\n            }\n        },\n    },\n    async mounted(){\n        this.$emit(\"update:title\", \"美颜\")\n        this.enabled = Editlist.editlist.face.beauty_level > 0;\n        this.face.level = Editlist.editlist.face.beauty_level;\n        this.initeState = {\n            enabled: this.enabled,\n            level: this.face.level\n        };\n    }\n}\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Face.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Face.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Face.vue?vue&type=template&id=b33073c6&scoped=true&\"\nimport script from \"./Face.vue?vue&type=script&lang=js&\"\nexport * from \"./Face.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Face.vue?vue&type=style&index=0&id=b33073c6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b33073c6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"aspect-box\"},[_c('div',[_c('ClipBtn',{staticClass:\"item-btn\",attrs:{\"active\":!_vm.curAspectRatio,\"icon\":'phonelink_lock',\"text\":'原始'},nativeOn:{\"click\":function($event){return _vm.choose(null)}}}),_vm._l((_vm.AspectRatio),function(e,idx){return _c('ClipBtn',{key:e[0]+':'+e[1],staticClass:\"item-btn\",attrs:{\"active\":_vm.curAspectRatio == e,\"src\":_vm.AspectRatioIcon[idx],\"text\":e[0]+':'+e[1]},nativeOn:{\"click\":function($event){return _vm.choose(e)}}})})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div class=\"aspect-box\">\n\n    <div >\n        <ClipBtn\n            :active=\"!curAspectRatio\"\n            @click.native=\"choose(null)\"\n            class=\"item-btn\" \n            :icon=\"'phonelink_lock'\" :text=\"'原始'\" >\n        </ClipBtn>\n        <ClipBtn v-for=\"(e,idx) in AspectRatio\" :key=\"e[0]+':'+e[1]\" \n            :active=\"curAspectRatio == e\"\n            @click.native=\"choose(e)\"\n            class=\"item-btn\" \n            :src=\"AspectRatioIcon[idx]\" :text=\"e[0]+':'+e[1]\" >\n        </ClipBtn>\n    </div>\n</div>\n</template>\n<style scoped>\n\n.aspect-box{\n    display: flex;\n    flex-flow: row;\n    width:100%;\n}\n.aspect-box > div{\n    display: flex;\n    flex-flow: row;\n    width:100%;\n    justify-content: space-evenly\n}\n</style>\n<script>\nimport Editlist from \"@/model/Editlist\";\nimport ClipBtn from \"@/components/ClipBtn\";\nimport Const from \"@/const\";\n\nlet AspectRatio = [\n    [9,16],\n    [16,9],\n    [1,1],\n    [3,4],\n    [4,3]\n]\n\nasync function createIcons(AspectRatio){\n    return await Promise.all(AspectRatio.map(async i => {\n        \n        let PADDING = 30;\n        let BOX = 100;\n\n        let can = document.createElement(\"canvas\");\n        can.width = BOX + PADDING*2;\n        can.height = BOX + PADDING*2;\n        let ctx = can.getContext(\"2d\");\n        ctx.fillStyle = \"white\";\n        let ratio = i[0]/i[1];\n        if(ratio > 1){\n            ctx.fillRect(\n                PADDING, PADDING + (BOX - BOX / ratio)/2,\n                BOX, BOX / ratio);\n        } else {\n            ctx.fillRect(\n                PADDING + (BOX - BOX * ratio)/2, PADDING,\n                BOX * ratio, BOX);\n        }\n        return URL.createObjectURL(await new Promise(can.toBlob.bind(can)))\n        \n    }));\n}\n\nexport default {\n    components:{ClipBtn},\n    props:[\"editlist\"],\n    data(){\n        return {\n            AspectRatio,\n            AspectRatioIcon:[],\n            curAspectRatio:null\n        }\n    },\n    methods:{\n        choose(e){\n            if(this.curAspectRatio == e) return;\n\n            this.curAspectRatio = e;\n            if(e)\n                this.editlist.video.dar = e;\n            else\n                this.editlist.video.dar = Editlist.DARPreset.auto;\n\n            this.$emit(\"change\")\n        },\n        onDialogClose() {\n            if(this.initState) {\n                if(this.initState.aspectRatio != this.curAspectRatio) {\n                    this.editlist.createOperateHistory(Const.Operate.VideoAspect.Type);\n                }\n            }\n        }\n    },\n    async mounted(){\n        this.$emit(\"update:title\", \"画幅比例\")\n        this.AspectRatioIcon = await createIcons(AspectRatio);\n        this.curAspectRatio = AspectRatio.filter(i => {\n            return i.join(\":\") == this.editlist.video.dar.join(\":\");\n        })[0]\n        this.initState = {\n            aspectRatio: this.curAspectRatio\n        };\n    }\n}\n</script>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AspectRatio.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AspectRatio.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AspectRatio.vue?vue&type=template&id=6c3aa489&scoped=true&\"\nimport script from \"./AspectRatio.vue?vue&type=script&lang=js&\"\nexport * from \"./AspectRatio.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AspectRatio.vue?vue&type=style&index=0&id=6c3aa489&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c3aa489\",\n  null\n  \n)\n\nexport default component.exports","<template>\n<transition name=\"fade\" v-on:after-leave=\"$emit('close')\">\n    <div v-if=\"tabid >= 0\" class=\"dialog-main\" :style=\"style\">\n        <div class=\"dialog-content\">\n            <AudioBase :title.sync=\"title\" ref=\"audiobBase\" :editlist=\"editlist\" @change=\"change\" v-if=\"tabid == TabID.AudioBase\" />\n            <Sort :title.sync=\"title\" ref=\"sort\" :accept=\"dialogAccept\" :editlist=\"editlist\" @change=\"change\" v-if=\"tabid == TabID.VideoSort\" />\n            <BGM :title.sync=\"title\" ref=\"bgm\" :accept=\"dialogAccept\" :editlist=\"editlist\" @change=\"change\" v-if=\"tabid == TabID.BGM\" />\n            <AudioEffect :title.sync=\"title\" ref=\"audioEffect\" :editlist=\"editlist\" :accept=\"dialogAccept\" @change=\"change\" v-if=\"tabid == TabID.AudioEffect\" />\n            <VFilter :title.sync=\"title\" ref=\"vfilter\" :editlist=\"editlist\" @change=\"change\" v-if=\"tabid == TabID.Filter\" />\n            <Face :title.sync=\"title\" ref=\"face\" :editlist=\"editlist\" @change=\"change\" v-if=\"tabid == TabID.Face\" />\n            <ImageOverlay :title.sync=\"title\" ref=\"imageOverlay\" :options=\"options\" :postermode=\"postermode\" :editlist=\"editlist\" @change=\"change\" @beforechange=\"beforechange\" v-if=\"tabid == TabID.AddImage\"/>\n            <TextOverlay :title.sync=\"title\" ref=\"textOverlay\" :postermode=\"postermode\" :accept=\"dialogAccept\" :editlist=\"editlist\" :options=\"options\" @change=\"change\" @beforechange=\"beforechange\" v-if=\"tabid == TabID.AddText\" />\n            <VideoBase :title.sync=\"title\" ref=\"videoBase\" :editlist=\"editlist\" @change=\"change\" v-if=\"tabid == TabID.VideoBase\" />\n            <AspectRatio :title.sync=\"title\" ref=\"aspectRatio\" :editlist=\"editlist\" @change=\"change\" v-if=\"tabid == TabID.AspectRatio\" />\n        </div>\n        <div class=\"bottom-title\">\n            <mu-button v-if=\"!dialogAcceptable\" class=\"accept-btn\" flat color=\"white\" @click=\"close\">\n                 <mu-icon value=\"\"></mu-icon>\n            </mu-button>\n            <mu-button v-if=\"dialogAcceptable\" class=\"close-btn\" flat color=\"white\" @click=\"close\">\n                 <mu-icon value=\"close\"></mu-icon>\n            </mu-button>\n            <div class=\"title\">{{title}}</div>\n            <mu-button v-if=\"dialogAcceptable\" class=\"accept-btn\" flat color=\"white\" @click=\"accept\">\n                 <mu-icon value=\"check\"></mu-icon>\n            </mu-button>\n            <mu-button v-if=\"!dialogAcceptable\" class=\"accept-btn\" flat color=\"white\" @click=\"close\">\n                 <mu-icon value=\"keyboard_arrow_down\"></mu-icon>\n            </mu-button>\n        </div>\n    </div>\n</transition>\n</template>\n<style lang=\"less\" scoped>\n\n.fade-enter-active {\n  transition: all .5s;\n}\n.fade-leave-active {\n  transition: all .2s;\n}\n.fade-leave-to /* .fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n  transform: translateY(10px);\n}\n.fade-enter /* .fade-leave-active below version 2.1.8 */ {\n  opacity: 0;\n  transform: translateY(50px);\n}\n\n.dialog-main{\n    width:100%;\n    // position: absolute;\n    z-index: 100;\n    background:#323232;\n    bottom:0;left:0;\n    display: flex;\n    flex-flow: column\n}\n.bottom-title{\n    display:flex;\n    height:36px;\n    .title{\n        width:100%;\n        color: white;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        border-top: 1px solid;\n        border-image: linear-gradient(90deg,transparent, rgba(255,0,0,0.5), transparent) 1 10;\n    }\n    .close-btn{\n        width:50px\n    }\n    .accept-btn{\n        width:50px\n    }\n}\n.dialog-content{\n    height: 100%;\n    overflow: hidden;\n    display:flex;\n    padding:20px;\n    padding-bottom:0\n}\n\n.dialog-content > div{\n    width:100%;\n}\n\n</style>\n<script>\nimport AudioBase from \"@/views/Bottom/Tools/AudioBase\";\nimport BGM from \"@/views/Bottom/Tools/BGM\";\nimport AudioEffect from \"@/views/Bottom/Tools/AudioEffect\";\nimport VFilter from \"@/views/Bottom/Tools/Filter\";\nimport ImageOverlay from \"@/views/Bottom/Tools/ImageOverlay\";\nimport TextOverlay from \"@/views/Bottom/Tools/TextOverlay\";\nimport VideoBase from \"@/views/Bottom/Tools/VideoBase\";\nimport Sort from \"@/views/Bottom/Tools/Sort\";\nimport Face from \"@/views/Bottom/Tools/Face\";\nimport AspectRatio from \"@/views/Bottom/Tools/AspectRatio\";\nimport ToolTab from \"@/views/Bottom/ToolTab\";\n\n\nexport default {\n    components:{\n        AudioBase,\n        BGM,\n        AudioEffect,\n        VFilter,\n        ImageOverlay,\n        TextOverlay,\n        VideoBase,\n        Sort,\n        Face,\n        AspectRatio\n    },\n    props:[\"editlist\", \"postermode\"],\n    data(){\n        return {\n            tabid:-1,\n            title:\"\",\n            dialogAccept:false,\n            dialogAcceptable:false,\n            TabID: ToolTab.TabID,\n            options: null\n        }\n    },\n    computed:{\n        style(){\n            let ret = {\n                height: \"auto\"\n            };\n            if(this.options && this.options.height){\n                ret.position = \"absolute\";\n                ret.height = this.options.height;\n            }\n\n            return ret;\n        }\n    },\n    methods:{\n        show(tabID, options = null){\n            this.title = \"\";\n            this.dialogAccept = false;\n            this.dialogAcceptable = false;\n            this.tabid = tabID;\n            this.options = {...options}\n        },\n        beforechange(e) {\n            this.$emit(\"beforechange\", e);\n        },\n        change(e){\n            this.$emit(\"change\", e, this.tabid);\n        },\n        acceptable(){\n            this.dialogAcceptable = true;\n        },\n        close(){\n            this.dialogAccept = false;\n            this.triggerClose();\n            this.tabid = -1;\n        },\n        accept(){\n            this.dialogAccept = true;\n\n            //让 dialogAccept 有时间响应\n            // this.$nextTick(\n            //     this.$nextTick.bind(this,this.close))\n            // this.close();\n        },\n        triggerClose() {\n            Object.keys(this.$refs).forEach(r => {\n                this.$refs[r] &&\n                this.$refs[r].onDialogClose &&\n                this.$refs[r].onDialogClose();\n            });\n        }\n    }\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ToolDialog.vue?vue&type=template&id=1f0d95ac&scoped=true&\"\nimport script from \"./ToolDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./ToolDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ToolDialog.vue?vue&type=style&index=0&id=1f0d95ac&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1f0d95ac\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.updateUISize),expression:\"updateUISize\"}],ref:\"mainbox\",on:{\"click\":_vm.boxClick}},[(_vm.overlay)?_c('div',{ref:\"main\",staticClass:\"clip_img\",style:(_vm.style),attrs:{\"tabindex\":\"-1\"},on:{\"touchstart\":_vm.touchstart,\"touchmove\":_vm.touchmove,\"touchend\":_vm.hideMagnet,\"touchcancel\":_vm.hideMagnet}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loaded),expression:\"loaded\"}],key:_vm.url,ref:\"img\",staticClass:\"img\",attrs:{\"src\":_vm.url + '?' + _vm.overlay.id},on:{\"load\":_vm.imgLoaded,\"error\":_vm.imgLoadError}}),_c('div',{staticClass:\"border\"}),_c('div',{staticClass:\"remove-btn item-btn\",on:{\"click\":_vm.remove}},[_c('mu-icon',{attrs:{\"value\":\"close\"}})],1),(_vm.edit_filter && _vm.edit_filter(_vm.overlay))?_c('div',{staticClass:\"edit-btn item-btn\",on:{\"click\":function($event){return _vm.$emit('edit', _vm.overlay)}}},[_c('mu-icon',{attrs:{\"value\":\"edit\"}})],1):_vm._e(),_c('div',{staticClass:\"resize-btn item-btn\",on:{\"touchstart\":function($event){$event.stopPropagation();return _vm.resize_start($event)},\"touchmove\":function($event){$event.stopPropagation();return _vm.resize_move($event)},\"touchend\":function($event){$event.stopPropagation();return _vm.resize_end($event)}}},[_c('mu-icon',{attrs:{\"value\":\"code\"}})],1)]):_vm._e(),(_vm.magnetX)?_c('div',{staticClass:\"magnet-x\",style:({left: _vm.magnetX+'px'})}):_vm._e(),(_vm.magnetY)?_c('div',{staticClass:\"magnet-y\",style:({top: _vm.magnetY+'px'})}):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div v-resize=\"updateUISize\" ref=\"mainbox\" @click=\"boxClick\">\n    <div tabindex=\"-1\" v-if=\"overlay\" ref=\"main\" class=\"clip_img\" @touchstart=\"touchstart\" @touchmove=\"touchmove\"\n             @touchend=\"hideMagnet\" @touchcancel=\"hideMagnet\" :style=\"style\">\n        <!-- 使url=url+'?'+overlay.id,可以修复添加相同同贴纸时url没变导致不触发onload的问题 -->\n        <img v-show=\"loaded\" @load=\"imgLoaded\" @error=\"imgLoadError\" :src=\"url + '?' + overlay.id\" :key=\"url\" class=\"img\" ref=\"img\" />\n        <div class=\"border\" />\n        <div class=\"remove-btn item-btn\" @click=\"remove\">\n            <mu-icon value=\"close\" />\n        </div>\n        <div v-if=\"edit_filter && edit_filter(overlay)\" class=\"edit-btn item-btn\" @click=\"$emit('edit', overlay)\">\n            <mu-icon value=\"edit\" />\n        </div>\n        <div\n            class=\"resize-btn item-btn\"\n            @touchstart.stop=\"resize_start\"\n            @touchmove.stop=\"resize_move\"\n            @touchend.stop=\"resize_end\"\n        ><mu-icon value=\"code\" /></div>\n    </div>\n    <div class=\"magnet-x\" v-if=\"magnetX\" :style=\"{left: magnetX+'px'}\"></div>\n    <div class=\"magnet-y\" v-if=\"magnetY\" :style=\"{top: magnetY+'px'}\"></div>\n</div>\n</template>\n<style>\n.clip_img {\n    position: absolute;\n    width: 100px;\n    height: 100px;\n    left: 0;\n    top: 0;\n    display: flex;\n    outline: 0\n}\n</style>\n<style scoped>\n.img {\n    display: block;\n    width: 100%;\n    height: 100%;\n}\n.border {\n    position:absolute;\n    width:100%;\n    height:100%;\n    border: 1px solid white;\n}\n.item-btn {\n    width: 30px;\n    height: 30px;\n    min-width: 30px;\n    min-height: 30px;\n    background:white;\n    display:flex;\n    justify-content: center;\n    align-items: center;\n    padding: 0;\n    border-radius: 30px;\n    position: absolute;\n    opacity: 0.8\n}\n.resize-btn {\n    right: -20px;\n    bottom: -20px;\n    transform:rotate(45deg)\n}\n.remove-btn {\n    top: -20px;\n    left: -20px;\n}\n.edit-btn {\n    top: -20px;\n    right: -20px;\n}\n.magnet-x {\n    position: absolute;\n    height:100%;\n    top: 0;\n    border-left: 1px dashed white;\n}\n.magnet-y {\n    position: absolute;\n    width:100%;\n    left: 0;\n    border-top: 1px dashed white;\n}\n</style>\n<script>\nimport Editlist from \"@/model/Editlist\";\nimport ClipModel from \"@/model/ClipModel\";\nimport Const from \"@/const\";\nimport { rotateVector } from \"@/utils\";\nimport Magnet from \"@/model/Magnet\";\n\nfunction angleAndScale(pointA, pointB, pointC) {\n    var lengthAB = Math.sqrt(\n            Math.pow(pointA.X - pointB.X, 2) + Math.pow(pointA.Y - pointB.Y, 2)\n        ),\n        lengthAC = Math.sqrt(\n            Math.pow(pointA.X - pointC.X, 2) + Math.pow(pointA.Y - pointC.Y, 2)\n        ),\n        lengthBC = Math.sqrt(\n            Math.pow(pointB.X - pointC.X, 2) + Math.pow(pointB.Y - pointC.Y, 2)\n        );\n    var cosA =\n        (Math.pow(lengthAB, 2) +\n            Math.pow(lengthAC, 2) -\n            Math.pow(lengthBC, 2)) /\n        (2 * lengthAB * lengthAC);\n\n    //余弦定理得到角度\n    var angleA = Math.round((Math.acos(cosA) * 180) / Math.PI);\n\n    // 判断三点是顺时针还是逆时针方向\n    // 设 p1=(x1,y1)， p2=(x2,y2)， p3=(x3,y3)\n    // 求向量\n    // p12=(x2-x1,y2-y1)\n    // p23=(x3-x2,y3-y2)\n    // 则当 p12 与 p23 的叉乘（向量积）\n    // p12 x p23 = (x2-x1)*(y3-y2)-(y2-y1)*(x3-x2)\n    // 为正时，p1-p2-p3 路径的走向为逆时针，\n    // 为负时，p1-p2-p3 走向为顺时针，\n    // 为零时，p1-p2-p3 所走的方向不变，亦即三点在一直线上。\n\n    let sign =\n        (pointB.X - pointA.X) * (pointC.Y - pointB.Y) -\n        (pointB.Y - pointA.Y) * (pointC.X - pointB.X);\n\n    if (sign < 0) angleA = 180 + 180 - angleA;\n\n    //带正负的角度和缩放比例\n    return {\n        angle: angleA,\n        scale: lengthAC / lengthAB\n    };\n}\nfunction getElementPageXY(element) {\n    var actualLeft = element.offsetLeft;\n    var parent = element.offsetParent;\n    while (parent != null) {\n        actualLeft +=\n            parent.offsetLeft + (parent.offsetWidth - parent.clientWidth) / 2;\n        parent = parent.offsetParent;\n    }\n\n    var actualTop = element.offsetTop;\n    parent = element.offsetParent;\n    while (parent != null) {\n        actualTop +=\n            parent.offsetTop + (parent.offsetHeight - parent.clientHeight) / 2;\n        parent = parent.offsetParent;\n    }\n    return { x: actualLeft, y: actualTop };\n}\n\nexport default {\n    props: [\"time_sec\", \"overlays_in\", \"mosics_in\", \"postermode\", \"edit_filter\"],\n    data() {\n        return {\n            userModify: false,\n            overlay: null,\n            loaded: false,\n            ignoreLoadEvent: false,\n            url: \"\",\n            magnetX : null,\n            magnetY : null,\n            box: {\n                width: 0,\n                height: 0,\n                offsetX: 0, //根据sar修正坐标\n                offsetY: 0,\n                scale: 1 // ui 转为 视频像素\n            },\n            style: {\n                left: \"50px\",\n                top: \"50px\",\n                width: \"100px\",\n                height: \"100px\",\n                transform: \"rotate(0deg)\"\n            },\n            temp: {\n                pageX: 0,\n                pageY: 0,\n                offsetX: 0,\n                offsetY: 0\n            },\n            tempStyle: {\n                x: 0,\n                y: 0,\n                w: 0,\n                h: 0,\n                rotate: 0\n            }\n        };\n    },\n    watch: {\n        // 监听文字修改\n        \"overlay.url\": \"load\"\n    },\n    computed: {\n        allOverlays() {\n            return [...this.overlays_in, ...this.mosics_in];\n        },\n        hasActive(){\n            return !!this.overlay;\n        },\n        layouts() {\n            let layouts = this.allOverlays().map(overlay => {\n                //因为ffmpeg里面使用 对角线 的框来放置overlay，所以需要修正 x,y 坐标\n                let box = Math.hypot(overlay.w, overlay.h);\n                let x = overlay.x;\n                let y = overlay.y;\n                if(overlay.type != Const.Overlay.Type.Mosic) {\n                    x -= (overlay.w - box)/2;\n                    y -= (overlay.h - box)/2;\n                }\n                let layout = { id: overlay.id, type: overlay.type };\n                layout.left = (this.box.offsetX + x / this.box.scale);\n                layout.top = (this.box.offsetY + y / this.box.scale) ;\n                layout.width = overlay.w / this.box.scale;\n                layout.height = overlay.h / this.box.scale;\n                layout.rotate = overlay.rotate;\n                layouts.push(layout);\n            });\n            window.console.log(\"layouts style\");\n            return layouts;\n        }\n    },\n    methods: {\n        updateUISize() {\n            this.box.width = this.$refs.mainbox.clientWidth;\n            this.box.height = this.$refs.mainbox.clientHeight;\n\n            let darUI = this.box.width / this.box.height;\n            let dar = Editlist.editlist.dar[0] / Editlist.editlist.dar[1];\n\n            if(dar > darUI){\n                this.box.offsetY = (this.box.height - this.box.width / dar)/2;\n                this.box.offsetX = 0;\n                this.box.scale = Editlist.editlist.resolution_dar[0] / this.box.width;\n            } else {\n\n                this.box.offsetX = (this.box.width - this.box.height * dar)/2;\n                this.box.offsetY = 0;\n                this.box.scale = Editlist.editlist.resolution_dar[1] / this.box.height ;\n            }\n\n            window.console.log(\"ClipImg update box: \" + JSON.stringify(this.box));\n        },\n        boxClick(e) {\n\n            if(this.hasActive){\n                this.blur();\n                return;\n            }\n            \n            let { x, y } = getElementPageXY(this.$refs.mainbox);\n            x = ((e.pageX - x) - this.box.offsetX) * this.box.scale;\n            y = ((e.pageY - y) - this.box.offsetY) * this.box.scale;\n\n            let selectedFilter = this.allOverlays.filter(o=>{\n                //time_sec 命中 overlay 时间线\n                return o.offset_sec <= this.time_sec && (\n                    o.end_sec == 0 || \n                    o.offset_sec + o.end_sec >= this.time_sec\n                );\n            }).filter(o=>{\n                //x,y inset overlay rect\n\n                let box = Math.hypot(o.w,o.h);\n                let ox = o.x;\n                let oy = o.y;\n\n                if(o.type != Const.Overlay.Type.Mosic) {\n                    ox -= (o.w - box) / 2;\n                    oy -= (o.h - box) / 2;\n                }\n\n                // overlay存储的是旋转前的坐标，\n                // 所以需要逆向旋转x, y后再判断包含关系\n                let p = rotateVector(ox + o.w / 2, oy + o.h /2, x, y, -o.rotate);\n\n                return ox < p.x && oy < p.y && ox + o.w > p.x && oy + o.h > p.y;\n            });\n\n            if(selectedFilter.length){\n            \n                let item = selectedFilter.reverse()[0];\n                this.active(item);\n                this.load();\n                this.$emit(\"overlayActive\", item);\n            } else {\n                this.blur();\n            }\n        },\n        async blur() {\n            if(this.overlay){\n                this.overlay.enabled = true;\n                this.overlay.active = false;\n                if(this.overlay.new){\n                    this.overlay.new = false;\n                    await this.$emit(\"change\");\n                }\n                else {\n                    if(this.overlay.type == Const.Overlay.Type.Mosic) {\n                        Editlist.editlist.update_mosic(this.overlay);\n                    } else {\n                        await Editlist.editlist.update_overlay(this.overlay, this.postermode);\n                    }\n                }\n\n                if(this.userModify) {\n                    this.createOrUpdateOperateHistory();\n                }\n                let overlay = this.overlay;\n                this.overlay = null;\n                // this.$emit(\"change\");\n                this.$emit(\"overlayDeactive\", overlay);\n            }\n        },\n        async active(overlay) {\n\n            //先让 palyer 隐藏该 overlay\n            // if(overlay.enabled){\n            //     overlay.enabled = false;\n            //     this.$emit(\"change\");\n            // }\n\n            if(this.overlay) {\n                this.overlay.active = false;\n            }\n\n            overlay.active = true;\n            this.overlay = overlay;\n            this.userModify = false;\n\n            if(this.overlay.type == Const.Overlay.Type.Mosic) {\n                this.loaded = false;\n                this.url = \"\";\n                Editlist.editlist.update_mosic(this.overlay);\n            } else {\n                Editlist.editlist.update_overlay(this.overlay, this.postermode);\n            }\n\n            this.updateUI();\n\n            if(!overlay.url && overlay.w <= 10) {// 自动宽度、并居中马赛克\n                this.toCenter(1);\n                this.onChange(true);\n            }\n\n            this.$nextTick(()=>{\n                this.$refs.main.focus();\n            })\n\n            window.console.log(\"ClipImg active: \" + JSON.stringify(this.overlay));\n        },\n        updateUI() {\n            this.updateUISize();\n\n            if(this.overlay) {\n                window.console.log(\"layout style\");\n                //因为ffmpeg里面使用 对角线 的框来放置overlay，所以需要修正 x,y 坐标\n                let box = Math.hypot(this.overlay.w, this.overlay.h);\n                let x = this.overlay.x;\n                let y = this.overlay.y;\n                if(this.overlay.type != Const.Overlay.Type.Mosic) {\n                    x -= (this.overlay.w - box)/2;\n                    y -= (this.overlay.h - box)/2;\n                }\n\n                this.style.left = (this.box.offsetX + x / this.box.scale) + \"px\";\n                this.style.top = (this.box.offsetY + y / this.box.scale) + \"px\";\n                this.style.width = this.overlay.w / this.box.scale + \"px\";\n                this.style.height = this.overlay.h / this.box.scale + \"px\";\n                this.style.transform = \"rotate(\" + this.overlay.rotate + \"deg)\";\n            }\n        },\n        imgLoaded() {\n            this.loaded = true;\n            if(this.ignoreLoadEvent || !this.overlay ||\n                !this.$refs.img.naturalWidth || !this.$refs.img.naturalHeight) {\n                return;\n            }\n            this.setDefaultSize();\n        },\n        setDefaultSize() {\n            let modify = false;\n            let oldWidth = this.style.width;\n\n            let ratio =\n                this.$refs.img.naturalWidth / this.$refs.img.naturalHeight;\n            if(+this.style.width.replace(\"px\",\"\") < 10){\n                this.toCenter(ratio);\n                modify = true;\n            }\n            this.style.width =\n                ratio * this.style.height.replace(\"px\", \"\") + \"px\";\n            \n            if(Math.ceil(this.style.width+0) != Math.ceil(oldWidth+0)) {\n                modify = true;\n            }\n\n            if(modify) {\n                this.onChange(true);\n            }\n        },\n        imgLoadError(e) {\n            window.console.log(\"img load error \", e);\n        },\n        toCenter(ratio) {\n            let width = this.box.width / 2 - this.box.offsetX;\n            let height = this.box.height /2 - this.box.offsetY;\n            if(ratio > 1)\n                height = width / ratio;\n            else \n                width = height * ratio;\n\n            this.style.left = (this.box.width - width) / 2 + \"px\";\n            this.style.top = (this.box.height - height) / 2 + \"px\";\n            this.style.width = width + \"px\";\n            this.style.height = height + \"px\";\n        },\n        remove() {\n\n            this.overlay.active = false;\n\n            let idx = this.overlays_in.findIndex(e => e.id == this.overlay.id);\n            if(idx >= 0)\n                this.overlays_in.splice(idx, 1);\n\n            if(this.mosics_in) {\n                idx = this.mosics_in.findIndex(e => e.id == this.overlay.id);\n                if(idx >= 0)\n                    this.mosics_in.splice(idx, 1);\n            }\n\n            this.overlay = null;\n            this.$emit(\"change\");\n        },\n        resize_start(e) {\n            this.temp.pageX = e.changedTouches[0].pageX;\n            this.temp.pageY = e.changedTouches[0].pageY;\n\n            this.tempStyle.x = +this.style.left.replace(\"px\", \"\");\n            this.tempStyle.y = +this.style.top.replace(\"px\", \"\");\n\n            this.tempStyle.w = +this.style.width.replace(\"px\", \"\");\n            this.tempStyle.h = +this.style.height.replace(\"px\", \"\");\n\n            //鼠标点击的点（本地坐标）\n            let { x, y } = getElementPageXY(this.$refs.main);\n            this.temp.offsetX =\n                this.temp.pageX - (x - this.tempStyle.x);\n            this.temp.offsetY =\n                this.temp.pageY - (y - this.tempStyle.y);\n\n            this.tempStyle.rotate = +this.style.transform.match(\n                /\\d+/\n            )[0];\n\n            return true;\n        },\n        resize_move_scale(e) {\n            let dX = e.changedTouches[0].pageX - this.temp.pageX;\n            let dY = e.changedTouches[0].pageY - this.temp.pageY;\n            \n\n            // angle = angle + this.tempStyle.rotate;\n            // this.style.transform = \"rotate(\" + angle + \"deg)\";\n\n            let dW = dX;//(scale - 1) * this.tempStyle.w;\n            let dH = dY;//(scale - 1) * this.tempStyle.h;\n\n            this.style.left = this.tempStyle.x - dW / 2 + \"px\";\n            this.style.top = this.tempStyle.y - dH / 2 + \"px\";\n            this.style.width = this.tempStyle.w + dW + \"px\";\n            this.style.height = this.tempStyle.h + dH + \"px\";\n\n            this.onChange();\n            e.preventDefault && e.preventDefault();\n            e.returnValue = false;\n            e.stopPropagation && e.stopPropagation();\n            return false;\n        },\n        resize_move(e) {\n            if(this.overlay.type == Const.Overlay.Type.Mosic){\n                return this.resize_move_scale(e);\n            }\n            let dX = e.changedTouches[0].pageX - this.temp.pageX;\n            let dY = e.changedTouches[0].pageY - this.temp.pageY;\n\n            //根据三点，得到转角和缩放\n            let { angle, scale } = angleAndScale(\n                {\n                    X: this.tempStyle.x + this.tempStyle.w / 2,\n                    Y: this.tempStyle.y + this.tempStyle.h / 2\n                },\n                {\n                    X: this.temp.offsetX,\n                    Y: this.temp.offsetY\n                },\n                {\n                    X: this.temp.offsetX + dX,\n                    Y: this.temp.offsetY + dY\n                }\n            );\n\n            angle = angle + this.tempStyle.rotate;\n            this.style.transform = \"rotate(\" + angle + \"deg)\";\n\n            let dW = (scale - 1) * this.tempStyle.w;\n            let dH = (scale - 1) * this.tempStyle.h;\n\n            this.style.left = this.tempStyle.x - dW / 2 + \"px\";\n            this.style.top = this.tempStyle.y - dH / 2 + \"px\";\n            this.style.width = this.tempStyle.w + dW + \"px\";\n            this.style.height = this.tempStyle.h + dH + \"px\";\n\n            this.onChange();\n            e.preventDefault && e.preventDefault();\n            e.returnValue = false;\n            e.stopPropagation && e.stopPropagation();\n            return false;\n        },\n        resize_end() {},\n        touchstart(e) {\n            this.temp.pageX = e.changedTouches[0].pageX;\n            this.temp.pageY = e.changedTouches[0].pageY;\n            this.tempStyle.x = +this.style.left.replace(\"px\", \"\");\n            this.tempStyle.y = +this.style.top.replace(\"px\", \"\");\n        },\n        touchmove(e) {\n            let newX =\n                this.tempStyle.x +\n                e.changedTouches[0].pageX -\n                this.temp.pageX;\n            let newY =\n                this.tempStyle.y +\n                e.changedTouches[0].pageY -\n                this.temp.pageY;\n\n            // dock begin\n            let oldLayout = this.createMagnetLayout({\n                left: this.tempStyle.x,\n                top: this.tempStyle.y,\n                width: + this.style.width.replace('px', ''),\n                height: + this.style.height.replace('px', '')\n            });\n            let newLayout = this.createMagnetLayout({\n                left: newX,\n                top: newY,\n                width: oldLayout.width,\n                height: oldLayout.height\n            });\n            newLayout = this.magnet.check(oldLayout, newLayout);\n            newX = newLayout.left;\n            newY = newLayout.top;\n            // dock end\n\n            this.style.left = newX + \"px\";\n            this.style.top = newY + \"px\";\n            this.onChange();\n\n            e.preventDefault && e.preventDefault();\n            e.returnValue = false;\n            e.stopPropagation && e.stopPropagation();\n            return false;\n        },\n        onChange(auto) {\n\n            this.overlay.x = (+this.style.left.replace(\"px\", \"\") - this.box.offsetX) * this.box.scale ;\n            this.overlay.y = (+this.style.top.replace(\"px\", \"\") - this.box.offsetY) * this.box.scale;\n            this.overlay.w = +this.style.width.replace(\"px\", \"\") * this.box.scale;\n            this.overlay.h = +this.style.height.replace(\"px\", \"\") * this.box.scale;\n            this.overlay.rotate = +this.style.transform.match(/\\d+/)[0];\n\n            if(this.overlay.type != Const.Overlay.Type.Mosic) {\n                //因为ffmpeg里面使用 对角线 的框来放置overlay，所以需要修正 x,y 坐标\n                let box = Math.hypot(this.overlay.w, this.overlay.h);\n                this.overlay.x += (this.overlay.w - box)/2;\n                this.overlay.y += (this.overlay.h - box)/2;\n            }\n\n            this.overlay.x = +this.overlay.x.toFixed(2);\n            this.overlay.y = +this.overlay.y.toFixed(2);\n            this.overlay.w = +this.overlay.w.toFixed(2);\n            this.overlay.h = +this.overlay.h.toFixed(2);\n\n            // setTimeout(() => {\n                if(this.overlay.type == Const.Overlay.Type.Mosic) {\n                    Editlist.editlist.update_mosic(this.overlay);\n                } else {\n                    Editlist.editlist.update_overlay(this.overlay, this.postermode);\n                }\n            // }, 500);\n\n            window.console.log(\"overlay changed: \"+\n                this.overlay.x +\",\"+\n                this.overlay.y +\",\"+\n                this.overlay.w +\",\"+\n                this.overlay.h);\n\n\n            if(auto) {\n                this.createOrUpdateOperateHistory(true);\n            } else {\n                this.userModify = true;\n            }\n        },\n        async load() {\n            if(this.overlay && this.overlay.url) {\n                // loaded改变会触发图片的onload\n                this.ignoreLoadEvent = true;\n                this.loaded = false;\n                \n                let url;\n\n                try {\n                    url = await ClipModel.Util.getCdvUrl(this.overlay.url);\n                } catch (error) {\n                    url = this.overlay.url; // 兼容PC调试\n                }\n                this.ignoreLoadEvent = false;\n\n                if(!this.overlay) {\n                    return;\n                }\n\n                // if(this.overlay.type == Const.Overlay.Type.Text) {\n                //     // 修改文字后生成的url没变化，导致没有刷新\n                //     this.url = url + \"?\" + Math.random();\n                // } else {\n                //     // 防止apng重复下载,不加random\n                //     this.url = url;\n                // }\n                // 因为加了撤销功能，现在文字url是会变的\n                this.url = url;\n            }\n        },\n        createOrUpdateOperateHistory(isAuto){\n            if(isAuto) {\n                if(this.overlay.type == Const.Overlay.Type.Mosic) {\n                    Editlist.editlist.updateOperateHistory(Const.Operate.MosicAdd.Type, this.overlay);\n                } else if(this.overlay.type == Const.Overlay.Type.Image) {\n                    Editlist.editlist.updateOperateHistory(Const.Operate.ImageAdd.Type, this.overlay);\n                } else {\n                    Editlist.editlist.updateOperateHistory(Const.Operate.TextAdd.Type, this.overlay);\n                }\n            } else if(this.overlay.type == Const.Overlay.Type.Mosic) {\n                Editlist.editlist.createOperateHistory(Const.Operate.MosicModify.Type);\n            } else if(this.overlay.type == Const.Overlay.Type.Image) {\n                Editlist.editlist.createOperateHistory(Const.Operate.ImageModify.Type);\n            } else {\n                Editlist.editlist.createOperateHistory(Const.Operate.TextModify.Type);\n            }\n        },\n        createMagnetLayout(layout) {\n            return {\n                ...layout,\n                right: layout.left + layout.width,\n                bottom: layout.top + layout.height\n            }\n        },\n        hideMagnet() {\n            this.magnetX = null;\n            this.magnetY = null;\n        }\n    },\n    mounted(){\n        // this.onChange();\n\n        let mainbox = this.$refs.mainbox;\n        this.magnet = new Magnet({\n            span: 10, // px\n            features: ['middle', 'center'],\n            render: (x, y) => {\n                this.magnetX = x;\n                this.magnetY = y;\n            },\n            dynamicLayouts: () => {\n                return [this.createMagnetLayout({\n                    left: 0,\n                    top: 0,\n                    width: mainbox.offsetWidth,\n                    height: mainbox.offsetHeight\n                })];\n            }\n        });\n    }\n};\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipImg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipImg.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ClipImg.vue?vue&type=template&id=4b248636&scoped=true&\"\nimport script from \"./ClipImg.vue?vue&type=script&lang=js&\"\nexport * from \"./ClipImg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ClipImg.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./ClipImg.vue?vue&type=style&index=1&id=4b248636&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4b248636\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('NativeVideo',{ref:\"video\",on:{\"resize\":function($event){return _vm.$emit('resize')},\"meta\":function($event){_vm.meta($event);_vm.$emit('render')},\"playing\":function($event){return _vm.$emit('playing',$event)},\"finished\":function($event){return _vm.$emit('finished')},\"render\":function($event){_vm.render($event);_vm.$emit('render')},\"seekdone\":function($event){_vm.seekdone($event);_vm.$emit('seekdone')},\"timeupdate\":function($event){return _vm.$emit('timeupdate',$event)}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"native-video-main\",class:{show:_vm.showscreen}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"native-video-main\" :class=\"{show:showscreen}\">\n    </div>\n</template>\n<style scoped>\n.native-video-main{\n    background:black!important\n}\n.native-video-main.show{\n    background:transparent!important\n}\n</style>\n<script>\n/***\n * 输入：src, play, pause, seek\n * \n * 输出：position, duration\n * \n * 事件：meta, timeupdate\n */\nimport cordovaModel from \"@/model/CordovaModel\"\nimport ResizeObserver from 'resize-observer-polyfill'\n\nlet EventID = {\n    Meta: 1,\n    Render: 2,\n    Timeupdate: 3,\n    Finished: 4,\n    Error: 5,\n    End: 6,\n    SeekDone: 7,\n    toString(id){\n        for(let i in EventID){\n            if(EventID[i] == id)\n                return i\n        }\n    },\n};\n\nlet FFPlay = {\n    rect(){},\n    play(){},\n    running(){},\n    pause(){},\n    stop(){},\n    seek(){},\n    duration(){},\n    position(){},\n    mute(){},\n    thumb(){},\n    refresh(){},\n    setEventCallback(){}\n}\n\nexport default {\n    data(){\n        return {\n            cmd: \"\",\n            ready: false,\n            playing: false,\n            loaded: false,\n            keep_screen: false,\n            lastPosition: 0,\n            timeupdateTmr: null\n        }\n    },\n    computed:{\n        showscreen(){\n            return true||this.loaded || this.keep_screen;\n        }\n    },\n    watch:{\n        playing(p){\n            this.$emit(\"playing\", p);\n        },\n    },\n    methods:{\n        async resize(){\n            let rect = this.$el.getBoundingClientRect();\n            await this.rect(rect);\n            this.$emit('resize');\n        },\n        async rect(rect) {\n            if(!rect.width || !rect.height)return;\n\n            window.console.log(\"ffplay rect: \"+[rect.x, rect.y, rect.width, rect.height].join(\",\"))\n            await new Promise(FFPlay.rect.bind(null,rect.x, rect.y, rect.width, rect.height));\n            \n            // android: 修改尺寸后，刷新有问题，原因不明，这里强制再刷新一次，临时解决\n            await new Promise(o=>setTimeout(o,150));\n            await new Promise(FFPlay.refresh.bind(null));\n        },\n        async load(cmd, keep_screen) {\n            await this.stop();\n            this.ready = false;\n            this.playing = false;\n            this.loaded = false;\n            this.keep_screen = cmd && keep_screen;\n            this.cmd = cmd;\n            FFPlay.setEventCallback(this.onEvent);\n            if(cmd){\n                await new Promise(\n                    FFPlay.play.bind(null,cmd));\n\n                await new Promise((o,x)=>{\n                    let timeout = 5*1000;\n                    let i = setInterval(()=>{\n                        timeout -= 100;\n                        if(timeout<0){\n                            clearInterval(i);\n                            x();\n                        }\n                        else if(this.loaded){\n                            clearInterval(i);\n                            o();\n                        }\n                    },100)\n                })\n            }\n        },\n        async running() {\n            return await new Promise(\n                FFPlay.running\n            );\n        },\n        resume() {\n            this.playing = true;\n            FFPlay.mute(0);\n            FFPlay.resume();\n        },\n        pause() {\n            this.playing = false;\n            FFPlay.mute(1);\n            FFPlay.pause();\n        },\n        async stop() {\n            this.playing = false;\n            return await new Promise(\n                FFPlay.stop);\n        },\n        async seek(pos) {\n            if(pos == -1)\n                pos = await this.duration();\n\n            this.lastPosition = pos;\n            this.playing = false;\n            FFPlay.seek(pos);\n        },\n        async duration() {\n            return await new Promise(\n                FFPlay.duration);\n        },\n        async position() {\n            return await new Promise(\n                FFPlay.position);\n        },\n        onResume(){\n            FFPlay.refresh();\n        },\n        async onEvent(event) {\n            window.console.log(\"got player event: \"+ EventID.toString(event));\n            switch(event){\n                case EventID.Meta:{\n\n                    //先让 rect 生效，然后再加载播放器\n                    // await new Promise( o=>setTimeout(o, 500));\n                    // FFPlay.refresh();\n                    this.$emit(\"meta\",{\n                        duration: await this.duration()\n                    });\n                } break;\n                case EventID.Render:{\n                    if(!this.loaded){\n                        await new Promise( o=>setTimeout(o, 100));\n                        await this.resize();\n                        this.loaded = true;\n                    }\n                    this.$emit(\"render\");\n                } break;\n                case EventID.Timeupdate:{\n                    // this.$emit(\"timeupdate\",\n                    //     await this.position()\n                    // );\n                } break;\n                case EventID.Finished:{\n                    this.$emit(\"finished\");\n                } break;\n                case EventID.End:{\n                    this.loaded = false;\n                    this.$emit(\"end\");\n                } break;\n                case EventID.SeekDone:{\n                    this.$emit(\"seekdone\");\n                } break;\n\n            }\n        }\n    },\n    mounted(){\n        if(cordovaModel.isCordova()) {\n            FFPlay = UGCApp.ffplay;\n            this.resize();\n\n            document.addEventListener(\"resume\", this.onResume, false);\n        }\n\n        this._resizeOb = new ResizeObserver(() => {\n            this.resize();\n        });\n\n        this._resizeOb.observe(this.$el);\n\n    },\n    beforeDestroy(){\n        document.removeEventListener(\"resume\", this.onResume, false);\n        this._resizeOb.disconnect();\n    }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NativeVideo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NativeVideo.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NativeVideo.vue?vue&type=template&id=dee4937c&scoped=true&\"\nimport script from \"./NativeVideo.vue?vue&type=script&lang=js&\"\nexport * from \"./NativeVideo.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NativeVideo.vue?vue&type=style&index=0&id=dee4937c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dee4937c\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <NativeVideo \n        ref=\"video\" \n        @resize=\"$emit('resize')\"\n        @meta=\"meta($event);$emit('render')\"\n        @playing=\"$emit('playing',$event)\"\n        @finished=\"$emit('finished')\"\n        @render=\"render($event);$emit('render')\"\n        @seekdone=\"seekdone($event);$emit('seekdone')\"\n        @timeupdate=\"$emit('timeupdate',$event)\" />\n\n</template>\n<style scoped>\n\n</style>\n<script>\nimport Editlist from \"@/model/Editlist\";\nimport NativeVideo from \"@/components/NativeVideo\";\nimport UGCRes from \"@/model/UGCResourceManager\";\n// import throttle from \"@/assets/js/throttle\";\nimport throttle from \"lodash.throttle\";\n\nexport default {\n    components:{NativeVideo},\n    props:[\n        \"editlist\",\n        \"pause\",\n        // \"time_sec\",\n        \"postermode\"\n    ],\n    data(){\n        return {\n            seeking:false,\n            throttle_ing:false\n        }\n    },\n    watch:{\n        pause(p){\n            if(p)\n                this.$refs.video.pause();\n            else\n                this.$refs.video.resume();\n        },\n        // time_sec(sec){\n        //     this.$refs.video.seek(sec);\n        // }\n    },\n    methods:{\n        meta(){},\n        doSeek:throttle(function(sec){\n            window.console.log(`event seek to ${sec}`);\n            this.$refs.video.seek(sec);\n            this.throttle_ing = false;\n        },1000),\n        seek(sec){\n            this.seeking = true;\n            this.throttle_ing = true;\n            this.doSeek(sec);\n            Editlist.editlist.time_sec = sec;\n        },\n        seekdone(){\n            // window.console.log(this.doSeek);\n            window.console.log(`event throttle_ing: ${this.throttle_ing}`);\n            if(!this.throttle_ing)\n                this.seeking = false;\n        },\n        async render(){\n            if(!Editlist.editlist.poster.url){\n\n                await new Promise(UGCApp.ffplay.refresh);\n                // window.console.log(\"refresh: \"+ret)\n                \n                let dir = await UGCRes.getTempFolder();\n                \n                let des = dir.nativeURL + \"/poster.jpg\";\n\n                await new Promise(UGCApp.ffplay.thumb.bind(null, des.replace(\"file://\",\"\")));\n\n                Editlist.editlist.poster.url = des + \"?\" + Math.random();\n            }\n        },\n        \n        async reload(keep_screen){\n            Editlist.editlist = this.editlist;\n            if(!Editlist.editlist.transform_source)\n                try{\n                    window.console.log(\"get transfromsource\")\n                    Editlist.editlist.transform_source = await UGCRes.getTransformSource();\n                    window.console.log`get transfromsource done:${Editlist.editlist.transform_source}`\n                    window.transform_source = Editlist.editlist.transform_source;\n                } catch(e){\n                    //get error\n                    window.console.log(e)\n                }\n\n            if(this.postermode)\n                await this.$refs.video.load(Editlist.getPosterPlayerParam(), keep_screen);\n            else\n                await this.$refs.video.load(Editlist.getPlayerParam(), keep_screen);\n        }\n    }\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewPlayer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PreviewPlayer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PreviewPlayer.vue?vue&type=template&id=631d11ce&scoped=true&\"\nimport script from \"./PreviewPlayer.vue?vue&type=script&lang=js&\"\nexport * from \"./PreviewPlayer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"631d11ce\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('PosterMakerTop',{attrs:{\"saving\":_vm.saving},on:{\"close\":_vm.close,\"save\":_vm.save}}),_c('div',{staticClass:\"title\"},[_vm._v(\" 选择封面 \")]),_c('div',{ref:\"mainBox\",staticClass:\"main-box\"},[_c('PreviewPlayer',{ref:\"preview\",staticClass:\"main-video\",attrs:{\"pause\":true,\"editlist\":_vm.editlist,\"postermode\":true},on:{\"render\":_vm.onPreviewLoaded}}),_c('ClipImg',{ref:\"overlayEditor\",staticClass:\"overlay-box\",attrs:{\"postermode\":true,\"edit_filter\":function (e) { return e.type == _vm.Const.Overlay.Type.Text; },\"overlays_in\":_vm.editlist.poster.overlay,\"mosics_in\":[],\"time_sec\":_vm.editlist.time_sec},on:{\"change\":_vm.overlayChange,\"edit\":_vm.overlayEdit}})],1),_c('div',{staticClass:\"toolBox\"},[_c('ClipTimeline',{ref:\"timeline\",attrs:{\"timelines_in\":_vm.editlist.timelines,\"playing\":!_vm.player.pause,\"postermode\":true},on:{\"timeChange\":_vm.timeChange}}),_c('PosterToolTab',{on:{\"select\":_vm.tabSelect}}),_c('ToolDialog',{ref:\"toolDlg\",attrs:{\"postermode\":true,\"editlist\":_vm.editlist},on:{\"close\":_vm.mainBoxResized,\"change\":_vm.toolValueChange}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main-title\"},[_c('mu-button',{attrs:{\"large\":\"\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.$emit('close')}}},[_c('mu-icon',{attrs:{\"color\":\"white\",\"size\":\"36\",\"value\":\"close\"}})],1),_c('div',{staticStyle:{\"width\":\"100%\",\"text-align\":\"center\"}}),_c('mu-button',{attrs:{\"color\":\"red\",\"small\":\"\",\"round\":\"\",\"disabled\":_vm.saving},on:{\"click\":function($event){return _vm.$emit('save')}}},[_vm._v(\" \"+_vm._s(_vm.saving?\"保存中...\":\"保存\")+\" \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"main-title\">\n        <mu-button @click=\"$emit('close')\" large icon>\n            <mu-icon color=\"white\" size=\"36\" value=\"close\" />\n        </mu-button>\n        <div style=\"width:100%;text-align:center\"></div>\n\n        <mu-button @click=\"$emit('save')\" color=\"red\" small round :disabled=\"saving\">\n            {{saving?\"保存中...\":\"保存\"}}\n        </mu-button>\n    </div>\n</template>\n<style lang=\"less\" scoped>\n.main-title{\n    display: flex;\n    color:white;\n    align-items: center;\n    padding-right:20px\n}\n.title-text{\n    position:absolute;\n    width:100%;height:100%;\n    text-align: center;\n    \n}\n\n</style>\n<script>\n// import Editlist from \"@/model/Editlist\";\n\nexport default {\n    props:[\"saving\"],\n    data(){\n        return {\n        }\n    },\n    methods:{\n    }\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMakerTop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMakerTop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PosterMakerTop.vue?vue&type=template&id=7f26cbd2&scoped=true&\"\nimport script from \"./PosterMakerTop.vue?vue&type=script&lang=js&\"\nexport * from \"./PosterMakerTop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PosterMakerTop.vue?vue&type=style&index=0&id=7f26cbd2&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7f26cbd2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"poster-tab-main\"},[_c('mu-button',{attrs:{\"color\":\"red\",\"small\":\"\",\"round\":\"\"},on:{\"click\":function($event){return _vm.$emit('select',_vm.TabID.AddLocalImage)}}},[_c('mu-icon',{attrs:{\"value\":\"image\",\"left\":\"\"}}),_vm._v(\"贴图 \")],1),_c('mu-button',{attrs:{\"color\":\"red\",\"small\":\"\",\"round\":\"\"},on:{\"click\":function($event){return _vm.$emit('select',_vm.TabID.AddText)}}},[_c('mu-icon',{attrs:{\"value\":\"textsms\",\"left\":\"\"}}),_vm._v(\"贴字 \")],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"poster-tab-main\">\n<!--         <mu-button @click=\"$emit('select',TabID.AddImage)\" color=\"red\" small round>\n            <mu-icon value=\"image\" left/>贴图\n        </mu-button>\n -->\n         <mu-button @click=\"$emit('select',TabID.AddLocalImage)\" color=\"red\" small round>\n            <mu-icon value=\"image\" left/>贴图\n        </mu-button>\n        <mu-button @click=\"$emit('select',TabID.AddText)\" color=\"red\" small round>\n            <mu-icon value=\"textsms\" left/>贴字\n        </mu-button>\n    </div>\n</template>\n<style scoped>\n.poster-tab-main{\n    display: flex;\n    justify-content: space-evenly;\n    padding: 10px;\n}\n</style>\n<script>\nimport ToolTab from \"@/views/Bottom/ToolTab\";\n\nexport default {\n    data(){\n        return {\n            TabID: ToolTab.TabID\n        }\n    }\n}\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterToolTab.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterToolTab.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PosterToolTab.vue?vue&type=template&id=2dc27ce7&scoped=true&\"\nimport script from \"./PosterToolTab.vue?vue&type=script&lang=js&\"\nexport * from \"./PosterToolTab.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PosterToolTab.vue?vue&type=style&index=0&id=2dc27ce7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2dc27ce7\",\n  null\n  \n)\n\nexport default component.exports","<template>\n<div class=\"main\">\n    <PosterMakerTop @close=\"close\" @save=\"save\" :saving=\"saving\" />\n    <div class=\"title\"> 选择封面 </div>\n    <div ref=\"mainBox\" class=\"main-box\">\n        <PreviewPlayer \n            ref=\"preview\" \n            :pause=\"true\" \n            :editlist=\"editlist\" \n            :postermode=\"true\" \n            @render=\"onPreviewLoaded\" \n            class=\"main-video\" />\n\n        <ClipImg ref=\"overlayEditor\" \n            :postermode=\"true\" \n            :edit_filter=\"e => e.type == Const.Overlay.Type.Text\"\n            @change=\"overlayChange\"\n            @edit=\"overlayEdit\"\n            :overlays_in=\"editlist.poster.overlay\"\n            :mosics_in=\"[]\"\n            :time_sec=\"editlist.time_sec\"\n            class=\"overlay-box\" />\n    </div>\n\n    <div class=\"toolBox\" >\n        <ClipTimeline ref=\"timeline\" \n            :timelines_in=\"editlist.timelines\"\n            :playing=\"!player.pause\"\n            :postermode=\"true\"\n            @timeChange=\"timeChange\" \n            style=\"\" />\n        <PosterToolTab  @select=\"tabSelect\"/>\n        <ToolDialog :postermode=\"true\" :editlist=\"editlist\" @close=\"mainBoxResized\" @change=\"toolValueChange\" ref=\"toolDlg\"/>\n    </div>\n</div>\n</template>\n\n<style lang=\"less\" scoped>\n.title {\n    color:white;\n    text-align:center;\n\n}\n.spin {\n    background: rgba(0, 0, 0, 0.8);\n    color: white;\n}\n\n.main {\n    background-color: #333;\n    background: transparent;\n    position: relative;\n    justify-content: center;\n    flex-direction: row;\n    flex-wrap: wrap;\n    overflow: hidden;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-flow: column;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    padding-bottom:20px\n}\n\n.main-box {\n    background-color: #333;\n    background: transparent;\n    width: 100%;\n    position: relative;\n    overflow: hidden;\n    flex: auto;\n    display: flex;\n    height: 100%;\n    align-items: center;\n    justify-content: center;\n}\n\n.main-video {\n    width:100%;\n    height:100%;\n    /* display: flex; */\n    /* height: 100%; */\n}\n.toolBox {\n    width: 100%;\n    background: rgba(50, 50, 50, 0.9);\n    position: relative;\n\n    &>* {\n        width: 100%;\n    }\n}\n\n.overlay-box {\n    width:100%;\n    height:100%;\n    position: absolute;\n    left:0;\n    top:0;\n}\n\n</style>\n\n<script>\nimport PosterMakerTop from \"@/views/Top/PosterMakerTop\";\nimport ClipTimeline from \"@/views/Bottom/ClipTimeline\";\nimport ClipImg from \"@/views/Editor/ClipImg\";\nimport PreviewPlayer from \"@/views/PreviewPlayer\";\nimport PosterToolTab from \"@/views/Bottom/PosterToolTab\";\nimport ToolDialog from \"@/views/Bottom/ToolDialog\";\nimport ToolTab from \"@/views/Bottom/ToolTab\";\nimport Const from \"@/const\";\nimport UGCResourceManager from \"@/model/UGCResourceManager\";\n\nexport default {\n    props:[\"editlist\"],\n    components: {\n        PosterMakerTop,\n        ClipTimeline,\n        ClipImg,\n        PreviewPlayer,\n        PosterToolTab,\n        ToolDialog\n    },\n    data() {\n        return {\n            Const,\n            player:{\n                // style:{\n                //     left:0,top:0,width:0,height:0\n                // },\n                pause:true,\n                // time_sec:0\n            },\n            saving:false,\n            waitReload:false,\n            importProgress: -1,\n            \n        };\n    },\n    methods: {\n        async save(){\n            if(this.$refs.overlayEditor.hasActive || this.waitReload){\n                this.saving = true;\n                if(this.$refs.overlayEditor.hasActive) {\n                    this.$refs.overlayEditor.blur();\n                    if(!this.waitReload)\n                        await this.reloadPlayer();\n                }\n                await new Promise((o,x)=>{\n                    let tmr = setInterval(()=>{\n                        if(!this.waitReload){\n                            clearInterval(tmr);\n                            clearTimeout(timeout);\n                            o();\n                        }\n                    },100)\n                    let timeout = setTimeout(()=>{\n                        clearInterval(tmr);\n                        x();\n                    },5000)\n                });\n                this.saving = false;\n            }\n            \n            let dir = await UGCResourceManager.getTempFolder();\n            \n            // 撤销的需求，不能覆盖原来的文件\n            let fileName = \"poster_\"+Math.random().toString(16).replace(\"0.\", \"\")+\".jpg\";\n\n            let des = dir.nativeURL + \"/\" + fileName;\n\n            try {\n                await new Promise(UGCApp.ffplay.thumb.bind(null, des.replace(\"file://\",\"\")));\n    \n                this.editlist.poster.url = des + \"?\" + Math.random();\n                this.editlist.poster.rotate = 0;\n            \n                this.$emit(\"close\");\n    \n                this.editlist.createOperateHistory(Const.Operate.PosterModify.Type);\n            } catch(e) {\n                this.$mResToast.error(\n                    \"截取封面失败\"\n                );\n            }\n        },\n        async close(){\n            await new Promise( UGCApp.ffplay.stop );\n            this.$emit('close')\n        },\n        onPreviewLoaded(){\n            this.waitReload = false;\n        },\n        async reloadPlayer(dont_keep_screen){\n            this.waitReload = true;\n            await this.$refs.preview.reload(!dont_keep_screen);\n        },\n        timeChange(e) {\n            window.console.log(\"seek:\" + e.time_sec)\n            this.player.pause = true;\n            this.$refs.preview.seek(e.time_sec);\n            this.$refs.timeline.seek(e.time_sec);\n            this.editlist.time_sec = e.time_sec;\n        },\n        async overlayChange() {\n            await this.reloadPlayer();\n        },\n        overlayEdit(overlay){\n            this.$refs.toolDlg.show(ToolTab.TabID.AddText, {\n                height: \"auto\",\n                overlay: overlay,\n                operateToolTabId: ToolTab.TabID.ToolSettings\n            });\n        },\n        // overlayActive(e) {\n        //     // Editlist.editlist.update_overlay(e);\n        // },\n        tabSelect(tabID){\n            if(tabID == ToolTab.TabID.AddLocalImage) {\n                this.pickImg();\n            } else {\n                this.$refs.toolDlg.show(tabID);\n            }\n        },\n        toolValueChange(data){\n            if(data){\n                if(data.overlay){\n                    data.overlay.offset_sec = 0;\n                    data.overlay.end_sec = this.editlist.total_sec;\n                    this.$refs.overlayEditor.active(data.overlay);\n                    return;\n                }\n            }\n            this.reloadPlayer();\n        },\n        async pickImg() {\n            // native cordova.camera plugin 需要修正，否则会返回 content:// 路径无法读取\n            // CameraLauncher.java::processResultFromGallery::707 需要修正为返回 fileLocation\n            try {\n                let file = await new Promise((o, x) =>\n                    navigator.camera.getPicture(o, x, {\n                        sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n                        allowEdit: false,\n                        correctOrientation: true,\n                        mediaType: Camera.MediaType.PICTURE\n                    })\n                );\n\n                // window.console.log(file);\n                if (!file) {\n                    // 打开文件选择器后视频会黑掉\n                    this.reloadPlayer();\n                    return;\n                }\n\n                let overlay = this.editlist.add_overlay({\n                    url: file,\n                    type: Const.Overlay.Type.Image\n                }, true);\n                this.toolValueChange({ overlay });\n                // 打开文件选择器后视频会黑掉\n                this.reloadPlayer();\n            } catch (error) {\n                // 打开文件选择器后视频会黑掉\n                this.reloadPlayer();\n            }\n        },\n        mainBoxResized() {\n            this.$nextTick(() => {\n                this.$refs.overlayEditor.updateUI();\n            });\n        }\n    },\n    async mounted(){\n        this.$nextTick(() => this.reloadPlayer(true));\n        // this.updatePlayerRect();\n        document.addEventListener(\"backbutton\", this.close, false);\n    },\n    async beforeDestroy() {\n        document.removeEventListener(\"backbutton\", this.close, false);\n    }\n\n}\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMaker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMaker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PosterMaker.vue?vue&type=template&id=2955d106&scoped=true&\"\nimport script from \"./PosterMaker.vue?vue&type=script&lang=js&\"\nexport * from \"./PosterMaker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PosterMaker.vue?vue&type=style&index=0&id=2955d106&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2955d106\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"ending-main\"},[_c('PosterMakerTop',{on:{\"close\":_vm.close,\"save\":function($event){_vm.rendering=true}}}),_c('div',{staticClass:\"title\"},[_vm._v(\"设置片尾\")]),_c('div',{ref:\"mainBox\",staticClass:\"main-box\"},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('div',{staticClass:\"avatar\",on:{\"click\":_vm.onAvatarClick}},[(!_vm.avatarUrl)?_c('span',{staticClass:\"material-icons\"},[_vm._v(\"account_circle\")]):_c('img',{attrs:{\"src\":_vm.avatarUrl},on:{\"error\":_vm.avatarLoadError}}),_c('div',{staticClass:\"text\"},[_vm._v(\"编辑头像\")])])]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.ending.nickName),expression:\"ending.nickName\"}],attrs:{\"placeholder\":\"请输入昵称信息\",\"maxlength\":\"18\"},domProps:{\"value\":(_vm.ending.nickName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.ending, \"nickName\", $event.target.value)}}})]),_c('div',{staticClass:\"input\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.ending.desc),expression:\"ending.desc\"}],attrs:{\"placeholder\":\"请输入描述信息（可为空）\",\"maxlength\":\"23\"},domProps:{\"value\":(_vm.ending.desc)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.ending, \"desc\", $event.target.value)}}})])]),(_vm.rendering)?_c('EndingRender',{ref:\"render\",attrs:{\"avatar-file\":_vm.ending.avatarFile,\"nick-name\":_vm.ending.nickName || _vm.nickNamePlaceholder,\"desc\":_vm.ending.desc},on:{\"rendered\":_vm.save,\"error\":_vm.renderError}}):_vm._e(),(_vm.cropping)?_c('Crop',{ref:\"crop\",attrs:{\"src\":_vm.avatarUrl,\"ratio\":1},on:{\"close\":function($event){_vm.cropping = false},\"save\":_vm.cropSave}}):_vm._e(),_c('mu-bottom-sheet',{attrs:{\"overlay-close\":true,\"esc-press-close\":true,\"open\":_vm.isMenuOpen},on:{\"update:open\":function($event){_vm.isMenuOpen=$event}}},[_c('mu-list',{on:{\"item-click\":function($event){_vm.isMenuOpen=false}}},[_c('mu-sub-header',[_vm._v(\"选择\")]),_c('mu-list-item',{attrs:{\"button\":\"\"},on:{\"click\":_vm.pickImage}},[_c('mu-list-item-action',[_c('mu-icon',{attrs:{\"value\":\"folder_open\",\"color\":\"orange\"}})],1),_c('mu-list-item-title',{staticStyle:{\"color\":\"#f44336\"}},[_vm._v(\"更换一张照片\")])],1),_c('mu-list-item',{attrs:{\"button\":\"\"},on:{\"click\":_vm.deleteAvatar}},[_c('mu-list-item-action',[_c('mu-icon',{attrs:{\"value\":\"delete\",\"color\":\"orange\"}})],1),_c('mu-list-item-title',[_vm._v(\"删除\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"crop-main\"},[_c('PosterMakerTop',{on:{\"close\":_vm.close,\"save\":_vm.save}}),_c('div',{staticClass:\"title\"},[_vm._v(\"图片裁剪\")]),_c('div',{ref:\"mainBox\",staticClass:\"main-box\"},[_c('VueCropper',{ref:\"cropper\",style:({background: 'transparent'}),attrs:{\"img\":_vm.src,\"outputSize\":1,\"outputType\":\"png\",\"autoCrop\":true,\"fixed\":true,\"fixedNumber\":_vm.fixedNumber,\"full\":true,\"original\":true,\"fixedBox\":true,\"canMoveBox\":false,\"mode\":\"cover\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"crop-main\">\r\n        <PosterMakerTop\r\n            @close=\"close\"\r\n            @save=\"save\"\r\n        />\r\n        <div class=\"title\">图片裁剪</div>\r\n        <div\r\n            ref=\"mainBox\"\r\n            class=\"main-box\"\r\n        >\r\n            <VueCropper\r\n                ref=\"cropper\"\r\n                :style=\"{background: 'transparent'}\"\r\n                :img=\"src\"\r\n                :outputSize=\"1\"\r\n                outputType=\"png\"\r\n                :autoCrop=\"true\"\r\n                :fixed=\"true\"\r\n                :fixedNumber=\"fixedNumber\"\r\n                :full=\"true\"\r\n                :original=\"true\"\r\n                :fixedBox=\"true\"\r\n                :canMoveBox=\"false\"\r\n                mode=\"cover\"\r\n            />\r\n        </div>\r\n    </div>\r\n</template>\r\n<style lang=\"less\" scoped>\r\n.title {\r\n    color: white;\r\n    text-align: center;\r\n}\r\n\r\n.crop-main {\r\n    position: absolute;\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    background-color: #333;\r\n    width: 100%;\r\n    height: 100%;\r\n    padding-bottom: 20px;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n.main-box {\r\n    flex: 1;\r\n}\r\n</style>\r\n<script>\r\nimport { VueCropper } from \"vue-cropper\";\r\nimport PosterMakerTop from \"@/views/Top/PosterMakerTop\";\r\n\r\nexport default {\r\n    props: [\"src\", \"ratio\"],\r\n    components: {\r\n        PosterMakerTop,\r\n        VueCropper\r\n    },\r\n    computed: {\r\n        fixedNumber() {\r\n            return [this.ratio, 1];\r\n        }\r\n    },\r\n    methods: {\r\n        close() {\r\n            this.$emit(\"close\");\r\n        },\r\n        async save() {\r\n            let cropper = this.$refs.cropper;\r\n            let blob = await new Promise(cropper.getCropBlob.bind(cropper));\r\n            this.$emit(\"save\", blob);\r\n        }\r\n    },\r\n    mounted() {\r\n        // window.console.log(\"crop src:\" + this.src);\r\n    }\r\n};\r\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Crop.vue?vue&type=template&id=21603386&scoped=true&\"\nimport script from \"./Crop.vue?vue&type=script&lang=js&\"\nexport * from \"./Crop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Crop.vue?vue&type=style&index=0&id=21603386&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"21603386\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mask\"},[_c('div',{staticClass:\"loading\"},[_c('mu-icon',{staticClass:\"loading-icon\",attrs:{\"value\":\"refresh\",\"size\":\"30\"}}),_vm._v(\" 生成片尾中 \")],1),_c('canvas',{ref:\"canvas\",staticClass:\"render\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"mask\">\r\n        <div class=\"loading\">\r\n            <mu-icon\r\n                value=\"refresh\"\r\n                class=\"loading-icon\"\r\n                size=\"30\"\r\n            ></mu-icon>\r\n            生成片尾中\r\n        </div>\r\n        <canvas\r\n            class=\"render\"\r\n            ref=\"canvas\"\r\n        ></canvas>\r\n    </div>\r\n</template>\r\n<style scoped>\r\n.mask {\r\n    position: absolute;\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    justify-content: center;\r\n    align-items: flex-end;\r\n    display: flex;\r\n    background: rgba(0, 0, 0, 0.7);\r\n}\r\n.render {\r\n    display: none;\r\n    width: 320px;\r\n    height: 320px;\r\n}\r\n\r\n.loading {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    color: #fff;\r\n    text-shadow: 0 0 30px #000;\r\n    transform: translate(-50%, -50%);\r\n}\r\n.loading-icon {\r\n    animation: loading 0.3s infinite linear;\r\n    opacity: 0.9;\r\n    vertical-align: -8px;\r\n}\r\n\r\n@keyframes loading {\r\n    from {\r\n        transform: rotate(0deg);\r\n    }\r\n    to {\r\n        transform: rotate(360deg);\r\n    }\r\n}\r\n</style>\r\n<script>\r\nimport ClipModel from \"@/model/ClipModel\";\r\nimport UGCResource from \"@/model/UGCResourceManager\";\r\n\r\nlet DefaultSize = 1000;\r\nlet DefaultFontSize = 60;\r\nlet DefaultFont = \"黑体\";\r\n\r\nexport default {\r\n    props: [\"avatarFile\", \"nickName\", \"desc\"],\r\n    methods: {\r\n        async render() {\r\n            let avatarSize = 5 * DefaultFontSize;\r\n            let avatarOpt = {\r\n                marginTop: -DefaultFontSize * 1.5 - avatarSize / 2,\r\n                size: avatarSize,\r\n                file: this.avatarFile\r\n            };\r\n            let nickNameOpt = {\r\n                marginTop: 0,\r\n                fontSize: DefaultFontSize,\r\n                color: \"white\",\r\n                font: DefaultFont,\r\n                content: this.nickName\r\n            };\r\n            let descOpt = {\r\n                marginTop: DefaultFontSize * 1.5,\r\n                fontSize: DefaultFontSize * 0.8,\r\n                color: \"#888\",\r\n                font: DefaultFont,\r\n                content: this.desc\r\n            };\r\n\r\n            try {\r\n                this.setupCanvas();\r\n                this.drawBg();\r\n                if (this.avatarFile) {\r\n                    await this.drawImage(avatarOpt);\r\n                }\r\n                if (this.nickName) {\r\n                    this.drawText(nickNameOpt);\r\n                }\r\n                if (this.desc) {\r\n                    this.drawText(descOpt);\r\n                }\r\n                this.$emit(\"rendered\");\r\n            } catch (error) {\r\n                this.$emit(\"error\", error);\r\n            }\r\n        },\r\n        drawBg() {\r\n            // let ctx = this.canvasCtx;\r\n            // ctx.save();\r\n            // ctx.fillStyle = \"black\";\r\n            // ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\r\n            // ctx.restore();\r\n        },\r\n        drawText(opt) {\r\n            let ctx = this.canvasCtx;\r\n            ctx.save();\r\n            ctx.font = opt.fontSize + \"px \" + opt.font;\r\n            ctx.fillStyle = opt.color;\r\n\r\n            let centerX = this.canvas.width / 2;\r\n            let centerY = this.canvas.height / 2;\r\n            let x = centerX;\r\n            let y = centerY + opt.marginTop;\r\n            let content = opt.content;\r\n\r\n            ctx.textAlign = \"center\";\r\n            ctx.textBaseline = \"middle\";\r\n            ctx.fillText(content, x, y);\r\n            ctx.restore();\r\n        },\r\n        async drawImage(opt) {\r\n            let ctx = this.canvasCtx;\r\n            let centerX = this.canvas.width / 2;\r\n            let centerY = this.canvas.height / 2;\r\n            let image = await this.loadImage(opt.file);\r\n            let imageSize = opt.size;\r\n            let imageHeightScaled = 0;\r\n            let imageWidthScaled = 0;\r\n            let x = centerX;\r\n            let y = centerY + opt.marginTop;\r\n\r\n            if (image.naturalHeight > image.naturalWidth) {\r\n                imageWidthScaled = imageSize;\r\n                imageHeightScaled =\r\n                    (imageSize / image.naturalWidth) * image.naturalHeight;\r\n            } else {\r\n                imageWidthScaled =\r\n                    (imageSize / image.naturalHeight) * image.naturalWidth;\r\n                imageHeightScaled = imageSize;\r\n            }\r\n            ctx.save();\r\n\r\n            ctx.beginPath();\r\n            ctx.fillStyle = \"black\"; \r\n            ctx.arc(x, y, imageSize / 2, 0, Math.PI * 2);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n            //只显示和园重合的像素\r\n            ctx.globalCompositeOperation = \"source-in\";\r\n            ctx.drawImage(\r\n                image,\r\n                x - imageWidthScaled / 2,\r\n                y - imageHeightScaled / 2,\r\n                imageWidthScaled,\r\n                imageHeightScaled\r\n            );\r\n\r\n            ctx.restore();\r\n        },\r\n        async loadImage(file) {\r\n            return new Promise(async (o, x) => {\r\n                let url = await ClipModel.Util.getCdvUrl(file);\r\n                if (location.protocol != \"cdvfile:\") {\r\n                    url = await UGCResource.assetReadAsDataUrl(url);\r\n                }\r\n                let image = new Image();\r\n                image.onload = o.bind(image, image);\r\n                image.onerror = x.bind(image, \"load image fail\");\r\n                image.src = url;\r\n            });\r\n        },\r\n        setupCanvas() {\r\n            this.canvas.width = DefaultSize;\r\n            this.canvas.height = DefaultSize;\r\n        },\r\n        getDataPng() {\r\n            return this.$refs.canvas.toDataURL();\r\n        },\r\n        async getBlob() {\r\n            let blob = null;\r\n            blob = await new Promise(o => {\r\n                this.$refs.canvas.toBlob(o);\r\n            });\r\n            return blob;\r\n        }\r\n    },\r\n    mounted() {\r\n        this.canvas = this.$refs.canvas;\r\n        this.canvasCtx = this.$refs.canvas.getContext(\"2d\");\r\n        this.render();\r\n    }\r\n};\r\n</script>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingRender.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingRender.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EndingRender.vue?vue&type=template&id=37a257de&scoped=true&\"\nimport script from \"./EndingRender.vue?vue&type=script&lang=js&\"\nexport * from \"./EndingRender.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EndingRender.vue?vue&type=style&index=0&id=37a257de&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"37a257de\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"ending-main\">\n        <PosterMakerTop\n            @close=\"close\"\n            @save=\"rendering=true\"\n        />\n        <div class=\"title\">设置片尾</div>\n        <div\n            ref=\"mainBox\"\n            class=\"main-box\"\n        >\n            <div style=\"text-align:center\">\n                <div\n                    class=\"avatar\"\n                    @click=\"onAvatarClick\"\n                >\n                    <span\n                        v-if=\"!avatarUrl\"\n                        class=\"material-icons\"\n                    >account_circle</span>\n                    <img\n                        :src=\"avatarUrl\"\n                        v-else\n                        @error=\"avatarLoadError\"\n                    />\n                    <div class=\"text\">编辑头像</div>\n                </div>\n            </div>\n            <div class=\"input\">\n                <input\n                    v-model=\"ending.nickName\"\n                    placeholder=\"请输入昵称信息\"\n                    maxlength=\"18\"\n                />\n            </div>\n            <div class=\"input\">\n                <input\n                    v-model=\"ending.desc\"\n                    placeholder=\"请输入描述信息（可为空）\"\n                    maxlength=\"23\"\n                />\n            </div>\n        </div>\n        <EndingRender\n            v-if=\"rendering\"\n            ref=\"render\"\n            @rendered=\"save\"\n            @error=\"renderError\"\n            :avatar-file=\"ending.avatarFile\"\n            :nick-name=\"ending.nickName || nickNamePlaceholder\"\n            :desc=\"ending.desc\"\n        />\n        <Crop\n            v-if=\"cropping\"\n            ref=\"crop\"\n            @close=\"cropping = false\"\n            @save=\"cropSave\"\n            :src=\"avatarUrl\"\n            :ratio=\"1\"\n        />\n        <mu-bottom-sheet\n            :overlay-close=\"true\"\n            :esc-press-close=\"true\"\n            :open.sync=\"isMenuOpen\"\n        >\n            <mu-list @item-click=\"isMenuOpen=false\">\n                <mu-sub-header>选择</mu-sub-header>\n                <mu-list-item\n                    button\n                    @click=\"pickImage\"\n                >\n                    <mu-list-item-action>\n                        <mu-icon\n                            value=\"folder_open\"\n                            color=\"orange\"\n                        ></mu-icon>\n                    </mu-list-item-action>\n                    <mu-list-item-title style=\"color:#f44336\">更换一张照片</mu-list-item-title>\n                </mu-list-item>\n                <mu-list-item\n                    button\n                    @click=\"deleteAvatar\"\n                >\n                    <mu-list-item-action>\n                        <mu-icon\n                            value=\"delete\"\n                            color=\"orange\"\n                        ></mu-icon>\n                    </mu-list-item-action>\n                    <mu-list-item-title>删除</mu-list-item-title>\n                </mu-list-item>\n            </mu-list>\n        </mu-bottom-sheet>\n    </div>\n</template>\n\n<style lang=\"less\" scoped>\n.title {\n    color: white;\n    text-align: center;\n}\n\n.ending-main {\n    background-color: #333;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    padding-bottom: 20px;\n}\n\n.avatar {\n    margin-top: 30px;\n    text-align: center;\n    overflow: hidden;\n    display: inline-block;\n\n    .material-icons {\n        font-size: 80px;\n        color: #555;\n    }\n\n    img {\n        border-radius: 50%;\n        width: 80px;\n        height: 80px;\n    }\n    .text {\n        margin-top: 10px;\n        text-align: center;\n        color: #999;\n    }\n}\n\n.input {\n    padding: 20px;\n\n    input {\n        line-height: 1;\n        width: 100%;\n        padding: 12px 12px;\n        border-radius: 6px;\n        background: #444;\n        border: 0;\n        color: #bbb;\n    }\n}\n</style>\n\n<script>\nimport PosterMakerTop from \"@/views/Top/PosterMakerTop\";\nimport Crop from \"@/components/Crop\";\nimport Editlist from \"@/model/Editlist\";\nimport UGCResourceManager from \"@/model/UGCResourceManager\";\nimport ClipModel from \"@/model/ClipModel\";\nimport Const from \"@/const\";\nimport EndingRender from \"@/views/Editor/EndingRender\";\n\nexport default {\n    components: {\n        PosterMakerTop,\n        EndingRender,\n        Crop\n    },\n    data() {\n        return {\n            rendering: false,\n            editlist: null,\n            avatarUrl: null,\n            isMenuOpen: false,\n            cropping: false,\n            nickNamePlaceholder: \"请输入昵称信息\",\n            ending: {\n                avatarFile: \"\",\n                nickName: \"\",\n                desc: \"\"\n            }\n        };\n    },\n    methods: {\n        avatarLoadError() {\n            this.avatarUrl = \"\";\n        },\n        onAvatarClick() {\n            if (this.ending.avatarFile) {\n                this.isMenuOpen = true;\n            } else {\n                this.pickImage();\n            }\n        },\n        deleteAvatar() {\n            this.ending.avatarFile = '';\n            this.ending.url = '';\n            this.avatarUrl = '';\n        },\n        async pickImage() {\n            // native cordova.camera plugin 需要修正，否则会返回 content:// 路径无法读取\n            // CameraLauncher.java::processResultFromGallery::707 需要修正为返回 fileLocation\n            let file = await new Promise((o, x) =>\n                navigator.camera.getPicture(o, x, {\n                    sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n                    allowEdit: false,\n                    mediaType: Camera.MediaType.PICTURE,\n                    destinationType: Camera.DestinationType.NATIVE_URI\n                })\n            );\n\n            if (!file) return;\n\n            this.ending.avatarFile = file;\n            this.loadImage();\n            this.cropping = true;\n        },\n        async save() {\n            this.rendering = false;\n\n            let ending = {\n                avatarFile: this.ending.avatarFile,\n                nickName: this.ending.nickName,\n                desc: this.ending.desc,\n                url: null\n            };\n            UGCResourceManager.saveLastEnding(ending);\n\n            let data = await this.$refs.render.getBlob();\n            let dir = await UGCResourceManager.getTempFolder();\n            let fileName =\n                dir.name + \"/endingImage_\" +\n                Math.random()\n                    .toString(16)\n                    .replace(\"0.\", \"\") +\n                \".png\";\n\n            let outFile = await this.createCacheFile(data, fileName);\n            ending.url = outFile;\n            window.console.log(\"created ending file: \" + outFile);\n\n            let curEnding = Editlist.editlist.timelines.find(e => e.ending);\n            if (curEnding) {\n                Object.assign(curEnding, ending);\n            } else {\n                Editlist.editlist.add_timelines([\n                    {\n                        start_sec: 0,\n                        end_sec: 2,\n                        total_sec: 2,\n                        ending: true,\n                        ...ending\n                    }\n                ]);\n            }\n\n            this.$emit(\"close\");\n\n            Editlist.editlist.createOperateHistory(\n                Const.Operate.EndingModify.Type\n            );\n        },\n        async renderError(error) {\n            this.rendering = false;\n            this.$mResToast.error(\"生成失败\");\n            window.console.error(error);\n        },\n        async close() {\n            await new Promise(UGCApp.ffplay.stop);\n            this.$emit(\"close\");\n        },\n        async loadImage() {\n            if (!this.ending || !this.ending.avatarFile) {\n                return;\n            }\n\n            let url = \"\";\n            try {\n                url = await ClipModel.Util.getCdvUrl(this.ending.avatarFile);\n                if (location.protocol != \"cdvfile:\") {\n                    url = await UGCResourceManager.assetReadAsDataUrl(url);\n                }\n            } catch (error) {\n                url = this.ending.avatarFile; // 兼容PC调试\n            }\n            this.avatarUrl = url;\n        },\n        async cropSave(data) {\n            let dir = await UGCResourceManager.getTempFolder() ;\n            let fileName =\n                dir.name + \"/avatarCropImage_\" +\n                Math.random()\n                    .toString(16)\n                    .replace(\"0.\", \"\") +\n                \".png\";\n\n            let outFile = await this.createCacheFile(data, fileName);\n            this.ending.avatarFile = outFile;\n            await this.loadImage();\n            this.cropping = false;\n        },\n        async createCacheFile(data, output) {\n            if (!window.requestFileSystem) {\n                // 兼容PC调试\n                return URL.createObjectURL(data);\n            }\n\n            let fs = await UGCResourceManager.filesystem();\n            let file = await new Promise((o, x) => {\n                fs.root.getFile(\n                    output,\n                    { create: true, exclusive: false },\n                    o,\n                    x\n                );\n            });\n            let writer = await new Promise((o, x) => {\n                file.createWriter(o, x);\n            });\n\n            await new Promise((o, x) => {\n                writer.onwriteend = o;\n                writer.onerror = x;\n                writer.write(data);\n            });\n\n            return file.nativeURL;\n        }\n    },\n    async mounted() {\n        let curEnding = Editlist.editlist.timelines.find(e => e.ending);\n        if (!curEnding) {\n            curEnding = UGCResourceManager.getLastEnding();\n        }\n        if (curEnding) {\n            this.ending = { ...curEnding };\n            this.loadImage();\n        }\n        document.addEventListener(\"backbutton\", this.close, false);\n    },\n    async beforeDestroy() {\n        document.removeEventListener(\"backbutton\", this.close, false);\n    }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingMaker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingMaker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EndingMaker.vue?vue&type=template&id=613b9c1a&scoped=true&\"\nimport script from \"./EndingMaker.vue?vue&type=script&lang=js&\"\nexport * from \"./EndingMaker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EndingMaker.vue?vue&type=style&index=0&id=613b9c1a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"613b9c1a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (!_vm.output.desSrc)?_c('div',{staticClass:\"exporter-main\"},[_c('div',{staticClass:\"main-title\"},[_c('mu-button',{attrs:{\"large\":\"\",\"icon\":\"\"},on:{\"click\":_vm.cancel}},[_c('mu-icon',{attrs:{\"color\":\"white\",\"size\":\"36\",\"value\":\"close\"}})],1)],1),_vm._m(0),_c('div',{staticClass:\"content\"},[_c('img',{attrs:{\"src\":_vm.thumbUrl}}),_c('div',{staticClass:\"progress\"},[_c('mu-circular-progress',{staticClass:\"progress-item progress-slave\",attrs:{\"mode\":\"determinate\",\"color\":\"rgba(255,255,255,0.3\",\"value\":100,\"stroke-width\":10,\"size\":105}}),_c('mu-circular-progress',{staticClass:\"progress-item progress-master\",attrs:{\"mode\":\"determinate\",\"color\":\"red\",\"value\":_vm.exportProgress,\"stroke-width\":5,\"size\":100}}),_c('div',{staticClass:\"progress-item\"},[_vm._v(\" \"+_vm._s(_vm.exportProgress)+\"% \")])],1)]),_c('div',{staticClass:\"bottom\"})]):_c('div',{staticClass:\"exporter-main\"},[_c('div',{staticClass:\"main-title\"},[_c('mu-button',{attrs:{\"large\":\"\",\"icon\":\"\"},on:{\"click\":_vm.cancel}},[_c('mu-icon',{attrs:{\"color\":\"white\",\"size\":\"36\",\"value\":\"close\"}})],1),_c('mu-button',{staticClass:\"btn-done\",attrs:{\"large\":\"\",\"icon\":\"\"},on:{\"click\":_vm.done}},[_c('mu-icon',{attrs:{\"color\":\"white\",\"size\":\"36\",\"value\":\"done\"}})],1)],1),_c('div',{staticClass:\"title\"},[_c('mu-icon',{attrs:{\"value\":\"check\"}}),_vm._v(\" 导出完成 \"),_c('span',[_vm._v(\"视频已保存到系统相册\")])],1),_c('div',{staticClass:\"content\"},[_c('video',{attrs:{\"src\":_vm.output.desSrc,\"controls\":\"\"}})]),_c('div',{staticClass:\"bottom\"})])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title\"},[_vm._v(\" 导出中 \"),_c('span',[_vm._v(\"期间请不要切换程序\")])])}]\n\nexport { render, staticRenderFns }","<template>\n<div v-if=\"!output.desSrc\" class=\"exporter-main\">\n    <div class=\"main-title\">\n        <mu-button @click=\"cancel\" large icon>\n            <mu-icon color=\"white\" size=\"36\" value=\"close\" />\n        </mu-button>\n    </div>\n    <div class=\"title\"> \n        导出中\n        <span>期间请不要切换程序</span>\n    </div>\n    <div class=\"content\">\n        <img :src=\"thumbUrl\" />\n        <div class=\"progress\">\n            <mu-circular-progress \n                class=\"progress-item progress-slave\" \n                mode=\"determinate\" \n                color=\"rgba(255,255,255,0.3\"\n                :value=\"100\"\n                :stroke-width=\"10\" \n                :size=\"105\">\n            </mu-circular-progress>\n            <mu-circular-progress \n                class=\"progress-item progress-master\" \n                mode=\"determinate\" \n                color=\"red\"\n                :value=\"exportProgress\"\n                :stroke-width=\"5\" \n                :size=\"100\">\n            </mu-circular-progress>\n            <div class=\"progress-item\">\n                {{exportProgress}}%\n            </div>\n        </div>\n    </div>\n    <div class=\"bottom\">  </div>\n</div>\n<div v-else class=\"exporter-main\">\n     <div class=\"main-title\">\n        <mu-button @click=\"cancel\" large icon>\n            <mu-icon color=\"white\" size=\"36\" value=\"close\" />\n        </mu-button>\n        <mu-button @click=\"done\" large icon class=\"btn-done\">\n            <mu-icon color=\"white\" size=\"36\" value=\"done\" />\n        </mu-button>\n    </div>\n    <div class=\"title\"> \n        <mu-icon value=\"check\" /> 导出完成 \n        <span>视频已保存到系统相册</span>\n    </div>\n    <div class=\"content\">\n        <video :src=\"output.desSrc\" controls/>\n    </div>\n    <div class=\"bottom\">  </div>\n</div>\n</template>\n\n<style lang=\"less\" scoped>\n.exporter-main {\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-flow: column;\n    background: #333;\n}\n\n.title {\n    color: white;\n    text-align: center;\n    height:60px;\n    font-size:20px;\n    span{\n        font-size:12px;\n        color:gray;\n        display:block\n    }\n}\n.bottom{\n    color: white;\n    text-align: center;\n    height:160px;\n}\n\n.main-title {\n    display: flex;\n    color: white;\n    align-items: center;\n    justify-content: space-between;\n    padding-right: 20px;\n    height:60px;\n}\n\n.btn-done {\n    float: right;\n}\n\n.content {\n    text-align: center;\n    margin: 20px 0;\n    position: relative;\n    align-items: center;\n    justify-content: center;\n    display:flex;\n    flex:1;\n    min-height: 100px;/*不设置高度，flex会一直撑大 */\n\n    img {\n        object-fit: contain;\n        width:100%;height:100%\n    }\n\n    video {\n        height: 100%;\n        width: 100%;\n    }\n\n    .progress {\n        width: 100%;\n        height: 100%;\n        position: absolute;\n        left: 0;\n        top: 0;\n        background: #33333388;\n        display:flex;\n        align-items: center;\n        justify-content: center;\n        .progress-item{\n            position: absolute;\n            font-size:25px;\n            color:white;\n        }\n    }\n}\n</style>\n\n<script>\nimport Editlist from \"@/model/Editlist\";\nimport ClipModel from \"@/model/ClipModel\";\nimport CordovaModel from \"@/model/CordovaModel\";\nimport UGCRes from \"@/model/UGCResourceManager\";\n\nexport default {\n    data() {\n        return {\n            thumbUrl: \"\",\n            exportProgress: 0,\n            output:{\n                desSrc:\"\"\n            },\n            error: \"\"\n        }\n    },\n    methods:{\n        async begin(){\n            let config = await Editlist.editlist.getConfig();\n            if(!config.output) {\n                // 如果客户没指定输出文件，使用默认文件\n                config.output = cordova.file.cacheDirectory + \"output.mp4\";\n                Editlist.editlist.setConfig(config);\n            }\n\n            // 导出到客户调用SDK时指定的文件\n            let des = config.output.replace(\"file://\",\"\");\n\n\n            let ret = await new Promise( UGCApp.ffmpeg.start.bind(null,\n                Editlist.getExportParam(des)\n            ));\n            if(ret){\n                this.error = \"导出未能开始：\" + ret;\n                return;\n            }\n\n            let total_sec = Editlist.editlist.total_sec;\n            let progress_sec = 0;\n            let status;\n            let progress;\n\n            window.console.log(\"total_sec: \"+total_sec);\n            await new Promise((o, ) => {\n                setTimeout(o, 1000);\n            });\n\n            do {\n                status = await new Promise( UGCApp.ffmpeg.status );\n                progress = await new Promise( UGCApp.ffmpeg.progress );\n                progress_sec = progress.pts / 1000;\n\n                this.exportProgress = +Math.max(0, Math.min(100,\n                    progress_sec / total_sec * 100)).toFixed(1);\n\n                await new Promise((o, ) => {\n                    setTimeout(o, 200);\n                });\n                window.console.log(\n                    \"ffmpeg progress:\" + progress.pts + \", status:\" + status\n                );\n            } while (status == 1);\n\n            let result = await new Promise(UGCApp.ffmpeg.report);\n\n            if (result == 0) {\n                if (CordovaModel.isIOS()) {\n                    await new Promise((o, x) => UGCApp.sendToDCIM(des, o, x));\n                    this.output.desSrc = (await ClipModel.Util.getCdvUrl(des)).replace(\"cdvfile:\",\"http:\")\n                }\n                else {\n                    await new Promise((o, x) => UGCApp.sendToDCIM(des, o, x));\n                    this.output.desSrc = await ClipModel.Util.getCdvUrl(des);\n                }\n            } else {\n                this.error = \"导出失败\";\n            }\n        },\n        async cancel(){\n            await new Promise( UGCApp.ffmpeg.cancel );\n            this.$emit('close')\n        },\n        async done(){\n            // 复制封面到指定输出目录，如果有指定的话\n            let config = await Editlist.editlist.getConfig();\n            if(config.output_thumb) {\n                try {\n                    await this.copyPosterTo(config.output_thumb);\n                } catch (error) {\n                    window.console.log(\"copy poster: \", error);\n                    this.error = \"导出封面失败\";\n                }\n            }\n            \n            await UGCRes.clearTempFiles();\n\n            await new Promise( UGCApp.done.bind(UGCApp, {\n                statusCode: UGCApp.StatusCode.Ok,\n                message: this.error || \"导出成功\",\n                output: config.output,\n                output_thumb: config.output_thumb || Editlist.editlist.poster.url\n            }) );\n        },\n        async copyPosterTo(outputFile) {\n            let posterUrl = Editlist.editlist.poster.url;\n            if('/' == posterUrl[0]) {\n                posterUrl = \"file://\" + posterUrl;\n            }\n\n            let root = await new Promise(\n                resolveLocalFileSystemURL.bind(window, \"file:///\"));\n            let outFileEntity = await new Promise(\n                root.getFile.bind(root, outputFile, {create:true}));\n            let outDirEntity = await new Promise(outFileEntity.getParent.bind(outFileEntity));\n            let posterFileEntity = await new Promise(\n                resolveLocalFileSystemURL.bind(window, posterUrl));\n\n            return await new Promise(posterFileEntity.copyTo.bind(posterFileEntity, outDirEntity, outFileEntity.name));\n        }\n    },\n    async mounted() {\n        if(Editlist.editlist.poster.url)\n            this.thumbUrl = await ClipModel.Util.getCdvUrl(\n                Editlist.editlist.poster.url\n            ) + \"?\" + Math.random();\n\n        document.addEventListener(\"backbutton\", this.cancel, false);\n        this.begin();\n    },\n    async beforeDestroy() {\n        document.removeEventListener(\"backbutton\", this.cancel, false);\n    }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exporter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exporter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Exporter.vue?vue&type=template&id=4e0ded93&scoped=true&\"\nimport script from \"./Exporter.vue?vue&type=script&lang=js&\"\nexport * from \"./Exporter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Exporter.vue?vue&type=style&index=0&id=4e0ded93&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4e0ded93\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('mu-bottom-sheet',{attrs:{\"overlay-close\":_vm.editlist.timelines.length > 0,\"esc-press-close\":_vm.editlist.timelines.length > 0,\"open\":_vm.isopen},on:{\"update:open\":function($event){_vm.isopen=$event}}},[_c('mu-list',{on:{\"item-click\":_vm.close}},[_c('mu-sub-header',[_vm._v(\"选择\")]),_c('mu-list-item',{attrs:{\"button\":\"\"},on:{\"click\":_vm.importFile}},[_c('mu-list-item-action',[_c('mu-icon',{attrs:{\"value\":\"folder_open\",\"color\":\"orange\"}})],1),_c('mu-list-item-title',[_vm._v(\"从文件导入\")])],1),_c('mu-list-item',{attrs:{\"button\":\"\"},on:{\"click\":_vm.captureFile}},[_c('mu-list-item-action',[_c('mu-icon',{attrs:{\"value\":\"photo_camera\",\"color\":\"orange\"}})],1),_c('mu-list-item-title',[_vm._v(\"拍摄\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<!-- <mu-dialog width=\"360\" transition=\"slide-bottom\" :open.sync=\"openFullscreen\">\n\n\n    <div class=\"dialog-content\" style=\"\">\n        <mu-button @click=\"importFile\" round large color=\"red\">\n            <mu-icon left size=\"40\" value=\"folder_open\" />\n            从文件导入\n        </mu-button>\n        <mu-button @click=\"captureFile\" round large color=\"red\">\n            <mu-icon left size=\"40\" value=\"folder_open\" />\n            拍摄\n        </mu-button>\n\n        <mu-button slot=\"actions\" flat color=\"primary\" @click=\"close\">取消</mu-button>\n    </div>\n</mu-dialog> -->\n<mu-bottom-sheet\n    :overlay-close=\"editlist.timelines.length > 0\"\n    :esc-press-close=\"editlist.timelines.length > 0\"\n    :open.sync=\"isopen\"\n    >\n    <mu-list @item-click=\"close\">\n      <mu-sub-header>选择</mu-sub-header>\n      <mu-list-item button @click=\"importFile\">\n        <mu-list-item-action>\n          <mu-icon value=\"folder_open\" color=\"orange\"></mu-icon>\n        </mu-list-item-action>\n        <mu-list-item-title>从文件导入</mu-list-item-title>\n      </mu-list-item>\n<!--   拍摄：安卓无法选择分辨率 -->\n       <mu-list-item button @click=\"captureFile\">\n        <mu-list-item-action>\n          <mu-icon value=\"photo_camera\" color=\"orange\"></mu-icon>\n        </mu-list-item-action>\n        <mu-list-item-title>拍摄</mu-list-item-title>\n      </mu-list-item>\n    </mu-list>\n</mu-bottom-sheet>\n</template>\n\n<style scoped>\n.dialog-content {\n    padding: 24px;\n    display: flex;\n    flex-flow: column;\n    align-items: center;\n    justify-content: space-evenly;\n    flex-flow: column;\n    height: 200px;\n}\n</style>\n\n<script>\nimport Const from \"@/const\";\n\nexport default {\n    props: [\"editlist\"],\n    data() {\n        return {\n            isopen: false\n        };\n    },\n    methods: {\n        open() {\n            this.isopen = true;\n        },\n        close() {\n            this.isopen = false;\n        },\n        async importFile(){\n\n            if(this.isIOS()) {\n                try{\n                    \n                    let result = await new Promise(MediaPicker.getMedias.bind(MediaPicker,{\n                            selectMode: 102, //101=picker image and video , 100=image , 102=video\n                            maxSelectCount: 1 //default 40 (Optional)\n                            // 'maxSelectSize': 188743680, //188743680=180M (Optional) only android\n                        }\n                    ));\n\n                    window.console.log(result);\n                    this.$emit(\"select\",result);\n                } catch(e){\n                    window.console.log(e)\n                    // 没导入视频接着显示\n                    if(!this.editlist.timelines.length) {\n                        this.open();\n                    }\n                }\n            } else {\n                try{\n                    let result = await new Promise((o, x) => navigator.camera.getPicture(o, x, {\n                        // destinationType: Camera.DestinationType.FILE_URI,\n                        sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n                        allowEdit: true,\n                        mediaType: Camera.MediaType.VIDEO\n                    }));\n\n                    this.$emit(\"select\",[{\n                        uri: result\n                    }]);\n                }catch(e){\n                    window.console.log(e);\n                    // 没导入视频接着显示\n                    if(!this.editlist.timelines.length) {\n                        this.open();\n                    }\n                }\n            }\n        },\n        async captureFile(){\n            try{\n                if(this.isAndroid()) {\n                    let result = await new Promise((o, x) => \n                        UGCApp.captureVideo(o, x, {\n                            duration: Const.CaptureVideo.Duration\n                        }));\n                    window.console.log(result)\n                    if(!result.path) {\n                        this.$mResToast.error(\"选择失败\");\n                        return;\n                    }\n                    this.$emit(\"select\", [{ uri: result.path }]);\n                } else {\n                    let result = await new Promise((o, x) => \n                        navigator.device.capture.captureVideo(o, x, {\n                            duration: Const.CaptureVideo.Duration\n                        }));\n                    window.console.log(result)\n                    this.$emit(\"select\",result.map(o=>({\n                        uri: o.fullPath\n                    })));\n                }\n            }catch(e){\n                window.console.log(e);\n                if(!this.editlist.timelines.length) {\n                    this.open();\n                }\n            }\n        },\n        importProgress(progress){\n            if(progress.status == \"progress\"){\n                this.$emit(\"progress\",progress.index);\n                // window.console.log(\"import:\",progress);\n            } \n        }\n    },\n    mounted(){\n        if(this.isIOS()) {\n            document.addEventListener(\"MediaPicker.CompressVideoEvent\", this.importProgress);\n        }\n    },\n    beforeDestroy(){\n        if(this.isIOS()) {\n            document.removeEventListener(\"MediaPicker.CompressVideoEvent\", this.importProgress);\n        }\n    }\n}\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Importer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Importer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Importer.vue?vue&type=template&id=3cfa8a02&scoped=true&\"\nimport script from \"./Importer.vue?vue&type=script&lang=js&\"\nexport * from \"./Importer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Importer.vue?vue&type=style&index=0&id=3cfa8a02&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3cfa8a02\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div class=\"main\">\n\n        <div\n            class=\"main-maker\"\n            v-show=\"!makePoster&&!makeEnding&&!doExport\"\n        >\n            <ClipTop @export=\"doExport = true\" />\n            <div\n                ref=\"mainBox\"\n                class=\"main-box\"\n            >\n                <PreviewPlayer\n                    ref=\"preview\"\n                    :pause=\"player.pause || doExport\"\n                    :editlist=\"editlist\"\n                    @finished=\"playerFinished\"\n                    @resize=\"!makePoster&&!makeEnding&&!doExport\"\n                    class=\"main-video\"\n                />\n\n                <ClipImg\n                    ref=\"overlayEditor\"\n                    @change=\"clipImgChange\"\n                    @overlayActive=\"overlayActive\"\n                    @overlayDeactive=\"overlayDeactive\"\n                    :overlays_in=\"editlist.overlay\"\n                    :mosics_in=\"editlist.mosic\"\n                    :time_sec=\"editlist.time_sec\"\n                    class=\"overlay-box\"\n                />\n            </div>\n\n            <div\n                ref=\"toolBox\"\n                class=\"toolBox\"\n            >\n                <PlayerController\n                    v-show=\"showPlayerController\"\n                    :playing=\"!player.pause\"\n                    @event=\"playerControllerEvent\"\n                />\n\n                <ClipTimeline\n                    ref=\"timeline\"\n                    v-show=\"showTimeline\"\n                    :timelines_in=\"editlist.timelines\"\n                    :show_overlay=\"showOverlay\"\n                    :overlay_type=\"overlayType\"\n                    :show_amix=\"showAMix\"\n                    :playing=\"!player.pause\"\n                    :poster=\"editlist.poster.url\"\n                    @timelinesChange=\"timelinesChange\"\n                    @timeChange=\"timeChange\"\n                    @overlayChange=\"overlayChange\"\n                    @overlayActive=\"overlayActive\"\n                    @amixChange=\"amixChange\"\n                    @amixActive=\"amixActive\"\n                    @on_poster_click=\"makePoster=1\"\n                    @on_ending_click=\"makeEnding=1\"\n                    style=\"\"\n                />\n                <ToolTab\n                    ref=\"toolTab\"\n                    v-show=\"showTooltab\"\n                    :editlist=\"editlist\"\n                    :activeItem=\"activeItem\"\n                    @select=\"tabSelect\"\n                />\n                <ToolDialog\n                    :editlist=\"editlist\"\n                    @close=\"showTooltab=showPlayerController=showTimeline=true;mainBoxResized()\"\n                    @beforechange=\"toolBeforeChange\"\n                    @change=\"toolValueChange\"\n                    ref=\"toolDlg\"\n                />\n\n            </div>\n\n            <div\n                v-if=\"importProgress >= 0\"\n                class=\"spin\"\n            >\n                <div>\n                    <mu-circular-progress mode=\"determinate\" :value=\"importProgress*100\">\n                    </mu-circular-progress>\n                    <br>\n                    <span style=\"font-size:14px\">导入中 {{ (importProgress*100).toFixed(2) }}%</span>\n                </div>\n            </div>\n        </div>\n        <PosterMaker\n            v-if=\"makePoster\"\n            :editlist=\"this.editlist\"\n            @close=\"makePoster = false; seekPlayer(0); reloadPlayer(); \"\n        />\n        <EndingMaker\n            v-if=\"makeEnding\"\n            @close=\"makeEnding = false; reloadPlayer();\"\n        />\n        <Exporter\n            ref=\"exporter\"\n            v-if=\"doExport\"\n            @close=\"doExport = false\"\n        />\n        <Importer\n            ref=\"importer\"\n            :editlist=\"editlist\"\n            @select=\"importFileSelect\"\n            @progress=\"importProgress=$event\"\n        />\n    </div>\n\n</template>\n\n<style lang=\"less\" scoped>\n.spin {\n    background: rgba(0, 0, 0, 0.8);\n    color: white;\n    position: fixed;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    &>*{\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        text-align:center;\n        flex-direction: column;\n    }\n}\n\n.main {\n    background-color: #333;\n    background: transparent;\n    position: relative;\n\n    width: 100%;\n    height: 100%;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n}\n.main-maker {\n    justify-content: center;\n    flex-direction: row;\n    flex-wrap: wrap;\n    overflow: hidden;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-flow: column;\n}\n.main-box {\n    background-color: #333;\n    background: transparent;\n    width: 100%;\n    position: relative;\n    overflow: hidden;\n    flex: auto;\n    display: flex;\n    height: 100%;\n}\n.overlay-box {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    left: 0;\n    top: 0;\n}\n.choose-poster-box {\n    background: black;\n    position: absolute;\n    display: flex;\n    justify-content: center;\n    flex-direction: row;\n    flex-wrap: wrap;\n    flex-flow: column;\n    width: 100%;\n    height: 100%;\n}\n\n.main-video {\n    background-color: #000;\n    background: transparent;\n    width: 100%;\n    /* display: flex; */\n    /* height: 100%; */\n}\n\n.left-mask {\n    justify-content: flex-end;\n    flex-direction: row;\n    position: absolute;\n    top: 0;\n    left: 0;\n    margin: 15px;\n    height: 120px;\n}\n\n.tBtn i {\n    line-height: 1 !important;\n    font-size: 30px;\n}\n\n.toolBox {\n    width: 100%;\n    background: rgba(50, 50, 50, 1);\n    position: relative;\n    transition: all 0.5s;\n    & > * {\n        width: 100%;\n    }\n}\n</style>\n\n<script>\nimport extend from \"extend\";\nimport ClipTop from \"@/views/Top/ClipTop\";\nimport ClipTimeline from \"@/views/Bottom/ClipTimeline\";\nimport PlayerController from \"@/views/Bottom/PlayerController\";\nimport ToolTab from \"@/views/Bottom/ToolTab\";\nimport ToolDialog from \"@/views/Bottom/ToolDialog\";\nimport ClipImg from \"@/views/Editor/ClipImg\";\nimport clipModel from \"@/model/ClipModel.js\";\nimport PreviewPlayer from \"@/views/PreviewPlayer\";\nimport PosterMaker from \"@/views/PosterMaker\";\nimport EndingMaker from \"@/views/EndingMaker\";\nimport Exporter from \"@/views/Exporter\";\nimport Importer from \"@/views/Helper/Importer\";\nimport Editlist from \"@/model/Editlist\";\nimport UGCResourceManager from \"@/model/UGCResourceManager\";\n// import OverlayToolTab from \"@/views/Bottom/OverlayToolTab\";\nimport Const from \"@/const\";\nimport { roundFloat, rotateVector } from \"@/utils\";\n\nwindow.clipModel = clipModel;\n\nlet console = window.console;\n\nexport default {\n    components: {\n        ClipTop,\n        ClipTimeline,\n        PlayerController,\n        ToolTab,\n        ToolDialog,\n        ClipImg,\n        PreviewPlayer,\n        PosterMaker,\n        EndingMaker,\n        Exporter,\n        Importer\n    },\n    data() {\n        return {\n            player: {\n                pause: true,\n                // time_sec: 0\n            },\n            editlist: Editlist.editlist,\n            showOverlay: false, // 显示 贴图/贴字 时间轴\n            overlayType: false, // 贴图/贴字 时间轴 类型\n            showAMix: false, // 显示 音效 时间轴\n            showTooltab: true, // 显示底部导航工具栏\n            showPlayerController: true,\n            showTimeline: true,\n            activeItem: null, // 当前时间轴编辑内容（贴图/贴字/音效）\n            makePoster: false, // 封面图制作页面\n            makeEnding: false, // 片尾制作页面\n            doExport: false, // 导出页面\n            importProgress: -1\n        };\n    },\n    methods: {\n        async reloadPlayer(dont_keep_screen) {\n            await this.$refs.preview.reload(!dont_keep_screen);\n        },\n        seekPlayer(sec) {\n            // window.console.log(\"seek:\" + sec);\n            this.$refs.preview.seek(sec);\n            this.$refs.timeline.seek(sec);\n        },\n        playerFinished() {\n            console.log(\"finished\");\n            this.player.pause = true;\n        },\n        timeChange(e) {\n            // console.log(\"seek:\" + e.time_sec);\n            this.player.pause = true;\n            this.seekPlayer(e.time_sec);\n        },\n        timelinesChange(timelines) {\n            this.editlist.timelines = timelines;\n            this.editlist.createOperateHistory(Const.Operate.VideoTimeModify.Type);\n            // this.reloadPlayer();\n        },\n        amixChange(o) {\n            this.editlist.update_amix(o);\n            // this.reloadPlayer();\n            this.editlist.createOperateHistory(Const.Operate.AudioEffectTimeModify.Type);\n        },\n        amixActive(o) {\n            // this.$refs.overlayToolTab.active(o);\n            this.activeItem = o;\n        },\n        overlayChange(o) {\n            this.$refs.overlayEditor.active(o);\n            // this.$refs.overlayToolTab.active(o);\n\n            this.editlist.update_overlay(o);\n            // this.reloadPlayer();\n\n            if(o.type == Const.Overlay.Type.Image) {\n                this.editlist.createOperateHistory(Const.Operate.ImageTimeModify.Type);\n            } else if(o.type == Const.Overlay.Type.Text) {\n                this.editlist.createOperateHistory(Const.Operate.TextTimeModify.Type);\n            } else if(o.type == Const.Overlay.Type.Mosic) {\n                this.editlist.createOperateHistory(Const.Operate.MosicTimeModify.Type);\n            }\n        },\n        overlayActive(o) {\n            // this.$refs.overlayToolTab.active(o);\n            if (o) {\n                this.$refs.overlayEditor.active(o);\n            } else {\n                this.$refs.overlayEditor.blur();\n                if(this.activeItem && this.activeItem.active) {\n                    this.activeItem.active = false;\n                }\n            }\n            this.activeItem = o;\n        },\n        overlayDeactive() {\n            this.activeItem = null;\n        },\n        blankClicked() {\n            this.$refs.overlayEditor.blur();\n        },\n        playerControllerEvent(e) {\n            let cur_timeline;\n            let time_sec;\n\n            switch (e.eventID) {\n                case PlayerController.EventID.Play:\n                    if(!this.$refs.preview.seeking&&this.$refs.preview.$refs.video.loaded)\n                        this.player.pause = false;\n                    break;\n                case PlayerController.EventID.Pause:\n                    this.player.pause = true;\n                    break;\n                case PlayerController.EventID.SeekBegin:\n                    this.player.pause = true;\n                    cur_timeline = this.editlist.cur_timeline;\n                    if (!cur_timeline && this.editlist.timelines.length) {\n                        // 没找到是因为时间等于总时长\n                        cur_timeline = this.editlist.timelines[\n                            this.editlist.timelines.length - 1\n                        ];\n                    }\n                    time_sec = roundFloat(this.editlist.time_sec);\n                    if (cur_timeline) {\n                        if (time_sec == roundFloat(cur_timeline.offset_sec)) {\n                            // 跳到上一段\n                            let prevIdx = Math.max(\n                                0,\n                                this.editlist.timelines.findIndex(\n                                    e => e.id == cur_timeline.id\n                                ) - 1\n                            );\n                            cur_timeline = this.editlist.timelines[prevIdx];\n                        }\n                        (async ()=>{\n                            await new Promise(o=>setTimeout(o,100));\n                            this.seekPlayer(cur_timeline.offset_sec);\n                        })();\n                    }\n                    break;\n                case PlayerController.EventID.SeekEnd:\n                    this.player.pause = true;\n                    cur_timeline = this.editlist.cur_timeline;\n                    time_sec = roundFloat(this.editlist.time_sec);\n                    if (cur_timeline) {\n                        if (\n                            time_sec ==\n                            roundFloat(\n                                cur_timeline.offset_sec +\n                                    cur_timeline.end_sec -\n                                    cur_timeline.start_sec\n                            )\n                        ) {\n                            // 跳到下一段\n                            let nextIdx =\n                                this.editlist.timelines.indexOf(\n                                    cur_timeline\n                                ) + 1;\n                            if (nextIdx < this.editlist.timelines.length) {\n                                cur_timeline =\n                                    this.editlist.timelines[nextIdx];\n                            }\n                            // 增加0.001让时间进入下一断\n                            // this.player.time_sec = cur_timeline.offset_sec + cur_timeline.start_sec + 0.001;\n                        }\n\n                        // 跳到结尾\n                        (async ()=>{\n                            await new Promise(o=>setTimeout(o,100));\n                            this.seekPlayer(\n                                cur_timeline.offset_sec +\n                                    cur_timeline.end_sec -\n                                    cur_timeline.start_sec\n                            );\n                        })()\n                    }\n                    break;\n                case PlayerController.EventID.Undo:\n                    this.undo();\n                    break;\n                case PlayerController.EventID.AspectRatio:\n                    this.$refs.toolDlg.show(ToolTab.TabID.AspectRatio, {\n                        height: this.$refs.toolTab.clientHeight + \"px\"\n                    });\n                    break;\n            }\n        },\n        toolBeforeChange() {\n            // 添加图片或文字前先暂停\n            this.player.pause = true;\n        },\n        toolValueChange(data, tabid) {\n            // 修改分辨率比例时暂停播放\n            if (tabid == ToolTab.TabID.AspectRatio) {\n                this.player.pause = true;\n            }\n\n            if (data) {\n                if (data.overlay) {\n                    this.overlayActive(data.overlay);\n                    \n                    if(data.overlay.type == Const.Overlay.Type.Text) {\n                        this.reloadPlayer();\n                    }\n                    // this.$refs.overlayEditor.active(data.overlay);\n                    // this.$refs.overlayToolTab.active(data.overlay);\n                    return;\n                }\n            }\n            this.reloadPlayer();\n        },\n        clipImgChange() {\n            // if(!this.$refs.overlayEditor.overlay){\n            //     this.activeItem = null;\n            // }\n            this.reloadPlayer();\n        },\n        // overlayTabSelect(tabID, overlay) {\n        //     let dialogTabId = null;\n        //     let edit = false;\n\n        //     switch(tabID) {\n        //         case OverlayToolTab.TabID.Edit:\n        //         case OverlayToolTab.TabID.Template:\n        //         case OverlayToolTab.TabID.Settings:\n        //             if(overlay.type == Const.Overlay.Type.Text) {\n        //                 dialogTabId = ToolTab.TabID.AddText;\n        //                 edit = true;\n        //             }\n        //             break;\n        //         case OverlayToolTab.TabID.Remove:\n        //             // TODO remove\n        //             break;\n        //         case OverlayToolTab.TabID.Done:\n        //             this.$refs.overlayEditor.blur();\n        //             break;\n        //         default:\n        //             break;\n        //     }\n\n        //     if(edit) {\n        //         this.showTooltab = false;\n        //         this.$refs.toolDlg.show(dialogTabId, {\n        //             overlay,\n        //             overlayToolTabId: tabID\n        //         });\n        //     }\n        // },\n        tabSelect(tabID) {\n            let ToolTaba = ToolTab.TabID;\n            console.log(ToolTaba);\n            switch (tabID) {\n                case ToolTab.TabID.ImageTab:\n                    this.showOverlay = true;\n                    this.overlayType = Const.Overlay.Type.Image | Const.Overlay.Type.Mosic;\n                    this.showAMix = false;\n                    break;\n                case ToolTab.TabID.TextTab:\n                    this.showOverlay = true;\n                    this.overlayType = Const.Overlay.Type.Text;\n                    this.showAMix = false;\n                    break;\n                case ToolTab.TabID.AudioTab:\n                    this.showAMix = true;\n                    this.showOverlay = false;\n                    break;\n                case ToolTab.TabID.OtherTab:\n                    // // 显示 马赛克\n                    // this.showOverlay = true;\n                    // // this.overlayType = Const.Overlay.Type.Mosic;\n                    // this.showAMix = false;\n\n                    // 马赛克改到贴纸里显示\n                    this.showOverlay = false;\n                    this.showAMix = false;\n                    break;\n\n                case ToolTab.TabID.ToolEdit:\n                case ToolTab.TabID.ToolTemplate:\n                case ToolTab.TabID.ToolSettings:\n                    if (this.activeItem.type == Const.Overlay.Type.Text) {\n                        this.showTimeline = false;\n                        this.showPlayerController = false;\n\n                        this.$refs.toolDlg.show(ToolTab.TabID.AddText, {\n                            height: \"auto\",\n                            overlay: this.activeItem,\n                            operateToolTabId: tabID\n                        });\n                    }\n                    break;\n                case ToolTab.TabID.ToolDone:\n                    this.activeItem.active = false;\n                    this.activeItem = null;\n                    this.$refs.overlayEditor.blur();\n                    break;\n                case ToolTab.TabID.ToolRemove:\n                    this.editlist.remove_overlay(this.activeItem.id);\n                    this.activeItem.active = false;\n\n                    this.$refs.overlayEditor.blur();\n                    this.activeItem = null;\n                    this.reloadPlayer();\n                    break;\n\n                case ToolTab.TabID.VideoAdd:\n                    this.pickVideo();\n                    break;\n                case ToolTab.TabID.VideoRemove:\n                    {\n                        let timelines = this.editlist.timelines;\n\n                        // 先找激活的移除\n                        let idx = timelines.findIndex(o => o.active);\n                        if (idx == -1) {\n                            // 都没激活则直接移除时间轴压住的视频\n                            let curr_timeline = this.editlist.cur_timeline;\n                            if (!curr_timeline && timelines.length) {\n                                // 没找到是因为时间等于总时长\n                                idx = 0;\n                            } else {\n                                idx = timelines.findIndex(\n                                    e => e.id == curr_timeline.id\n                                );\n                            }\n                        }\n                        if (idx >= 0) {\n                            let timeline = timelines[idx];\n                            timelines.splice(idx, 1);\n                            [0, ...timelines].reduce((pre, nxt) => {\n                                nxt.offset_sec = pre;\n                                return (\n                                    nxt.offset_sec + nxt.end_sec - nxt.start_sec\n                                );\n                            });\n\n                            // 删除叠加效果\n                            [\n                                ...this.editlist.amix,\n                                ...this.editlist.overlay\n                            ].forEach(e => {\n                                let found =\n                                    roundFloat(timeline.offset_sec) <=\n                                        roundFloat(e.offset_sec) &&\n                                    roundFloat(e.offset_sec) <\n                                        roundFloat(\n                                            timeline.offset_sec +\n                                                timeline.end_sec -\n                                                timeline.start_sec\n                                        );\n                                if (found) {\n                                    this.editlist.remove_overlay(e.id);\n                                }\n                            });\n\n                            this.reloadPlayer();\n\n                            // 移动时间线到被删除的视频的前一视频的结束位置\n                            if (idx == 0 || !timelines.length) {\n                                this.seekPlayer(0);\n                            } else {\n                                this.seekPlayer(\n                                    timelines[idx - 1].offset_sec +\n                                        timelines[idx - 1].end_sec -\n                                        timelines[idx - 1].start_sec\n                                );\n                            }\n                            \n                            this.editlist.createOperateHistory(Const.Operate.VideoRemove.Type, timeline.id);\n                        }\n\n                        if (timelines.length == 0) {\n                            this.editlist.poster.url = \"\";\n                            this.editlist.poster.overlay.splice(0, -1);\n                            this.pickVideo();\n                        }\n                    }\n                    break;\n                case ToolTab.TabID.VideoSplit:\n                    {\n                        this.player.pause = true;\n\n                        let timelines = this.editlist.timelines;\n                        let idx = -1;\n                        let time_sec = roundFloat(this.$refs.timeline.time_sec);\n                        timelines.forEach((o, i) => {\n                            if (\n                                roundFloat(o.offset_sec) < time_sec &&\n                                roundFloat(\n                                    o.end_sec - o.start_sec + o.offset_sec\n                                ) > time_sec\n                            )\n                                idx = i;\n                        });\n                        if (idx >= 0) {\n                            let found = timelines[idx];\n                            let second = extend(true, {}, found, {\n                                id: this.editlist.timelineId\n                            });\n\n                            found.active = false;\n\n                            if (\n                                time_sec - found.offset_sec <\n                                    this.editlist.video_min_sec ||\n                                found.offset_sec +\n                                    found.end_sec -\n                                    found.start_sec -\n                                    time_sec <\n                                    this.editlist.video_min_sec\n                            ) {\n                                this.$mResToast.error(\n                                    \"时长小于1秒，无法分割\"\n                                );\n                                return;\n                            }\n\n                            found.end_sec = second.start_sec =\n                                time_sec - found.offset_sec + found.start_sec;\n\n                            timelines.splice(idx + 1, 0, second);\n                            timelines.reduce((pre, nxt, idx) => {\n                                if (idx == 1) pre = pre.end_sec - pre.start_sec;\n                                nxt.offset_sec = pre;\n                                return (\n                                    nxt.offset_sec + nxt.end_sec - nxt.start_sec\n                                );\n                            });\n\n                            this.$refs.timeline.refreshUI();\n                            this.reloadPlayer();\n\n                            this.editlist.createOperateHistory(Const.Operate.VideoSplit.Type);\n                        } else {\n                            this.$mResToast.error(\"时长小于1秒，无法分割\");\n                        }\n                    }\n                    break;\n                case ToolTab.TabID.VideoRotate:\n                    {\n                        let timelines = this.editlist.timelines;\n                        let idx = -1;\n                        timelines.forEach((o, i) => {\n                            if (\n                                o.offset_sec <= this.editlist.time_sec &&\n                                o.end_sec - o.start_sec + o.offset_sec >\n                                    this.editlist.time_sec\n                            )\n                                idx = i;\n                        });\n                        if (idx >= 0) {\n                            let found = timelines[idx];\n\n                            if(idx == 0) {\n                                // 如果是第一段视频，封面、封面贴纸跟着转\n                                this.editlist.poster.rotate += 270;\n                                this.editlist.poster.rotate %= 360;\n                                this.rotatePosterOverlay(found, 270);\n                            }\n\n                            found.rotate += 270;\n                            found.rotate %= 360;\n\n                            this.reloadPlayer();\n\n                            this.editlist.createOperateHistory(Const.Operate.VideoRotate.Type);\n                        }\n                    }\n                    break;\n                case ToolTab.TabID.VideoVFlip:\n                    {\n                        let timelines = this.editlist.timelines;\n                        let idx = -1;\n                        timelines.forEach((o, i) => {\n                            if (\n                                o.offset_sec < this.editlist.time_sec &&\n                                o.end_sec - o.start_sec + o.offset_sec >\n                                    this.editlist.time_sec\n                            )\n                                idx = i;\n                        });\n                        if (idx >= 0) {\n                            let found = timelines[idx];\n                            found.vflip = !found.vflip;\n                            this.reloadPlayer();\n\n                            this.editlist.createOperateHistory(Const.Operate.VideoVFlip.Type);\n                        }\n                    }\n                    break;\n                case ToolTab.TabID.VideoHFlip:\n                    {\n                        let timelines = this.editlist.timelines;\n                        let idx = -1;\n                        timelines.forEach((o, i) => {\n                            if (\n                                o.offset_sec < this.editlist.time_sec &&\n                                o.end_sec - o.start_sec + o.offset_sec >\n                                    this.editlist.time_sec\n                            )\n                                idx = i;\n                        });\n                        if (idx >= 0) {\n                            let found = timelines[idx];\n                            found.hflip = !found.hflip;\n                            this.reloadPlayer();\n\n                            this.editlist.createOperateHistory(Const.Operate.VideoHFlip.Type);\n                        }\n                    }\n                    break;\n                case ToolTab.TabID.AddLocalImage:\n                    this.pickImg();\n                    break;\n                case ToolTab.TabID.Mosic:\n                    this.addMosic();\n                    break;\n                default: {\n                    let height;\n\n                    switch (tabID) {\n                        case ToolTab.TabID.Face:\n                        case ToolTab.TabID.AudioBase:\n                            height = this.$refs.toolTab.clientHeight + \"px\";\n                            break;\n                        case ToolTab.TabID.AddText:\n                            this.showTimeline = false;\n                            this.showPlayerController = false;\n                            height = \"auto\";\n                            break;\n                        case ToolTab.TabID.BGM:\n                            height = this.$el.clientHeight / 2 + \"px\";\n                            break;\n                        default:\n                            height = this.$refs.toolBox.clientHeight + \"px\";\n                    }\n\n                    this.$refs.toolDlg.show(tabID, {\n                        height\n                    });\n                }\n            }\n\n            if(tabID == ToolTab.TabID.ImageTab ||\n                tabID == ToolTab.TabID.TextTab ||\n                tabID == ToolTab.TabID.AudioTab||\n                tabID == ToolTab.TabID.OtherTab) {\n                this.overlayActive(null);\n            }\n        },\n        reset() {},\n        async pickImg() {\n            // native cordova.camera plugin 需要修正，否则会返回 content:// 路径无法读取\n            // CameraLauncher.java::processResultFromGallery::707 需要修正为返回 fileLocation\n            let file = await new Promise((o, x) =>\n                navigator.camera.getPicture(o, x, {\n                    sourceType: Camera.PictureSourceType.PHOTOLIBRARY,\n                    allowEdit: false,\n                    correctOrientation: true,\n                    mediaType: Camera.MediaType.PICTURE\n                })\n            );\n\n            // window.console.log(file);\n            if (!file) return;\n\n            let overlay = this.editlist.add_overlay({\n                url: file,\n                type: Const.Overlay.Type.Image\n            });\n            this.$refs.overlayEditor.active(overlay);\n            this.overlayActive(overlay);\n            // this.$refs.overlayToolTab.active(overlay);\n\n            this.editlist.createOperateHistory(Const.Operate.ImageAdd.Type);\n        },\n        async importFileSelect(files, auto, isRetry) {\n            // try {\n                let time_sec = this.editlist.total_sec;\n                let timelines = await Promise.all(\n                    files.map(async val => {\n                        let src = val.uri;\n                        // (await new Promise(\n                        //     resolveLocalFileSystemURL.bind(null,val.uri))\n                        // ).toNativeURL();\n\n                        let format = await new Promise(\n                            UGCApp.ffmpeg.format.bind(null, src)\n                        );\n\n                        if(!format.duration) {\n                            // 文件不存在\n                            isRetry && this.$mResToast.error(\"导入失败，文件可能不存在或没有权限\");\n                            return;\n                        }\n\n                        if ((90 + format.video.rotate) % 180 == 0) {\n                            let _cacheWidth = format.video.width;\n                            format.video.width = format.video.height;\n                            format.video.height = _cacheWidth;\n                        }\n\n                        // offset_sec += format.duration/1000;\n                        return {\n                            url: src,\n                            src_rotate: format.video.rotate,\n                            width: format.video.width,\n                            height: format.video.height,\n                            start_sec: 0,\n                            end_sec: format.duration / 1000,\n                            total_sec: format.duration / 1000\n                        };\n                    })\n                );\n\n                timelines = timelines.filter( e => e);\n\n                //导入失败了重试一次\n                if(timelines.length == 0 && !isRetry) {\n                    setTimeout(() => \n                        this.importFileSelect(files, auto, true)\n                    , 500);\n                    return;\n                }\n\n                timelines = timelines.filter(e => e);\n                if(!timelines.length) {\n                    return;\n                }\n\n                this.editlist.add_timelines(timelines);\n\n                if(!auto) {// 不能放reload后\n                    timelines.forEach(t => {\n                        this.editlist.createOperateHistory(Const.Operate.VideoAdd.Type, t.id);\n                    });\n                }\n\n                await this.$refs.preview.reload();\n\n                this.seekPlayer(time_sec);\n\n                this.importProgress = -1;\n            // } catch (error) {\n            //     console.log(\"import file:\", error);\n            // }\n\n            // 没导入视频， 继续导入\n            if(!this.editlist.timelines.length) {\n                this.pickVideo();\n            }\n        },\n        async pickVideo() {\n            this.$refs.importer.open();\n        },\n        mainBoxResized() {\n            this.$nextTick(() => {\n                this.$refs.overlayEditor.updateUI();\n            });\n        },\n        async addMosic() {\n            if(!this.editlist.mosic_source) {\n                this.editlist.mosic_source = await UGCResourceManager.getMosicSource();\n            }\n            let mosic = this.editlist.add_mosic();\n            \n            await this.reloadPlayer();\n\n            this.activeItem = mosic;\n            this.$refs.overlayEditor.active(mosic);\n            this.$refs.overlayEditor.toCenter(1);\n\n            this.editlist.createOperateHistory(Const.Operate.MosicAdd.Type, mosic.id);\n        },\n        async undo() {\n            let his = this.editlist.undoOperateHistory();\n            if(his) {\n                let undoOp = his.undo; // 被撤销的操作和数据\n                let restoreOp = his.restore; // 被撤销的操作的前一个操作和数据\n\n                let restoreArray = (target, src) => {\n                    target.splice(0, target.length);\n                    src.forEach(e => target.push(extend(true, {}, e)));\n                };\n\n                restoreArray(this.editlist.timelines, restoreOp.timelines);\n                restoreArray(this.editlist.amix, restoreOp.amix);\n                restoreArray(this.editlist.overlay, restoreOp.overlay);\n                restoreArray(this.editlist.mosic, restoreOp.mosic);\n                restoreArray(this.editlist.filter, restoreOp.filter);\n\n                this.editlist.face = restoreOp.face;\n                this.editlist.video = restoreOp.video;\n                this.editlist.audio = restoreOp.audio;\n                this.editlist.bgm = restoreOp.bgm;\n                this.editlist.poster = restoreOp.poster;\n\n                let undoOpKey = Object.keys(Const.Operate).find(k=>Const.Operate[k].Type == undoOp.operateType);\n                \n                let target;\n                switch(undoOp.operateType) {\n                    case Const.Operate.VideoRemove.Type:\n                        target = this.editlist.timelines.find(e => undoOp.targetId == e.id);\n                        target.active = true;\n                        this.seekPlayer(target.offset_sec);\n                        break;\n                }\n\n                if(this.editlist.time_sec > this.editlist.total_sec) {\n                    this.seekPlayer(this.editlist.total_sec);\n                }\n\n                this.player.pause = true;\n                this.$refs.overlayEditor.blur();\n                if(this.activeItem) {\n                    this.activeItem.active = false;\n                }\n\n                this.reloadPlayer();\n                \n                this.$mResToast.success(\"撤销 \" + Const.Operate[undoOpKey].Name);\n                window.console.log(\"undo: \", restoreOp);\n\n                // 视频撤完了，让用户导入\n                if(!this.editlist.timelines.length) {\n                    this.pickVideo();\n                }\n            } else {\n                this.$mResToast.success(\"没有可撤销的内容了！\");\n            }\n        },\n        // overlay跟着封面旋转\n        rotatePosterOverlay(timeline, rotate) {\n            // overlay需要①绕右上角进行旋转，之后②再绕矩形自己的中心逆旋转，③然后减掉视频宽度\n            let width = this.editlist.getRotatedWidth(timeline);\n            // ①\n            let ox = width;\n            let oy = 0;\n\n            this.editlist.poster.overlay.forEach(overlay => {\n\n                let box = Math.hypot(overlay.w, overlay.h);\n                let x = overlay.x - (overlay.w - box)/2;\n                let y = overlay.y - (overlay.h - box)/2;\n\n                let rotatedLT = rotateVector(ox, oy, x, y, rotate);\n                let rotatedRB = rotateVector(ox, oy, x + overlay.w, y + overlay.h, rotate);\n                // ②\n                ox = (rotatedLT.x + rotatedRB.x) / 2;\n                oy = (rotatedLT.y + rotatedRB.y) / 2;\n                rotatedLT = rotateVector(ox, oy, rotatedLT.x, rotatedLT.y, -rotate);\n                // ③\n                rotatedLT.x -= width;\n\n                overlay.x = rotatedLT.x + (overlay.w - box)/2;\n                overlay.y = rotatedLT.y + (overlay.h - box)/2;\n                overlay.rotate += rotate;\n                overlay.rotate %= 360;\n            });\n        }\n    },\n    async mounted() {\n        if (!window.UGCApp) {\n            // this.$Message.error(\"此功能需要UGC客户端支持\")\n            // this.$router.back();\n            console.log(\"no ugcapp\");\n            return;\n        }\n\n        // let rect = this.$refs.mainVideoArea.getClientRects()[0];\n        // this.$refs.mainVideoArea.rect(rect);\n\n        // document.addEventListener(\"backbutton\", this.onBack, false);\n\n        let config = await this.editlist.getConfig();\n\n        // if(this.isIOS()){\n        //     config = {input:null}\n        // }\n\n        if(config.input) {\n            // 导入客户调用SDK时传入的视频\n            await this.importFileSelect([{\n                uri: config.input\n            }], true);\n        } else {\n            this.pickVideo(i => {\n                console.log(i);\n                if (i.status == \"progress\") {\n                    let progress = i.index;\n                    this.$data.importProgress = progress;\n                } else {\n                    this.$data.importProgress = -1;\n                }\n            });\n        }\n\n        this.editlist.createOperateHistory(Const.Operate.Init.Type);\n    },\n    async beforeDestroy() {\n        // document.removeEventListener(\"backbutton\", this.onBack, false);\n    }\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Clip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Clip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Clip.vue?vue&type=template&id=3e2e709d&scoped=true&\"\nimport script from \"./Clip.vue?vue&type=script&lang=js&\"\nexport * from \"./Clip.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Clip.vue?vue&type=style&index=0&id=3e2e709d&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e2e709d\",\n  null\n  \n)\n\nexport default component.exports","<template>\n<div id=\"app\">\n    <Clip />\n</div>\n</template>\n\n<script>\nimport Clip from './views/Clip.vue'\n\nexport default {\n    name: 'app',\n    components: {\n        Clip\n    },\n}\n</script>\n\n<style>\nhtml {\n    width: 100%;\n    height: 100%;\n    background: transparent !important;\n}\n\nbody {\n    width: 100%;\n    height: 100%;\n    background: transparent !important;\n    \n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    -webkit-touch-callout: none;\n}\n\n#app {\n    width: 100%;\n    height: 100%;\n    background: transparent;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=42acc8c6&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport App from './App.vue'\nimport MuseUI from 'muse-ui';\nimport 'muse-ui/dist/muse-ui.css';\nimport '@/assets/icon/material-icons.css';\nimport cordovaModel from \"./model/CordovaModel\";\nimport 'vue-toast-response/maybe/vue-toast-response.css';\nimport VTS from 'vue-toast-response';\n\nVue.use(VTS);\nVue.use(MuseUI);\n\nVue.config.productionTip = false\n\n\nVue.prototype.isCordova = cordovaModel.isCordova;\nVue.prototype.isIOS = cordovaModel.isIOS;\nVue.prototype.isAndroid = cordovaModel.isAndroid;\nVue.prototype.isMobile = ()=>{\n    return cordovaModel.isIOS() || cordovaModel.isAndroid()\n};\nVue.prototype.isPortrait = cordovaModel.isPortrait;\n\n(async ()=>{\n\n    await cordovaModel.init();\n    \n    new Vue({\n        render: h => h(App),\n    }).$mount('#app')\n\n})()\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingRender.vue?vue&type=style&index=0&id=37a257de&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingRender.vue?vue&type=style&index=0&id=37a257de&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipImg.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipImg.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Filter.vue?vue&type=style&index=0&id=6272fdad&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Filter.vue?vue&type=style&index=0&id=6272fdad&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTimeline.vue?vue&type=style&index=0&id=532e26c0&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTimeline.vue?vue&type=style&index=0&id=532e26c0&lang=less&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioBase.vue?vue&type=style&index=0&id=7da5b59a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioBase.vue?vue&type=style&index=0&id=7da5b59a&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioEffect.vue?vue&type=style&index=0&id=28f2cb3a&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioEffect.vue?vue&type=style&index=0&id=28f2cb3a&lang=less&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crop.vue?vue&type=style&index=0&id=21603386&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Crop.vue?vue&type=style&index=0&id=21603386&lang=less&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioEffect.vue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioEffect.vue?vue&type=style&index=1&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exporter.vue?vue&type=style&index=0&id=4e0ded93&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Exporter.vue?vue&type=style&index=0&id=4e0ded93&lang=less&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingMaker.vue?vue&type=style&index=0&id=613b9c1a&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EndingMaker.vue?vue&type=style&index=0&id=613b9c1a&lang=less&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMakerTop.vue?vue&type=style&index=0&id=7f26cbd2&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMakerTop.vue?vue&type=style&index=0&id=7f26cbd2&lang=less&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sort.vue?vue&type=style&index=1&id=c791ff4c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sort.vue?vue&type=style&index=1&id=c791ff4c&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Face.vue?vue&type=style&index=0&id=b33073c6&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Face.vue?vue&type=style&index=0&id=b33073c6&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipImg.vue?vue&type=style&index=1&id=4b248636&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipImg.vue?vue&type=style&index=1&id=4b248636&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipBtn.vue?vue&type=style&index=0&id=4fb247b2&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipBtn.vue?vue&type=style&index=0&id=4fb247b2&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextOverlay.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextOverlay.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTop.vue?vue&type=style&index=0&id=548f090f&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClipTop.vue?vue&type=style&index=0&id=548f090f&lang=less&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMaker.vue?vue&type=style&index=0&id=2955d106&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterMaker.vue?vue&type=style&index=0&id=2955d106&lang=less&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AspectRatio.vue?vue&type=style&index=0&id=6c3aa489&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AspectRatio.vue?vue&type=style&index=0&id=6c3aa489&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Importer.vue?vue&type=style&index=0&id=3cfa8a02&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Importer.vue?vue&type=style&index=0&id=3cfa8a02&scoped=true&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineOverlayItem.vue?vue&type=style&index=0&id=ec466ad2&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelineOverlayItem.vue?vue&type=style&index=0&id=ec466ad2&lang=less&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sort.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Sort.vue?vue&type=style&index=0&lang=css&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NativeVideo.vue?vue&type=style&index=0&id=dee4937c&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./NativeVideo.vue?vue&type=style&index=0&id=dee4937c&scoped=true&lang=css&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoBase.vue?vue&type=style&index=0&id=4f58663e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoBase.vue?vue&type=style&index=0&id=4f58663e&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextRender.vue?vue&type=style&index=0&id=765fb19e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextRender.vue?vue&type=style&index=0&id=765fb19e&scoped=true&lang=css&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterToolTab.vue?vue&type=style&index=0&id=2dc27ce7&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PosterToolTab.vue?vue&type=style&index=0&id=2dc27ce7&scoped=true&lang=css&\""],"sourceRoot":""}